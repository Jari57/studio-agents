import{r as e,j as t}from"./react-vendor-03wl4UEb.js";import{A as n,B as i}from"./constants-hRVrvfLk.js";import{a as r}from"./firebase-DgNc3hGb.js";import{S as a,aP as o,Q as s,P as l,n as d}from"./icons-DT0eBrXO.js";import{w as c}from"./firebase-C6j5ZoHL.js";import"./vendor-DPgDnBIk.js";const p={ghost:{prompt:(e,t)=>`Write a short 4-line verse for a song about: "${e}". Style: ${t}. Make it catchy and memorable. Just the lyrics, no explanation.`,systemInstruction:"You are a hit songwriter. Write only the lyrics, nothing else."},beat:{prompt:(e,t)=>`Describe a beat concept for a song about: "${e}". Style: ${t}. Include BPM, key, drum pattern description, and vibe in 3-4 sentences. Be specific and creative.`,systemInstruction:"You are a professional music producer. Describe the beat concept clearly and concisely."},album:{prompt:(e,t)=>`Describe album cover art for a song about: "${e}". Style: ${t}. Include visual elements, color palette, mood, and composition in 3-4 sentences.`,systemInstruction:"You are a professional visual artist and art director. Describe the cover art vividly."},"video-creator":{prompt:(e,t)=>`Describe a 30-second music video concept for a song about: "${e}". Style: ${t}. Include 2-3 scenes with camera angles, lighting, and visual effects.`,systemInstruction:"You are a music video director. Describe the visual concept cinematically."}},g=["Midnight in the city","Coming back stronger","Neon lights and broken hearts","Summer vibes on the rooftop"];function h(){const[h,u]=e.useState("ghost"),[x,m]=e.useState(""),[y,f]=e.useState("Modern Hip-Hop"),[b,v]=e.useState(!1),[j,k]=e.useState(null),[S,w]=e.useState(!1),[z,I]=e.useState(!1),{displayed:B,isTyping:T}=function(t,n=20,i=!1){const[r,a]=e.useState(""),[o,s]=e.useState(!1);return e.useEffect(()=>{if(!i||!t)return void a("");s(!0),a("");let e=0;const r=setInterval(()=>{e<t.length?(a(t.slice(0,e+1)),e++):(s(!1),clearInterval(r))},n);return()=>clearInterval(r)},[t,i,n]),{displayed:r,isTyping:o}}(j,15,z),W=e.useRef(null),C=n.filter(e=>"free"===e.tier),R=C.find(e=>e.id===h)||C[0],D="function"==typeof R?.icon?R.icon:a;e.useEffect(()=>{if(j&&!b){const e=setTimeout(()=>I(!0),100);return()=>clearTimeout(e)}I(!1)},[j,b]);const $=async()=>{if(!x.trim())return;w(!0),v(!0),k(null),I(!1);let e="";try{r?.currentUser&&(e=await c(r.currentUser))}catch(n){}const t=p[h]||p.ghost;try{const n={"Content-Type":"application/json"};e&&(n.Authorization=`Bearer ${e}`);const r=await fetch(`${i}/api/generate`,{method:"POST",headers:n,body:JSON.stringify({prompt:t.prompt(x,y),systemInstruction:t.systemInstruction,model:"gemini-2.0-flash"})});if(!r.ok)throw new Error(`API returned ${r.status}`);const a=await r.json();if(!a.output)throw new Error("No output in response");k(a.output.trim())}catch(a){const e={ghost:"Under the neon glow we ride tonight\nChasing dreams through the city lights\nEvery beat dropping hits me right\nWe own the dark, we own the night",beat:"140 BPM, Key of C minor. Heavy 808 kick with a rolling hi-hat pattern. Dark synth pad layered with a chopped vocal sample. The vibe is moody and cinematic â€” perfect for a late-night drive.",album:"A shadowy figure standing in the rain under a single streetlight. Deep purple and cyan color palette with film grain texture. The composition is centered with negative space above, creating a sense of isolation and determination.","video-creator":"Scene 1: Slow-motion tracking shot through a rain-soaked alley, neon signs reflecting in puddles. Scene 2: Close-up on hands playing piano keys, intercut with city skyline at dusk. Scene 3: Drone pull-back revealing the full cityscape as the chorus hits."};k(e[h]||e.ghost)}finally{v(!1)}};return t.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(168, 85, 247, 0.05) 0%, rgba(236, 72, 153, 0.05) 100%)",borderRadius:"24px",padding:"32px 24px",border:"1px solid rgba(168, 85, 247, 0.2)",maxWidth:"800px",margin:"0 auto",boxSizing:"border-box",overflow:"hidden"},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[t.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"6px 14px",background:"rgba(168, 85, 247, 0.15)",borderRadius:"20px",marginBottom:"12px"},children:[t.jsx(a,{size:14,color:"#a855f7"}),t.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#a855f7",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Single Agent Demo"})]}),t.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"8px"},children:["Try ",t.jsx("span",{style:{color:"#a855f7"},children:"One Agent"})]}),t.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Pick an agent, enter an idea, and see what it creates."})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"12px",flexWrap:"wrap"},children:[t.jsxs("div",{style:{flex:1,minWidth:"180px"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"4px",textTransform:"uppercase",fontWeight:"600"},children:"Agent"}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("select",{value:h,onChange:e=>{u(e.target.value),k(null),w(!1)},style:{width:"100%",padding:"10px 32px 10px 12px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.9rem",outline:"none",cursor:"pointer",appearance:"none"},children:C.map(e=>t.jsx("option",{value:e.id,style:{background:"#1a1a1a"},children:e.name},e.id))}),t.jsx(o,{size:16,style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:"var(--text-secondary)"}})]})]}),t.jsxs("div",{style:{flex:1,minWidth:"180px"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"4px",textTransform:"uppercase",fontWeight:"600"},children:"Style"}),t.jsx("select",{value:y,onChange:e=>f(e.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.9rem",outline:"none",cursor:"pointer"},children:["Modern Hip-Hop","90s Boom Bap","Trap","R&B / Soul","Pop","Rock","Electronic","Cinematic","Jazz","Lo-Fi"].map(e=>t.jsx("option",{value:e,style:{background:"#1a1a1a"},children:e},e))})]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"},children:[t.jsx("input",{ref:W,type:"text",value:x,onChange:e=>m(e.target.value),onKeyDown:e=>"Enter"===e.key&&$(),placeholder:"Describe your song idea...",style:{flex:1,padding:"14px 18px",borderRadius:"12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"1rem",outline:"none",transition:"border-color 0.2s"}}),t.jsx("button",{onClick:$,disabled:b||!x.trim(),style:{padding:"14px 24px",borderRadius:"12px",background:b?"rgba(168, 85, 247, 0.3)":"linear-gradient(135deg, #a855f7, #ec4899)",border:"none",color:"white",fontWeight:"600",cursor:b||!x.trim()?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s",opacity:x.trim()?1:.5},children:b?t.jsxs(t.Fragment,{children:[t.jsx(s,{size:18,className:"spin"}),"Creating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(l,{size:18}),"Generate"]})})]}),t.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",marginBottom:"20px"},children:[t.jsx(d,{size:14,style:{color:"var(--text-secondary)",marginTop:"3px"}}),g.map((e,n)=>t.jsx("button",{onClick:()=>{m(e),W.current?.focus()},style:{padding:"4px 10px",borderRadius:"16px",background:"rgba(168, 85, 247, 0.1)",border:"1px solid rgba(168, 85, 247, 0.25)",color:"rgba(255,255,255,0.7)",fontSize:"0.75rem",cursor:"pointer",transition:"all 0.2s"},children:e},n))]}),t.jsxs("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"16px",padding:"20px",border:`1px solid rgba(168, 85, 247, ${S?"0.3":"0.1"})`,minHeight:"120px",position:"relative",overflow:"hidden"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[t.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"10px",background:"rgba(168, 85, 247, 0.2)",border:"1px solid rgba(168, 85, 247, 0.4)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(D,{size:16,color:"#a855f7"})}),t.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"600",color:"#a855f7",textTransform:"uppercase",letterSpacing:"0.05em"},children:R?.name||"Agent"}),(b||T)&&t.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#a855f7",marginLeft:"auto",animation:"pulse 1s infinite"}})]}),b?t.jsx("div",{style:{display:"flex",gap:"4px",alignItems:"center",padding:"20px 0"},children:t.jsxs("div",{className:"loading-dots",children:[t.jsx("span",{style:{background:"#a855f7"}}),t.jsx("span",{style:{background:"#a855f7"}}),t.jsx("span",{style:{background:"#a855f7"}})]})}):j?t.jsxs("p",{style:{fontSize:"0.95rem",lineHeight:"1.6",color:"rgba(255,255,255,0.9)",margin:0,whiteSpace:"pre-wrap"},children:[B,T&&t.jsx("span",{style:{animation:"blink 0.8s infinite",color:"#a855f7"},children:"|"})]}):t.jsx("p",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.3)",fontStyle:"italic",margin:0,textAlign:"center",padding:"20px 0"},children:S?"Processing...":"Select an agent, enter an idea, and hit Generate"})]}),t.jsx("style",{children:"\n        .loading-dots {\n          display: flex;\n          gap: 4px;\n        }\n        .loading-dots span {\n          width: 6px;\n          height: 6px;\n          border-radius: 50%;\n          animation: bounce 1.4s infinite ease-in-out both;\n        }\n        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }\n        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }\n        .loading-dots span:nth-child(3) { animation-delay: 0s; }\n        @keyframes bounce {\n          0%, 80%, 100% { transform: scale(0); opacity: 0.5; }\n          40% { transform: scale(1); opacity: 1; }\n        }\n        @keyframes pulse {\n          0%, 100% { opacity: 1; }\n          50% { opacity: 0.4; }\n        }\n        @keyframes blink {\n          0%, 50% { opacity: 1; }\n          51%, 100% { opacity: 0; }\n        }\n        .spin {\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n      "})]})}export{h as default};
