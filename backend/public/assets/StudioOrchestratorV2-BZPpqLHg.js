import{r as e,j as i,z as t}from"./react-vendor-B4kYgmlj.js";import{A as r,B as o}from"./index-BrmoB-cq.js";import{ai as n,aA as a,J as s,X as d,d as l,M as c,N as p,V as x,Z as g,aB as u,Y as b,aC as y,S as m,U as h,a4 as f,aD as v,e as j,aE as k,a5 as w,a7 as S,b as z,ak as C,a6 as R}from"./icons-BnW7wIaX.js";import"./vendor-BjQYSgJ0.js";import"./firebase-CTkKqTCm.js";function I({isOpen:t,onClose:r,mediaUrl:o,mediaType:l,title:c="Asset Preview",textContent:p=null}){const[x,g]=e.useState(!1);if(!t||!o&&!p)return null;return i.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.98)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(12px)",animation:"fadeIn 0.2s ease-out"},onClick:r,children:[i.jsxs("div",{style:{position:"relative",maxWidth:"90vw",maxHeight:"90vh",display:"flex",flexDirection:"column",background:"rgba(20, 20, 20, 0.8)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",overflow:"hidden",backdropFilter:"blur(16px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},onClick:e=>e.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",background:"rgba(0, 0, 0, 0.3)"},children:[i.jsxs("h2",{style:{margin:0,fontSize:"1rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",textTransform:"uppercase",letterSpacing:"0.05em"},children:[c," Preview"]}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:["text"===l&&p&&i.jsxs("button",{onClick:async()=>{p&&(await navigator.clipboard.writeText(p),g(!0),setTimeout(()=>g(!1),2e3))},style:{background:x?"rgba(34, 197, 94, 0.2)":"rgba(139, 92, 246, 0.2)",border:"1px solid "+(x?"rgba(34, 197, 94, 0.4)":"rgba(139, 92, 246, 0.4)"),color:x?"#22c55e":"#8b5cf6",padding:"8px 12px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.8rem",fontWeight:"600",transition:"all 0.2s"},children:[x?i.jsx(n,{size:14}):i.jsx(a,{size:14}),x?"Copied!":"Copy"]}),i.jsxs("button",{onClick:()=>{if("image"===l){const e=document.createElement("a");e.href=o.startsWith("data:")?o:`data:image/png;base64,${o}`,e.download=`${c}-${Date.now()}.png`,e.click()}else if("video"===l){const e=document.createElement("a");e.href=o,e.download=`${c}-${Date.now()}.mp4`,e.click()}else if("audio"===l){const e=document.createElement("a");e.href=o,e.download=`${c}-${Date.now()}.mp3`,e.click()}else if("text"===l&&p){const e=new Blob([p],{type:"text/plain"}),i=document.createElement("a");i.href=URL.createObjectURL(e),i.download=`${c}-${Date.now()}.txt`,i.click(),URL.revokeObjectURL(i.href)}},style:{background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.4)",color:"#3b82f6",padding:"8px 12px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.8rem",fontWeight:"600",transition:"all 0.2s"},onMouseOver:e=>{e.target.style.background="rgba(59, 130, 246, 0.3)",e.target.style.borderColor="rgba(59, 130, 246, 0.6)"},onMouseOut:e=>{e.target.style.background="rgba(59, 130, 246, 0.2)",e.target.style.borderColor="rgba(59, 130, 246, 0.4)"},children:[i.jsx(s,{size:14}),"Download"]}),i.jsx("button",{onClick:r,style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"rgba(255, 255, 255, 0.7)",padding:"8px 12px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",fontSize:"0.8rem",fontWeight:"600",transition:"all 0.2s"},onMouseOver:e=>{e.target.style.background="rgba(255, 255, 255, 0.15)",e.target.style.color="rgba(255, 255, 255, 0.9)"},onMouseOut:e=>{e.target.style.background="rgba(255, 255, 255, 0.1)",e.target.style.color="rgba(255, 255, 255, 0.7)"},children:i.jsx(d,{size:16})})]})]}),i.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",overflow:"auto",minHeight:"400px"},children:["image"===l&&i.jsx("img",{src:o.startsWith("data:")?o:`data:image/png;base64,${o}`,alt:c,style:{maxWidth:"100%",maxHeight:"100%",borderRadius:"8px",objectFit:"contain",animation:"zoomIn 0.3s ease-out"}}),"video"===l&&i.jsx("video",{src:o,controls:!0,autoPlay:!0,style:{maxWidth:"100%",maxHeight:"100%",borderRadius:"8px",animation:"zoomIn 0.3s ease-out"}}),"audio"===l&&i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[i.jsx("audio",{src:o,controls:!0,autoPlay:!0,style:{width:"100%",maxWidth:"500px"}}),i.jsx("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.9rem",textAlign:"center"},children:"Audio player ready"})]}),"text"===l&&p&&i.jsx("div",{style:{width:"100%",maxWidth:"700px",maxHeight:"70vh",overflow:"auto",padding:"24px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",animation:"zoomIn 0.3s ease-out"},children:i.jsx("pre",{style:{margin:0,fontFamily:"inherit",fontSize:"1rem",lineHeight:"1.8",color:"rgba(255, 255, 255, 0.9)",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:p})})]}),i.jsx("div",{style:{padding:"12px 20px",borderTop:"1px solid rgba(255, 255, 255, 0.05)",background:"rgba(0, 0, 0, 0.3)",fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.5)",textAlign:"center"},children:"Click outside or press Escape to close â€¢ Tip: Right-click to save"})]}),i.jsx("style",{children:"\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n          }\n          to {\n            opacity: 1;\n          }\n        }\n        @keyframes zoomIn {\n          from {\n            opacity: 0;\n            transform: scale(0.95);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n      "})]})}function $({slot:o,agentId:n,icon:d,title:l,subtitle:g,color:u,output:b,isLoading:m,mediaType:h=null,mediaUrl:v=null,onGenerateMedia:j=null,isGeneratingMedia:$=!1,onRegenerate:W=null,onEdit:B=null,onDelete:T=null,onSaveToProject:P=null,onDownload:D=null,onSpeak:U=null,isSpeaking:F=!1,onMaximize:A=null}){const[O,M]=e.useState(!1),[L,E]=e.useState(!1),[V,G]=e.useState(b||""),[H,N]=e.useState(!1);e.useEffect(()=>{G(b||"")},[b]);const J=r.find(e=>e.id===n),Y="undefined"!=typeof window&&window.innerWidth<768;return i.jsxs("div",{className:"generator-card",style:{background:"rgba(0,0,0,0.4)",borderRadius:Y?"14px":"20px",border:`1px solid ${u}33`,overflow:"hidden",display:"flex",flexDirection:"column",position:"relative",transition:"all 0.3s ease",minHeight:Y?"200px":"380px"},children:[i.jsx("div",{style:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:`radial-gradient(circle at center, ${u}08 0%, transparent 50%)`,pointerEvents:"none"}}),i.jsxs("div",{style:{padding:Y?"10px 12px":"16px 20px",borderBottom:`1px solid ${u}22`,display:"flex",alignItems:"center",gap:Y?"8px":"12px",position:"relative",zIndex:1},children:[i.jsx("div",{style:{width:Y?"36px":"48px",height:Y?"36px":"48px",borderRadius:Y?"10px":"14px",background:`linear-gradient(135deg, ${u}30, ${u}10)`,border:`2px solid ${u}60`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 20px ${u}20`},children:i.jsx(d,{size:Y?18:24,color:u})}),i.jsxs("div",{style:{flex:1},children:[i.jsx("h3",{style:{margin:0,fontSize:Y?"0.9rem":"1.1rem",fontWeight:"700",color:"white"},children:l}),i.jsx("p",{style:{margin:"2px 0 0",fontSize:"0.75rem",color:"var(--text-secondary)"},children:J?.name||g})]}),(m||$)&&i.jsxs("div",{style:{padding:"6px 12px",borderRadius:"20px",background:`${u}20`,display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx(y,{size:14,color:u,className:"spin"}),i.jsx("span",{style:{fontSize:"0.7rem",color:u,fontWeight:"600"},children:m?"Generating...":"Creating Media..."})]})]}),i.jsxs("div",{style:{flex:1,padding:Y?"10px 12px":"16px 20px",display:"flex",flexDirection:"column",gap:Y?"8px":"12px",position:"relative",zIndex:1},children:[!m&&b?i.jsx(i.Fragment,{children:L?i.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},children:[i.jsx("textarea",{value:V,onChange:e=>G(e.target.value),style:{flex:1,padding:Y?"8px":"12px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:`1px solid ${u}40`,color:"white",fontSize:Y?"0.8rem":"0.9rem",lineHeight:"1.5",resize:"none",outline:"none",minHeight:"120px"},autoFocus:!0}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsx("button",{onClick:()=>E(!1),style:{flex:1,padding:"8px",borderRadius:"8px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer",fontSize:"0.8rem"},children:"Cancel"}),i.jsx("button",{onClick:()=>{B&&B(V),E(!1)},style:{flex:1,padding:"8px",borderRadius:"8px",background:u,border:"none",color:"white",cursor:"pointer",fontWeight:"600",fontSize:"0.8rem"},children:"Save"})]})]}):i.jsx("div",{onClick:()=>N(!H),style:{background:"rgba(0,0,0,0.3)",borderRadius:Y?"8px":"12px",padding:Y?"10px":"14px",flex:1,overflow:"auto",cursor:"pointer",maxHeight:H?Y?"150px":"200px":Y?"60px":"100px",transition:"max-height 0.3s ease"},children:i.jsx("p",{style:{fontSize:Y?"0.8rem":"0.9rem",lineHeight:Y?"1.4":"1.6",color:"rgba(255,255,255,0.9)",margin:0,whiteSpace:"pre-wrap"},children:b})})}):m?i.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"12px"},children:[i.jsxs("div",{className:"loading-dots",children:[i.jsx("span",{style:{background:u}}),i.jsx("span",{style:{background:u}}),i.jsx("span",{style:{background:u}})]}),i.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"AI is thinking..."})]}):i.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"8px",color:"var(--text-secondary)",textAlign:"center",padding:"20px"},children:[i.jsx(d,{size:32,style:{opacity:.3}}),i.jsx("span",{style:{fontSize:"0.85rem",opacity:.5},children:'Click "Generate All" to create content'})]}),b&&h&&i.jsx("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"12px",border:`1px solid ${u}22`},children:v?i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:i.jsxs("div",{onClick:()=>M(!0),style:{cursor:"pointer",position:"relative",borderRadius:"8px",overflow:"hidden"},children:["audio"===h&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"8px"},children:[i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:`linear-gradient(135deg, ${u}, ${u}88)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 12px ${u}44`},children:i.jsx(c,{size:18,color:"white"})}),i.jsx("audio",{src:v,controls:!0,style:{flex:1,height:"32px"}})]}),"image"===h&&i.jsxs("div",{style:{position:"relative"},children:[i.jsx("img",{src:v.startsWith("data:")?v:`data:image/png;base64,${v}`,alt:"Generated",style:{width:"100%",maxHeight:"120px",objectFit:"cover",borderRadius:"8px"}}),i.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.2s",borderRadius:"8px"},onMouseEnter:e=>e.currentTarget.style.opacity=1,onMouseLeave:e=>e.currentTarget.style.opacity=0,children:i.jsx(f,{size:24,color:"white"})})]}),"video"===h&&i.jsx("video",{src:v,style:{width:"100%",maxHeight:"120px",objectFit:"cover",borderRadius:"8px"},controls:!0})]})}):j?i.jsx("button",{onClick:j,disabled:$,style:{width:"100%",padding:"12px",borderRadius:"10px",background:$?"rgba(255,255,255,0.05)":`${u}15`,border:`1px dashed ${u}50`,color:u,fontSize:"0.85rem",fontWeight:"600",cursor:$?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s"},children:$?i.jsxs(i.Fragment,{children:[i.jsx(y,{size:16,className:"spin"}),"Creating ",h,"..."]}):i.jsxs(i.Fragment,{children:["audio"===h&&i.jsx(c,{size:16}),"image"===h&&i.jsx(p,{size:16}),"video"===h&&i.jsx(x,{size:16}),"Generate ",h.charAt(0).toUpperCase()+h.slice(1)]})}):null})]}),b&&!L&&i.jsxs("div",{style:{padding:Y?"8px 12px 10px":"12px 20px 16px",borderTop:"1px solid rgba(255,255,255,0.05)",display:"flex",gap:Y?"4px":"8px",flexWrap:"wrap",position:"relative",zIndex:1},children:[i.jsxs("button",{onClick:U,title:F?"Stop Speaking":"Text to Speech",style:{padding:Y?"6px 8px":"8px 12px",borderRadius:Y?"6px":"8px",background:F?`${u}30`:"rgba(255,255,255,0.05)",border:`1px solid ${F?u:"rgba(255,255,255,0.1)"}`,color:F?u:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:Y?"4px":"6px",fontSize:Y?"0.65rem":"0.75rem",fontWeight:"500",transition:"all 0.2s"},children:[F?i.jsx(k,{size:Y?12:14}):i.jsx(w,{size:Y?12:14}),F?"Stop":"TTS"]}),i.jsxs("button",{onClick:()=>{b&&(navigator.clipboard.writeText(b),t.success("Copied to clipboard"))},title:"Copy to Clipboard",style:{padding:Y?"6px 8px":"8px 12px",borderRadius:Y?"6px":"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:Y?"4px":"6px",fontSize:Y?"0.65rem":"0.75rem",fontWeight:"500"},children:[i.jsx(a,{size:14}),"Copy"]}),i.jsxs("button",{onClick:()=>E(!0),title:"Edit Output",style:{padding:Y?"6px 8px":"8px 12px",borderRadius:Y?"6px":"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:Y?"4px":"6px",fontSize:Y?"0.65rem":"0.75rem",fontWeight:"500"},children:[i.jsx(S,{size:Y?12:14}),"Edit"]}),(v||b&&!h)&&i.jsxs("button",{onClick:()=>M(!0),title:"Preview",style:{padding:Y?"6px 8px":"8px 12px",borderRadius:Y?"6px":"8px",background:`${u}20`,border:`1px solid ${u}40`,color:u,cursor:"pointer",display:"flex",alignItems:"center",gap:Y?"4px":"6px",fontSize:Y?"0.65rem":"0.75rem",fontWeight:"600"},children:[i.jsx(f,{size:Y?12:14}),"Preview"]}),W&&i.jsxs("button",{onClick:W,title:"Regenerate",style:{padding:Y?"6px 8px":"8px 12px",borderRadius:Y?"6px":"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:Y?"4px":"6px",fontSize:Y?"0.65rem":"0.75rem",fontWeight:"500"},children:[i.jsx(z,{size:Y?12:14}),"Redo"]}),i.jsx("div",{style:{flex:1}}),b&&A&&i.jsx("button",{onClick:A,title:"Expand to Fullscreen",style:{padding:Y?"6px 8px":"8px 12px",borderRadius:Y?"6px":"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:Y?"4px":"6px",fontSize:Y?"0.65rem":"0.75rem",fontWeight:"500"},children:i.jsx(C,{size:Y?12:14})}),(b||v)&&i.jsx("button",{onClick:D,title:"Download",style:{padding:Y?"6px 8px":"8px 12px",borderRadius:Y?"6px":"8px",background:"rgba(34, 197, 94, 0.15)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#22c55e",cursor:"pointer",display:"flex",alignItems:"center",gap:Y?"4px":"6px",fontSize:Y?"0.65rem":"0.75rem",fontWeight:"600"},children:i.jsx(s,{size:Y?12:14})}),T&&i.jsx("button",{onClick:T,title:"Delete",style:{padding:Y?"6px 8px":"8px 12px",borderRadius:Y?"6px":"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",gap:Y?"4px":"6px",fontSize:Y?"0.65rem":"0.75rem",fontWeight:"500"},children:i.jsx(R,{size:Y?12:14})})]}),i.jsx(I,{isOpen:O,onClose:()=>M(!1),mediaUrl:v,mediaType:h||"text",title:l,textContent:h?null:b}),i.jsx("style",{children:"\n        .generator-card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 10px 40px rgba(0,0,0,0.3);\n        }\n      "})]})}function W({isOpen:n,onClose:k,onCreateProject:w,authToken:S=null,existingProject:z=null,onUpdateCreations:C=null}){const[R,I]=e.useState(z?.name||""),[W,B]=e.useState("English"),[T,P]=e.useState("Modern Hip-Hop"),[D,U]=e.useState("Gemini 2.0 Flash"),[F,A]=e.useState({lyrics:"ghost",audio:"beat",visual:"album",video:"video-creator"}),[O,M]=e.useState(!1),[L,E]=e.useState({lyrics:null,audio:null,visual:null,video:null}),[V,G]=e.useState({audio:null,image:null,video:null}),[H,N]=e.useState({audio:!1,image:!1,video:!1}),[J,Y]=e.useState(null),[K,q]=e.useState(""),[Z,Q]=e.useState(!1),[X,_]=e.useState(!1),[ee,ie]=e.useState("singer"),[te,re]=e.useState(!1),[oe,ne]=e.useState(null),[ae,se]=e.useState(!1),[de,le]=e.useState(null),[ce,pe]=e.useState(!1),[xe,ge]=e.useState(null),[ue,be]=e.useState(!1);e.useRef(null);const ye=e.useRef(null),me=[{key:"lyrics",title:"Lyrics & Hook",subtitle:"Song writing",icon:l,color:"#8b5cf6",mediaType:null},{key:"audio",title:"Beat & Audio",subtitle:"Music production",icon:c,color:"#06b6d4",mediaType:"audio"},{key:"visual",title:"Cover Art",subtitle:"Visual design",icon:p,color:"#ec4899",mediaType:"image"},{key:"video",title:"Music Video",subtitle:"Video creation",icon:x,color:"#f59e0b",mediaType:"video"}],he=(e,i)=>{if(J===i)return window.speechSynthesis.cancel(),void Y(null);window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(e);t.rate=.9,t.onend=()=>Y(null),t.onerror=()=>Y(null),window.speechSynthesis.speak(t),Y(i)},fe=async()=>{const e={"Content-Type":"application/json"};return S&&(e.Authorization=`Bearer ${S}`),e},ve=async()=>{if(!R.trim())return void t.error("Please enter a song idea");const e=Object.entries(F).filter(([e,i])=>i);if(0===e.length)return void t.error("Please select at least one agent");M(!0);const i={lyrics:null,audio:null,visual:null,video:null};try{const a=await fe();for(const[t,s]of e){const e=r.find(e=>e.id===s);if(!e)continue;const d=me.find(e=>e.key===t),l=`You are ${e.name}, a professional ${e.role}. \n        Create content for a ${T} song about: "${R}" in ${W}.\n        Be creative, professional, and match the genre's style.\n        ${"lyrics"===t?"Write a catchy hook and verse lyrics.":""}\n        ${"audio"===t?"Describe a detailed beat/instrumental concept with BPM, key, and production elements.":""}\n        ${"visual"===t?"Describe a striking album cover or visual concept in detail for image generation.":""}\n        ${"video"===t?"Write a creative music video concept/storyboard with scene descriptions.":""}`;try{const e=await fetch(`${o}/api/generate`,{method:"POST",headers:a,body:JSON.stringify({prompt:`Create ${d.title.toLowerCase()} content for: "${R}"`,systemInstruction:l})});if(e.ok){const r=await e.json();i[t]=r.output}}catch(n){}}E(i),t.success("Generation complete!")}catch(n){t.error("Generation failed")}finally{M(!1)}},je=async e=>{if(!F[e])return;const i=r.find(i=>i.id===F[e]);if(i){E(i=>({...i,[e]:null}));try{const r=await fe(),n=me.find(i=>i.key===e),a=await fetch(`${o}/api/generate`,{method:"POST",headers:r,body:JSON.stringify({prompt:`Create fresh ${n.title.toLowerCase()} content for: "${R}"`,systemInstruction:`You are ${i.name}. Create NEW and DIFFERENT content for a ${T} song about: "${R}". Be creative and fresh.`})});if(a.ok){const i=await a.json();E(t=>({...t,[e]:i.output})),t.success(`${n.title} regenerated!`)}}catch(n){t.error("Regeneration failed")}}},ke=async()=>{if(L.audio){N(e=>({...e,audio:!0})),t.loading("Generating audio...",{id:"gen-audio"});try{const e=await fe(),i=await fetch(`${o}/api/generate-audio`,{method:"POST",headers:e,body:JSON.stringify({prompt:`${T} instrumental beat: ${L.audio.substring(0,200)}`,duration:8})});if(i.ok){const e=await i.json();e.audioUrl&&(G(i=>({...i,audio:e.audioUrl})),t.success("Audio created!",{id:"gen-audio"}))}}catch(e){t.error("Audio generation failed",{id:"gen-audio"})}finally{N(e=>({...e,audio:!1}))}}},we=async()=>{if(L.visual){N(e=>({...e,image:!0})),t.loading("Generating image...",{id:"gen-image"});try{const e=await fe(),i=await fetch(`${o}/api/generate-image`,{method:"POST",headers:e,body:JSON.stringify({prompt:`Album cover art: ${L.visual.substring(0,300)}`})});if(i.ok){const e=await i.json();e.imageData&&(G(i=>({...i,image:e.imageData})),t.success("Image created!",{id:"gen-image"}))}}catch(e){t.error("Image generation failed",{id:"gen-image"})}finally{N(e=>({...e,image:!1}))}}},Se=async()=>{if(L.video){N(e=>({...e,video:!0})),t.loading("Generating video (this takes ~2 min)...",{id:"gen-video"});try{const e=await fe(),i=await fetch(`${o}/api/generate-video`,{method:"POST",headers:e,body:JSON.stringify({prompt:`Music video: ${L.video.substring(0,200)}`})});if(i.ok){const e=await i.json();e.videoUrl&&(G(i=>({...i,video:e.videoUrl})),t.success("Video created!",{id:"gen-video"}))}}catch(e){t.error("Video generation failed",{id:"gen-video"})}finally{N(e=>({...e,video:!1}))}}},ze=async()=>{if(L.lyrics&&L.audio&&L.visual&&L.video){se(!0),t.loading("Creating final mix...",{id:"final-mix"});try{const e={id:`mix-${Date.now()}`,title:`${R} - Complete Mix`,description:`Full production of "${R}" with lyrics, beat, visual, and video`,created:(new Date).toISOString(),components:{lyrics:{content:L.lyrics,agent:r.find(e=>e.id===F.lyrics)?.name||"Ghostwriter",vocalUrl:V.lyricsVocal||null},audio:{content:L.audio,agent:r.find(e=>e.id===F.audio)?.name||"Beat Maker",audioUrl:V.audio||null},visual:{content:L.visual,agent:r.find(e=>e.id===F.visual)?.name||"Designer",imageUrl:V.image||null},video:{content:L.video,agent:r.find(e=>e.id===F.video)?.name||"Video Creator",videoUrl:V.video||null}},settings:{language:W,style:T,model:D}};le(e),t.success("Final mix ready!",{id:"final-mix"})}catch(e){t.error("Failed to create final mix",{id:"final-mix"})}finally{se(!1)}}else t.error("Generate all 4 outputs first")},Ce=e=>{const i=L[e],t=me.find(i=>i.key===e);if(i){const e=new Blob([i],{type:"text/plain"}),r=URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download=`${R||"output"}-${t.title}.txt`,o.click(),URL.revokeObjectURL(r)}const r={audio:V.audio,visual:V.image,video:V.video};if(r[e]){const i=document.createElement("a");i.href=r[e],i.download=`${R||"media"}-${e}`,i.click()}},Re=e=>{E(i=>({...i,[e]:null})),"audio"===e&&G(e=>({...e,audio:null})),"visual"===e&&G(e=>({...e,image:null})),"video"===e&&G(e=>({...e,video:null})),t.success("Deleted")},Ie=(e,i)=>{E(t=>({...t,[e]:i})),t.success("Saved")};return n?i.jsxs("div",{className:"studio-orchestrator-overlay animate-fadeIn",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"linear-gradient(180deg, rgba(0,0,0,0.98) 0%, rgba(10,10,20,0.98) 100%)",zIndex:2e3,display:"flex",flexDirection:"column",overflowY:"auto"},children:[i.jsxs("div",{style:{padding:"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.5)",backdropFilter:"blur(10px)",position:"sticky",top:0,zIndex:10},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.3)"},children:i.jsx(g,{size:26,color:"white"})}),i.jsxs("div",{children:[i.jsx("h2",{style:{margin:0,fontSize:"1.4rem",fontWeight:"700"},children:"Studio Orchestrator"}),i.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"var(--text-secondary)"},children:"4 AI Generators â€¢ One Unified Pipeline"})]})]}),i.jsx("button",{onClick:k,style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"12px",width:"44px",height:"44px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},children:i.jsx(d,{size:22,color:"white"})})]}),i.jsxs("div",{style:{flex:1,padding:"24px",maxWidth:"1200px",margin:"0 auto",width:"100%"},children:[i.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"20px",padding:"24px",marginBottom:"24px",border:"1px solid rgba(255,255,255,0.06)"},children:[i.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:[i.jsx("input",{type:"text",value:R,onChange:e=>I(e.target.value),onKeyDown:e=>"Enter"===e.key&&ve(),placeholder:"Describe your song idea, vibe, or concept...",style:{flex:1,padding:"18px 24px",borderRadius:"16px",background:"rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.15)",color:"white",fontSize:"1.1rem",outline:"none"}}),i.jsx("button",{onClick:X?()=>{ye.current&&ye.current.stop(),_(!1)}:()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;ye.current=new e,ye.current.continuous=!1,ye.current.interimResults=!0,ye.current.onresult=e=>{const i=Array.from(e.results).map(e=>e[0].transcript).join("");I(i)},ye.current.onend=()=>_(!1),ye.current.onerror=()=>_(!1),ye.current.start(),_(!0),t.success("Listening...")}else t.error("Speech recognition not supported")},style:{padding:"18px",borderRadius:"16px",background:X?"rgba(239, 68, 68, 0.2)":"rgba(255,255,255,0.05)",border:"1px solid "+(X?"#ef4444":"rgba(255,255,255,0.15)"),color:X?"#ef4444":"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:X?"Stop Listening":"Voice Input",children:X?i.jsx(u,{size:22}):i.jsx(b,{size:22})}),i.jsx("button",{onClick:ve,disabled:O||!R.trim(),style:{padding:"18px 32px",borderRadius:"16px",background:O?"rgba(139, 92, 246, 0.3)":"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",fontSize:"1.05rem",cursor:O||!R.trim()?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"10px",opacity:R.trim()?1:.5,boxShadow:O?"none":"0 4px 20px rgba(139, 92, 246, 0.4)"},children:O?i.jsxs(i.Fragment,{children:[i.jsx(y,{size:22,className:"spin"}),"Generating..."]}):i.jsxs(i.Fragment,{children:[i.jsx(m,{size:22}),"Generate All"]})})]}),i.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[i.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Try:"}),["Summer love in Brooklyn","Trap anthem about success","Lo-fi study beats","Emotional R&B ballad"].map((e,t)=>i.jsx("button",{onClick:()=>I(e),style:{padding:"8px 16px",borderRadius:"20px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",fontSize:"0.85rem",cursor:"pointer"},children:e},t))]})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px",marginBottom:"24px"},children:[{label:"Language",value:W,setter:B,options:["English","Spanish","French","German","Japanese","Korean","Portuguese"]},{label:"Genre",value:T,setter:P,options:["Modern Hip-Hop","90s Boom Bap","Trap","R&B / Soul","Pop","Rock","Electronic","Lo-Fi"]},{label:"AI Model",value:D,setter:U,options:["Gemini 2.0 Flash","Gemini 2.0 Pro (Exp)","Gemini 1.5 Pro"]}].map(e=>i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"6px",textTransform:"uppercase",fontWeight:"600",letterSpacing:"0.05em"},children:e.label}),i.jsx("select",{value:e.value,onChange:i=>e.setter(i.target.value),style:{width:"100%",padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:e.options.map(e=>i.jsx("option",{value:e,style:{background:"#1a1a1a"},children:e},e))})]},e.label))}),i.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:"20px",border:"1px solid rgba(255,255,255,0.06)",marginBottom:"24px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[i.jsx(h,{size:16,color:"var(--text-secondary)"}),i.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Assign Agents to Each Generator"})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px"},children:me.map(e=>i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.7rem",color:e.color,marginBottom:"6px",fontWeight:"500"},children:e.title}),i.jsxs("select",{value:F[e.key]||"",onChange:i=>A(t=>({...t,[e.key]:i.target.value||null})),style:{width:"100%",padding:"10px 12px",borderRadius:"10px",background:F[e.key]?"rgba(0,0,0,0.4)":"rgba(0,0,0,0.2)",border:"1px solid "+(F[e.key]?e.color+"60":"rgba(255,255,255,0.1)"),color:F[e.key]?"white":"var(--text-muted)",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:[i.jsx("option",{value:"",style:{background:"#1a1a1a"},children:"â€” None â€”"}),r.filter(e=>"free"===e.tier).map(e=>i.jsx("option",{value:e.id,style:{background:"#1a1a1a"},children:e.name},e.id))]})]},e.key))})]}),L.lyrics&&i.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(139, 92, 246, 0.05) 100%)",borderRadius:"16px",padding:"24px",border:"1px solid rgba(139, 92, 246, 0.4)",marginBottom:"24px"},children:[i.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:i.jsxs("div",{children:[i.jsx("h4",{style:{margin:"0 0 6px",fontSize:"1rem",fontWeight:"700",color:"#8b5cf6"},children:"ðŸŽ¤ Ghostwriter Vocal Performance"}),i.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Generate audio of the lyrics being recited or sung by different voice types"})]})}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[i.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[i.jsx("div",{style:{fontSize:"0.7rem",color:"#8b5cf6",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px"},children:"ðŸ“ Lyrics Text"}),i.jsx("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"12px",maxHeight:"150px",overflowY:"auto",fontSize:"0.85rem",lineHeight:"1.6",color:"rgba(255,255,255,0.85)",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:L.lyrics})]}),i.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(139, 92, 246, 0.3)",display:"flex",flexDirection:"column"},children:[i.jsx("div",{style:{fontSize:"0.7rem",color:"#8b5cf6",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px"},children:"ðŸŽµ Vocal Audio"}),V.lyricsVocal?i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",flex:1},children:[i.jsx("audio",{src:V.lyricsVocal,controls:!0,style:{width:"100%",height:"38px",borderRadius:"8px"}}),i.jsxs("button",{onClick:()=>{const e=document.createElement("div");e.innerHTML=`\n                          <div style="\n                            position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n                            background: rgba(0,0,0,0.9); z-index: 9999;\n                            display: flex; align-items: center; justify-content: center;\n                            padding: 20px;\n                          " onclick="if(event.target === this) this.remove();">\n                            <div style="\n                              background: rgba(0,0,0,0.8); border-radius: 20px;\n                              padding: 24px; max-width: 500px; width: 100%;\n                              border: 1px solid rgba(139, 92, 246, 0.4);\n                            " onclick="event.stopPropagation();">\n                              <div style="\n                                font-weight: 700; margin-bottom: 16px; color: #8b5cf6;\n                              ">\n                                ðŸŽ§ Vocal Audio Player\n                              </div>\n                              <audio \n                                src="${V.lyricsVocal}"\n                                controls\n                                autoplay\n                                style="width: 100%; height: 50px; border-radius: 10px;"\n                              />\n                              <div style="\n                                margin-top: 16px; font-size: 0.85rem;\n                                color: var(--text-secondary);\n                              ">\n                                Voice Style: <strong>${ee}</strong>\n                              </div>\n                            </div>\n                          </div>\n                        `,document.body.appendChild(e),e.onclick=i=>i.target===e&&e.remove()},style:{padding:"10px 16px",borderRadius:"8px",background:"rgba(139, 92, 246, 0.3)",border:"1px solid rgba(139, 92, 246, 0.5)",color:"#8b5cf6",fontWeight:"600",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[i.jsx(f,{size:14}),"Fullscreen"]})]}):i.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"80px",color:"var(--text-secondary)",fontSize:"0.85rem",textAlign:"center"},children:'No audio yet â€¢ Click "Create Vocal" below'})]})]}),i.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[i.jsxs("select",{value:ee,onChange:e=>ie(e.target.value),style:{padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(139, 92, 246, 0.5)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:[i.jsx("option",{value:"singer",children:"ðŸŽ¤ Singer"}),i.jsx("option",{value:"rapper",children:"ðŸŽ™ï¸ Rapper"}),i.jsx("option",{value:"narrator",children:"ðŸ“¢ Narrator"}),i.jsx("option",{value:"whisper",children:"ðŸ¤« Whisper"}),i.jsx("option",{value:"spoken",children:"ðŸ—£ï¸ Spoken Word"})]}),i.jsx("button",{onClick:async()=>{if(L.lyrics){re(!0),t.loading("Creating vocal performance...",{id:"gen-vocal"});try{const e=await fe(),i={singer:"smooth vocal delivery with musical phrasing, like a professional singer",rapper:"fast-paced rhythmic delivery with attitude and swagger, like a hip-hop artist",narrator:"clear spoken word delivery with good enunciation and presence",whisper:"intimate whispered vocal delivery",spoken:"natural conversational tone"},r=await fetch(`${o}/api/generate-audio`,{method:"POST",headers:e,body:JSON.stringify({prompt:`${i[ee]||"singing"}: "${L.lyrics.substring(0,300)}"`,voiceStyle:ee,duration:15,type:"vocal"})});if(r.ok){const e=await r.json();e.audioUrl&&(G(i=>({...i,lyricsVocal:e.audioUrl})),t.success(`${ee} vocal created!`,{id:"gen-vocal"}))}else t.error("Failed to generate vocal",{id:"gen-vocal"})}catch(e){t.error("Vocal generation failed",{id:"gen-vocal"})}finally{re(!1)}}else t.error("Generate lyrics first")},disabled:te,style:{padding:"10px 20px",borderRadius:"10px",background:te?"rgba(139, 92, 246, 0.3)":"rgba(139, 92, 246, 0.5)",border:"1px solid rgba(139, 92, 246, 0.6)",color:"#8b5cf6",fontWeight:"600",fontSize:"0.9rem",cursor:te?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:te?.7:1},children:te?i.jsxs(i.Fragment,{children:[i.jsx(y,{size:16,className:"spin"}),"Creating..."]}):i.jsxs(i.Fragment,{children:[i.jsx(v,{size:16}),"Create Vocal"]})}),i.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(L.lyrics),t.success("Lyrics copied!")},style:{padding:"10px 16px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",fontWeight:"500",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx(a,{size:14}),"Copy Lyrics"]}),V.lyricsVocal&&i.jsxs("button",{onClick:()=>{const e=document.createElement("a");e.href=V.lyricsVocal,e.download=`${R||"lyrics"}-${ee}.mp3`,e.click()},style:{padding:"10px 16px",borderRadius:"10px",background:"rgba(34, 197, 94, 0.15)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#22c55e",fontWeight:"600",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx(s,{size:14}),"Download Audio"]})]})]}),Object.values(L).every(Boolean)&&i.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(34, 197, 94, 0.05) 100%)",borderRadius:"16px",padding:"24px",border:"1px solid rgba(34, 197, 94, 0.4)",marginBottom:"24px"},children:[i.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:i.jsxs("div",{children:[i.jsx("h4",{style:{margin:"0 0 6px",fontSize:"1.1rem",fontWeight:"700",color:"#22c55e"},children:"âœ¨ Final Mix - Complete Product"}),i.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-secondary)"},children:"All 4 generators complete â€¢ Combine into a single integrated product"})]})}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"12px",marginBottom:"16px"},children:[i.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"10px",padding:"12px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.7rem",color:"#8b5cf6",fontWeight:"600",marginBottom:"4px"},children:"ðŸ“ Lyrics"}),i.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.8)"},children:[L.lyrics.length," chars"]})]}),i.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"10px",padding:"12px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.7rem",color:"#06b6d4",fontWeight:"600",marginBottom:"4px"},children:"ðŸŽµ Beat"}),i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.8)"},children:V.audio?"âœ“ Audio":"Ready"})]}),i.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"10px",padding:"12px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.7rem",color:"#ec4899",fontWeight:"600",marginBottom:"4px"},children:"ðŸ–¼ï¸ Visual"}),i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.8)"},children:V.image?"âœ“ Image":"Ready"})]}),i.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"10px",padding:"12px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.7rem",color:"#f59e0b",fontWeight:"600",marginBottom:"4px"},children:"ðŸŽ¬ Video"}),i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.8)"},children:V.video?"âœ“ Video":"Ready"})]})]}),de&&i.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"16px",border:"1px solid rgba(34, 197, 94, 0.3)",maxHeight:"300px",overflowY:"auto"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#22c55e",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px"},children:"ðŸ“¦ Final Product Preview"}),i.jsxs("div",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.8)",lineHeight:"1.6"},children:[i.jsx("strong",{children:de.title}),i.jsx("div",{style:{fontSize:"0.8rem",marginTop:"8px",color:"var(--text-secondary)"},children:de.description}),i.jsxs("div",{style:{fontSize:"0.75rem",marginTop:"12px",color:"var(--text-secondary)"},children:["Created: ",new Date(de.created).toLocaleString()]})]})]}),de&&V.audio&&L.video&&i.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(245, 158, 11, 0.05))",borderRadius:"12px",padding:"16px",marginBottom:"16px",border:"1px solid rgba(245, 158, 11, 0.4)",backdropFilter:"blur(8px)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsxs("div",{style:{fontSize:"0.7rem",color:"#f59e0b",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.08em",marginBottom:"6px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"ðŸŽ¬"})," Professional Music Video Sync"]}),i.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-secondary)",lineHeight:"1.4"},children:"Automatically sync beat audio with video storyboard for a professional music video"})]}),de?.beatCount&&i.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.2)",padding:"8px 12px",borderRadius:"8px",fontSize:"0.75rem",fontWeight:"600",color:"#f59e0b",whiteSpace:"nowrap",marginLeft:"12px"},children:["â™ª ",de.bpm||120," BPM â€¢ ",de.beatCount||0," beats"]})]}),xe&&i.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.4)",borderRadius:"10px",padding:"12px",marginBottom:"12px",overflow:"hidden"},children:[i.jsx("div",{style:{position:"relative",background:"rgba(0, 0, 0, 0.6)",borderRadius:"8px",overflow:"hidden"},children:i.jsx("video",{src:xe,controls:!0,controlsList:"nodownload",style:{width:"100%",maxHeight:"320px",borderRadius:"8px",display:"block"}})}),i.jsxs("div",{style:{marginTop:"12px",fontSize:"0.8rem",color:"#10b981",display:"flex",alignItems:"center",gap:"6px",fontWeight:"500"},children:[i.jsx("span",{children:"âœ“"}),"Music video synced with beat markers"]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"12px"},children:[i.jsx("button",{onClick:async()=>{if(V.audio&&L.video){pe(!0),t.loading("ðŸŽ¬ Syncing audio with video beats...",{id:"prof-video"});try{const e=await fe(),i=e.Authorization?"/api/generate-synced-video":"/api/generate-synced-video-test",r=await fetch(`${o}${i}`,{method:"POST",headers:{"Content-Type":"application/json",...e},body:JSON.stringify({audioUrl:V.audio,videoPrompt:L.video,songTitle:R||"Untitled",style:T||"cinematic",duration:30})}),n=await r.json();r.ok?n.videoUrl?(ge(n.videoUrl),de&&le(e=>({...e,musicVideoUrl:n.videoUrl,musicVideoGenerated:!0,bpm:n.bpm,beatCount:n.beats})),t.success(`ðŸŽ¬ Music video created! (${n.duration}s, ${n.bpm} BPM)`,{id:"prof-video"})):n.jobId&&t.success(`ðŸŽ¬ Video queued for processing (Job: ${n.jobId.substring(0,8)}...)`,{id:"prof-video"}):503===r.status?t.error("âŒ Video API not configured",{id:"prof-video"}):t.error(`âŒ ${n.error||"Video sync failed"}`,{id:"prof-video"})}catch(e){t.error("âŒ Music video generation failed",{id:"prof-video"})}finally{pe(!1)}}else t.error("Need beat audio and video concept to sync")},disabled:ce,style:{padding:"12px 16px",borderRadius:"10px",background:ce?"rgba(245, 158, 11, 0.2)":"rgba(245, 158, 11, 0.6)",border:"1px solid rgba(245, 158, 11, 0.7)",color:"#f59e0b",fontWeight:"600",fontSize:"0.9rem",cursor:ce?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease",opacity:ce?.6:1},title:xe?"Generate a new synced video":"Create beat-synced music video",children:ce?i.jsxs(i.Fragment,{children:[i.jsx(y,{size:16,className:"spin",style:{animation:"spin 1s linear infinite"}}),i.jsx("span",{children:"Syncing..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(x,{size:16}),i.jsx("span",{children:xe?"ðŸ”„ Regenerate":"ðŸŽ¬ Generate"})]})}),xe&&i.jsxs("button",{onClick:()=>{const e=document.createElement("a");e.href=xe,e.download=`${R||"music-video"}-synced.mp4`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},style:{padding:"12px 16px",borderRadius:"10px",background:"rgba(59, 130, 246, 0.3)",border:"1px solid rgba(59, 130, 246, 0.5)",color:"#3b82f6",fontWeight:"600",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},title:"Download music video",children:[i.jsx(s,{size:16}),i.jsx("span",{children:"Download"})]})]}),i.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",borderRadius:"8px",padding:"10px 12px",fontSize:"0.75rem",color:"var(--text-secondary)",display:"flex",gap:"8px",alignItems:"flex-start"},children:[i.jsx("span",{style:{color:"#f59e0b",fontWeight:"700",marginTop:"2px"},children:"â„¹"}),i.jsx("span",{children:"Beat sync analyzes your audio to find rhythm patterns and aligns video keyframes with beat markers. Result is a 30-second video to start."})]})]}),i.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[i.jsxs("button",{onClick:()=>be(!0),style:{padding:"12px 24px",borderRadius:"10px",background:"rgba(59, 130, 246, 0.3)",border:"1px solid rgba(59, 130, 246, 0.6)",color:"#3b82f6",fontWeight:"600",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(f,{size:16}),"Preview All"]}),i.jsx("button",{onClick:ze,disabled:ae,style:{padding:"12px 24px",borderRadius:"10px",background:ae?"rgba(34, 197, 94, 0.3)":"rgba(34, 197, 94, 0.5)",border:"1px solid rgba(34, 197, 94, 0.6)",color:"#22c55e",fontWeight:"600",fontSize:"0.9rem",cursor:ae?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:ae?i.jsxs(i.Fragment,{children:[i.jsx(y,{size:16,className:"spin"}),"Mixing..."]}):i.jsxs(i.Fragment,{children:[i.jsx(g,{size:16}),"Create Final Mix"]})}),de&&i.jsxs("button",{onClick:()=>{const e=JSON.stringify(de,null,2),i=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(i),o=document.createElement("a");o.href=r,o.download=`${R||"mix"}-final.json`,o.click(),URL.revokeObjectURL(r),t.success("Final mix exported!")},style:{padding:"12px 24px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontWeight:"600",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(s,{size:16}),"Export Mix"]})]})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px",marginBottom:"24px"},children:me.map(e=>i.jsx($,{slot:e.key,agentId:F[e.key],icon:e.icon,title:e.title,subtitle:e.subtitle,color:e.color,output:L[e.key],isLoading:O&&F[e.key],mediaType:e.mediaType,mediaUrl:"audio"===e.key?V.audio:"visual"===e.key?V.image:"video"===e.key?V.video:null,onGenerateMedia:"audio"===e.key?ke:"visual"===e.key?we:"video"===e.key?Se:null,isGeneratingMedia:"audio"===e.key?H.audio:"visual"===e.key?H.image:"video"===e.key&&H.video,onRegenerate:()=>je(e.key),onEdit:i=>Ie(e.key,i),onDelete:()=>Re(e.key),onDownload:()=>Ce(e.key),onSpeak:()=>he(L[e.key],e.key),isSpeaking:J===e.key,onMaximize:()=>ne(e.key)},e.key))})]}),oe&&me.find(e=>e.key===oe)&&i.jsx("div",{style:{position:"fixed",inset:0,background:"linear-gradient(180deg, rgba(0,0,0,0.98) 0%, rgba(10,10,20,0.98) 100%)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2500,padding:"20px",overflowY:"auto"},onClick:()=>ne(null),children:i.jsxs("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.1)",width:"100%",maxWidth:"800px",maxHeight:"90vh",overflow:"auto",display:"flex",flexDirection:"column"},onClick:e=>e.stopPropagation(),children:[i.jsxs("div",{style:{padding:"16px 24px",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,background:"rgba(0,0,0,0.5)",backdropFilter:"blur(10px)",zIndex:10},children:[i.jsx("h3",{style:{margin:0,fontSize:"1.2rem",fontWeight:"700"},children:me.find(e=>e.key===oe)?.title}),i.jsx("button",{onClick:()=>ne(null),style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"12px",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",transition:"all 0.2s"},children:i.jsx(d,{size:20})})]}),i.jsx("div",{style:{padding:"24px",flex:1,overflowY:"auto"},children:(()=>{const e=me.find(e=>e.key===oe);return i.jsx($,{slot:e.key,agentId:F[e.key],icon:e.icon,title:e.title,subtitle:e.subtitle,color:e.color,output:L[e.key],isLoading:O&&F[e.key],mediaType:e.mediaType,mediaUrl:"audio"===e.key?V.audio:"visual"===e.key?V.image:"video"===e.key?V.video:null,onGenerateMedia:"audio"===e.key?ke:"visual"===e.key?we:"video"===e.key?Se:null,isGeneratingMedia:"audio"===e.key?H.audio:"visual"===e.key?H.image:"video"===e.key&&H.video,onRegenerate:()=>je(e.key),onEdit:i=>Ie(e.key,i),onDelete:()=>Re(e.key),onDownload:()=>Ce(e.key),onSpeak:()=>he(L[e.key],e.key),isSpeaking:J===e.key},`max-${e.key}`)})()})]})}),Object.values(L).some(Boolean)&&i.jsxs("div",{style:{padding:"16px 24px",background:"rgba(0,0,0,0.8)",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",bottom:0,backdropFilter:"blur(10px)"},children:[i.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:[Object.values(L).filter(Boolean).length,"/4 generators complete â€¢",Object.values(V).filter(Boolean).length," media assets"]}),i.jsxs("div",{style:{display:"flex",gap:"12px"},children:[i.jsxs("button",{onClick:()=>{const e={project:R,timestamp:(new Date).toISOString(),outputs:L,settings:{language:W,style:T,model:D}},i=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(i),o=document.createElement("a");o.href=r,o.download=`${R||"project"}-export.json`,o.click(),URL.revokeObjectURL(r),t.success("Exported!")},style:{padding:"12px 20px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(s,{size:16}),"Export"]}),i.jsxs("button",{onClick:()=>Q(!0),style:{padding:"12px 28px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",fontSize:"1rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.4)"},children:[i.jsx(j,{size:18}),"Save to Project"]})]})]}),Z&&i.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3},onClick:()=>Q(!1),children:i.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:"24px",padding:"28px",maxWidth:"420px",width:"90%",border:"1px solid rgba(255,255,255,0.1)"},onClick:e=>e.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 20px",fontSize:"1.3rem",fontWeight:"700"},children:"Save to Project"}),i.jsx("input",{type:"text",value:K,onChange:e=>q(e.target.value),placeholder:R||"Project name...",style:{width:"100%",padding:"14px 18px",borderRadius:"12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"1rem",marginBottom:"20px",outline:"none"}}),i.jsxs("div",{style:{display:"flex",gap:"12px"},children:[i.jsx("button",{onClick:()=>Q(!1),style:{flex:1,padding:"14px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer",fontSize:"0.95rem"},children:"Cancel"}),i.jsx("button",{onClick:()=>{const e=[];me.forEach(i=>{if(L[i.key]){const t=r.find(e=>e.id===F[i.key]);e.push({id:String(Date.now()+Math.random()),title:i.title,type:i.key,agent:t?.name||i.subtitle,content:L[i.key],snippet:L[i.key].substring(0,100),audioUrl:"audio"===i.key?V.audio:null,imageUrl:"visual"===i.key&&V.image?`data:image/png;base64,${V.image}`:null,videoUrl:"video"===i.key?V.video:null,date:"Just now",color:`agent-${i.color.replace("#","")}`})}});const i={id:String(Date.now()),name:K||R||"Untitled Project",description:`Created with Studio Orchestrator: "${R}"`,category:"Music",language:W,style:T,model:D,date:(new Date).toLocaleDateString(),agents:Object.values(F).filter(Boolean).map(e=>{const i=r.find(i=>i.id===e);return i?.name||e}),assets:e,coverImage:V.image?`data:image/png;base64,${V.image}`:null};w?(w(i),t.success(`Saved "${i.name}" with ${e.length} assets!`)):t.error("Save failed - no handler"),Q(!1),k?.()},style:{flex:1,padding:"14px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",cursor:"pointer",fontSize:"0.95rem"},children:"Save Project"})]})]})}),ue&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},children:i.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(30, 41, 59, 0.95) 100%)",borderRadius:"20px",padding:"32px",border:"1px solid rgba(148, 163, 184, 0.2)",maxWidth:"900px",maxHeight:"90vh",overflowY:"auto",width:"100%",position:"relative"},children:[i.jsx("button",{onClick:()=>be(!1),style:{position:"absolute",top:"20px",right:"20px",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"8px",padding:"8px",cursor:"pointer",color:"white"},children:i.jsx(d,{size:20})}),i.jsx("h2",{style:{margin:"0 0 24px",fontSize:"1.5rem",fontWeight:"700",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"ðŸ‘ï¸ Preview All Creations"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"24px"},children:[i.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[i.jsx("h3",{style:{margin:"0 0 12px",color:"#a78bfa",fontSize:"0.95rem",fontWeight:"600"},children:"ðŸ“ Lyrics"}),i.jsx("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"12px",maxHeight:"200px",overflowY:"auto",fontSize:"0.9rem",lineHeight:"1.6",color:"rgba(255,255,255,0.9)",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:L.lyrics||"No lyrics generated yet"})]}),i.jsxs("div",{style:{background:"rgba(6, 182, 212, 0.1)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(6, 182, 212, 0.3)"},children:[i.jsx("h3",{style:{margin:"0 0 12px",color:"#22d3ee",fontSize:"0.95rem",fontWeight:"600"},children:"ðŸŽµ Beat Audio"}),V.audio?i.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"12px"},children:[i.jsx("audio",{controls:!0,style:{width:"100%",marginBottom:"8px"},src:V.audio}),i.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:"âœ“ Audio ready to play"})]}):i.jsx("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"16px",textAlign:"center",color:"rgba(255,255,255,0.5)",fontSize:"0.9rem"},children:"No audio generated yet"})]}),i.jsxs("div",{style:{background:"rgba(236, 72, 153, 0.1)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(236, 72, 153, 0.3)"},children:[i.jsx("h3",{style:{margin:"0 0 12px",color:"#f472b6",fontSize:"0.95rem",fontWeight:"600"},children:"ðŸ–¼ï¸ Cover Visual"}),V.image?i.jsx("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"8px",aspectRatio:"1"},children:i.jsx("img",{src:V.image,alt:"Cover Art",style:{width:"100%",height:"100%",borderRadius:"6px",objectFit:"cover"}})}):i.jsx("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"24px",textAlign:"center",color:"rgba(255,255,255,0.5)",fontSize:"0.9rem",aspectRatio:"1",display:"flex",alignItems:"center",justifyContent:"center"},children:"No image generated yet"})]}),i.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(245, 158, 11, 0.3)"},children:[i.jsx("h3",{style:{margin:"0 0 12px",color:"#fbbf24",fontSize:"0.95rem",fontWeight:"600"},children:"ðŸŽ¬ Video Storyboard"}),V.video?i.jsx("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"8px",aspectRatio:"16/9"},children:i.jsx("video",{src:V.video,controls:!0,style:{width:"100%",height:"100%",borderRadius:"6px",objectFit:"cover",backgroundColor:"#000"}})}):i.jsx("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"24px",textAlign:"center",color:"rgba(255,255,255,0.5)",fontSize:"0.9rem",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center"},children:"No video generated yet"})]})]}),i.jsx("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(148, 163, 184, 0.2)",marginBottom:"20px"},children:i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px",fontSize:"0.85rem"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"4px"},children:"Lyrics"}),i.jsxs("div",{style:{fontWeight:"600",color:"#a78bfa"},children:[L.lyrics.length," chars"]})]}),i.jsxs("div",{children:[i.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"4px"},children:"Audio"}),i.jsx("div",{style:{fontWeight:"600",color:"#22d3ee"},children:V.audio?"âœ“ Ready":"Pending"})]}),i.jsxs("div",{children:[i.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"4px"},children:"Visual"}),i.jsx("div",{style:{fontWeight:"600",color:"#f472b6"},children:V.image?"âœ“ Ready":"Pending"})]}),i.jsxs("div",{children:[i.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"4px"},children:"Video"}),i.jsx("div",{style:{fontWeight:"600",color:"#fbbf24"},children:V.video?"âœ“ Ready":"Pending"})]})]})}),i.jsxs("div",{style:{display:"flex",gap:"12px"},children:[i.jsx("button",{onClick:()=>be(!1),style:{flex:1,padding:"12px",borderRadius:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",fontWeight:"600",cursor:"pointer",fontSize:"0.95rem"},children:"Close"}),i.jsx("button",{onClick:()=>{be(!1),ze()},disabled:ae,style:{flex:1,padding:"12px",borderRadius:"10px",background:ae?"rgba(34, 197, 94, 0.3)":"rgba(34, 197, 94, 0.5)",border:"1px solid rgba(34, 197, 94, 0.6)",color:"#22c55e",fontWeight:"600",cursor:ae?"not-allowed":"pointer",fontSize:"0.95rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:ae?i.jsxs(i.Fragment,{children:[i.jsx(y,{size:16,className:"spin"}),"Creating Final Mix..."]}):i.jsxs(i.Fragment,{children:[i.jsx(g,{size:16}),"Create Final Mix"]})})]})]})}),i.jsx("style",{children:"\n        .loading-dots {\n          display: flex;\n          gap: 4px;\n        }\n        .loading-dots span {\n          width: 8px;\n          height: 8px;\n          border-radius: 50%;\n          animation: bounce 1.4s infinite ease-in-out both;\n        }\n        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }\n        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }\n        .loading-dots span:nth-child(3) { animation-delay: 0s; }\n        \n        @keyframes bounce {\n          0%, 80%, 100% { transform: scale(0); opacity: 0.5; }\n          40% { transform: scale(1); opacity: 1; }\n        }\n        \n        .spin {\n          animation: spin 1s linear infinite;\n        }\n        \n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        \n        .animate-fadeIn {\n          animation: fadeIn 0.3s ease;\n        }\n        \n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n      "})]}):null}export{W as default};
