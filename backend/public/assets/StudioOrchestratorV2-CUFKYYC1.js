const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PreviewModal-DSzUIxV3.js","assets/react-vendor-IsfVT3T0.js","assets/vendor-hWrmgIvi.js","assets/StudioView-BCyM_swU.js","assets/index-Bb-Lt2CA.js","assets/icons-BK3yKrzj.js","assets/index-D_3Ba8tz.css","assets/firebase-euf59gGu.js","assets/firebase-W-WeeevT.js"])))=>i.map(i=>d[i]);
import{A as e,B as i,_ as t}from"./index-Bb-Lt2CA.js";import{r,j as n,z as o,R as a}from"./react-vendor-IsfVT3T0.js";import{d as s,a as l}from"./firebase-euf59gGu.js";import{w as d,f as c,x as p,y as g,z as x,g as u,u as y,A as m,B as h}from"./firebase-W-WeeevT.js";import{f as b,a as f,b as v}from"./StudioView-BCyM_swU.js";import{Z as j,X as w,aG as k,_ as S,x as z,S as C,r as I,M as R,ae as $,U as D,Q as W,$ as B,w as A,a5 as T,av as U,d as P,p as V,a7 as O,J as E,ab as M,ac as N,N as L,a6 as H,am as F,aH as G,aa as J,ad as Y,h as _,aI as K,m as Z}from"./icons-BK3yKrzj.js";import"./vendor-hWrmgIvi.js";const q=a.lazy(()=>t(()=>import("./PreviewModal-DSzUIxV3.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Q=e=>{if(!e)return{intro:"",content:""};if("string"!=typeof e)return{intro:"",content:JSON.stringify(e,null,2)};const i=[/\[Verse/i,/\[Chorus/i,/\[Hook/i,/\[Bridge/i,/\[Intro/i,/\[Lyrics/i,/\[Style/i,/\[Hard/i,/\[Soft/i,/\[Fast/i,/\[Slow/i,/\(Verse/i,/\(Chorus/i,/Verse \d+:/i,/Chorus:/i,/Hook:/i,/^\s*Lyrics:\s*$/im,/Visual:/i,/Concept:/i,/Description:/i,/Beat Description:/i,/BPM:/i,/Storyboard:/i,/^\[[A-Z]/];let t=-1;for(const n of i){const i=e.match(n);i&&(-1===t||i.index<t)&&(t=i.index)}if(-1!==t)return{intro:e.substring(0,t).trim(),content:e.substring(t).trim()};const r=[/^Sure! Here (is|are) some (lyrics|content|a song).*:/i,/^Here (is|are) (the|your) (lyrics|song).*:/i,/^Okay, here's a concept.*:/i];for(const n of r)if(n.test(e)){const i=e.match(n);return{intro:i[0].trim(),content:e.substring(i[0].length).trim()}}if(e.includes("Summary:")){const i=e.split("Summary:");return{intro:i[0].trim(),content:("Summary: "+i[1]).trim()}}return{intro:"",content:e}},X=({height:e="14px",width:i="100%",marginBottom:t="8px",opacity:r=.1})=>n.jsx("div",{style:{height:e,width:i,marginBottom:t,borderRadius:"4px",background:`linear-gradient(90deg, rgba(255,255,255,${r}) 25%, rgba(255,255,255,${2*r}) 50%, rgba(255,255,255,${r}) 75%)`,backgroundSize:"200% 100%",animation:"shimmer 2s infinite linear"}});function ee({slot:i,agentId:t,icon:s,title:l,subtitle:d,color:c,output:p,isLoading:g,mediaType:x=null,mediaUrl:u=null,onGenerateMedia:y=null,isGeneratingMedia:m=!1,onRegenerate:h=null,onEdit:k=null,onDelete:S=null,onDownload:C=null,onSpeak:D=null,isSpeaking:A=!1,onMaximize:T=null,onUploadDna:U=null,onClearDna:P=null,dnaUrl:E=null,isUploadingDna:H=!1}){const[_,K]=r.useState(!1),[Z,ee]=r.useState(!1),[ie,te]=r.useState(p||""),[re,ne]=r.useState(!1),[oe,ae]=r.useState(!1),{intro:se,content:le}=Q(p),de=oe?se:le,[ce,pe]=r.useState("undefined"!=typeof window&&window.innerWidth<768);r.useEffect(()=>{const e=()=>pe(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const ge=r.useRef(p);r.useEffect(()=>{ge.current!==p&&(ge.current=p,te(p||""))},[p]);const xe=e.find(e=>e.id===t);return n.jsxs("div",{className:"generator-card-unified",style:{minHeight:ce?"auto":"380px",padding:0,touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[n.jsx("div",{style:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:`radial-gradient(circle at center, ${c}08 0%, transparent 50%)`,pointerEvents:"none"}}),n.jsxs("div",{className:"generator-card-header",style:{padding:ce?"12px":"1.25rem",display:"flex",alignItems:"center",gap:ce?"10px":"12px",position:"relative",zIndex:1},children:[n.jsx("div",{className:"generator-icon-box",children:a.createElement(s,{size:ce?20:24})}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("h3",{style:{margin:0,fontSize:ce?"0.95rem":"1.125rem",fontWeight:"700",color:"white",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l}),n.jsxs("p",{style:{margin:"2px 0 0",fontSize:"0.75rem",color:"var(--text-secondary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"6px"},children:[xe?.name||d,xe?.isBeta&&n.jsx("span",{style:{fontSize:"0.6rem",padding:"1px 5px",background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b",borderRadius:"4px",border:"1px solid rgba(245, 158, 11, 0.2)",fontWeight:"800",letterSpacing:"0.05em"},children:"BETA"})]})]}),U&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx("input",{type:"file",id:`dna-upload-${i}`,accept:"audio"===i?"audio/*":"lyrics"===i?".txt,.doc,.docx,.pdf":"image/*",onChange:U,style:{display:"none"}}),n.jsxs("button",{onClick:()=>document.getElementById(`dna-upload-${i}`).click(),disabled:H,title:`${"video"===i?"Image":i.charAt(0).toUpperCase()+i.slice(1)} DNA (Reference)`,style:{padding:"8px",borderRadius:"8px",background:E?`${c}20`:"rgba(255,255,255,0.05)",border:"1px solid "+(E?c+"80":"rgba(255,255,255,0.1)"),color:E?c:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s",fontSize:"0.7rem",fontWeight:"600"},children:[H?n.jsx(z,{size:14,className:"spin"}):n.jsx(j,{size:14}),E&&!ce&&"DNAâœ“"]}),E&&n.jsx("button",{onClick:e=>{e.stopPropagation(),P&&P()},style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer",padding:"4px"},children:n.jsx(w,{size:12})})]}),(g||m)&&n.jsxs("div",{style:{padding:"6px 12px",borderRadius:"20px",background:`${c}20`,display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx(z,{size:14,color:c,className:"spin"}),n.jsx("span",{style:{fontSize:"0.7rem",color:c,fontWeight:"600"},children:g?"Generating...":"Creating Media..."})]})]}),n.jsxs("div",{style:{flex:1,padding:ce?"10px 12px":"16px 20px",display:"flex",flexDirection:"column",gap:ce?"8px":"12px",position:"relative",zIndex:1},children:[!g&&p?n.jsx(n.Fragment,{children:Z?n.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},children:[n.jsx("textarea",{value:ie,onChange:e=>te(e.target.value),style:{flex:1,padding:ce?"8px":"12px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:`1px solid ${c}40`,color:"white",fontSize:ce?"0.8rem":"0.9rem",lineHeight:"1.5",resize:"none",outline:"none",minHeight:"120px"},autoFocus:!0}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{onClick:()=>ee(!1),style:{flex:1,padding:"8px",borderRadius:"8px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer",fontSize:"0.8rem"},children:"Cancel"}),n.jsx("button",{onClick:()=>{k&&k(ie),ee(!1)},style:{flex:1,padding:"8px",borderRadius:"8px",background:c,border:"none",color:"white",cursor:"pointer",fontWeight:"600",fontSize:"0.8rem"},children:"Save"})]})]}):n.jsxs("div",{onClick:()=>ne(!re),className:"lyrics-stanza-view",style:{background:"rgba(0,0,0,0.3)",borderRadius:ce?"8px":"12px",padding:ce?"10px":"16px",flex:1,overflow:"auto",cursor:"pointer",maxHeight:re?ce?"300px":"400px":ce?"150px":"280px",transition:"max-height 0.3s ease",position:"relative"},children:[se&&n.jsxs("button",{onClick:e=>{e.stopPropagation(),ae(!oe)},style:{position:"absolute",top:"8px",right:"8px",background:oe?c:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",padding:"4px 8px",fontSize:"0.65rem",fontWeight:"700",color:"white",zIndex:2,display:"flex",alignItems:"center",gap:"4px",boxShadow:oe?`0 2px 8px ${c}44`:"none"},children:[oe?n.jsx(V,{size:10}):n.jsx(I,{size:10}),oe?"SHOW LYRICS":"SHOW PROMPT"]}),n.jsx("p",{style:{fontSize:ce?"0.85rem":"1rem",lineHeight:ce?"1.5":"1.8",color:"rgba(255,255,255,0.95)",margin:0,whiteSpace:"pre-wrap",fontFamily:"'Georgia', 'Times New Roman', serif",letterSpacing:"0.01em"},children:de?.split(/\n\n+/).map((e,i)=>n.jsx("span",{style:{display:"block",marginBottom:i<de.split(/\n\n+/).length-1?"1em":0},children:e},i))})]})}):g?n.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"12px",padding:"4px"},children:[n.jsx(X,{width:"40%",height:"20px",marginBottom:"12px",opacity:.15}),n.jsx(X,{width:"100%",height:"14px"}),n.jsx(X,{width:"90%",height:"14px"}),n.jsx(X,{width:"95%",height:"14px"}),n.jsx(X,{width:"70%",height:"14px",marginBottom:"20px"}),n.jsx(X,{width:"100%",height:"14px"}),n.jsx(X,{width:"85%",height:"14px"}),n.jsx(X,{width:"40%",height:"14px"}),n.jsxs("div",{style:{marginTop:"auto",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"12px",background:"rgba(255,255,255,0.02)",borderRadius:"8px"},children:[n.jsx(z,{size:16,className:"spin",color:c}),n.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:"500"},children:xe?.name?`${xe.name} is writing...`:"AI is thinking..."})]})]}):n.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"8px",color:"var(--text-secondary)",textAlign:"center",padding:"20px"},children:[a.createElement(s,{size:32,style:{opacity:.3}}),n.jsx("span",{style:{fontSize:"0.85rem",opacity:.5},children:'Click "Generate All" to create content'})]}),p&&x&&n.jsx("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"12px",border:`1px solid ${c}22`},children:u?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:n.jsxs("div",{onClick:()=>K(!0),style:{cursor:"pointer",position:"relative",borderRadius:"8px",overflow:"hidden"},children:["audio"===x&&u&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"8px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:`linear-gradient(135deg, ${c}, ${c}88)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 12px ${c}44`},children:n.jsx(R,{size:18,color:"white"})}),n.jsx("audio",{src:b(u),controls:!0,style:{flex:1,height:"32px"}})]}),"image"===x&&u&&n.jsxs("div",{style:{position:"relative"},children:[n.jsx("img",{src:f(u),alt:"Generated",style:{width:"100%",maxHeight:"120px",objectFit:"cover",borderRadius:"8px"},onError:e=>{e.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="120" viewBox="0 0 200 120"%3E%3Crect fill="%231a1a2e" width="200" height="120"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23666" font-size="12" font-family="sans-serif"%3EImage unavailable%3C/text%3E%3C/svg%3E'}}),n.jsx("div",{className:"image-hover-overlay",style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,borderRadius:"8px",pointerEvents:"none"},children:n.jsx(O,{size:24,color:"white"})})]}),"video"===x&&u&&n.jsx("video",{src:v(u),style:{width:"100%",maxHeight:"120px",objectFit:"cover",borderRadius:"8px"},controls:!0})]})}):m?n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[n.jsx(X,{height:"image"===x||"video"===x?"120px":"44px",width:"100%",opacity:.2}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px"},children:[n.jsx(z,{size:14,className:"spin",color:c}),n.jsx("span",{style:{fontSize:"0.75rem",color:c,fontWeight:"600"},children:"lyrics"===i?"Cloning vocals...":`Synthesizing ${x}...`})]})]}):y?n.jsxs("button",{onClick:y,disabled:m,style:{width:"100%",padding:"12px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",border:`1px dashed ${c}50`,color:c,fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s"},children:["audio"===x&&n.jsx(R,{size:16}),"image"===x&&n.jsx(W,{size:16}),"video"===x&&n.jsx(B,{size:16}),"lyrics"===i?"Create AI Vocals":"audio"===i?"Synthesize AI Beat":`Generate ${x.charAt(0).toUpperCase()+x.slice(1)}`]}):null})]}),p&&!Z&&n.jsxs("div",{style:{padding:ce?"8px 10px 10px":"12px 20px 16px",borderTop:"1px solid rgba(255,255,255,0.05)",display:"flex",gap:ce?"6px":"8px",flexWrap:"wrap",position:"relative",zIndex:1,touchAction:"manipulation"},children:[n.jsxs("button",{onClick:D,title:A?"Stop":"lyrics"===i&&u?"Play AI Vocals":"Text to Speech",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:A?`${c}30`:"rgba(255,255,255,0.05)",border:`1px solid ${A?c:"rgba(255,255,255,0.1)"}`,color:A?c:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[A?n.jsx(G,{size:14}):n.jsx(M,{size:14}),!ce&&(A?"Stop":"lyrics"===i&&u?"Hear Vocals":"TTS")]}),n.jsxs("button",{onClick:()=>{if(p){const e="lyrics"!==i||oe?p:le;navigator.clipboard.writeText(e),o.success("lyrics"!==i||oe?"Copied to clipboard":"Lyrics copied")}},title:"Copy to Clipboard",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[n.jsx(N,{size:14}),!ce&&"Copy"]}),n.jsxs("button",{onClick:()=>ee(!0),title:"Edit Output",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[n.jsx(J,{size:14}),!ce&&"Edit"]}),(u||p&&!x)&&n.jsxs("button",{onClick:()=>K(!0),title:"Preview",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:`${c}20`,border:`1px solid ${c}40`,color:c,cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"600",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[n.jsx(O,{size:14}),!ce&&"Preview"]}),h&&n.jsxs("button",{onClick:h,title:"Regenerate",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[n.jsx($,{size:14}),!ce&&"Redo"]}),!ce&&n.jsx("div",{style:{flex:1}}),p&&T&&n.jsx("button",{onClick:T,title:"Expand to Fullscreen",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:n.jsx(F,{size:14})}),(p||u)&&n.jsx("button",{onClick:C,title:"Download",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(34, 197, 94, 0.15)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#22c55e",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"600",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:n.jsx(L,{size:14})}),S&&n.jsx("button",{onClick:S,title:"Delete",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:n.jsx(Y,{size:14})})]}),n.jsx(r.Suspense,{fallback:null,children:n.jsx(q,{isOpen:_,onClose:()=>K(!1),mediaUrl:u,mediaType:x||"text",title:l,textContent:x?null:p})}),n.jsx("style",{children:"\n        /* Desktop-only hover effects */\n        @media (hover: hover) and (pointer: fine) {\n          .generator-card:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 10px 40px rgba(0,0,0,0.3);\n          }\n          .image-hover-overlay {\n            transition: opacity 0.2s ease;\n          }\n          .generator-card:hover .image-hover-overlay {\n            opacity: 1 !important;\n          }\n        }\n        /* Mobile touch optimization */\n        @media (hover: none) {\n          .generator-card {\n            transform: none !important;\n          }\n          .generator-card:active {\n            opacity: 0.9;\n          }\n        }\n      "})]})}function ie({outputs:e,mediaUrls:i,songIdea:t,finalMixPreview:r,creatingFinalMix:a,musicVideoUrl:s,generatingMusicVideo:l,handleGenerateProfessionalMusicVideo:d,handleCreateFinalMix:c,handleCreateProject:p,setShowPreviewModal:g,visualType:x,setVisualType:u,isMobile:y,orchestratorBpm:m=120}){const h=Object.values(e).filter(Boolean).length,b=4===h,f=h>0,v=h/4*100,w=!!i.audio,k=!!i.vocals||!!e.lyrics,S=!!i.video,z=w&&(S||k),C=!!s;return n.jsxs("div",{style:{background:b?"linear-gradient(135deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.98))":"rgba(15, 23, 42, 0.4)",borderRadius:"24px",padding:y?"20px":"28px",border:"1px solid rgba(255,255,255,0.1)",marginTop:"32px",position:"relative",overflow:"hidden",boxShadow:b?"0 10px 40px rgba(0,0,0,0.4), 0 0 0 1px rgba(79, 70, 229, 0.3)":"none",transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:[b&&n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #4f46e5, #9333ea, #ec4899)",boxShadow:"0 0 15px rgba(79, 70, 229, 0.5)"}}),n.jsxs("div",{style:{display:"flex",flexDirection:y?"column":"row",justifyContent:"space-between",alignItems:y?"stretch":"center",gap:"24px",position:"relative",zIndex:1},children:[n.jsxs("div",{style:{flex:1},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:b?"rgba(79, 70, 229, 0.2)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",color:b?"#818cf8":"rgba(255,255,255,0.3)",border:"1px solid "+(b?"rgba(79, 70, 229, 0.4)":"rgba(255,255,255,0.1)")},children:b?n.jsx(j,{size:20}):n.jsx(_,{size:20})}),n.jsxs("div",{children:[n.jsxs("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700",color:b?"white":"rgba(255,255,255,0.5)",display:"flex",alignItems:"center",gap:"8px"},children:[b?"Production Complete":"Production Status",b&&n.jsx(K,{size:18,color:"#22c55e"})]}),n.jsx("p",{style:{margin:"4px 0 0",fontSize:"0.85rem",color:"rgba(255,255,255,0.4)"},children:b?"All assets are master-ready":`${h}/4 assets finalized â€¢ ${4-h} remaining`})]})]}),n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:["lyrics","audio","visual","video"].map(t=>{const r=t.charAt(0).toUpperCase()+t.slice(1),o=!!e[t],a=!!i["lyrics"===t?"vocals":t];return n.jsxs("div",{style:{padding:"6px 12px",borderRadius:"100px",fontSize:"0.75rem",fontWeight:"600",background:o?"rgba(34, 197, 94, 0.1)":"rgba(255,255,255,0.03)",color:o?"#4ade80":"rgba(255,255,255,0.2)",border:"1px solid "+(o?"rgba(34, 197, 94, 0.2)":"rgba(255,255,255,0.05)"),display:"flex",alignItems:"center",gap:"6px"},children:[o?"â—":"â—‹"," ",r,a&&n.jsx("span",{title:"Media Created",children:"ðŸ’Ž"})]},t)})}),n.jsxs("div",{style:{marginTop:"20px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(255,255,255,0.05)",display:y?"none":"block"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[n.jsx("span",{style:{fontSize:"0.7rem",color:"rgba(255,255,255,0.3)",fontWeight:"700",textTransform:"uppercase"},children:"Production Timeline"}),n.jsxs("span",{style:{fontSize:"0.7rem",color:"#818cf8",fontWeight:"700"},children:[m," BPM â€¢ STEREO"]})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[{label:"BEAT",type:"audio",color:"#22d3ee"},{label:"VOCALS",type:"lyrics",color:"#a78bfa"},{label:"VISUALS",type:"visual",color:"#fb923c"},{label:"IMG TO VIDEO",type:"video",color:"#f87171"}].map(t=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"70px",fontSize:"0.65rem",fontWeight:"800",color:e[t.type]?t.color:"rgba(255,255,255,0.2)",letterSpacing:"0.05em"},children:t.label}),n.jsx("div",{style:{flex:1,height:"24px",background:"rgba(255,255,255,0.03)",borderRadius:"4px",position:"relative",overflow:"hidden",border:"1px solid rgba(255,255,255,0.05)"},children:e[t.type]&&n.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:i["lyrics"===t.type?"vocals":"visual"===t.type?"image":t.type]?"100%":"30%",background:`linear-gradient(90deg, ${t.color}40, ${t.color}80)`,borderRight:`2px solid ${t.color}`,transition:"width 1s ease-in-out"},children:("audio"===t.type||"lyrics"===t.type)&&n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"2px",height:"100%",paddingLeft:"8px",opacity:.5},children:[...Array(20)].map((e,i)=>n.jsx("div",{style:{width:"2px",height:80*Math.random()+"%",background:t.color,borderRadius:"2px"}},i))})})}),n.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",background:e[t.type]?"#22c55e":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center"},children:e[t.type]&&n.jsx(K,{size:10,color:"white"})})]},t.label))})]})]}),n.jsxs("div",{style:{display:"flex",flexDirection:y?"column":"row",gap:"12px",alignItems:"stretch"},children:[z&&!C&&n.jsxs("button",{onClick:d,disabled:l,style:{padding:"14px 24px",borderRadius:"16px",background:"rgba(236, 72, 153, 0.1)",border:"1px solid rgba(236, 72, 153, 0.3)",color:"#f472b6",fontWeight:"600",fontSize:"0.9rem",cursor:l?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[l?n.jsx($,{size:18,className:"spin"}):s?n.jsx(j,{size:18,fill:"#22c55e"}):n.jsx(B,{size:18}),l?"Syncing...":s?"Image to Video Sync âœ“":"Image to Video Sync"]}),n.jsx("button",{onClick:()=>{b?g(!0):o.info("Finish all generators to enable Master Preview")},style:{padding:"14px 32px",borderRadius:"16px",background:b?"linear-gradient(135deg, #4f46e5, #7c3aed)":"rgba(255,255,255,0.05)",border:b?"none":"1px solid rgba(255,255,255,0.1)",color:b?"white":"rgba(255,255,255,0.3)",fontWeight:"700",fontSize:"1rem",cursor:b?"pointer":"default",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",boxShadow:b?"0 8px 25px rgba(79, 70, 229, 0.4)":"none",transition:"all 0.3s ease",minWidth:y?"100%":"220px"},children:b?n.jsxs(n.Fragment,{children:[n.jsx(O,{size:20}),"Master & Preview Mix"]}):n.jsxs(n.Fragment,{children:[n.jsx(Z,{size:18}),"Master Preview Locked"]})}),f&&n.jsxs("button",{onClick:p,style:{padding:"14px 24px",borderRadius:"16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontWeight:"600",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:b?1:.7},children:[n.jsx(H,{size:18}),!y&&"Publish to Hub"]})]})]}),!b&&n.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"4px",background:"rgba(255,255,255,0.05)"},children:n.jsx("div",{style:{width:`${v}%`,height:"100%",background:"linear-gradient(90deg, #3b82f6, #6366f1)",transition:"width 0.8s cubic-bezier(0.16, 1, 0.3, 1)"}})})]})}function te({isOpen:t,onClose:a,onCreateProject:b,onSaveToProject:f,authToken:v=null,existingProject:G=null,userPlan:J="Free"}){const[Y,_]=r.useState("undefined"!=typeof window&&window.innerWidth<768),[K,Z]=r.useState(G?.name||""),[q,X]=r.useState(G?.language||"English"),[te,re]=r.useState(G?.style||"Modern Hip-Hop"),[ne,oe]=r.useState(G?.duration||90),[ae,se]=r.useState(G?.musicalBars||16),[le,de]=r.useState(G?.useBars??!0),[ce,pe]=r.useState(G?.model||"Gemini 2.0 Flash"),[ge,xe]=r.useState(G?.musicEngine||"music-gpt"),[ue,ye]=r.useState(G?.mood||"Energetic"),[me,he]=r.useState(G?.structure||"Full Song"),[be,fe]=r.useState(!0),[ve,je]=r.useState(-1),[we,ke]=r.useState("Full Mix"),[Se,ze]=r.useState(G?.bpm||G?.settings?.bpm||120),[Ce,Ie]=r.useState({lyrics:"ghost",audio:"beat",visual:"album",video:"video-creator"}),[Re,$e]=r.useState(!1),[De,We]=r.useState({lyrics:null,audio:null,visual:null,video:null}),[Be,Ae]=r.useState({audio:null,image:null,video:null,vocals:null,lyricsVocal:null}),[Te,Ue]=r.useState({audio:!1,image:!1,video:!1,vocals:!1}),[Pe,Ve]=r.useState(null),[Oe,Ee]=r.useState(""),[Me,Ne]=r.useState(!1),[Le,He]=r.useState(!1),[Fe,Ge]=r.useState("rapper"),[Je,Ye]=r.useState("aggressive"),[_e,Ke]=r.useState("hip-hop"),[Ze,qe]=r.useState(!1),[Qe,Xe]=r.useState(null),[ei,ii]=r.useState(!1),[ti,ri]=r.useState(null),[ni,oi]=r.useState(!1),[ai,si]=r.useState(null),[li,di]=r.useState(!1),[ci,pi]=r.useState(!1),[gi,xi]=r.useState(!1),[ui,yi]=r.useState(!1),[mi,hi]=r.useState(!1),[bi,fi]=r.useState(!1),[vi,ji]=r.useState("image"),[wi,ki]=r.useState(null),[Si,zi]=r.useState(!1),[Ci,Ii]=r.useState([]),[Ri,$i]=r.useState(!1),[Di,Wi]=r.useState(null),[Bi,Ai]=r.useState(null),[Ti,Ui]=r.useState(null),[Pi,Vi]=r.useState(null),[Oi,Ei]=r.useState({visual:!1,audio:!1,video:!1,lyrics:!1}),[Mi,Ni]=r.useState(!1),Li=r.useRef(De),Hi=r.useRef(null),Fi=r.useRef(null),Gi=De||{lyrics:null,audio:null,visual:null,video:null},Ji=Be||{audio:null,image:null,video:null};r.useEffect(()=>{const e=()=>_(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),r.useEffect(()=>{Li.current=De},[De]),r.useEffect(()=>{t&&(async()=>{if(l.currentUser){$i(!0);try{const e=p(g(s,"users",l.currentUser?.uid,"voices")),i=(await x(e)).docs.map(e=>({id:e.id,...e.data()}));Ii(i)}catch(e){}finally{$i(!1)}}})()},[t]),r.useEffect(()=>{(async()=>{if(l.currentUser&&t)try{const e=c(s,"users",l.currentUser?.uid),i=await u(e);if(i.exists()){const e=i.data();e.visualDnaUrl&&Wi(e.visualDnaUrl),e.audioDnaUrl&&Ai(e.audioDnaUrl),e.videoDnaUrl&&Ui(e.videoDnaUrl),e.lyricsDnaUrl&&Vi(e.lyricsDnaUrl),e.voiceSampleUrl&&ki(e.voiceSampleUrl)}}catch(e){}})()},[t]),r.useEffect(()=>(document.body.style.overflow=t?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[t]),r.useEffect(()=>{if(le){const e=Math.round(4*ae*60/Se);oe(e)}},[ae,Se,le]),r.useEffect(()=>{le||oe("Full Song"===me?90:"Radio Edit"===me?150:"Extended"===me?180:"Loop"===me?30:15)},[me,le]);const Yi=e=>e?"object"==typeof e&&e.url?e.url:Array.isArray(e)&&e.length>0?Yi(e[0]):"string"!=typeof e?null:e.startsWith("http")||e.startsWith("data:")?e:`data:image/png;base64,${e}`:null,_i=e=>{if(!e)return"";if("string"==typeof e)return e;if("object"==typeof e){if(e.url)return e.url;if(e.audio)return e.audio;if(Array.isArray(e)&&e[0])return"string"==typeof e[0]?e[0]:e[0].url||e[0].audio||""}return""},Ki=e=>{if(!e)return"";if("string"==typeof e)return e;if("object"==typeof e){if(e.url)return e.url;if(e.video)return e.video;if(Array.isArray(e)&&e[0])return"string"==typeof e[0]?e[0]:e[0].url||e[0].video||""}return""},Zi=[{key:"lyrics",title:"Ghostwriter",subtitle:"Lyrics & Hook",icon:C,color:"#8b5cf6",mediaType:"audio"},{key:"audio",title:"Beat Lab",subtitle:"Music Production",icon:j,color:"#06b6d4",mediaType:"audio"},{key:"visual",title:"Album Artist",subtitle:"Cover Identity",icon:W,color:"#ec4899",mediaType:"image"},{key:"video",title:"Video Creator",subtitle:"Motion & Sync",icon:B,color:"#f59e0b",mediaType:"video"}],qi=(e,i)=>{let t=e;if("lyrics"===i||"content"===i){const{content:i}=Q(e);i&&(t=i)}if(Pe===i)return window.speechSynthesis.cancel(),Fi.current&&(Fi.current.pause(),Fi.current.currentTime=0),void Ve(null);if("lyrics"===i&&Be.vocals)try{Fi.current&&Fi.current.pause(),window.speechSynthesis.cancel();const e=document.createElement("audio");return e.src=_i(Be.vocals),Fi.current=e,e.play().catch(e=>{Qi(t,i)}),e.onended=()=>Ve(null),void Ve(i)}catch(r){}Qi(t,i)},Qi=(e,i)=>{try{if(window.speechSynthesis.cancel(),"undefined"==typeof SpeechSynthesisUtterance)return;const t=new SpeechSynthesisUtterance(e),r=window.speechSynthesis.getVoices();if("rapper"===Fe||"rapper-female"===Fe){t.rate="fast"===Je?1.3:"chill"===Je?.85:1,t.pitch="rapper-female"===Fe?1.2:.9;const e=r.find(e=>"rapper-female"===Fe?e.name.toLowerCase().includes("female")||e.name.toLowerCase().includes("zira")||e.name.toLowerCase().includes("samantha"):e.name.toLowerCase().includes("male")||e.name.toLowerCase().includes("david")||e.name.toLowerCase().includes("alex"));e&&(t.voice=e)}else if("singer"===Fe||"singer-female"===Fe){t.rate=.85,t.pitch="singer-female"===Fe?1.3:1;const e=r.find(e=>"singer-female"===Fe?e.name.toLowerCase().includes("female")||e.name.toLowerCase().includes("zira"):e.name.toLowerCase().includes("male")||e.name.toLowerCase().includes("david"));e&&(t.voice=e)}else if("narrator"===Fe){t.rate=.9,t.pitch=.8;const e=r.find(e=>e.name.toLowerCase().includes("david")||e.name.toLowerCase().includes("male"));e&&(t.voice=e)}else t.rate=.9;t.onend=()=>Ve(null),t.onerror=()=>Ve(null),window.speechSynthesis.speak(t),Ve(i)}catch(t){Ve(null)}},Xi=r.useCallback(async()=>{const e={"Content-Type":"application/json"};return v&&(e.Authorization=`Bearer ${v}`),e},[v]),et=async()=>{if(Re)return;if(!K.trim())return void o.error("Please enter a song idea");const t=Object.entries(Ce).filter(([,e])=>e);if(0!==t.length){$e(!0),o.loading("Generating content...",{id:"gen-all"});try{const r=await Xi(),n="Gemini 2.0 Flash"===ce?"gemini-2.0-flash":"Gemini 2.0 Pro (Exp)"===ce?"gemini-2.0-flash-exp":"Gemini 1.5 Pro"===ce?"gemini-1.5-pro":"gemini-2.0-flash",a=t.map(async([t,a])=>{const s=e.find(e=>e.id===a);if(!s)return;const l=Zi.find(e=>e.key===t),d=`You are ${s.name}, a professional ${s.category} specialist. \n        Create content for a ${te} song about: "${K}" in ${q}.\n        Be creative, professional, and match the genre's style.\n        ${"lyrics"===t?'Write ONLY the lyrics (verses, hooks, chorus) with clear labels like [Verse 1], [Chorus], [Bridge]. ALSO INCLUDE Suno-style vocal/style tags in brackets like [Hard Hitting Rap] or [Soulful Vocals] to guide the performance. Do not include any intro/preamble like "Here are the lyrics".':""}\n        ${"audio"===t?`Describe a detailed beat/instrumental concept (${le?ae+" bars":ne+" seconds"}) with BPM: ${Se}, key, and production elements. Be technical and descriptive for an AI music engine.`:""}\n        ${"visual"===t?"Describe a striking album cover or concept in detail for image generation.":""}\n        ${"video"===t?"Write a creative image to video concept/storyboard with scene descriptions.":""}`;try{const e=await fetch(`${i}/api/generate`,{method:"POST",headers:r,body:JSON.stringify({prompt:`Create ${l.title.toLowerCase()} content for: "${K}"`,systemInstruction:d,model:n,duration:ne,language:q,referenceUrl:"lyrics"===t?Pi:"audio"===t?Bi:"visual"===t?Di:"video"===t?Ti:null})});if(e.ok){const i=await e.json();We(e=>{const r={...e,[t]:i.output};return Li.current=r,r}),"audio"===t?setTimeout(()=>tt(i.output),500):"lyrics"===t?setTimeout(()=>rt(i.output),800):"visual"===t?setTimeout(()=>at(i.output),1100):"video"===t&&setTimeout(()=>lt(i.output),1400)}else{await e.text();o.error(`Agent ${s.name} failed: ${e.status}`,{duration:5e3,icon:"âŒ"})}}catch(c){o.error(`Connection Error: ${t} generation failed.`,{icon:"ðŸ“¡"})}});await Promise.all(a),o.dismiss("gen-all"),o.success("Generation complete!")}catch(r){o.error(n.jsxs("div",{children:[n.jsx("strong",{children:"Generation failed"}),n.jsx("p",{style:{fontSize:"12px",marginTop:"4px"},children:r.message||"Check your connection and try again"})]}),{duration:5e3})}finally{$e(!1)}}else o.error("Please select at least one agent")},it=async t=>{if(Re)return;if(!Ce[t])return;const r=e.find(e=>e.id===Ce[t]);if(r){$e(!0),We(e=>({...e,[t]:null}));try{const e=await Xi(),n=Zi.find(e=>e.key===t),a="Gemini 2.0 Flash"===ce?"gemini-2.0-flash":"Gemini 2.0 Pro (Exp)"===ce?"gemini-2.0-flash-exp":"Gemini 1.5 Pro"===ce?"gemini-1.5-pro":"gemini-2.0-flash",s=await fetch(`${i}/api/generate`,{method:"POST",headers:e,body:JSON.stringify({prompt:`Create fresh ${n.title.toLowerCase()} content for: "${K}"`,systemInstruction:`You are ${r.name}. Create NEW and DIFFERENT content for a ${te} song about: "${K}". Be creative and fresh.\n          ${"lyrics"===t?"Write ONLY the lyrics (verses, hooks, chorus) with clear labels like [Verse] or [Chorus]. No intro fluff.":""}\n          ${"audio"===t?`Describe a detailed beat/instrumental concept (${le?ae+" bars":ne+" seconds"}) with BPM: ${Se}, key, and production elements. Be technical and descriptive for an AI music engine.`:""}`,model:a,duration:ne,language:q})});let l;if(!s.headers.get("content-type")?.includes("application/json"))throw new Error(`Invalid server response (${s.status})`);l=await s.json(),s.ok?(We(e=>({...e,[t]:l.output})),o.success(`${n.title} regenerated!`)):o.error(l.error||`Failed to regenerate ${n.title}`)}catch{o.error("Regeneration failed")}finally{$e(!1)}}},tt=async(e=null)=>{if(Te.audio)return;const t=("string"==typeof e?e:null)||Li.current.audio||De.audio;if(!t)return void o.error("Generate Beat DNA first");Ue(e=>({...e,audio:!0}));const r=ne>120?"3 minutes":ne>60?"2 minutes":"60 seconds";o.loading(`Synthesizing AI beat (${r})...`,{id:"gen-audio"});try{const e=await Xi(),{content:r}=Q(t),a=r||t,s=await fetch(`${i}/api/generate-audio`,{method:"POST",headers:e,body:JSON.stringify({prompt:"string"==typeof a?a.substring(0,1e3):"Professional music production",genre:te||"hip-hop",mood:ue.toLowerCase()||"energetic",bpm:parseInt(Se)||90,durationSeconds:parseInt(ne)||("Full Song"===me?90:"Radio Edit"===me?150:"Extended"===me?180:"Loop"===me?15:30),referenceAudio:Bi,engine:ge||"music-gpt",highMusicality:be,seed:ve,stem:we})});let l;const d=s.headers.get("content-type");if(!d||!d.includes("application/json")){await s.text();throw new Error(`Invalid audio response (${s.status})`)}if(l=await s.json(),s.ok){const e=l.audioUrl||l.output;if(e){if(Ae(i=>({...i,audio:e})),We(e=>({...e,audio:e.audio||`Professional ${te} beat generated at ${Se} BPM`})),G&&(f||b)){const i=f||b;if(!(G.assets||[]).some(e=>"audio"===e.type&&e.audioUrl)){const t={id:`audio-${Date.now()}`,title:"Beat Lab Production",type:"audio",agent:"Beat Lab",content:a.substring(0,500),audioUrl:e,mimeType:l.mimeType||"audio/mpeg",createdAt:(new Date).toISOString()};i({...G,assets:[t,...G.assets||[]],updatedAt:(new Date).toISOString()})}}o.success("AI beat generated!",{id:"gen-audio"})}else o.error("No audio returned from server",{id:"gen-audio"})}else{const e=l||{};503===s.status&&e.setup?o.error(n.jsxs("div",{children:[n.jsx("strong",{children:"Audio API Not Ready"}),n.jsx("p",{style:{fontSize:"12px",marginTop:"4px"},children:e.details||"The model is still loading"})]}),{id:"gen-audio",duration:8e3}):o.error(e.details||e.error||`Audio generation failed (${s.status})`,{id:"gen-audio"})}}catch(a){o.error(`Generation failed: ${a.message}`,{id:"gen-audio"})}finally{Ue(e=>({...e,audio:!1}))}},rt=async(e=null)=>{if(Te.vocals)return;const t=("string"==typeof e?e:null)||Li.current.lyrics||De.lyrics;if(t){qe(!0),Ue(e=>({...e,vocals:!0})),o.loading("Generating AI Vocals (up to 2 mins)...",{id:"gen-vocals"});try{const e=await Xi(),{content:r}=Q(t),n=r||t,a={rapper:"rapper-male-1","rapper-female":"rapper-female-1",singer:"singer-male","singer-female":"singer-female",narrator:"narrator",whisper:"whisper",spoken:"spoken"}[Fe]||"rapper-male-1",s=await fetch(`${i}/api/generate-speech`,{method:"POST",headers:e,body:JSON.stringify({prompt:n.substring(0,1500),voice:a,style:Fe,rapStyle:Je,genre:_e,language:q||"English",duration:ne||30,speakerUrl:"cloned"===Fe?wi:null,backingTrackUrl:Be.audio})});let l;const d=s.headers.get("content-type");if(!d||!d.includes("application/json"))throw new Error(`Invalid vocal response (${s.status})`);if(l=await s.json(),s.ok&&l.audioUrl){if(Ae(e=>({...e,vocals:l.audioUrl,lyricsVocal:l.audioUrl})),We(e=>({...e,vocals:e.vocals||`AI Vocal Performance generated for "${K||"song"}"`})),G&&(f||b)){const e=f||b;if(!(G.assets||[]).some(e=>"vocal"===e.type&&e.audioUrl)){const i={id:`vocal-${Date.now()}`,title:"Vocal Performance",type:"vocal",agent:"Ghostwriter",content:n.substring(0,500),audioUrl:l.audioUrl,mimeType:l.mimeType||"audio/wav",createdAt:(new Date).toISOString()};e({...G,assets:[i,...G.assets||[]],updatedAt:(new Date).toISOString()})}}o.success("AI Vocals generated!",{id:"gen-vocals"})}else{const e=l||{};o.error(e.details||e.error||"Vocal generation failed",{id:"gen-vocals"})}}catch(r){o.error("Vocal generation failed",{id:"gen-vocals"})}finally{qe(!1),Ue(e=>({...e,vocals:!1}))}}else o.error("Generate Lyrics & Hook DNA first")},nt=async(e,t)=>{if(Oi[e])return;const r=t.target.files[0];if(!r)return;if(r.size>10485760)return void o.error("File too large (max 10MB)");Ei(i=>({...i,[e]:!0}));const n=o.loading(`Uploading ${e} DNA...`,{id:`upload-dna-${e}`});try{const t=await Xi(),a=new FileReader;a.readAsDataURL(r),a.onload=async()=>{try{const p=a.result,g=await fetch(`${i}/api/upload-asset`,{method:"POST",headers:t,body:JSON.stringify({data:p,fileName:`${e}-dna-${Date.now()}-${r.name.replace(/\s+/g,"-")}`,mimeType:r.type,assetType:"visual"===e||"video"===e?"image":"audio"===e?"audio":"document"})}),x=await g.json();if(!g.ok||!x.url)throw new Error(x.error||"Upload failed");{const i=x.url;if("visual"===e&&Wi(i),"audio"===e&&Ai(i),"video"===e&&Ui(i),"lyrics"===e&&Vi(i),l.currentUser?.uid)try{const t=c(s,"users",l.currentUser?.uid);await y(t,{[`${e}DnaUrl`]:i,lastDnaUpdate:Date.now()})}catch(d){}o.success(`${"video"===e?"Image":e.charAt(0).toUpperCase()+e.slice(1)} DNA attached!`,{id:n})}}catch(p){o.error(`Failed to upload ${e} DNA`,{id:n})}finally{Ei(i=>({...i,[e]:!1}))}},a.onerror=()=>{o.error("Failed to read file"),Ei(i=>({...i,[e]:!1}))}}catch(a){o.error("Upload failed",{id:n}),Ei(i=>({...i,[e]:!1}))}},ot=e=>new Promise((i,t)=>{try{const r=document.createElement("video");r.crossOrigin="anonymous",r.muted=!0,r.onloadeddata=()=>{r.currentTime=Math.min(1,.1*r.duration)},r.onseeked=()=>{try{const e=document.createElement("canvas");e.width=r.videoWidth||640,e.height=r.videoHeight||360;e.getContext("2d").drawImage(r,0,0,e.width,e.height);const t=e.toDataURL("image/jpeg",.9);r.remove(),i(t)}catch(e){t(e)}},r.onerror=()=>{t(new Error("Video load failed"))},r.src=e,r.load(),setTimeout(()=>{r.remove(),t(new Error("Frame extraction timeout"))},1e4)}catch(r){t(r)}}),at=async(e=null)=>{if(Te.image)return;const t=("string"==typeof e?e:null)||Li.current.visual||De.visual;if(t){Ue(e=>({...e,image:!0})),o.loading("Generating image (~10 seconds)...",{id:"gen-image"});try{const e=await Xi(),{content:r}=Q(t),n=r||t,a=await fetch(`${i}/api/generate-image`,{method:"POST",headers:e,body:JSON.stringify({prompt:`Album cover art, highly detailed, professional: ${n.substring(0,600)}`,referenceImage:Di})});let s;if(!a.headers.get("content-type")?.includes("application/json"))throw new Error(`Invalid image response (${a.status})`);if(s=await a.json(),a.ok){let e=null;if(s.output?e=s.output:s.images&&s.images.length>0?e=s.images[0]:s.imageData&&(e=s.imageData),e){if(Ae(i=>({...i,image:e})),o.success("Image created!",{id:"gen-image"}),G){const i={id:`img-${Date.now()}`,type:"image",url:e,name:`Album Art - ${(new Date).toLocaleTimeString()}`,createdAt:(new Date).toISOString()},t=[...G.assets||[],i];f({...G,assets:t,updatedAt:(new Date).toISOString()})}}else await st()}else{await a.text();await st()}}catch(r){await st()}finally{Ue(e=>({...e,image:!1}))}}else o.error("Generate Visual DNA first")},st=async()=>{const e=Be.video||ai;if(e){o.loading("Extracting frame from video...",{id:"gen-image"});try{const t=await Xi(),r=await fetch(`${i}/api/extract-video-frame`,{method:"POST",headers:t,body:JSON.stringify({videoUrl:e,timestamp:1})});if(r.ok){const i=await r.json();if(i.extractClientSide){const i=await ot(e);if(Ae(e=>({...e,image:i})),o.success("Frame extracted from video!",{id:"gen-image"}),G){const e={id:`img-${Date.now()}`,type:"image",url:i,name:`Video Frame Cover - ${(new Date).toLocaleTimeString()}`,createdAt:(new Date).toISOString()},t=[...G.assets||[],e];f({...G,assets:t,updatedAt:(new Date).toISOString()})}return}if(i.output||i.imageData){const e=i.output||`data:${i.mimeType||"image/jpeg"};base64,${i.imageData}`;if(Ae(i=>({...i,image:e})),o.success("Frame extracted from video!",{id:"gen-image"}),G){const i={id:`img-${Date.now()}`,type:"image",url:e,name:`Video Frame Cover - ${(new Date).toLocaleTimeString()}`,createdAt:(new Date).toISOString()},t=[...G.assets||[],i];f({...G,assets:t,updatedAt:(new Date).toISOString()})}return}}const n=await ot(e);Ae(e=>({...e,image:n})),o.success("Frame extracted from video!",{id:"gen-image"})}catch(t){o.error("Could not extract frame from video",{id:"gen-image"})}}else o.error("No image or video available",{id:"gen-image"})},lt=async(e=null)=>{if(Te.video)return;const t=("string"==typeof e?e:null)||Li.current.video||De.video;if(t){Ue(e=>({...e,video:!0})),o.loading("Generating video (this takes ~2 min)...",{id:"gen-video"});try{const e=await Xi(),{content:a}=Q(t),s=a||t,l=await fetch(`${i}/api/generate-video`,{method:"POST",headers:e,body:JSON.stringify({prompt:`Cinematic image to video, professional visual: ${s.substring(0,500)}`,referenceImage:Ti,duration:ne})});if(l.ok){const e=await l.json();if("image"===e.type||e.mimeType&&e.mimeType.startsWith("image/")){const i=e.output||e.imageUrl;if(i&&"string"==typeof i){const t=i.startsWith("data:")||i.startsWith("http")?i:`data:${e.mimeType||"image/png"};base64,${i}`;Ae(e=>({...e,image:t})),o.success("Cover image generated! (Video generation unavailable)",{id:"gen-video",duration:5e3})}else o.error("Video generation unavailable",{id:"gen-video"})}else{const i=e.videoUrl||e.output||e.video;if(i&&"string"==typeof i&&(i.startsWith("http")||i.startsWith("blob:"))){if(Ae(e=>({...e,video:i})),o.success(e.isDemo?"Demo video loaded!":"Video created!",{id:"gen-video"}),G){const e={id:`vid-${Date.now()}`,type:"video",url:i,name:`Music Video - ${(new Date).toLocaleTimeString()}`,createdAt:(new Date).toISOString()},t=[...G.assets||[],e];f({...G,assets:t,updatedAt:(new Date).toISOString()})}if(!Be.image){o.loading("Extracting cover frame...",{id:"extract-frame"});try{const e=await ot(i);Ae(i=>({...i,image:e})),o.success("Cover image extracted!",{id:"extract-frame"})}catch(r){o.dismiss("extract-frame")}}}else o.error(e.message||"Video generation unavailable",{id:"gen-video"})}}else{const e=await l.json().catch(()=>({}));503===l.status&&e.setup?o.error(n.jsxs("div",{children:[n.jsx("strong",{children:"Video API Not Ready"}),n.jsx("p",{style:{fontSize:"12px",marginTop:"4px"},children:e.details})]}),{id:"gen-video",duration:8e3}):o.error(e.details||e.error||"Video generation failed",{id:"gen-video"})}}catch(a){o.error("Video generation failed",{id:"gen-video"})}finally{Ue(e=>({...e,video:!1}))}}else o.error("Generate Music Video DNA first")},dt=async()=>{if(ei)return;if(Object.entries(Ce).filter(([,e])=>null!==e).map(([e])=>e).some(e=>De[e])){ii(!0),o.loading("Creating final mix (~15 seconds)...",{id:"final-mix"});try{const i={id:`mix-${Date.now()}`,title:`${K} - Complete Mix`,description:`Full production of "${K}" with lyrics, beat, visual, and video`,created:(new Date).toISOString(),components:{lyrics:{content:De.lyrics,agent:e.find(e=>e.id===Ce.lyrics)?.name||"Ghostwriter",vocalUrl:Be.lyricsVocal||null},audio:{content:De.audio,agent:e.find(e=>e.id===Ce.audio)?.name||"Beat Maker",audioUrl:Be.audio||null},visual:{content:De.visual,agent:e.find(e=>e.id===Ce.visual)?.name||"Designer",imageUrl:Be.image||null},video:{content:De.video,agent:e.find(e=>e.id===Ce.video)?.name||"Video Creator",videoUrl:Be.video||null}},settings:{language:q,style:te,model:ce,bpm:Se}};ri(i),o.success("Final mix ready!",{id:"final-mix"})}catch(i){o.error("Failed to create final mix",{id:"final-mix"})}finally{ii(!1)}}else o.error("Generate at least one output first")},ct=e=>{const i=De[e];if(!i)return;const t=Zi.find(i=>i.key===e),r="string"==typeof i?i:JSON.stringify(i,null,2),n=new Blob([r],{type:"text/plain"}),o=URL.createObjectURL(n),a=document.createElement("a");a.href=o,a.download=`${K||"output"}-${t?.title||e}.txt`,a.click(),URL.revokeObjectURL(o);const s={audio:Be.audio,visual:Be.image,video:Be.video,lyrics:Be.vocals}[e];if(s){let i=s;"visual"===e&&(i=Yi(s)),"audio"===e&&(i=_i(s)),"video"===e&&(i=Ki(s)),"lyrics"===e&&(i=_i(s));const t=document.createElement("a");t.href=i,t.download=`${K||"media"}-${e}`,t.click()}},pt=e=>{We(i=>({...i,[e]:null})),Li.current[e]=null,"audio"===e&&Ae(e=>({...e,audio:null})),"visual"===e&&Ae(e=>({...e,image:null})),"video"===e&&Ae(e=>({...e,video:null})),"lyrics"===e&&Ae(e=>({...e,vocals:null})),o.success("Deleted")},gt=(e,i)=>{We(t=>({...t,[e]:i})),Li.current[e]=i,o.success("Saved")},xt=()=>{const i=Object.values(De).some(e=>null!==e),t=Object.values(Be).some(e=>null!==e);if(!i&&!t)return void o.error("No content to save! Generate some content first.");const r=[];Zi.forEach(i=>{const t=De[i.key];if(t){const n=e.find(e=>e.id===Ce[i.key]);let o="string"==typeof t?t:JSON.stringify(t);if("lyrics"===i.key){const{content:e}=Q(o);e&&(o=e)}const a={id:`${i.key}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:i.title,type:i.key,agent:n?.name||i.subtitle,content:o,snippet:o.substring(0,100),audioUrl:"audio"===i.key?Be.audio||null:"lyrics"===i.key&&Be.vocals||null,imageUrl:"visual"===i.key&&Yi(Be.image)||null,videoUrl:"video"===i.key&&Be.video||null,date:(new Date).toLocaleDateString(),createdAt:(new Date).toISOString(),color:`agent-${(i.color||"").replace("#","")}`};r.push(a)}});const n={id:G?.id||String(Date.now()),name:Oe||K||G?.name||"Untitled Project",description:`Created with Studio Orchestrator: "${K}"`,category:G?.category||"Music",language:q,style:te,model:ce,bpm:Se,structure:me,duration:ne,musicalBars:ae,useBars:le,date:G?.date||(new Date).toLocaleDateString(),updatedAt:(new Date).toISOString(),agents:Object.values(Ce).filter(Boolean).map(i=>{const t=e.find(e=>e.id===i);return t?.name||i}),assets:r,coverImage:Yi(Be.image)||G?.coverImage||null},a=!!G?.id?f||b:b||f;if(a)try{return a(n),o.success(`Saved ${n.assets.length} assets to "${n.name}"!`),fi(!0),Ne(!1),void xi(!0)}catch(s){o.error("Save failed - callback error")}else o.error("Save failed - no backend connection");Ne(!1)};return t?n.jsxs("div",{className:"studio-orchestrator-overlay animate-fadeIn",style:{position:"fixed",top:0,left:0,right:0,height:"100dvh",background:"linear-gradient(180deg, rgba(0,0,0,0.98) 0%, rgba(10,10,20,0.98) 100%)",zIndex:1e4,display:"flex",flexDirection:"column",overflow:"hidden"},children:[n.jsxs("div",{style:{padding:Y?"12px 16px":"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.5)",backdropFilter:"blur(10px)",position:"sticky",top:0,zIndex:10},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:Y?"40px":"48px",height:Y?"40px":"48px",borderRadius:"14px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.3)"},children:n.jsx(j,{size:Y?22:26,color:"white"})}),n.jsxs("div",{children:[n.jsx("h2",{style:{margin:0,fontSize:Y?"1.1rem":"1.4rem",fontWeight:"700"},children:"Studio Orchestrator"}),n.jsx("p",{style:{margin:0,fontSize:Y?"0.75rem":"0.8rem",color:"var(--text-secondary)"},children:"4 AI Generators â€¢ One Unified Pipeline"})]})]}),n.jsx("button",{onClick:()=>{!Object.values(Gi).some(Boolean)&&!Object.values(Ji).some(Boolean)||bi?a?.():hi(!0)},style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"12px",width:Y?"38px":"44px",height:Y?"38px":"44px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},children:n.jsx(w,{size:20,color:"white"})})]}),n.jsxs("div",{className:"orchestrator-scroll-container",style:{flex:1,padding:Y?"12px 10px":"16px",maxWidth:"1200px",margin:"0 auto",width:"100%",overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch"},children:[n.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:Y?"10px":"16px",marginBottom:Y?"12px":"20px",border:"1px solid rgba(255,255,255,0.06)"},children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:Y?"8px":"12px",marginBottom:Y?"12px":"16px"},children:[n.jsx("textarea",{value:K,onChange:e=>Z(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),et())},placeholder:"Describe your song idea, vibe, or concept...",rows:Y?3:2,style:{width:"100%",padding:Y?"10px 12px":"16px 20px",borderRadius:"12px",background:"rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.15)",color:"white",fontSize:Y?"0.9rem":"1rem",outline:"none",minHeight:Y?"100px":"56px",resize:"none",fontFamily:"inherit",lineHeight:"1.5"}}),n.jsxs("div",{style:{display:"flex",gap:"10px"},children:[n.jsx("button",{onClick:Le?()=>{Hi.current&&Hi.current.stop(),He(!1)}:()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const i=window.SpeechRecognition||window.webkitSpeechRecognition;if(!i||"function"!=typeof i)return void o.error("Voice recognition not supported");try{Hi.current=new i,Hi.current.continuous=!1,Hi.current.interimResults=!0,Hi.current.onresult=e=>{const i=Array.from(e.results).map(e=>e[0].transcript).join("");Z(i)},Hi.current.onend=()=>He(!1),Hi.current.onerror=e=>{He(!1)},Hi.current.start(),He(!0),o.success("Listening...")}catch(e){o.error("Voice input failed")}}else o.error("Speech recognition not supported")},style:{padding:"14px 16px",borderRadius:"12px",background:Le?"rgba(239, 68, 68, 0.2)":"rgba(255,255,255,0.05)",border:"1px solid "+(Le?"#ef4444":"rgba(255,255,255,0.15)"),color:Le?"#ef4444":"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"52px",minHeight:"52px"},title:Le?"Stop Listening":"Voice Input",children:Le?n.jsx(k,{size:22}):n.jsx(S,{size:22})}),n.jsx("button",{onClick:et,disabled:Re||!K.trim()||0===Object.values(Ce).filter(Boolean).length,style:{flex:1,padding:"14px 24px",borderRadius:"12px",background:Re?"rgba(139, 92, 246, 0.3)":"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",fontSize:"1rem",cursor:Re||!K.trim()||0===Object.values(Ce).filter(Boolean).length?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",opacity:K.trim()&&0!==Object.values(Ce).filter(Boolean).length?1:.5,boxShadow:Re?"none":"0 4px 20px rgba(139, 92, 246, 0.4)",minHeight:"52px"},children:Re?n.jsxs(n.Fragment,{children:[n.jsx(z,{size:20,className:"spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(C,{size:20}),"Generate ",4===Object.values(Ce).filter(Boolean).length?"All":`${Object.values(Ce).filter(Boolean).length} Output${1!==Object.values(Ce).filter(Boolean).length?"s":""}`]})})]})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center",paddingBottom:"4px"},children:[n.jsxs("button",{onClick:()=>yi(!ui),style:{padding:"8px 14px",borderRadius:"10px",background:ui?"rgba(139, 92, 246, 0.2)":"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:ui?"#a855f7":"var(--text-secondary)",fontSize:"0.8rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",minHeight:"40px",whiteSpace:"nowrap"},children:[n.jsx(I,{size:14}),ui?"Hide Ideas":"Need Ideas?"]}),ui&&["Summer love in Brooklyn","Trap anthem about success","Lo-fi study beats","Emotional R&B ballad"].map((e,i)=>n.jsx("button",{onClick:()=>{Z(e),yi(!1)},style:{padding:"10px 16px",borderRadius:"20px",background:"rgba(139, 92, 246, 0.15)",border:"1px solid rgba(139, 92, 246, 0.3)",color:"rgba(255,255,255,0.8)",fontSize:"0.85rem",cursor:"pointer",whiteSpace:"nowrap",minHeight:"40px"},children:e},i))]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"10px",marginBottom:"20px"},children:[[{label:"Language",value:q,setter:X,options:["English","Spanish","French","German","Japanese","Korean","Portuguese"]},{label:"Genre",value:te,setter:re,options:["Modern Hip-Hop","90s Boom Bap","Trap","R&B / Soul","Pop","Rock","Electronic","Lo-Fi"]},{label:"Project BPM",value:Se,setter:ze,options:[70,80,90,100,110,120,130,140,150,160]},{label:"Timing Mode",value:le?"Bars":"Seconds",setter:e=>de("Bars"===e),options:["Bars","Seconds"]},{label:"Musical Bars",value:ae,setter:se,options:[4,8,16,32,64],hidden:!le},{label:"Target Duration",value:ne,setter:oe,options:[15,30,60,90,120,180,240,300],hidden:le},{label:"Structure",value:me,setter:he,options:["Full Song","Radio Edit","Extended","Loop","Intro","Verse","Chorus","Outro"]},{label:"AI Model",value:ce,setter:pe,options:["Gemini 2.0 Flash","Gemini 2.0 Pro (Exp)","Gemini 1.5 Pro"]},{label:"Mood",value:ue,setter:ye,options:["Chill","Energetic","Dark","Happy","Epic","Mysterious","Dreamy"]},{label:"Music Engine",value:ge,setter:xe,options:["Beat Lab (MusicGen)","Mureaka","Riffusion (Visual)","Stability Pro","Uberduck","Auto-Selection"]},{label:"Stem Mode",value:we,setter:ke,options:["Full Mix","Drums Only","No Drums","Melody Only","Bass Only"]}].filter(e=>!e.hidden).map(e=>n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"6px",textTransform:"uppercase",fontWeight:"600",letterSpacing:"0.05em"},children:e.label}),n.jsx("select",{value:"Music Engine"===e.label?"music-gpt"===ge?"Beat Lab (MusicGen)":"mureka"===ge?"Mureaka":"riffusion"===ge?"Riffusion (Visual)":"stability"===ge?"Stability Pro":"uberduck"===ge?"Uberduck":"Auto-Selection":e.value,onChange:i=>{const t=i.target.value;"Music Engine"===e.label?xe("Beat Lab (MusicGen)"===t?"music-gpt":"Mureaka"===t?"mureka":"Riffusion (Visual)"===t?"riffusion":"Stability Pro"===t?"stability":"Uberduck"===t?"uberduck":"auto"):["Musical Bars","Project BPM","Target Duration"].includes(e.label)?e.setter(parseInt(t)):e.setter(t)},style:{width:"100%",padding:"12px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none",minHeight:"48px",WebkitAppearance:"none",appearance:"none",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23888' d='M6 8L1 3h10z'/%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:e.options.map(e=>n.jsx("option",{value:e,style:{background:"#1a1a1a"},children:e},e))})]},e.label)),n.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[n.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"6px",textTransform:"uppercase",fontWeight:"600"},children:"High Musicality (Udio)"}),n.jsxs("button",{onClick:()=>fe(!be),style:{height:"48px",borderRadius:"10px",background:be?"rgba(139, 92, 246, 0.2)":"rgba(0,0,0,0.4)",border:"1px solid "+(be?"#8b5cf6":"rgba(255,255,255,0.1)"),color:be?"#a78bfa":"var(--text-secondary)",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},children:[n.jsx(R,{size:14}),be?"Enabled":"Disabled"]})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[n.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"6px",textTransform:"uppercase",fontWeight:"600"},children:"Generation Seed"}),n.jsxs("div",{style:{display:"flex",gap:"4px"},children:[n.jsx("input",{type:"number",value:ve,onChange:e=>je(parseInt(e.target.value)),style:{flex:1,height:"48px",padding:"0 12px",borderRadius:"10px 0 0 10px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.8rem",outline:"none"},placeholder:"Random"}),n.jsx("button",{onClick:()=>je(Math.floor(1e6*Math.random())),style:{padding:"0 12px",borderRadius:"0 10px 10px 0",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderLeft:"none",color:"var(--text-secondary)",cursor:"pointer"},title:"Randomize Seed",children:n.jsx($,{size:14})})]})]})]}),n.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:Y?"16px":"20px",border:"1px solid rgba(255,255,255,0.06)",marginBottom:"24px"},children:[n.jsx("div",{style:{display:"flex",alignItems:Y?"flex-start":"center",justifyContent:"space-between",gap:"8px",marginBottom:"16px",flexWrap:"wrap",flexDirection:Y?"column":"row"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(D,{size:Y?14:16,color:"var(--text-secondary)"}),n.jsx("span",{style:{fontSize:Y?"0.75rem":"0.8rem",color:"var(--text-secondary)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Choose Your Generators"}),n.jsxs("span",{style:{padding:"2px 8px",borderRadius:"10px",background:"rgba(139, 92, 246, 0.3)",color:"#a78bfa",fontSize:"0.7rem",fontWeight:"600"},children:[Object.values(Ce).filter(Boolean).length," / 4 active"]})]})}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px"},children:Zi.map(i=>n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"6px"},children:[n.jsx("label",{style:{fontSize:"0.7rem",color:i.color,fontWeight:"500"},children:i.title}),Ce[i.key]&&n.jsx("div",{title:`${e.find(e=>e.id===Ce[i.key])?.name} Capabilities:\nâ€¢ ${e.find(e=>e.id===Ce[i.key])?.capabilities?.join("\nâ€¢ ")}`,style:{color:"rgba(255,255,255,0.3)",cursor:"help"},children:n.jsx(A,{size:12})})]}),n.jsxs("select",{value:Ce[i.key]||"",onChange:e=>Ie(t=>({...t,[i.key]:e.target.value||null})),style:{width:"100%",padding:"10px 12px",borderRadius:"10px",background:Ce[i.key]?"rgba(0,0,0,0.4)":"rgba(0,0,0,0.2)",border:"1px solid "+(Ce[i.key]?i.color+"60":"rgba(255,255,255,0.1)"),color:Ce[i.key]?"white":"var(--text-muted)",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:[n.jsx("option",{value:"",style:{background:"#1a1a1a"},children:"â€” None â€”"}),e.filter(e=>"Pro"===J||("Monthly"===J?"free"===e.tier||"monthly"===e.tier:"free"===e.tier)).filter(e=>"lyrics"===i.key?"Music Creation"===e.category||"ghost"===e.id:"audio"===i.key?"Pro Producer"===e.category||"Music Creation"===e.category||"beat"===e.id:"visual"===i.key?"Visual Identity"===e.category||"album"===e.id:"video"!==i.key||("Visual Identity"===e.category||"video-creator"===e.id)).map(e=>n.jsxs("option",{value:e.id,style:{background:"#1a1a1a"},disabled:e.comingSoon,children:[e.name," ",e.comingSoon?"(Coming Soon)":e.isBeta?"(Beta)":""]},e.id))]})]},i.key))})]}),n.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:Y?"12px":"16px",marginBottom:"24px",border:"1px solid rgba(168, 85, 247, 0.15)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:Mi?"16px":"0"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(T,{size:18,color:"#a855f7"}),n.jsxs("div",{children:[n.jsx("h3",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"white"},children:"Studio DNA Vault"}),!Mi&&n.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"rgba(255,255,255,0.4)"},children:Di||Bi||Pi||Ti?"Persistent references active":"No reference files attached"})]})]}),n.jsxs("button",{onClick:()=>Ni(!Mi),style:{padding:"6px 12px",background:"rgba(168, 85, 247, 0.15)",border:"1px solid rgba(168, 85, 247, 0.3)",borderRadius:"8px",fontSize:"0.8rem",color:"#a855f7",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[Mi?"Close Vault":"Manage DNA",Mi?n.jsx(U,{size:14}):n.jsx(P,{size:14})]})]}),Mi&&n.jsxs("div",{style:{display:"grid",gridTemplateColumns:Y?"1fr":"repeat(2, 1fr)",gap:"10px",marginTop:"12px",animation:"fadeIn 0.3s ease"},children:[n.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(W,{size:18,color:"#ec4899"}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Visual DNA"}),n.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Di?"Reference Active":"No Image"})]})]}),n.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Di&&n.jsx("button",{onClick:()=>Wi(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:n.jsx(w,{size:14})}),n.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[n.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:e=>nt("visual",e)}),Oi.visual?n.jsx(z,{size:12,className:"spin"}):"Upload"]})]})]}),n.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(R,{size:18,color:"#06b6d4"}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Audio DNA"}),n.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Bi?"Ref Active":"No Beat"})]})]}),n.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Bi&&n.jsx("button",{onClick:()=>Ai(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:n.jsx(w,{size:14})}),n.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[n.jsx("input",{type:"file",accept:"audio/*",style:{display:"none"},onChange:e=>nt("audio",e)}),Oi.audio?n.jsx(z,{size:12,className:"spin"}):"Upload"]})]})]}),n.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(V,{size:18,color:"#a855f7"}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Lyrics DNA"}),n.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Pi?"Text Ready":"No Context"})]})]}),n.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Pi&&n.jsx("button",{onClick:()=>Vi(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:n.jsx(w,{size:14})}),n.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[n.jsx("input",{type:"file",style:{display:"none"},onChange:e=>nt("lyrics",e)}),Oi.lyrics?n.jsx(z,{size:12,className:"spin"}):"Upload"]})]})]}),n.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(B,{size:18,color:"#f59e0b"}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Seed DNA"}),n.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Ti?"Profile Active":"No Seed"})]})]}),n.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Ti&&n.jsx("button",{onClick:()=>Ui(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:n.jsx(w,{size:14})}),n.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[n.jsx("input",{type:"file",style:{display:"none"},onChange:e=>nt("video",e)}),Oi.video?n.jsx(z,{size:12,className:"spin"}):"Upload"]})]})]})]}),!Mi&&(Di||Bi||Pi||Ti)&&n.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"10px"},children:[Di&&n.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(236, 72, 153, 0.1)",color:"#ec4899",borderRadius:"6px",border:"1px solid rgba(236, 72, 153, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(W,{size:10})," Visual DNA"]}),Bi&&n.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(6, 182, 212, 0.1)",color:"#06b6d4",borderRadius:"6px",border:"1px solid rgba(6, 182, 212, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(R,{size:10})," Audio DNA"]}),Pi&&n.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(168, 85, 247, 0.1)",color:"#a855f7",borderRadius:"6px",border:"1px solid rgba(168, 85, 247, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(V,{size:10})," Lyrics DNA"]}),Ti&&n.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b",borderRadius:"6px",border:"1px solid rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(B,{size:10})," Seed DNA"]})]})]}),n.jsx("div",{style:{padding:"8px",background:De.lyrics?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",borderRadius:"8px",marginBottom:"12px",fontSize:"0.75rem",color:De.lyrics?"#10b981":"#ef4444"},children:De.lyrics?"âœ… Lyrics ready - Create Vocal button should appear below":"âš ï¸ No lyrics yet - Click Generate above first"}),De.lyrics&&n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(139, 92, 246, 0.05) 100%)",borderRadius:"16px",padding:"24px",border:"1px solid rgba(139, 92, 246, 0.4)",marginBottom:"24px"},children:[n.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:n.jsxs("div",{children:[n.jsx("h4",{style:{margin:"0 0 6px",fontSize:"1rem",fontWeight:"700",color:"#8b5cf6"},children:"ðŸŽ¤ Ghostwriter Vocal Performance"}),n.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Generate audio of the lyrics being recited or sung by different voice types"})]})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[n.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[n.jsx("div",{style:{fontSize:"0.7rem",color:"#8b5cf6",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px"},children:"ðŸ“ Lyrics Text"}),n.jsx("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"12px",maxHeight:"150px",overflowY:"auto",fontSize:"0.85rem",lineHeight:"1.6",color:"rgba(255,255,255,0.85)",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:De.lyrics})]}),n.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(139, 92, 246, 0.3)",display:"flex",flexDirection:"column"},children:[n.jsx("div",{style:{fontSize:"0.7rem",color:"#8b5cf6",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px"},children:"ðŸŽµ Vocal Audio"}),Be.lyricsVocal?n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",flex:1},children:[n.jsx("audio",{src:_i(Be.lyricsVocal),controls:!0,style:{width:"100%",height:"38px",borderRadius:"8px"}}),n.jsxs("button",{onClick:()=>{const e=document.createElement("div");e.innerHTML=`\n                          <div style="\n                            position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n                            background: rgba(0,0,0,0.9); z-index: 9999;\n                            display: flex; align-items: center; justify-content: center;\n                            padding: 20px;\n                          " onclick="if(event.target === this) this.remove();">\n                            <div style="\n                              background: rgba(0,0,0,0.8); border-radius: 20px;\n                              padding: 24px; max-width: 500px; width: 100%;\n                              border: 1px solid rgba(139, 92, 246, 0.4);\n                            " onclick="event.stopPropagation();">\n                              <div style="\n                                font-weight: 700; margin-bottom: 16px; color: #8b5cf6;\n                              ">\n                                ðŸŽ§ Vocal Audio Player\n                              </div>\n                              <audio \n                                src="${Be.lyricsVocal}"\n                                controls\n                                autoplay\n                                style="width: 100%; height: 50px; border-radius: 10px;"\n                              />\n                              <div style="\n                                margin-top: 16px; font-size: 0.85rem;\n                                color: var(--text-secondary);\n                              ">\n                                Voice Style: <strong>${Fe}</strong>\n                              </div>\n                            </div>\n                          </div>\n                        `,document.body.appendChild(e),e.onclick=i=>i.target===e&&e.remove()},style:{padding:"10px 16px",borderRadius:"8px",background:"rgba(139, 92, 246, 0.3)",border:"1px solid rgba(139, 92, 246, 0.5)",color:"#8b5cf6",fontWeight:"600",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[n.jsx(O,{size:14}),"Fullscreen"]})]}):n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"80px",color:"var(--text-secondary)",fontSize:"0.85rem",textAlign:"center"},children:'No audio yet â€¢ Click "Create Vocal" below'})]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[n.jsxs("select",{value:"cloned"===Fe&&wi?Ci.find(e=>e.url===wi)?`saved-${Ci.find(e=>e.url===wi).id}`:"cloned":Fe,onChange:e=>{const i=e.target.value;if(i.startsWith("saved-")){const e=i.replace("saved-",""),t=Ci.find(i=>i.id===e);t&&(ki(t.url),Ge("cloned"))}else Ge(i)},style:{padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(139, 92, 246, 0.5)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:[n.jsxs("optgroup",{label:"ðŸ”¥ AI Rappers (Suno/Bark)",children:[n.jsx("option",{value:"rapper",children:"ðŸŽ¤ Male Rapper"}),n.jsx("option",{value:"rapper-female",children:"ðŸ’œ Female Rapper"})]}),n.jsxs("optgroup",{label:"ðŸŽµ AI Singers",children:[n.jsx("option",{value:"singer",children:"ðŸŽ¤ Male Singer (R&B/Soul)"}),n.jsx("option",{value:"singer-female",children:"ðŸ’« Female Singer (Pop/R&B)"})]}),n.jsxs("optgroup",{label:"ðŸ—£ï¸ Narration",children:[n.jsx("option",{value:"narrator",children:"ðŸ“¢ Narrator (Deep Voice)"}),n.jsx("option",{value:"spoken",children:"ðŸ’¬ Spoken Word"})]}),n.jsxs("optgroup",{label:"ðŸ§¬ Voice Cloning",children:[n.jsxs("option",{value:"cloned",disabled:!wi,children:["âœ¨ Cloned Voice ",!wi&&"(Upload sample first)"]}),Ci.length>0&&n.jsx("optgroup",{label:"ðŸ—„ï¸ Saved Voices",children:Ci.map(e=>n.jsxs("option",{value:`saved-${e.id}`,children:["ðŸ‘¤ ",e.name||"Unnamed Voice"]},e.id))})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("input",{type:"file",id:"voice-sample-upload",accept:"audio/*",onChange:async e=>{const t=e.target.files[0];if(t)if(t.size>10485760)o.error("File too large (max 10MB)");else{zi(!0),o.loading("Uploading voice sample...",{id:"voice-upload"});try{const e=await Xi(),r=new FileReader;r.readAsDataURL(t),r.onload=async()=>{try{const a=r.result,d=await fetch(`${i}/api/upload-asset`,{method:"POST",headers:e,body:JSON.stringify({data:a,fileName:`voice-sample-${Date.now()}-${t.name.replace(/\s+/g,"-")}`,mimeType:t.type||"audio/wav",assetType:"audio"})}),p=await d.json();if(!d.ok||!p.url)throw new Error(p.error||"Upload failed");if(ki(p.url),Ge("cloned"),o.success('Voice sample uploaded! Model set to "Cloned Voice"',{id:"voice-upload"}),l.currentUser)try{const e=c(s,"users",l.currentUser?.uid);await y(e,{voiceSampleUrl:p.url,lastVoiceUpdate:Date.now()});const i={url:p.url,name:t.name.replace(/\.[^/.]+$/,""),createdAt:m(),type:"cloned"},r=await h(g(s,"users",l.currentUser?.uid,"voices"),i);Ii(e=>[{id:r.id,...i},...e]),o.success("Voice saved to library")}catch(n){}}catch(a){o.error("Failed to upload sample",{id:"voice-upload"})}finally{zi(!1)}},r.onerror=()=>{o.error("Failed to read file"),zi(!1)}}catch(r){o.error("Upload failed",{id:"voice-upload"}),zi(!1)}}},style:{display:"none"}}),n.jsxs("button",{onClick:()=>document.getElementById("voice-sample-upload").click(),disabled:Si,style:{padding:"10px 14px",borderRadius:"10px",background:wi?"rgba(34, 197, 94, 0.1)":"rgba(255, 255, 255, 0.05)",border:wi?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",color:wi?"#22c55e":"white",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[Si?n.jsx(z,{size:16,className:"spin"}):n.jsx(S,{size:16}),wi?"Voice Sample Attached âœ“":"Upload Voice Sample"]}),wi&&n.jsx("button",{onClick:()=>{ki(null),"cloned"===Fe&&Ge("rapper")},style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"0.8rem",padding:"4px"},title:"Remove sample",children:n.jsx(w,{size:14})})]}),Ci.length>0&&n.jsxs("div",{style:{marginTop:"8px",background:"rgba(255,255,255,0.02)",borderRadius:"8px",padding:"10px"},children:[n.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",marginBottom:"6px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"My Voice Library"}),n.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Ci.map(e=>n.jsxs("div",{onClick:()=>{ki(e.url),Ge("cloned"),o.success(`Voice "${e.name}" loaded`)},style:{background:wi===e.url?"rgba(139, 92, 246, 0.2)":"rgba(255,255,255,0.05)",border:wi===e.url?"1px solid #8b5cf6":"1px solid rgba(255,255,255,0.1)",borderRadius:"16px",padding:"4px 10px",fontSize:"0.75rem",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[n.jsx(E,{size:10}),e.name||"Voice",n.jsx(w,{size:12,onClick:async i=>{if(i.stopPropagation(),window.confirm("Delete this voice from your library?"))try{await d(c(s,"users",l.currentUser?.uid,"voices",e.id)),Ii(i=>i.filter(i=>i.id!==e.id)),wi===e.url&&(ki(null),Ge("rapper")),o.success("Voice deleted")}catch(t){o.error("Failed to delete voice")}},onMouseEnter:e=>e.currentTarget.style.color="#ef4444",onMouseLeave:e=>e.currentTarget.style.color="inherit",style:{marginLeft:"4px",opacity:.5,cursor:"pointer"}})]},e.id))})]}),("rapper"===Fe||"rapper-female"===Fe)&&n.jsx("select",{value:Je,onChange:e=>Ye(e.target.value),style:{padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(236, 72, 153, 0.5)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:n.jsxs("optgroup",{label:"ðŸ”¥ Rap Flow",children:[n.jsx("option",{value:"aggressive",children:"ðŸ’¥ Aggressive"}),n.jsx("option",{value:"melodic",children:"ðŸŽµ Melodic"}),n.jsx("option",{value:"trap",children:"ðŸ”¥ Trap (Triplets)"}),n.jsx("option",{value:"drill",children:"ðŸ‡¬ðŸ‡§ Drill (UK)"}),n.jsx("option",{value:"boom-bap",children:"ðŸ“» Boom-Bap"}),n.jsx("option",{value:"fast",children:"âš¡ Fast Flow"}),n.jsx("option",{value:"chill",children:"ðŸ˜Ž Chill"}),n.jsx("option",{value:"hype",children:"ðŸ”Š Hype"})]})}),("singer"===Fe||"singer-female"===Fe)&&n.jsx("select",{value:_e,onChange:e=>Ke(e.target.value),style:{padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(139, 92, 246, 0.5)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:n.jsxs("optgroup",{label:"ðŸŽ¶ Genre",children:[n.jsx("option",{value:"r&b",children:"ðŸ’œ R&B / Soul"}),n.jsx("option",{value:"pop",children:"ðŸŒŸ Pop"}),n.jsx("option",{value:"hip-hop",children:"ðŸ”¥ Hip-Hop"}),n.jsx("option",{value:"soul",children:"ðŸŽ· Gospel/Soul"})]})}),n.jsx("button",{onClick:()=>{rt()},disabled:Ze,style:{padding:"10px 20px",borderRadius:"10px",background:Ze?"rgba(139, 92, 246, 0.3)":"rgba(139, 92, 246, 0.5)",border:"1px solid rgba(139, 92, 246, 0.6)",color:"#8b5cf6",fontWeight:"600",fontSize:"0.9rem",cursor:Ze?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:Ze?.7:1},children:Ze?n.jsxs(n.Fragment,{children:[n.jsx(z,{size:16,className:"spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(M,{size:16}),"Create Vocal"]})}),n.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(De.lyrics),o.success("Lyrics copied!")},style:{padding:"10px 16px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",fontWeight:"500",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx(N,{size:14}),"Copy Lyrics"]}),Be.lyricsVocal&&Be.lyricsVocal.startsWith("data:audio")&&n.jsxs("button",{onClick:()=>{const e=document.createElement("a");e.href=Be.lyricsVocal;const i=Be.lyricsVocal.includes("audio/wav")?"wav":"mp3";e.download=`${K||"lyrics"}-${Fe}.${i}`,e.click()},style:{padding:"10px 16px",borderRadius:"10px",background:"rgba(34, 197, 94, 0.15)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#22c55e",fontWeight:"600",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx(L,{size:14}),"Download Audio"]})]})]}),n.jsx("div",{className:"generator-grid-unified",style:{gap:Y?"0.75rem":"1rem",touchAction:"pan-y"},children:Zi.map(e=>n.jsx(ee,{slot:e.key,agentId:Ce[e.key],icon:e.icon,title:e.title,subtitle:e.subtitle,color:e.color,output:De[e.key],isLoading:Re&&Ce[e.key],mediaType:e.mediaType,mediaUrl:"audio"===e.key?Be.audio:"lyrics"===e.key?Be.vocals||Be.lyricsVocal:"visual"===e.key?Be.image:"video"===e.key?Be.video:null,onGenerateMedia:"audio"===e.key?tt:"lyrics"===e.key?rt:"visual"===e.key?at:"video"===e.key?lt:null,isGeneratingMedia:"audio"===e.key?Te.audio:"lyrics"===e.key?Te.vocals:"visual"===e.key?Te.image:"video"===e.key&&Te.video,onRegenerate:()=>it(e.key),onEdit:i=>gt(e.key,i),onDelete:()=>pt(e.key),onDownload:()=>ct(e.key),onSpeak:()=>qi(De[e.key],e.key),isSpeaking:Pe===e.key,onMaximize:()=>Xe(e.key),onUploadDna:"visual"===e.key?e=>nt("visual",e):"audio"===e.key?e=>nt("audio",e):"video"===e.key?e=>nt("video",e):"lyrics"===e.key?e=>nt("lyrics",e):null,dnaUrl:"visual"===e.key?Di:"audio"===e.key?Bi:"video"===e.key?Ti:"lyrics"===e.key?Pi:null,isUploadingDna:Oi[e.key],onClearDna:()=>{"visual"===e.key&&Wi(null),"audio"===e.key&&Ai(null),"video"===e.key&&Ui(null),"lyrics"===e.key&&Vi(null)}},e.key))}),n.jsx(ie,{outputs:De,mediaUrls:Be,songIdea:K,finalMixPreview:ti,creatingFinalMix:ei,musicVideoUrl:ai,generatingMusicVideo:ni,handleGenerateProfessionalMusicVideo:async()=>{if(!ni)if(Be.audio&&De.video){oi(!0),o.loading("ðŸŽ¬ Syncing audio with video beats (~2-3 min)...",{id:"prof-video"});try{const e=await Xi(),t=e.Authorization?"/api/generate-synced-video":"/api/generate-synced-video-test",r=await fetch(`${i}${t}`,{method:"POST",headers:{"Content-Type":"application/json",...e},body:JSON.stringify({audioUrl:Be.audio,videoPrompt:De.video,songTitle:K||"Untitled",style:te||"cinematic",duration:"Extended"===me?180:"Radio Edit"===me?150:"Full Song"===me?90:60})}),n=await r.json();r.ok?n.videoUrl?(si(n.videoUrl),ti&&ri(e=>({...e,musicVideoUrl:n.videoUrl,musicVideoGenerated:!0,bpm:n.bpm,beatCount:n.beats})),o.success(`ðŸŽ¬ Image to video created! (${n.duration}s, ${n.bpm} BPM)`,{id:"prof-video"})):n.jobId&&o.success(`ðŸŽ¬ Video queued for processing (Job: ${n.jobId.substring(0,8)}...)`,{id:"prof-video"}):503===r.status?o.error("âŒ Video API not configured",{id:"prof-video"}):o.error(`âŒ ${n.error||"Video sync failed"}`,{id:"prof-video"})}catch(e){o.error("âŒ Image to video generation failed",{id:"prof-video"})}finally{oi(!1)}}else o.error("Need beat audio and video concept to sync")},handleCreateFinalMix:dt,handleCreateProject:xt,setShowPreviewModal:di,visualType:vi,setVisualType:ji,isMobile:Y,orchestratorBpm:Se})]}),Qe&&Zi.find(e=>e.key===Qe)&&n.jsx("div",{style:{position:"fixed",inset:0,background:"linear-gradient(180deg, rgba(0,0,0,0.98) 0%, rgba(10,10,20,0.98) 100%)",display:"flex",alignItems:Y?"flex-start":"center",justifyContent:"center",zIndex:2500,padding:Y?"10px":"20px",overflowY:"auto"},onClick:()=>Xe(null),children:n.jsxs("div",{style:{background:"rgba(10, 10, 20, 0.95)",borderRadius:Y?"16px":"24px",border:"1px solid rgba(255,255,255,0.1)",width:"100%",maxWidth:"800px",maxHeight:Y?"95vh":"90vh",overflow:"auto",display:"flex",flexDirection:"column",marginTop:Y?"10px":"0"},onClick:e=>e.stopPropagation(),children:[n.jsxs("div",{style:{padding:Y?"12px 16px":"16px 24px",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(10px)",zIndex:10},children:[n.jsx("h3",{style:{margin:0,fontSize:Y?"1rem":"1.2rem",fontWeight:"700"},children:Zi.find(e=>e.key===Qe)?.title}),n.jsxs("button",{onClick:()=>Xe(null),style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"10px",padding:Y?"6px 10px":"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",color:"#ef4444",fontWeight:"600",fontSize:Y?"0.8rem":"0.9rem",transition:"all 0.2s",minWidth:"36px",minHeight:"36px"},children:[n.jsx(w,{size:16}),!Y&&"Close"]})]}),n.jsx("div",{style:{padding:Y?"12px":"24px",flex:1,overflowY:"auto"},children:(()=>{const e=Zi.find(e=>e.key===Qe);return n.jsx(ee,{slot:e.key,agentId:Ce[e.key],icon:e.icon,title:e.title,subtitle:e.subtitle,color:e.color,output:De[e.key],isLoading:Re&&Ce[e.key],mediaType:e.mediaType,mediaUrl:"audio"===e.key?Be.audio:"lyrics"===e.key?Be.vocals:"visual"===e.key?Be.image:"video"===e.key?Be.video:null,onGenerateMedia:"audio"===e.key?tt:"lyrics"===e.key?rt:"visual"===e.key?at:"video"===e.key?lt:null,isGeneratingMedia:"audio"===e.key?Te.audio:"lyrics"===e.key?Te.vocals:"visual"===e.key?Te.image:"video"===e.key&&Te.video,onRegenerate:()=>it(e.key),onEdit:i=>gt(e.key,i),onDelete:()=>pt(e.key),onDownload:()=>ct(e.key),onSpeak:()=>qi(De[e.key],e.key),isSpeaking:Pe===e.key,onUploadDna:"visual"===e.key?e=>nt("visual",e):"audio"===e.key?e=>nt("audio",e):"video"===e.key?e=>nt("video",e):"lyrics"===e.key?e=>nt("lyrics",e):null,dnaUrl:"visual"===e.key?Di:"audio"===e.key?Bi:"video"===e.key?Ti:"lyrics"===e.key?Pi:null,isUploadingDna:Oi[e.key],onClearDna:()=>{"visual"===e.key&&Wi(null),"audio"===e.key&&Ai(null),"video"===e.key&&Ui(null),"lyrics"===e.key&&Vi(null)}},`max-${e.key}`)})()}),n.jsx("div",{style:{padding:Y?"12px":"16px 24px",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"center",background:"rgba(0,0,0,0.3)"},children:n.jsxs("button",{onClick:()=>Xe(null),style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(220, 38, 38, 0.2))",border:"1px solid rgba(239, 68, 68, 0.5)",borderRadius:"12px",padding:Y?"10px 20px":"14px 32px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer",color:"#ef4444",fontWeight:"700",fontSize:Y?"0.9rem":"1rem",transition:"all 0.2s",boxShadow:"0 4px 20px rgba(239, 68, 68, 0.2)"},children:[n.jsx(w,{size:20}),Y?"Close":"Close Preview"]})})]})}),Object.values(De).some(Boolean)&&n.jsxs("div",{style:{padding:"16px 24px",background:"rgba(0,0,0,0.8)",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",bottom:0,backdropFilter:"blur(10px)"},children:[n.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:[Object.values(De).filter(Boolean).length,"/4 generators complete â€¢",Object.values(Be).filter(Boolean).length," media assets"]}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsxs("button",{onClick:()=>{const e={project:K,timestamp:(new Date).toISOString(),outputs:De,settings:{language:q,style:te,model:ce}},i=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(i),r=document.createElement("a");r.href=t,r.download=`${K||"project"}-export.json`,r.click(),URL.revokeObjectURL(t),o.success("Exported!")},style:{padding:"12px 20px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(L,{size:16}),"Export"]}),n.jsxs("button",{onClick:()=>Ne(!0),style:{padding:"12px 28px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",fontSize:"1rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.4)"},children:[n.jsx(H,{size:18}),"Save to Project"]})]})]}),Me&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3},onClick:()=>Ne(!1),children:n.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:"24px",padding:"28px",maxWidth:"420px",width:"90%",border:"1px solid rgba(255,255,255,0.1)"},onClick:e=>e.stopPropagation(),children:[n.jsx("h3",{style:{margin:"0 0 20px",fontSize:"1.3rem",fontWeight:"700"},children:"Save to Project"}),n.jsx("input",{type:"text",value:Oe,onChange:e=>Ee(e.target.value),placeholder:K||"Project name...",style:{width:"100%",padding:"14px 18px",borderRadius:"12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"1rem",marginBottom:"20px",outline:"none"}}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsx("button",{onClick:()=>Ne(!1),className:"btn-pill glass",style:{flex:1,padding:"14px"},children:"Cancel"}),n.jsx("button",{onClick:xt,className:"btn-pill primary",style:{flex:1,padding:"14px",fontWeight:"700"},children:"Save Project"})]})]})}),gi&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001,padding:"20px"},children:n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",borderRadius:"20px",padding:"32px",border:"1px solid rgba(34, 197, 94, 0.4)",maxWidth:"450px",width:"100%",textAlign:"center",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[n.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"rgba(34, 197, 94, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:n.jsx(H,{size:32,color:"#22c55e"})}),n.jsx("h2",{style:{margin:"0 0 12px",fontSize:"1.4rem",fontWeight:"700",color:"white"},children:"Project Saved! ðŸŽ‰"}),n.jsxs("p",{style:{margin:"0 0 24px",color:"rgba(255,255,255,0.7)",fontSize:"0.95rem",lineHeight:"1.5"},children:['Your project "',Oe||K||"Untitled",'" has been saved with ',Object.values(De).filter(Boolean).length," assets."]}),n.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"12px",marginBottom:"24px",textAlign:"left"},children:[n.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.4)",fontWeight:"700",textTransform:"uppercase",marginBottom:"10px"},children:"Generated Content"}),Object.entries(De).filter(([e,i])=>null!==i).map(([e,i])=>{const t=Zi.find(i=>i.key===e);return n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px",fontSize:"0.85rem",color:"rgba(255,255,255,0.8)"},children:[n.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:t?.color||"#8b5cf6"}}),t?.title||e]},e)})]}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsx("button",{onClick:()=>{xi(!1),a?.()},className:"btn-pill glass",style:{flex:1,padding:"14px",fontWeight:"600"},children:"Go to Hub"}),n.jsxs("button",{onClick:()=>{xi(!1),di(!0)},className:"btn-pill primary",style:{flex:1,padding:"14px",fontWeight:"700",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[n.jsx(O,{size:18}),"Preview"]})]})]})}),mi&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002,padding:"20px"},children:n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",borderRadius:"20px",padding:"32px",border:"1px solid rgba(245, 158, 11, 0.4)",maxWidth:"450px",width:"100%",textAlign:"center",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[n.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:n.jsx(H,{size:32,color:"#f59e0b"})}),n.jsx("h2",{style:{margin:"0 0 12px",fontSize:"1.4rem",fontWeight:"700",color:"white"},children:"Save Your Work?"}),n.jsxs("p",{style:{margin:"0 0 24px",color:"rgba(255,255,255,0.7)",fontSize:"0.95rem",lineHeight:"1.5"},children:["You have ",Object.values(Gi).filter(Boolean).length+Object.values(Ji).filter(Boolean).length," unsaved creations. Would you like to save before leaving?"]}),n.jsxs("div",{style:{display:"flex",gap:"12px",flexDirection:"column"},children:[n.jsxs("button",{onClick:()=>{hi(!1),Ne(!0)},className:"btn-pill primary",style:{width:"100%",padding:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[n.jsx(H,{size:18}),"Save Project"]}),n.jsxs("div",{style:{display:"flex",gap:"12px",flexDirection:Y?"column-reverse":"row"},children:[n.jsx("button",{onClick:()=>{hi(!1)},className:"btn-pill glass",style:{flex:1,padding:"12px"},children:"Cancel"}),n.jsx("button",{onClick:()=>{hi(!1),a?.()},className:"btn-pill secondary",style:{flex:1,padding:"12px"},children:"Discard & Exit"})]})]})]})}),li&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:ci?"0":"20px"},onClick:e=>{e.target===e.currentTarget&&di(!1)},children:n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",borderRadius:ci?"0":"20px",padding:ci||Y?"16px":"24px",border:ci?"none":"1px solid rgba(148, 163, 184, 0.2)",width:"100%",maxWidth:ci?"100%":"900px",height:ci?"100%":"auto",maxHeight:ci?"100%":"90vh",overflowY:"auto",position:"relative",boxShadow:ci?"none":"0 25px 80px rgba(0,0,0,0.5)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",position:"sticky",top:0,background:ci?"rgba(15, 23, 42, 0.95)":"transparent",padding:ci?"8px 0 16px":"0",zIndex:5},children:[n.jsxs("h2",{style:{margin:0,fontSize:ci?"1.75rem":"1.5rem",fontWeight:"700",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(O,{size:ci?28:24,color:"#8b5cf6"}),"Preview All Creations"]}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsxs("button",{onClick:()=>pi(!ci),style:{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"10px",padding:"10px",cursor:"pointer",color:"white",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.85rem"},title:ci?"Minimize":"Maximize",children:[n.jsx(F,{size:18}),ci?"Minimize":"Maximize"]}),n.jsx("button",{onClick:()=>di(!1),style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"10px",padding:"10px",cursor:"pointer",color:"#ef4444"},children:n.jsx(w,{size:20})})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:Y?"1fr":"repeat(2, 1fr)",gap:Y?"16px":ci?"32px":"24px",marginBottom:"24px"},children:[n.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",borderRadius:"16px",padding:Y?"12px":"16px",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[n.jsxs("h3",{style:{margin:0,color:"#a78bfa",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(V,{size:18}),"Lyrics"]}),n.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:Gi.lyrics?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:Gi.lyrics?"#22c55e":"rgba(255,255,255,0.5)"},children:Gi.lyrics?"âœ“ Ready":"Pending"})]}),n.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"16px",minHeight:ci?"300px":"180px",maxHeight:ci?"400px":"200px",overflowY:"auto",fontSize:"0.9rem",lineHeight:"1.7",color:Gi.lyrics?"rgba(255,255,255,0.9)":"rgba(255,255,255,0.4)",whiteSpace:"pre-wrap",wordBreak:"break-word",fontStyle:Gi.lyrics?"normal":"italic"},children:Gi.lyrics||"No lyrics generated yet. Use the Lyrics generator to create lyrics."})]}),n.jsxs("div",{style:{background:"rgba(6, 182, 212, 0.1)",borderRadius:"16px",padding:Y?"12px":"16px",border:"1px solid rgba(6, 182, 212, 0.3)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[n.jsxs("h3",{style:{margin:0,color:"#22d3ee",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(R,{size:18}),"Beat Audio"]}),n.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:Ji.audio?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:Ji.audio?"#22c55e":"rgba(255,255,255,0.5)"},children:Ji.audio?"âœ“ Ready":"Pending"})]}),n.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"16px",minHeight:"100px"},children:Ji.audio?n.jsxs(n.Fragment,{children:[n.jsx("audio",{controls:!0,style:{width:"100%",marginBottom:"12px"},src:_i(Ji.audio),onError:e=>{}}),n.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx(M,{size:14}),"Audio ready to play"]})]}):n.jsx("div",{style:{textAlign:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem",padding:"24px",fontStyle:"italic"},children:"No audio generated yet. Generate a beat to preview audio."})})]}),n.jsxs("div",{style:{background:"rgba(236, 72, 153, 0.1)",borderRadius:"16px",padding:Y?"12px":"16px",border:"1px solid rgba(236, 72, 153, 0.3)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[n.jsxs("h3",{style:{margin:0,color:"#f472b6",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(W,{size:18}),"Cover Visual"]}),n.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:Ji.image?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:Ji.image?"#22c55e":"rgba(255,255,255,0.5)"},children:Ji.image?"âœ“ Ready":"Pending"})]}),n.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"8px",aspectRatio:"1",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:Ji.image?n.jsx("img",{src:Yi(Ji.image),alt:"Cover Art",style:{width:"100%",height:"100%",borderRadius:"8px",objectFit:"cover"},onError:e=>{e.target.style.display="none"}}):n.jsx("div",{style:{textAlign:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem",fontStyle:"italic"},children:"No image generated yet"})})]}),n.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",borderRadius:"16px",padding:Y?"12px":"16px",border:"1px solid rgba(245, 158, 11, 0.3)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[n.jsxs("h3",{style:{margin:0,color:"#fbbf24",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(B,{size:18}),"Video"]}),n.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:Ji.video?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:Ji.video?"#22c55e":"rgba(255,255,255,0.5)"},children:Ji.video?"âœ“ Ready":"Pending"})]}),n.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"8px",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:Ji.video?n.jsx("video",{src:Ki(Ji.video),controls:!0,style:{width:"100%",height:"100%",borderRadius:"8px",objectFit:"contain",backgroundColor:"#000"},onError:e=>{}}):n.jsx("div",{style:{textAlign:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem",fontStyle:"italic"},children:"No video generated yet"})})]})]}),n.jsx("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(148, 163, 184, 0.2)",marginBottom:"20px"},children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",fontSize:"0.9rem"},children:[n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Lyrics"}),n.jsx("div",{style:{fontWeight:"700",color:"#a78bfa",fontSize:"1.1rem"},children:Gi.lyrics?`${Gi.lyrics.length} chars`:"â€”"})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Audio"}),n.jsx("div",{style:{fontWeight:"700",color:"#22d3ee",fontSize:"1.1rem"},children:Ji.audio?"âœ“ Ready":"â€”"})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Visual"}),n.jsx("div",{style:{fontWeight:"700",color:"#f472b6",fontSize:"1.1rem"},children:Ji.image?"âœ“ Ready":"â€”"})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Video"}),n.jsx("div",{style:{fontWeight:"700",color:"#fbbf24",fontSize:"1.1rem"},children:Ji.video?"âœ“ Ready":"â€”"})]})]})}),n.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[n.jsx("button",{onClick:()=>di(!1),style:{flex:1,minWidth:"120px",padding:"14px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",fontWeight:"600",cursor:"pointer",fontSize:"0.95rem"},children:"Close Preview"}),n.jsxs("button",{onClick:()=>{di(!1),Ne(!0)},style:{flex:1,minWidth:"140px",padding:"14px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",cursor:"pointer",fontSize:"0.95rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[n.jsx(H,{size:18}),"Save Project"]}),n.jsx("button",{onClick:()=>{di(!1),dt()},disabled:ei||!Object.values(Gi).some(Boolean),style:{flex:1,minWidth:"140px",padding:"14px",borderRadius:"12px",background:ei||!Object.values(Gi).some(Boolean)?"rgba(34, 197, 94, 0.2)":"rgba(34, 197, 94, 0.5)",border:"1px solid rgba(34, 197, 94, 0.6)",color:"#22c55e",fontWeight:"600",cursor:ei||!Object.values(Gi).some(Boolean)?"not-allowed":"pointer",fontSize:"0.95rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",opacity:Object.values(Gi).some(Boolean)?1:.5},children:ei?n.jsxs(n.Fragment,{children:[n.jsx(z,{size:16,className:"spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(j,{size:16}),"Final Mix"]})})]})]})}),n.jsx("style",{children:"\n        .loading-dots {\n          display: flex;\n          gap: 4px;\n        }\n        .loading-dots span {\n          width: 8px;\n          height: 8px;\n          border-radius: 50%;\n          animation: bounce 1.4s infinite ease-in-out both;\n        }\n        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }\n        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }\n        .loading-dots span:nth-child(3) { animation-delay: 0s; }\n        \n        @keyframes bounce {\n          0%, 80%, 100% { transform: scale(0); opacity: 0.5; }\n          40% { transform: scale(1); opacity: 1; }\n        }\n        \n        .spin {\n          animation: spin 1s linear infinite;\n        }\n        \n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        \n        .animate-fadeIn {\n          animation: fadeIn 0.3s ease;\n        }\n        \n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n      "})]}):null}export{te as default};
