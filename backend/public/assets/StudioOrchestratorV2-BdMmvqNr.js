const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PreviewModal-D0rMrHnc.js","assets/react-vendor-IsfVT3T0.js","assets/vendor-hWrmgIvi.js","assets/StudioView-CeB3RPi4.js","assets/index-Da8uZtno.js","assets/icons-CA7aqiD0.js","assets/index-CTbyPTcp.css","assets/firebase-BoaCQDlv.js","assets/firebase-C0fFBxBV.js"])))=>i.map(i=>d[i]);
import{A as e,B as i,_ as t}from"./index-Da8uZtno.js";import{r,j as o,z as n,R as a}from"./react-vendor-IsfVT3T0.js";import{d as s,a as l}from"./firebase-BoaCQDlv.js";import{f as d,u as c,x as p,y as g,z as x,A as u,h as m,B as y,C as b,g as h}from"./firebase-C0fFBxBV.js";import{f,a as v,b as j}from"./StudioView-CeB3RPi4.js";import{Z as w,X as S,aG as k,_ as z,x as C,S as I,r as R,M as D,ae as A,U as $,Q as T,$ as W,w as B,a5 as E,av as U,d as P,p as O,ad as V,a7 as N,J as M,ab as L,ac as H,N as F,a6 as G,am as Y,aH as _,aa as J,h as K,aI as q,m as X}from"./icons-CA7aqiD0.js";import"./vendor-hWrmgIvi.js";const Z=a.lazy(()=>t(()=>import("./PreviewModal-D0rMrHnc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Q=e=>{if(!e)return{intro:"",content:""};if("string"!=typeof e)return{intro:"",content:JSON.stringify(e,null,2)};const i=[/\[Verse/i,/\[Chorus/i,/\[Hook/i,/\[Bridge/i,/\[Intro/i,/\[Lyrics/i,/\[Style/i,/\[Hard/i,/\[Soft/i,/\[Fast/i,/\[Slow/i,/\(Verse/i,/\(Chorus/i,/Verse \d+:/i,/Chorus:/i,/Hook:/i,/^\s*Lyrics:\s*$/im,/Visual:/i,/Concept:/i,/Description:/i,/Beat Description:/i,/BPM:/i,/Storyboard:/i,/^\[[A-Z]/];let t=-1;for(const o of i){const i=e.match(o);i&&(-1===t||i.index<t)&&(t=i.index)}if(-1!==t)return{intro:e.substring(0,t).trim(),content:e.substring(t).trim()};const r=[/^Sure! Here (is|are) some (lyrics|content|a song).*:/i,/^Here (is|are) (the|your) (lyrics|song).*:/i,/^Okay, here's a concept.*:/i];for(const o of r)if(o.test(e)){const i=e.match(o);return{intro:i[0].trim(),content:e.substring(i[0].length).trim()}}if(e.includes("Summary:")){const i=e.split("Summary:");return{intro:i[0].trim(),content:("Summary: "+i[1]).trim()}}return{intro:"",content:e}},ee=({height:e="14px",width:i="100%",marginBottom:t="8px",opacity:r=.1})=>o.jsx("div",{style:{height:e,width:i,marginBottom:t,borderRadius:"4px",background:`linear-gradient(90deg, rgba(255,255,255,${r}) 25%, rgba(255,255,255,${2*r}) 50%, rgba(255,255,255,${r}) 75%)`,backgroundSize:"200% 100%",animation:"shimmer 2s infinite linear"}});function ie({slot:i,agentId:t,icon:s,title:l,subtitle:d,color:c,output:p,isLoading:g,mediaType:x=null,mediaUrl:u=null,onGenerateMedia:m=null,isGeneratingMedia:y=!1,onRegenerate:b=null,onEdit:h=null,onDelete:k=null,onDownload:z=null,onSpeak:I=null,isSpeaking:$=!1,onMaximize:B=null,onUploadDna:E=null,onClearDna:U=null,dnaUrl:P=null,isUploadingDna:M=!1}){const[G,K]=r.useState(!1),[q,X]=r.useState(!1),[ie,te]=r.useState(p||""),[re,oe]=r.useState(!1),[ne,ae]=r.useState(!1),{intro:se,content:le}=Q(p),de=ne?se:le,[ce,pe]=r.useState("undefined"!=typeof window&&window.innerWidth<768);r.useEffect(()=>{const e=()=>pe(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const ge=r.useRef(p);r.useEffect(()=>{ge.current!==p&&(ge.current=p,te(p||""))},[p]);const xe=e.find(e=>e.id===t);return o.jsxs("div",{className:"generator-card-unified",style:{minHeight:ce?"auto":"380px",padding:0,touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[o.jsx("div",{style:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:`radial-gradient(circle at center, ${c}08 0%, transparent 50%)`,pointerEvents:"none"}}),o.jsxs("div",{className:"generator-card-header",style:{padding:ce?"12px":"1.25rem",display:"flex",alignItems:"center",gap:ce?"10px":"12px",position:"relative",zIndex:1},children:[o.jsx("div",{className:"generator-icon-box",children:a.createElement(s,{size:ce?20:24})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("h3",{style:{margin:0,fontSize:ce?"0.95rem":"1.125rem",fontWeight:"700",color:"white",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l}),o.jsxs("p",{style:{margin:"2px 0 0",fontSize:"0.75rem",color:"var(--text-secondary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"6px"},children:[xe?.name||d,xe?.isBeta&&o.jsx("span",{style:{fontSize:"0.6rem",padding:"1px 5px",background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b",borderRadius:"4px",border:"1px solid rgba(245, 158, 11, 0.2)",fontWeight:"800",letterSpacing:"0.05em"},children:"BETA"})]})]}),E&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx("input",{type:"file",id:`dna-upload-${i}`,accept:"audio"===i?"audio/*":"lyrics"===i?".txt,.doc,.docx,.pdf":"image/*",onChange:E,style:{display:"none"}}),o.jsxs("button",{onClick:()=>document.getElementById(`dna-upload-${i}`).click(),disabled:M,title:`${"video"===i?"Image":i.charAt(0).toUpperCase()+i.slice(1)} DNA (Reference)`,style:{padding:"8px",borderRadius:"8px",background:P?`${c}20`:"rgba(255,255,255,0.05)",border:"1px solid "+(P?c+"80":"rgba(255,255,255,0.1)"),color:P?c:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s",fontSize:"0.7rem",fontWeight:"600"},children:[M?o.jsx(C,{size:14,className:"spin"}):o.jsx(w,{size:14}),P&&!ce&&"DNAâœ“"]}),P&&o.jsx("button",{onClick:e=>{e.stopPropagation(),U&&U()},style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer",padding:"4px"},children:o.jsx(S,{size:12})})]}),(g||y)&&o.jsxs("div",{style:{padding:"6px 12px",borderRadius:"20px",background:`${c}20`,display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx(C,{size:14,color:c,className:"spin"}),o.jsx("span",{style:{fontSize:"0.7rem",color:c,fontWeight:"600"},children:g?"Generating...":"Creating Media..."})]})]}),o.jsxs("div",{style:{flex:1,padding:ce?"10px 12px":"16px 20px",display:"flex",flexDirection:"column",gap:ce?"8px":"12px",position:"relative",zIndex:1},children:[!g&&p?o.jsx(o.Fragment,{children:q?o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsx("textarea",{value:ie,onChange:e=>te(e.target.value),style:{flex:1,padding:ce?"8px":"12px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:`1px solid ${c}40`,color:"white",fontSize:ce?"0.8rem":"0.9rem",lineHeight:"1.5",resize:"none",outline:"none",minHeight:"120px"},autoFocus:!0}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsx("button",{onClick:()=>X(!1),style:{flex:1,padding:"8px",borderRadius:"8px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer",fontSize:"0.8rem"},children:"Cancel"}),o.jsx("button",{onClick:()=>{h&&h(ie),X(!1)},style:{flex:1,padding:"8px",borderRadius:"8px",background:c,border:"none",color:"white",cursor:"pointer",fontWeight:"600",fontSize:"0.8rem"},children:"Save"})]})]}):o.jsxs("div",{onClick:()=>oe(!re),className:"lyrics-stanza-view",style:{background:"rgba(0,0,0,0.3)",borderRadius:ce?"8px":"12px",padding:ce?"10px":"16px",flex:1,overflow:"auto",cursor:"pointer",maxHeight:re?ce?"300px":"400px":ce?"150px":"280px",transition:"max-height 0.3s ease",position:"relative"},children:[se&&o.jsxs("button",{onClick:e=>{e.stopPropagation(),ae(!ne)},style:{position:"absolute",top:"8px",right:"8px",background:ne?c:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",padding:"4px 8px",fontSize:"0.65rem",fontWeight:"700",color:"white",zIndex:2,display:"flex",alignItems:"center",gap:"4px",boxShadow:ne?`0 2px 8px ${c}44`:"none"},children:[ne?o.jsx(O,{size:10}):o.jsx(R,{size:10}),ne?"SHOW LYRICS":"SHOW PROMPT"]}),o.jsx("p",{style:{fontSize:ce?"0.85rem":"1rem",lineHeight:ce?"1.5":"1.8",color:"rgba(255,255,255,0.95)",margin:0,whiteSpace:"pre-wrap",fontFamily:"'Georgia', 'Times New Roman', serif",letterSpacing:"0.01em"},children:de?.split(/\n\n+/).map((e,i)=>o.jsx("span",{style:{display:"block",marginBottom:i<de.split(/\n\n+/).length-1?"1em":0},children:e},i))})]})}):g?o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"12px",padding:"4px"},children:[o.jsx(ee,{width:"40%",height:"20px",marginBottom:"12px",opacity:.15}),o.jsx(ee,{width:"100%",height:"14px"}),o.jsx(ee,{width:"90%",height:"14px"}),o.jsx(ee,{width:"95%",height:"14px"}),o.jsx(ee,{width:"70%",height:"14px",marginBottom:"20px"}),o.jsx(ee,{width:"100%",height:"14px"}),o.jsx(ee,{width:"85%",height:"14px"}),o.jsx(ee,{width:"40%",height:"14px"}),o.jsxs("div",{style:{marginTop:"auto",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"12px",background:"rgba(255,255,255,0.02)",borderRadius:"8px"},children:[o.jsx(C,{size:16,className:"spin",color:c}),o.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:"500"},children:xe?.name?`${xe.name} is writing...`:"AI is thinking..."})]})]}):o.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"8px",color:"var(--text-secondary)",textAlign:"center",padding:"20px"},children:[a.createElement(s,{size:32,style:{opacity:.3}}),o.jsx("span",{style:{fontSize:"0.85rem",opacity:.5},children:'Click "Generate All" to create content'})]}),p&&x&&o.jsx("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"12px",border:`1px solid ${c}22`},children:u?o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:o.jsxs("div",{onClick:()=>K(!0),style:{cursor:"pointer",position:"relative",borderRadius:"8px",overflow:"hidden"},children:["audio"===x&&u&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"8px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:`linear-gradient(135deg, ${c}, ${c}88)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 12px ${c}44`},children:o.jsx(D,{size:18,color:"white"})}),o.jsx("audio",{src:f(u),controls:!0,style:{flex:1,height:"32px"}})]}),"image"===x&&u&&o.jsxs("div",{style:{position:"relative"},children:[o.jsx("img",{src:v(u),alt:"Generated",style:{width:"100%",maxHeight:"120px",objectFit:"cover",borderRadius:"8px"},onError:e=>{e.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="120" viewBox="0 0 200 120"%3E%3Crect fill="%231a1a2e" width="200" height="120"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23666" font-size="12" font-family="sans-serif"%3EImage unavailable%3C/text%3E%3C/svg%3E'}}),o.jsx("div",{className:"image-hover-overlay",style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,borderRadius:"8px",pointerEvents:"none"},children:o.jsx(N,{size:24,color:"white"})})]}),"video"===x&&u&&o.jsx("video",{src:j(u),style:{width:"100%",maxHeight:"120px",objectFit:"cover",borderRadius:"8px"},controls:!0})]})}):y?o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsx(ee,{height:"image"===x||"video"===x?"120px":"44px",width:"100%",opacity:.2}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px"},children:[o.jsx(C,{size:14,className:"spin",color:c}),o.jsx("span",{style:{fontSize:"0.75rem",color:c,fontWeight:"600"},children:"lyrics"===i?"Cloning vocals...":`Synthesizing ${x}...`})]})]}):m?o.jsxs("button",{onClick:m,disabled:y,style:{width:"100%",padding:"12px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",border:`1px dashed ${c}50`,color:c,fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s"},children:["audio"===x&&o.jsx(D,{size:16}),"image"===x&&o.jsx(T,{size:16}),"video"===x&&o.jsx(W,{size:16}),"lyrics"===i?"Create AI Vocals":"audio"===i?"Synthesize AI Beat":`Generate ${x.charAt(0).toUpperCase()+x.slice(1)}`]}):null})]}),p&&!q&&o.jsxs("div",{style:{padding:ce?"8px 10px 10px":"12px 20px 16px",borderTop:"1px solid rgba(255,255,255,0.05)",display:"flex",gap:ce?"6px":"8px",flexWrap:"wrap",position:"relative",zIndex:1,touchAction:"manipulation"},children:[o.jsxs("button",{onClick:I,title:$?"Stop":"lyrics"===i&&u?"Play AI Vocals":"Text to Speech",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:$?`${c}30`:"rgba(255,255,255,0.05)",border:`1px solid ${$?c:"rgba(255,255,255,0.1)"}`,color:$?c:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[$?o.jsx(_,{size:14}):o.jsx(L,{size:14}),!ce&&($?"Stop":"lyrics"===i&&u?"Hear Vocals":"TTS")]}),o.jsxs("button",{onClick:()=>{if(p){const e="lyrics"!==i||ne?p:le;navigator.clipboard.writeText(e),n.success("lyrics"!==i||ne?"Copied to clipboard":"Lyrics copied")}},title:"Copy to Clipboard",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[o.jsx(H,{size:14}),!ce&&"Copy"]}),o.jsxs("button",{onClick:()=>X(!0),title:"Edit Output",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[o.jsx(J,{size:14}),!ce&&"Edit"]}),(u||p&&!x)&&o.jsxs("button",{onClick:()=>K(!0),title:"Preview",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:`${c}20`,border:`1px solid ${c}40`,color:c,cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"600",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[o.jsx(N,{size:14}),!ce&&"Preview"]}),b&&o.jsxs("button",{onClick:b,title:"Regenerate",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[o.jsx(A,{size:14}),!ce&&"Redo"]}),!ce&&o.jsx("div",{style:{flex:1}}),p&&B&&o.jsx("button",{onClick:B,title:"Expand to Fullscreen",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:o.jsx(Y,{size:14})}),(p||u)&&o.jsx("button",{onClick:z,title:"Download",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(34, 197, 94, 0.15)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#22c55e",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"600",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:o.jsx(F,{size:14})}),k&&o.jsx("button",{onClick:k,title:"Delete",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:o.jsx(V,{size:14})})]}),o.jsx(r.Suspense,{fallback:null,children:o.jsx(Z,{isOpen:G,onClose:()=>K(!1),mediaUrl:u,mediaType:x||"text",title:l,textContent:x?null:p})}),o.jsx("style",{children:"\n        /* Desktop-only hover effects */\n        @media (hover: hover) and (pointer: fine) {\n          .generator-card:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 10px 40px rgba(0,0,0,0.3);\n          }\n          .image-hover-overlay {\n            transition: opacity 0.2s ease;\n          }\n          .generator-card:hover .image-hover-overlay {\n            opacity: 1 !important;\n          }\n        }\n        /* Mobile touch optimization */\n        @media (hover: none) {\n          .generator-card {\n            transform: none !important;\n          }\n          .generator-card:active {\n            opacity: 0.9;\n          }\n        }\n      "})]})}function te({outputs:e,mediaUrls:i,songIdea:t,finalMixPreview:r,creatingFinalMix:a,musicVideoUrl:s,generatingMusicVideo:l,handleGenerateProfessionalMusicVideo:d,handleCreateFinalMix:c,handleCreateProject:p,setShowPreviewModal:g,visualType:x,setVisualType:u,isMobile:m,orchestratorBpm:y=120}){const b=Object.values(e).filter(Boolean).length,h=4===b,f=b>0,v=b/4*100,j=!!i.audio,S=!!i.vocals||!!e.lyrics,k=!!i.video,z=j&&(k||S),C=!!s;return o.jsxs("div",{style:{background:h?"linear-gradient(135deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.98))":"rgba(15, 23, 42, 0.4)",borderRadius:"24px",padding:m?"20px":"28px",border:"1px solid rgba(255,255,255,0.1)",marginTop:"32px",position:"relative",overflow:"hidden",boxShadow:h?"0 10px 40px rgba(0,0,0,0.4), 0 0 0 1px rgba(79, 70, 229, 0.3)":"none",transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:[h&&o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #4f46e5, #9333ea, #ec4899)",boxShadow:"0 0 15px rgba(79, 70, 229, 0.5)"}}),o.jsxs("div",{style:{display:"flex",flexDirection:m?"column":"row",justifyContent:"space-between",alignItems:m?"stretch":"center",gap:"24px",position:"relative",zIndex:1},children:[o.jsxs("div",{style:{flex:1},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:h?"rgba(79, 70, 229, 0.2)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",color:h?"#818cf8":"rgba(255,255,255,0.3)",border:"1px solid "+(h?"rgba(79, 70, 229, 0.4)":"rgba(255,255,255,0.1)")},children:h?o.jsx(w,{size:20}):o.jsx(K,{size:20})}),o.jsxs("div",{children:[o.jsxs("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700",color:h?"white":"rgba(255,255,255,0.5)",display:"flex",alignItems:"center",gap:"8px"},children:[h?"Production Complete":"Production Status",h&&o.jsx(q,{size:18,color:"#22c55e"})]}),o.jsx("p",{style:{margin:"4px 0 0",fontSize:"0.85rem",color:"rgba(255,255,255,0.4)"},children:h?"All assets are master-ready":`${b}/4 assets finalized â€¢ ${4-b} remaining`})]})]}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:["lyrics","audio","visual","video"].map(t=>{const r=t.charAt(0).toUpperCase()+t.slice(1),n=!!e[t],a=!!i["lyrics"===t?"vocals":t];return o.jsxs("div",{style:{padding:"6px 12px",borderRadius:"100px",fontSize:"0.75rem",fontWeight:"600",background:n?"rgba(34, 197, 94, 0.1)":"rgba(255,255,255,0.03)",color:n?"#4ade80":"rgba(255,255,255,0.2)",border:"1px solid "+(n?"rgba(34, 197, 94, 0.2)":"rgba(255,255,255,0.05)"),display:"flex",alignItems:"center",gap:"6px"},children:[n?"â—":"â—‹"," ",r,a&&o.jsx("span",{title:"Media Created",children:"ðŸ’Ž"})]},t)})}),o.jsxs("div",{style:{marginTop:"20px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(255,255,255,0.05)",display:m?"none":"block"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[o.jsx("span",{style:{fontSize:"0.7rem",color:"rgba(255,255,255,0.3)",fontWeight:"700",textTransform:"uppercase"},children:"Production Timeline"}),o.jsxs("span",{style:{fontSize:"0.7rem",color:"#818cf8",fontWeight:"700"},children:[y," BPM â€¢ STEREO"]})]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[{label:"BEAT",type:"audio",color:"#22d3ee"},{label:"VOCALS",type:"lyrics",color:"#a78bfa"},{label:"VISUALS",type:"visual",color:"#fb923c"},{label:"IMG TO VIDEO",type:"video",color:"#f87171"}].map(t=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"70px",fontSize:"0.65rem",fontWeight:"800",color:e[t.type]?t.color:"rgba(255,255,255,0.2)",letterSpacing:"0.05em"},children:t.label}),o.jsx("div",{style:{flex:1,height:"24px",background:"rgba(255,255,255,0.03)",borderRadius:"4px",position:"relative",overflow:"hidden",border:"1px solid rgba(255,255,255,0.05)"},children:e[t.type]&&o.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:i["lyrics"===t.type?"vocals":"visual"===t.type?"image":t.type]?"100%":"30%",background:`linear-gradient(90deg, ${t.color}40, ${t.color}80)`,borderRight:`2px solid ${t.color}`,transition:"width 1s ease-in-out"},children:("audio"===t.type||"lyrics"===t.type)&&o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"2px",height:"100%",paddingLeft:"8px",opacity:.5},children:[...Array(20)].map((e,i)=>o.jsx("div",{style:{width:"2px",height:80*Math.random()+"%",background:t.color,borderRadius:"2px"}},i))})})}),o.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",background:e[t.type]?"#22c55e":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center"},children:e[t.type]&&o.jsx(q,{size:10,color:"white"})})]},t.label))})]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:m?"column":"row",gap:"12px",alignItems:"stretch"},children:[z&&!C&&o.jsxs("button",{onClick:d,disabled:l,style:{padding:"14px 24px",borderRadius:"16px",background:"rgba(236, 72, 153, 0.1)",border:"1px solid rgba(236, 72, 153, 0.3)",color:"#f472b6",fontWeight:"600",fontSize:"0.9rem",cursor:l?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[l?o.jsx(A,{size:18,className:"spin"}):s?o.jsx(w,{size:18,fill:"#22c55e"}):o.jsx(W,{size:18}),l?"Syncing...":s?"Image to Video Sync âœ“":"Image to Video Sync"]}),o.jsx("button",{onClick:()=>{h?g(!0):n.info("Finish all generators to enable Master Preview")},style:{padding:"14px 32px",borderRadius:"16px",background:h?"linear-gradient(135deg, #4f46e5, #7c3aed)":"rgba(255,255,255,0.05)",border:h?"none":"1px solid rgba(255,255,255,0.1)",color:h?"white":"rgba(255,255,255,0.3)",fontWeight:"700",fontSize:"1rem",cursor:h?"pointer":"default",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",boxShadow:h?"0 8px 25px rgba(79, 70, 229, 0.4)":"none",transition:"all 0.3s ease",minWidth:m?"100%":"220px"},children:h?o.jsxs(o.Fragment,{children:[o.jsx(N,{size:20}),"Master & Preview Mix"]}):o.jsxs(o.Fragment,{children:[o.jsx(X,{size:18}),"Master Preview Locked"]})}),f&&o.jsxs("button",{onClick:p,style:{padding:"14px 24px",borderRadius:"16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontWeight:"600",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:h?1:.7},children:[o.jsx(G,{size:18}),!m&&"Publish to Hub"]})]})]}),!h&&o.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"4px",background:"rgba(255,255,255,0.05)"},children:o.jsx("div",{style:{width:`${v}%`,height:"100%",background:"linear-gradient(90deg, #3b82f6, #6366f1)",transition:"width 0.8s cubic-bezier(0.16, 1, 0.3, 1)"}})})]})}function re({isOpen:t,onClose:a,onCreateProject:_,onSaveToProject:J,authToken:K=null,existingProject:q=null,userPlan:X="Free"}){const[Z,ee]=r.useState("undefined"!=typeof window&&window.innerWidth<768),[re,oe]=r.useState(q?.name||""),[ne,ae]=r.useState(q?.language||"English"),[se,le]=r.useState(q?.style||"Modern Hip-Hop"),[de,ce]=r.useState(q?.duration||90),[pe,ge]=r.useState(q?.musicalBars||16),[xe,ue]=r.useState(q?.useBars??!0),[me,ye]=r.useState(q?.model||"Gemini 2.0 Flash"),[be,he]=r.useState(q?.musicEngine||"music-gpt"),[fe,ve]=r.useState(q?.mood||"Energetic"),[je,we]=r.useState(q?.structure||"Full Song"),[Se,ke]=r.useState(!0),[ze,Ce]=r.useState(-1),[Ie,Re]=r.useState("Full Mix"),[De,Ae]=r.useState(q?.bpm||q?.settings?.bpm||120),[$e,Te]=r.useState({lyrics:"ghost",audio:"beat",visual:"album",video:"video-creator"}),[We,Be]=r.useState(!1),[Ee,Ue]=r.useState({lyrics:null,audio:null,visual:null,video:null}),[Pe,Oe]=r.useState({audio:null,image:null,video:null,vocals:null,lyricsVocal:null}),[Ve,Ne]=r.useState({audio:!1,image:!1,video:!1,vocals:!1}),[Me,Le]=r.useState(null),[He,Fe]=r.useState(""),[Ge,Ye]=r.useState(!1),[_e,Je]=r.useState(!1),[Ke,qe]=r.useState("rapper"),[Xe,Ze]=r.useState("premium"),[Qe,ei]=r.useState("aggressive"),[ii,ti]=r.useState("hip-hop"),[ri,oi]=r.useState(!1),[ni,ai]=r.useState(null),[si,li]=r.useState(!1),[di,ci]=r.useState(null),[pi,gi]=r.useState(!1),[xi,ui]=r.useState(null),[mi,yi]=r.useState(!1),[bi,hi]=r.useState(!1),[fi,vi]=r.useState(!1),[ji,wi]=r.useState(!1),[Si,ki]=r.useState(!1),[zi,Ci]=r.useState(!1),[Ii,Ri]=r.useState("image"),[Di,Ai]=r.useState(null),[$i,Ti]=r.useState(localStorage.getItem("studio_elevenlabs_voice_id")||""),[Wi,Bi]=r.useState(!1),[Ei,Ui]=r.useState([]),[Pi,Oi]=r.useState(!1),[Vi,Ni]=r.useState([]),[Mi,Li]=r.useState(!1),[Hi,Fi]=r.useState(null),[Gi,Yi]=r.useState(null),[_i,Ji]=r.useState(null),[Ki,qi]=r.useState(null),[Xi,Zi]=r.useState([]),[Qi,et]=r.useState(""),[it,tt]=r.useState(""),[rt,ot]=r.useState({visual:!1,audio:!1,video:!1,lyrics:!1}),[nt,at]=r.useState(!1),st=r.useRef(Ee),lt=r.useRef(null),dt=r.useRef(null),ct=Ee||{lyrics:null,audio:null,visual:null,video:null},pt=Pe||{audio:null,image:null,video:null};r.useEffect(()=>{const e=()=>ee(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),r.useEffect(()=>{st.current=Ee},[Ee]),r.useEffect(()=>{t&&(async()=>{if(l.currentUser){Oi(!0);try{const e=g(x(s,"users",l.currentUser?.uid,"voices")),i=(await u(e)).docs.map(e=>({id:e.id,...e.data()}));Ui(i)}catch(e){}finally{Oi(!1)}}})()},[t]),r.useEffect(()=>{t&&(async()=>{Li(!0);try{const e=await fetch(`${i}/api/voices`);if(e.ok){const i=await e.json();Ni(i)}}catch(e){}finally{Li(!1)}})()},[t]),r.useEffect(()=>{(async()=>{if(l.currentUser&&t)try{const e=d(s,"users",l.currentUser?.uid),i=await m(e);if(i.exists()){const e=i.data();e.visualDnaUrl&&Fi(e.visualDnaUrl),e.audioDnaUrl&&Yi(e.audioDnaUrl),e.videoDnaUrl&&Ji(e.videoDnaUrl),e.lyricsDnaUrl&&qi(e.lyricsDnaUrl),e.voiceSampleUrl&&Ai(e.voiceSampleUrl),e.dnaArtifacts&&Zi(e.dnaArtifacts)}}catch(e){}})()},[t]),r.useEffect(()=>(document.body.style.overflow=t?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[t]),r.useEffect(()=>{if(xe){const e=Math.round(4*pe*60/De);ce(e)}},[pe,De,xe]),r.useEffect(()=>{xe||ce("Full Song"===je?90:"Radio Edit"===je?150:"Extended"===je?180:"Loop"===je?30:15)},[je,xe]);const gt=[{key:"lyrics",title:"Ghostwriter",subtitle:"Lyrics & Hook",icon:I,color:"#8b5cf6",mediaType:"audio"},{key:"audio",title:"Beat Lab",subtitle:"Music Production",icon:w,color:"#06b6d4",mediaType:"audio"},{key:"visual",title:"Album Artist",subtitle:"Cover Identity",icon:T,color:"#ec4899",mediaType:"image"},{key:"video",title:"Video Creator",subtitle:"Motion & Sync",icon:W,color:"#f59e0b",mediaType:"video"}],xt=(e,i)=>{let t=e;if("lyrics"===i||"content"===i){const{content:i}=Q(e);i&&(t=i)}if(Me===i)return window.speechSynthesis.cancel(),dt.current&&(dt.current.pause(),dt.current.currentTime=0),void Le(null);if("lyrics"===i&&Pe.vocals)try{dt.current&&dt.current.pause(),window.speechSynthesis.cancel();const e=document.createElement("audio");return e.src=f(Pe.vocals),dt.current=e,e.play().catch(e=>{ut(t,i)}),e.onended=()=>Le(null),void Le(i)}catch(r){}ut(t,i)},ut=(e,i)=>{try{if(window.speechSynthesis.cancel(),"undefined"==typeof SpeechSynthesisUtterance)return;const t=new SpeechSynthesisUtterance(e),r=window.speechSynthesis.getVoices();if("rapper"===Ke||"rapper-female"===Ke){t.rate="fast"===Qe?1.3:"chill"===Qe?.85:1,t.pitch="rapper-female"===Ke?1.2:.9;const e=r.find(e=>"rapper-female"===Ke?e.name.toLowerCase().includes("female")||e.name.toLowerCase().includes("zira")||e.name.toLowerCase().includes("samantha"):e.name.toLowerCase().includes("male")||e.name.toLowerCase().includes("david")||e.name.toLowerCase().includes("alex"));e&&(t.voice=e)}else if("singer"===Ke||"singer-female"===Ke){t.rate=.85,t.pitch="singer-female"===Ke?1.3:1;const e=r.find(e=>"singer-female"===Ke?e.name.toLowerCase().includes("female")||e.name.toLowerCase().includes("zira"):e.name.toLowerCase().includes("male")||e.name.toLowerCase().includes("david"));e&&(t.voice=e)}else if("narrator"===Ke){t.rate=.9,t.pitch=.8;const e=r.find(e=>e.name.toLowerCase().includes("david")||e.name.toLowerCase().includes("male"));e&&(t.voice=e)}else t.rate=.9;t.onend=()=>Le(null),t.onerror=()=>Le(null),window.speechSynthesis.speak(t),Le(i)}catch(t){Le(null)}},mt=r.useCallback(async()=>{const e={"Content-Type":"application/json"};return K&&(e.Authorization=`Bearer ${K}`),e},[K]),yt=async()=>{if(We)return;if(!re.trim())return void n.error("Please enter a song idea");const t=Object.entries($e).filter(([,e])=>e);if(0!==t.length){Be(!0),n.loading("Generating content...",{id:"gen-all"});try{const r=await mt(),o="Gemini 2.0 Flash"===me?"gemini-2.0-flash":"Gemini 2.0 Pro (Exp)"===me?"gemini-2.0-flash-exp":"Gemini 1.5 Pro"===me?"gemini-1.5-pro":"gemini-2.0-flash",a=async(t,a,s="")=>{const l=e.find(e=>e.id===a);if(!l)return null;const d=gt.find(e=>e.key===t),c=`You are ${l.name}, a professional ${l.category} specialist. \n        Create content for a ${se} song about: "${re}" in ${ne}.\n        Be creative, professional, and match the genre's style.\n        ${s?`HERE ARE THE LYRICS FOR THE SONG - USE THEM TO INSPIRE THE VIBE: "${s.substring(0,1e3)}"`:""}\n        ${"lyrics"===t?'Write ONLY the lyrics (verses, hooks, chorus) with clear labels like [Verse 1], [Chorus], [Bridge]. ALSO INCLUDE Suno-style vocal/style tags in brackets like [Hard Hitting Rap] or [Soulful Vocals] to guide the performance. Do not include any intro/preamble like "Here are the lyrics".':""}\n        ${"audio"===t?`Briefly describe a high-quality beat/instrumental concept (${xe?pe+" bars":de+" seconds"}) with BPM: ${De}. Use simple genre descriptors (e.g., "Heavy Trap", "Lo-fi Chill"). DO NOT use complex technical jargon or overly verbose descriptions. Keep it under 60 words for maximum AI compatibility.`:""}\n        ${"visual"===t?"Describe a striking album cover or concept in detail for image generation.":""}\n        ${"video"===t?"Write a creative image to video concept/storyboard with scene descriptions.":""}`;try{const e=await fetch(`${i}/api/generate`,{method:"POST",headers:r,body:JSON.stringify({prompt:`Create ${d.title.toLowerCase()} content for: "${re}"`,systemInstruction:c,model:o,duration:de,language:ne,referenceUrl:"lyrics"===t?Ki:"audio"===t?Gi:"visual"===t?Hi:"video"===t?_i:null})});if(e.ok){const i=await e.json();return Ue(e=>{const r={...e,[t]:i.output};return st.current=r,r}),"audio"===t?setTimeout(()=>ht(i.output),500):"lyrics"===t?setTimeout(()=>ft(i.output),800):"visual"===t?setTimeout(()=>wt(i.output),1100):"video"===t&&setTimeout(()=>kt(i.output),1400),i.output}await e.text();return n.error(`Agent ${l.name} failed: ${e.status}`,{icon:"âŒ"}),null}catch(p){return n.error(`Connection Error: ${t} generation failed.`,{icon:"ðŸ“¡"}),null}},s=t.find(([e])=>"lyrics"===e);let l="";if(s)l=await a(s[0],s[1]);else if(q?.assets){const e=q.assets.find(e=>"lyrics"===e.type||e.id?.includes("lyrics")||e.agent?.toLowerCase().includes("ghost"));e&&(l=e.content||e.snippet||"")}const d=t.filter(([e])=>"lyrics"!==e);await Promise.all(d.map(([e,i])=>a(e,i,l))),n.dismiss("gen-all"),n.success("Generation complete!")}catch(r){n.error(o.jsxs("div",{children:[o.jsx("strong",{children:"Generation failed"}),o.jsx("p",{style:{fontSize:"12px",marginTop:"4px"},children:r.message||"Check your connection and try again"})]}),{duration:5e3})}finally{Be(!1)}}else n.error("Please select at least one agent")},bt=async t=>{if(We)return;if(!$e[t])return;const r=e.find(e=>e.id===$e[t]);if(r){Be(!0),Ue(e=>({...e,[t]:null}));try{const e=await mt(),o=gt.find(e=>e.key===t),a="Gemini 2.0 Flash"===me?"gemini-2.0-flash":"Gemini 2.0 Pro (Exp)"===me?"gemini-2.0-flash-exp":"Gemini 1.5 Pro"===me?"gemini-1.5-pro":"gemini-2.0-flash",s=await fetch(`${i}/api/generate`,{method:"POST",headers:e,body:JSON.stringify({prompt:`Create fresh ${o.title.toLowerCase()} content for: "${re}"`,systemInstruction:`You are ${r.name}. Create NEW and DIFFERENT content for a ${se} song about: "${re}". Be creative and fresh.\n          ${"lyrics"!==t&&Ee.lyrics?`HERE ARE THE CURRENT LYRICS - USE THEM FOR CONTEXT: "${Ee.lyrics.substring(0,500)}"`:""}\n          ${"lyrics"===t?"Write ONLY the lyrics (verses, hooks, chorus) with clear labels like [Verse] or [Chorus]. No intro fluff.":""}\n          ${"audio"===t?`Briefly describe a high-quality beat/instrumental concept (${xe?pe+" bars":de+" seconds"}) with BPM: ${De}. Focus on mood, instrumentation, and energy. Keep it under 80 words for an AI music generator.`:""}`,model:a,duration:de,language:ne})});let l;if(!s.headers.get("content-type")?.includes("application/json"))throw new Error(`Invalid server response (${s.status})`);l=await s.json(),s.ok?(Ue(e=>({...e,[t]:l.output})),n.success(`${o.title} regenerated!`)):n.error(l.error||`Failed to regenerate ${o.title}`)}catch{n.error("Regeneration failed")}finally{Be(!1)}}},ht=async(e=null)=>{if(Ve.audio)return;const t=("string"==typeof e?e:null)||st.current.audio||Ee.audio;if(!t)return void n.error("Generate Beat DNA first");Ne(e=>({...e,audio:!0}));const r=de>120?"3 minutes":de>60?"2 minutes":"60 seconds";n.loading(`Synthesizing AI beat (${r})...`,{id:"gen-audio"});try{const e=await mt(),{content:r}=Q(t),a=r||t,s=await fetch(`${i}/api/generate-audio`,{method:"POST",headers:e,body:JSON.stringify({prompt:"string"==typeof a?a.substring(0,1e3):"Professional music production",genre:se||"hip-hop",mood:fe.toLowerCase()||"energetic",bpm:parseInt(De)||90,durationSeconds:parseInt(de)||("Full Song"===je?90:"Radio Edit"===je?150:"Extended"===je?180:"Loop"===je?15:30),referenceAudio:Gi,engine:be||"music-gpt",highMusicality:Se,seed:ze,stem:Ie})});let l;const d=s.headers.get("content-type");if(!d||!d.includes("application/json")){await s.text();throw new Error(`Invalid audio response (${s.status})`)}if(l=await s.json(),s.ok){const e=l.audioUrl||l.output;if(e){if(Oe(i=>({...i,audio:e})),Ue(e=>({...e,audio:e.audio||`Professional ${se} beat generated at ${De} BPM`})),q&&(J||_)){const i=J||_,t={id:`audio-${Date.now()}`,title:"Beat Lab Production",type:"audio",agent:"Beat Lab",content:a.substring(0,500),audioUrl:e,mimeType:l.mimeType||"audio/mpeg",createdAt:(new Date).toISOString()};i({...q,assets:[t,...q.assets||[]],updatedAt:(new Date).toISOString()})}n.success("AI beat generated!",{id:"gen-audio"})}else n.error("No audio returned from server",{id:"gen-audio"})}else{const e=l||{};503===s.status&&e.setup?n.error(o.jsxs("div",{children:[o.jsx("strong",{children:"Audio API Not Ready"}),o.jsx("p",{style:{fontSize:"12px",marginTop:"4px"},children:e.details||"The model is still loading"})]}),{id:"gen-audio",duration:8e3}):n.error(e.details||e.error||`Audio generation failed (${s.status})`,{id:"gen-audio"})}}catch(a){n.error(`Generation failed: ${a.message}`,{id:"gen-vocals"})}finally{oi(!1),Ne(e=>({...e,vocals:!1}))}},ft=async(e=null)=>{if(Ve.vocals)return;const t=("string"==typeof e?e:null)||st.current.lyrics||Ee.lyrics;if(t){oi(!0),Ne(e=>({...e,vocals:!0})),n.loading("Generating AI Vocals (up to 2 mins)...",{id:"gen-vocals"});try{const e=await mt(),{content:r}=Q(t),o=r||t,a={rapper:"rapper-male-1","rapper-female":"rapper-female-1",singer:"singer-male","singer-female":"singer-female",narrator:"narrator",whisper:"whisper",spoken:"spoken"}[Ke]||"rapper-male-1",s=await fetch(`${i}/api/generate-speech`,{method:"POST",headers:e,body:JSON.stringify({prompt:o.substring(0,1500),voice:a,style:Ke,rapStyle:Qe,genre:ii,language:ne||"English",duration:de||30,quality:Xe,speakerUrl:"cloned"===Ke?Di:null,elevenLabsVoiceId:"premium"===Xe||"cloned"===Ke?$i:null,backingTrackUrl:Pe.audio})});let l;const d=s.headers.get("content-type");if(!d||!d.includes("application/json"))throw new Error(`Invalid vocal response (${s.status})`);if(l=await s.json(),s.ok&&l.audioUrl){if(Oe(e=>({...e,vocals:l.audioUrl,lyricsVocal:l.audioUrl})),Ue(e=>({...e,vocals:e.vocals||`AI Vocal Performance generated for "${re||"song"}"`})),q&&(J||_)){const e=J||_,i={id:`vocal-${Date.now()}`,title:"Vocal Performance",type:"vocal",agent:"Ghostwriter",content:o.substring(0,500),audioUrl:l.audioUrl,mimeType:l.mimeType||"audio/wav",createdAt:(new Date).toISOString()};e({...q,assets:[i,...q.assets||[]],updatedAt:(new Date).toISOString()})}n.success("AI Vocals generated!",{id:"gen-vocals"})}else{const e=l||{};n.error(e.details||e.error||"Vocal generation failed",{id:"gen-vocals"})}}catch(r){n.error("Vocal generation failed",{id:"gen-vocals"})}finally{oi(!1),Ne(e=>({...e,vocals:!1}))}}else n.error("Generate Lyrics & Hook DNA first")},vt=async(e,t)=>{if(rt[e])return;const r=t.target.files[0];if(!r)return;if(r.size>10485760)return void n.error("File too large (max 10MB)");ot(i=>({...i,[e]:!0}));const o=n.loading(`Uploading ${e} DNA...`,{id:`upload-dna-${e}`});try{const t=await mt(),a=new FileReader;a.readAsDataURL(r),a.onload=async()=>{try{const g=a.result,x=await fetch(`${i}/api/upload-asset`,{method:"POST",headers:t,body:JSON.stringify({data:g,fileName:`${e}-dna-${Date.now()}-${r.name.replace(/\s+/g,"-")}`,mimeType:r.type,assetType:"visual"===e||"video"===e?"image":"audio"===e?"audio":"document"})}),u=await x.json();if(!x.ok||!u.url)throw new Error(u.error||"Upload failed");{const i=u.url;if("visual"===e&&Fi(i),"audio"===e&&Yi(i),"video"===e&&Ji(i),"lyrics"===e&&qi(i),l.currentUser?.uid)try{const t=d(s,"users",l.currentUser?.uid),o={id:`dna-${Date.now()}`,type:e,url:i,name:r.name,timestamp:Date.now()};await c(t,{[`${e}DnaUrl`]:i,dnaArtifacts:h(o),lastDnaUpdate:Date.now()}),Zi(e=>[o,...e||[]])}catch(p){}n.success(`${"video"===e?"Image":e.charAt(0).toUpperCase()+e.slice(1)} DNA attached!`,{id:o})}}catch(g){n.error(`Failed to upload ${e} DNA`,{id:o})}finally{ot(i=>({...i,[e]:!1}))}},a.onerror=()=>{n.error("Failed to read file"),ot(i=>({...i,[e]:!1}))}}catch(a){n.error("Upload failed",{id:o}),ot(i=>({...i,[e]:!1}))}},jt=e=>new Promise((i,t)=>{try{const r=document.createElement("video");r.crossOrigin="anonymous",r.muted=!0,r.onloadeddata=()=>{r.currentTime=Math.min(1,.1*r.duration)},r.onseeked=()=>{try{const e=document.createElement("canvas");e.width=r.videoWidth||640,e.height=r.videoHeight||360;e.getContext("2d").drawImage(r,0,0,e.width,e.height);const t=e.toDataURL("image/jpeg",.9);r.remove(),i(t)}catch(e){t(e)}},r.onerror=()=>{t(new Error("Video load failed"))},r.src=e,r.load(),setTimeout(()=>{r.remove(),t(new Error("Frame extraction timeout"))},1e4)}catch(r){t(r)}}),wt=async(e=null)=>{if(Ve.image)return;const t=("string"==typeof e?e:null)||st.current.visual||Ee.visual;if(t){Ne(e=>({...e,image:!0})),n.loading("Generating image (~10 seconds)...",{id:"gen-image"});try{const e=await mt(),{content:r}=Q(t),o=r||t,a=await fetch(`${i}/api/generate-image`,{method:"POST",headers:e,body:JSON.stringify({prompt:`Album cover art, highly detailed, professional: ${o.substring(0,600)}`,referenceImage:Hi})});let s;if(!a.headers.get("content-type")?.includes("application/json"))throw new Error(`Invalid image response (${a.status})`);if(s=await a.json(),a.ok){let e=null;if(s.output?e=s.output:s.images&&s.images.length>0?e=s.images[0]:s.imageData&&(e=s.imageData),e){if(Oe(i=>({...i,image:e})),n.success("Image created!",{id:"gen-image"}),q){const i={id:`img-${Date.now()}`,type:"image",url:e,name:`Album Art - ${(new Date).toLocaleTimeString()}`,createdAt:(new Date).toISOString()},t=[...q.assets||[],i];J({...q,assets:t,updatedAt:(new Date).toISOString()})}}else await St()}else{await a.text();await St()}}catch(r){await St()}finally{Ne(e=>({...e,image:!1}))}}else n.error("Generate Visual DNA first")},St=async()=>{const e=Pe.video||xi;if(e){n.loading("Extracting frame from video...",{id:"gen-image"});try{const t=await mt(),r=await fetch(`${i}/api/extract-video-frame`,{method:"POST",headers:t,body:JSON.stringify({videoUrl:e,timestamp:1})});if(r.ok){const i=await r.json();if(i.extractClientSide){const i=await jt(e);if(Oe(e=>({...e,image:i})),n.success("Frame extracted from video!",{id:"gen-image"}),q){const e={id:`img-${Date.now()}`,type:"image",url:i,name:`Video Frame Cover - ${(new Date).toLocaleTimeString()}`,createdAt:(new Date).toISOString()},t=[...q.assets||[],e];J({...q,assets:t,updatedAt:(new Date).toISOString()})}return}if(i.output||i.imageData){const e=i.output||`data:${i.mimeType||"image/jpeg"};base64,${i.imageData}`;if(Oe(i=>({...i,image:e})),n.success("Frame extracted from video!",{id:"gen-image"}),q){const i={id:`img-${Date.now()}`,type:"image",url:e,name:`Video Frame Cover - ${(new Date).toLocaleTimeString()}`,createdAt:(new Date).toISOString()},t=[...q.assets||[],i];J({...q,assets:t,updatedAt:(new Date).toISOString()})}return}}const o=await jt(e);Oe(e=>({...e,image:o})),n.success("Frame extracted from video!",{id:"gen-image"})}catch(t){n.error("Could not extract frame from video",{id:"gen-image"})}}else n.error("No image or video available",{id:"gen-image"})},kt=async(e=null)=>{if(Ve.video)return;const t=("string"==typeof e?e:null)||st.current.video||Ee.video;if(t){Ne(e=>({...e,video:!0})),n.loading("Generating video (this takes ~2 min)...",{id:"gen-video"});try{const e=await mt(),{content:a}=Q(t),s=a||t,l=await fetch(`${i}/api/generate-video`,{method:"POST",headers:e,body:JSON.stringify({prompt:`Cinematic image to video, professional visual: ${s.substring(0,500)}`,referenceImage:Hi||_i,referenceVideo:_i,visualId:it,duration:de,audioUrl:Pe.audio,vocalUrl:Pe.vocals||Pe.lyricsVocal})});if(l.ok){const e=await l.json();if("image"===e.type||e.mimeType&&e.mimeType.startsWith("image/")){const i=e.output||e.imageUrl;if(i&&"string"==typeof i){const t=i.startsWith("data:")||i.startsWith("http")?i:`data:${e.mimeType||"image/png"};base64,${i}`;Oe(e=>({...e,image:t})),n.success("Cover image generated! (Video generation unavailable)",{id:"gen-video",duration:5e3})}else n.error("Video generation unavailable",{id:"gen-video"})}else{const i=e.videoUrl||e.output||e.video;if(i&&"string"==typeof i&&(i.startsWith("http")||i.startsWith("blob:"))){if(Oe(e=>({...e,video:i})),n.success(e.isDemo?"Demo video loaded!":"Video created!",{id:"gen-video"}),q){const e={id:`vid-${Date.now()}`,type:"video",url:i,name:`Music Video - ${(new Date).toLocaleTimeString()}`,createdAt:(new Date).toISOString()},t=[...q.assets||[],e];J({...q,assets:t,updatedAt:(new Date).toISOString()})}if(!Pe.image){n.loading("Extracting cover frame...",{id:"extract-frame"});try{const e=await jt(i);Oe(i=>({...i,image:e})),n.success("Cover image extracted!",{id:"extract-frame"})}catch(r){n.dismiss("extract-frame")}}}else n.error(e.message||"Video generation unavailable",{id:"gen-video"})}}else{const e=await l.json().catch(()=>({}));503===l.status&&e.setup?n.error(o.jsxs("div",{children:[o.jsx("strong",{children:"Video API Not Ready"}),o.jsx("p",{style:{fontSize:"12px",marginTop:"4px"},children:e.details})]}),{id:"gen-video",duration:8e3}):n.error(e.details||e.error||"Video generation failed",{id:"gen-video"})}}catch(a){n.error("Video generation failed",{id:"gen-video"})}finally{Ne(e=>({...e,video:!1}))}}else n.error("Generate Music Video DNA first")},zt=async()=>{if(si)return;if(Object.entries($e).filter(([,e])=>null!==e).map(([e])=>e).some(e=>Ee[e])){li(!0),n.loading("Creating final mix (~15 seconds)...",{id:"final-mix"});try{const i={id:`mix-${Date.now()}`,title:`${re} - Complete Mix`,description:`Full production of "${re}" with lyrics, beat, visual, and video`,created:(new Date).toISOString(),components:{lyrics:{content:Ee.lyrics,agent:e.find(e=>e.id===$e.lyrics)?.name||"Ghostwriter",vocalUrl:Pe.lyricsVocal||null},audio:{content:Ee.audio,agent:e.find(e=>e.id===$e.audio)?.name||"Beat Maker",audioUrl:Pe.audio||null},visual:{content:Ee.visual,agent:e.find(e=>e.id===$e.visual)?.name||"Designer",imageUrl:Pe.image||null},video:{content:Ee.video,agent:e.find(e=>e.id===$e.video)?.name||"Video Creator",videoUrl:xi||Pe.video||null,musicVideoUrl:xi||null,isSynced:!!xi}},settings:{language:ne,style:se,model:me,bpm:De,musicVideoUrl:xi||null}};ci(i),n.success("Final mix ready!",{id:"final-mix"})}catch(i){n.error("Failed to create final mix",{id:"final-mix"})}finally{li(!1)}}else n.error("Generate at least one output first")},Ct=e=>{const i=Ee[e];if(!i)return;const t=gt.find(i=>i.key===e),r="string"==typeof i?i:JSON.stringify(i,null,2),o=new Blob([r],{type:"text/plain"}),n=URL.createObjectURL(o),a=document.createElement("a");a.href=n,a.download=`${re||"output"}-${t?.title||e}.txt`,a.click(),URL.revokeObjectURL(n);const s={audio:Pe.audio,visual:Pe.image,video:Pe.video,lyrics:Pe.vocals}[e];if(s){let i=s;"visual"===e&&(i=v(s)),"audio"===e&&(i=f(s)),"video"===e&&(i=j(s)),"lyrics"===e&&(i=f(s));const t=document.createElement("a");t.href=i,t.download=`${re||"media"}-${e}`,t.click()}},It=e=>{Ue(i=>({...i,[e]:null})),st.current[e]=null,"audio"===e&&Oe(e=>({...e,audio:null})),"visual"===e&&Oe(e=>({...e,image:null})),"video"===e&&Oe(e=>({...e,video:null})),"lyrics"===e&&Oe(e=>({...e,vocals:null})),n.success("Deleted")},Rt=(e,i)=>{Ue(t=>({...t,[e]:i})),st.current[e]=i,n.success("Saved")},Dt=()=>{const i=Object.values(Ee).some(e=>null!==e),t=Object.values(Pe).some(e=>null!==e);if(!i&&!t)return void n.error("No content to save! Generate some content first.");const r=[];if(gt.forEach(i=>{const t=Ee[i.key];if(t){const o=e.find(e=>e.id===$e[i.key]);let n="string"==typeof t?t:JSON.stringify(t);if("lyrics"===i.key){const{content:e}=Q(n);e&&(n=e)}const a={id:`${i.key}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:i.title,type:i.key,agent:o?.name||i.subtitle,content:n,snippet:n.substring(0,100),audioUrl:"audio"===i.key?Pe.audio||null:"lyrics"===i.key&&Pe.vocals||null,imageUrl:"visual"===i.key&&v(Pe.image)||null,videoUrl:"video"===i.key&&Pe.video||null,date:(new Date).toLocaleDateString(),createdAt:(new Date).toISOString(),color:`agent-${(i.color||"").replace("#","")}`};r.push(a)}}),xi){const e={id:`mvideo-${Date.now()}`,title:"Professional Music Video",type:"video",agent:"Orchestrator Sync",content:`Professional synced production for "${re}"`,videoUrl:j(xi),date:(new Date).toLocaleDateString(),createdAt:(new Date).toISOString(),isPremium:!0,color:"agent-ec4899"};r.push(e)}if(di){const e={id:`fmix-${Date.now()}`,title:"Full Production Master",type:"pro",agent:"Studio Orchestrator",content:"string"==typeof di?di:JSON.stringify(di),audioUrl:f(Pe.audio),videoUrl:j(xi||Pe.video),imageUrl:v(Pe.image),date:(new Date).toLocaleDateString(),createdAt:(new Date).toISOString(),color:"agent-4f46e5"};r.push(e)}const o={id:q?.id||String(Date.now()),name:He||re||q?.name||"Untitled Project",description:`Created with Studio Orchestrator: "${re}"`,category:q?.category||"Music",language:ne,style:se,model:me,bpm:De,structure:je,duration:de,musicalBars:pe,useBars:xe,date:q?.date||(new Date).toLocaleDateString(),createdAt:q?.createdAt||(new Date).toISOString(),updatedAt:(new Date).toISOString(),agents:Object.values($e).filter(Boolean).map(i=>{const t=e.find(e=>e.id===i);return t?.name||i}),assets:r,coverImage:v(Pe.image)||q?.coverImage||null},a=!!q?.id?J||_:_||J;if(a)try{return a(o),n.success(`Saved ${o.assets.length} assets to "${o.name}"!`),Ci(!0),Ye(!1),void vi(!0)}catch(s){n.error("Save failed - callback error")}else n.error("Save failed - no backend connection");Ye(!1)};return t?o.jsxs("div",{className:"studio-orchestrator-overlay animate-fadeIn",style:{position:"fixed",top:0,left:0,right:0,height:"100dvh",background:"linear-gradient(180deg, rgba(0,0,0,0.98) 0%, rgba(10,10,20,0.98) 100%)",zIndex:1e4,display:"flex",flexDirection:"column",overflow:"hidden"},children:[o.jsxs("div",{style:{padding:Z?"12px 16px":"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.5)",backdropFilter:"blur(10px)",position:"sticky",top:0,zIndex:10},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:Z?"40px":"48px",height:Z?"40px":"48px",borderRadius:"14px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.3)"},children:o.jsx(w,{size:Z?22:26,color:"white"})}),o.jsxs("div",{children:[o.jsxs("h2",{style:{margin:0,fontSize:Z?"1.1rem":"1.4rem",fontWeight:"700"},children:["Studio Orchestrator ",o.jsx("span",{style:{color:"var(--color-purple)",fontSize:"0.6em",border:"1px solid var(--color-purple)",padding:"1px 4px",borderRadius:"4px",marginLeft:"6px"},children:"V3.5"})]}),o.jsx("p",{style:{margin:0,fontSize:Z?"0.75rem":"0.8rem",color:"var(--text-secondary)"},children:"4 AI Generators â€¢ One Unified Pipeline"})]})]}),o.jsx("button",{onClick:()=>{!Object.values(ct).some(Boolean)&&!Object.values(pt).some(Boolean)||zi?a?.():ki(!0)},style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"12px",width:Z?"38px":"44px",height:Z?"38px":"44px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},children:o.jsx(S,{size:20,color:"white"})})]}),o.jsxs("div",{className:"orchestrator-scroll-container",style:{flex:1,padding:Z?"12px 10px":"16px",maxWidth:"1200px",margin:"0 auto",width:"100%",overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch"},children:[o.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:Z?"10px":"16px",marginBottom:Z?"12px":"20px",border:"1px solid rgba(255,255,255,0.06)"},children:[o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:Z?"8px":"12px",marginBottom:Z?"12px":"16px"},children:[o.jsx("textarea",{value:re,onChange:e=>oe(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),yt())},placeholder:"Describe your song idea, vibe, or concept...",rows:Z?3:2,style:{width:"100%",padding:Z?"10px 12px":"16px 20px",borderRadius:"12px",background:"rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.15)",color:"white",fontSize:Z?"0.9rem":"1rem",outline:"none",minHeight:Z?"100px":"56px",resize:"none",fontFamily:"inherit",lineHeight:"1.5"}}),o.jsxs("div",{style:{display:"flex",gap:"10px"},children:[o.jsx("button",{onClick:_e?()=>{lt.current&&lt.current.stop(),Je(!1)}:()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const i=window.SpeechRecognition||window.webkitSpeechRecognition;if(!i||"function"!=typeof i)return void n.error("Voice recognition not supported");try{lt.current=new i,lt.current.continuous=!1,lt.current.interimResults=!0,lt.current.onresult=e=>{const i=Array.from(e.results).map(e=>e[0].transcript).join("");oe(i)},lt.current.onend=()=>Je(!1),lt.current.onerror=e=>{Je(!1)},lt.current.start(),Je(!0),n.success("Listening...")}catch(e){n.error("Voice input failed")}}else n.error("Speech recognition not supported")},style:{padding:"14px 16px",borderRadius:"12px",background:_e?"rgba(239, 68, 68, 0.2)":"rgba(255,255,255,0.05)",border:"1px solid "+(_e?"#ef4444":"rgba(255,255,255,0.15)"),color:_e?"#ef4444":"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"52px",minHeight:"52px"},title:_e?"Stop Listening":"Voice Input",children:_e?o.jsx(k,{size:22}):o.jsx(z,{size:22})}),o.jsx("button",{onClick:yt,disabled:We||!re.trim()||0===Object.values($e).filter(Boolean).length,style:{flex:1,padding:"14px 24px",borderRadius:"12px",background:We?"rgba(139, 92, 246, 0.3)":"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",fontSize:"1rem",cursor:We||!re.trim()||0===Object.values($e).filter(Boolean).length?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",opacity:re.trim()&&0!==Object.values($e).filter(Boolean).length?1:.5,boxShadow:We?"none":"0 4px 20px rgba(139, 92, 246, 0.4)",minHeight:"52px"},children:We?o.jsxs(o.Fragment,{children:[o.jsx(C,{size:20,className:"spin"}),"Generating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(I,{size:20}),"Generate ",4===Object.values($e).filter(Boolean).length?"All":`${Object.values($e).filter(Boolean).length} Output${1!==Object.values($e).filter(Boolean).length?"s":""}`]})})]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center",paddingBottom:"4px"},children:[o.jsxs("button",{onClick:()=>wi(!ji),style:{padding:"8px 14px",borderRadius:"10px",background:ji?"rgba(139, 92, 246, 0.2)":"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:ji?"#a855f7":"var(--text-secondary)",fontSize:"0.8rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",minHeight:"40px",whiteSpace:"nowrap"},children:[o.jsx(R,{size:14}),ji?"Hide Ideas":"Need Ideas?"]}),ji&&["Summer love in Brooklyn","Trap anthem about success","Lo-fi study beats","Emotional R&B ballad"].map((e,i)=>o.jsx("button",{onClick:()=>{oe(e),wi(!1)},style:{padding:"10px 16px",borderRadius:"20px",background:"rgba(139, 92, 246, 0.15)",border:"1px solid rgba(139, 92, 246, 0.3)",color:"rgba(255,255,255,0.8)",fontSize:"0.85rem",cursor:"pointer",whiteSpace:"nowrap",minHeight:"40px"},children:e},i))]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"10px",marginBottom:"20px"},children:[[{label:"Language",value:ne,setter:ae,options:["English","Spanish","French","German","Japanese","Korean","Portuguese"]},{label:"Genre",value:se,setter:le,options:["Modern Hip-Hop","90s Boom Bap","Trap","R&B / Soul","Pop","Rock","Electronic","Lo-Fi"]},{label:"Project BPM",value:De,setter:Ae,options:[70,80,90,100,110,120,130,140,150,160]},{label:"Timing Mode",value:xe?"Bars":"Seconds",setter:e=>ue("Bars"===e),options:["Bars","Seconds"]},{label:"Musical Bars",value:pe,setter:ge,options:[4,8,16,32,64],hidden:!xe},{label:"Target Duration",value:de,setter:ce,options:[15,30,60,90,120,180,240,300],hidden:xe},{label:"Structure",value:je,setter:we,options:["Full Song","Radio Edit","Extended","Loop","Intro","Verse","Chorus","Outro"]},{label:"AI Model",value:me,setter:ye,options:["Gemini 2.0 Flash","Gemini 2.0 Pro (Exp)","Gemini 1.5 Pro"]},{label:"Mood",value:fe,setter:ve,options:["Chill","Energetic","Dark","Happy","Epic","Mysterious","Dreamy"]},{label:"Music Engine",value:be,setter:he,options:["Beat Lab (MusicGen)","Mureaka","Riffusion (Visual)","Stability Pro","Uberduck","Auto-Selection"]},{label:"Stem Mode",value:Ie,setter:Re,options:["Full Mix","Drums Only","No Drums","Melody Only","Bass Only"]}].filter(e=>!e.hidden).map(e=>o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"6px",textTransform:"uppercase",fontWeight:"600",letterSpacing:"0.05em"},children:e.label}),o.jsx("select",{value:"Music Engine"===e.label?"music-gpt"===be?"Beat Lab (MusicGen)":"mureka"===be?"Mureaka":"riffusion"===be?"Riffusion (Visual)":"stability"===be?"Stability Pro":"uberduck"===be?"Uberduck":"Auto-Selection":e.value,onChange:i=>{const t=i.target.value;"Music Engine"===e.label?he("Beat Lab (MusicGen)"===t?"music-gpt":"Mureaka"===t?"mureka":"Riffusion (Visual)"===t?"riffusion":"Stability Pro"===t?"stability":"Uberduck"===t?"uberduck":"auto"):["Musical Bars","Project BPM","Target Duration"].includes(e.label)?e.setter(parseInt(t)):e.setter(t)},style:{width:"100%",padding:"12px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none",minHeight:"48px",WebkitAppearance:"none",appearance:"none",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23888' d='M6 8L1 3h10z'/%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:e.options.map(e=>o.jsx("option",{value:e,style:{background:"#1a1a1a"},children:e},e))})]},e.label)),o.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[o.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"6px",textTransform:"uppercase",fontWeight:"600"},children:"High Musicality (Udio)"}),o.jsxs("button",{onClick:()=>ke(!Se),style:{height:"48px",borderRadius:"10px",background:Se?"rgba(139, 92, 246, 0.2)":"rgba(0,0,0,0.4)",border:"1px solid "+(Se?"#8b5cf6":"rgba(255,255,255,0.1)"),color:Se?"#a78bfa":"var(--text-secondary)",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},children:[o.jsx(D,{size:14}),Se?"Enabled":"Disabled"]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[o.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"6px",textTransform:"uppercase",fontWeight:"600"},children:"Generation Seed"}),o.jsxs("div",{style:{display:"flex",gap:"4px"},children:[o.jsx("input",{type:"number",value:ze,onChange:e=>Ce(parseInt(e.target.value)),style:{flex:1,height:"48px",padding:"0 12px",borderRadius:"10px 0 0 10px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.8rem",outline:"none"},placeholder:"Random"}),o.jsx("button",{onClick:()=>Ce(Math.floor(1e6*Math.random())),style:{padding:"0 12px",borderRadius:"0 10px 10px 0",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderLeft:"none",color:"var(--text-secondary)",cursor:"pointer"},title:"Randomize Seed",children:o.jsx(A,{size:14})})]})]})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:Z?"16px":"20px",border:"1px solid rgba(255,255,255,0.06)",marginBottom:"24px"},children:[o.jsx("div",{style:{display:"flex",alignItems:Z?"flex-start":"center",justifyContent:"space-between",gap:"8px",marginBottom:"16px",flexWrap:"wrap",flexDirection:Z?"column":"row"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx($,{size:Z?14:16,color:"var(--text-secondary)"}),o.jsx("span",{style:{fontSize:Z?"0.75rem":"0.8rem",color:"var(--text-secondary)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Choose Your Generators"}),o.jsxs("span",{style:{padding:"2px 8px",borderRadius:"10px",background:"rgba(139, 92, 246, 0.3)",color:"#a78bfa",fontSize:"0.7rem",fontWeight:"600"},children:[Object.values($e).filter(Boolean).length," / 4 active"]})]})}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px"},children:gt.map(i=>o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"6px"},children:[o.jsx("label",{style:{fontSize:"0.7rem",color:i.color,fontWeight:"500"},children:i.title}),$e[i.key]&&o.jsx("div",{title:`${e.find(e=>e.id===$e[i.key])?.name} Capabilities:\nâ€¢ ${e.find(e=>e.id===$e[i.key])?.capabilities?.join("\nâ€¢ ")}`,style:{color:"rgba(255,255,255,0.3)",cursor:"help"},children:o.jsx(B,{size:12})})]}),o.jsxs("select",{value:$e[i.key]||"",onChange:e=>Te(t=>({...t,[i.key]:e.target.value||null})),style:{width:"100%",padding:"10px 12px",borderRadius:"10px",background:$e[i.key]?"rgba(0,0,0,0.4)":"rgba(0,0,0,0.2)",border:"1px solid "+($e[i.key]?i.color+"60":"rgba(255,255,255,0.1)"),color:$e[i.key]?"white":"var(--text-muted)",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:[o.jsx("option",{value:"",style:{background:"#1a1a1a"},children:"â€” None â€”"}),e.filter(e=>"Pro"===X||("Monthly"===X?"free"===e.tier||"monthly"===e.tier:"free"===e.tier)).filter(e=>"lyrics"===i.key?"Music Creation"===e.category||"ghost"===e.id:"audio"===i.key?"Pro Producer"===e.category||"Music Creation"===e.category||"beat"===e.id:"visual"===i.key?"Visual Identity"===e.category||"album"===e.id:"video"!==i.key||("Visual Identity"===e.category||"video-creator"===e.id)).map(e=>o.jsxs("option",{value:e.id,style:{background:"#1a1a1a"},disabled:e.comingSoon,children:[e.name," ",e.comingSoon?"(Coming Soon)":e.isBeta?"(Beta)":""]},e.id))]})]},i.key))})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:Z?"12px":"16px",marginBottom:"24px",border:"1px solid rgba(168, 85, 247, 0.15)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:nt?"16px":"0"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(E,{size:18,color:"#a855f7"}),o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"white"},children:"Studio DNA Vault"}),!nt&&o.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"rgba(255,255,255,0.4)"},children:Hi||Gi||Ki||_i?"Persistent references active":"No reference files attached"})]})]}),o.jsxs("button",{onClick:()=>at(!nt),style:{padding:"6px 12px",background:"rgba(168, 85, 247, 0.15)",border:"1px solid rgba(168, 85, 247, 0.3)",borderRadius:"8px",fontSize:"0.8rem",color:"#a855f7",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[nt?"Close Vault":"Manage DNA",nt?o.jsx(U,{size:14}):o.jsx(P,{size:14})]})]}),nt&&o.jsxs("div",{style:{marginTop:"16px",animation:"fadeIn 0.3s ease"},children:[o.jsx("div",{style:{padding:"16px",background:"rgba(168, 85, 247, 0.05)",borderRadius:"12px",border:"1px solid rgba(168, 85, 247, 0.15)",marginBottom:"20px"},children:o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[o.jsx(B,{size:20,color:"#a855f7",style:{marginTop:"2px"}}),o.jsxs("div",{children:[o.jsx("h4",{style:{margin:"0 0 6px 0",fontSize:"0.95rem",color:"#a855f7",fontWeight:"bold",fontFamily:"Georgia, serif"},children:"What is DNA?"}),o.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"rgba(255,255,255,0.7)",lineHeight:"1.5",fontFamily:"Georgia, serif"},children:'DNA (Digital Narrative Artifacts) allows you to "seed" the AI with specific creative references. By uploading visual moodboards, audio references, or lyrical contexts, the agents can better understand and mirror your unique artistic direction. Select an artifact below to set it as the active DNA reference for your creative session.'})]})]})}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:Z?"1fr":"repeat(2, 1fr)",gap:"10px",marginBottom:"20px"},children:[o.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(T,{size:18,color:"#ec4899"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Visual DNA"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Hi?"Reference Active":"No Image"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Hi&&o.jsx("button",{onClick:()=>Fi(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:o.jsx(S,{size:14})}),o.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[o.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:e=>vt("visual",e)}),rt.visual?o.jsx(C,{size:12,className:"spin"}):"Upload"]})]})]}),o.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(D,{size:18,color:"#06b6d4"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Audio DNA"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Gi?"Ref Active":"No Beat"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Gi&&o.jsx("button",{onClick:()=>Yi(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:o.jsx(S,{size:14})}),o.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[o.jsx("input",{type:"file",accept:"audio/*",style:{display:"none"},onChange:e=>vt("audio",e)}),rt.audio?o.jsx(C,{size:12,className:"spin"}):"Upload"]})]})]}),o.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(O,{size:18,color:"#a855f7"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Lyrics DNA"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Ki?"Text Ready":"No Context"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Ki&&o.jsx("button",{onClick:()=>qi(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:o.jsx(S,{size:14})}),o.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[o.jsx("input",{type:"file",style:{display:"none"},onChange:e=>vt("lyrics",e)}),rt.lyrics?o.jsx(C,{size:12,className:"spin"}):"Upload"]})]})]}),o.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(W,{size:18,color:"#f59e0b"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Seed DNA"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:_i?"Profile Active":"No Seed"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"6px"},children:[_i&&o.jsx("button",{onClick:()=>Ji(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:o.jsx(S,{size:14})}),o.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[o.jsx("input",{type:"file",style:{display:"none"},onChange:e=>vt("video",e)}),rt.video?o.jsx(C,{size:12,className:"spin"}):"Upload"]})]})]})]}),Xi&&Xi.length>0&&o.jsxs("div",{style:{marginTop:"12px",padding:"16px",background:"rgba(255,255,255,0.02)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)"},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"0.75rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:"600"},children:"Stored Vault Artifacts"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"240px",overflowY:"auto",paddingRight:"4px"},children:Xi.slice().reverse().map(e=>o.jsxs("div",{style:{padding:"10px 12px",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.03)",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",minWidth:0},children:[o.jsxs("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:["visual"===e.type&&o.jsx(T,{size:16,color:"#ec4899"}),"audio"===e.type&&o.jsx(D,{size:16,color:"#06b6d4"}),"lyrics"===e.type&&o.jsx(O,{size:16,color:"#a855f7"}),"video"===e.type&&o.jsx(W,{size:16,color:"#f59e0b"})]}),o.jsxs("div",{style:{minWidth:0},children:[o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.name}),o.jsxs("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.3)"},children:[e.type.charAt(0).toUpperCase()+e.type.slice(1)," â€¢ ",new Date(e.timestamp).toLocaleDateString()]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[o.jsx("button",{onClick:()=>{"visual"===e.type&&Fi(e.url),"audio"===e.type&&Yi(e.url),"video"===e.type&&Ji(e.url),"lyrics"===e.type&&qi(e.url),n.success(`${e.type.charAt(0).toUpperCase()+e.type.slice(1)} activated!`)},style:{padding:"5px 10px",background:"rgba(168, 85, 247, 0.15)",border:"1px solid rgba(168, 85, 247, 0.3)",borderRadius:"6px",color:"#a855f7",fontSize:"0.7rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:"Activate"}),o.jsx("button",{onClick:async()=>{if(window.confirm("Remove this DNA artifact?"))try{const i=Xi.filter(i=>i.id!==e.id);Zi(i);const t=d(s,"users",l.currentUser?.uid);await c(t,{dnaArtifacts:i}),n.success("Artifact removed")}catch(i){}},style:{background:"none",border:"none",color:"rgba(255,255,255,0.2)",cursor:"pointer",padding:"4px"},children:o.jsx(V,{size:14})})]})]},e.id))})]}),o.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:Qi?"1px solid #06b6d4":"1px solid rgba(255,255,255,0.05)",gridColumn:Z?"span 1":"span 2"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(Hash,{size:16,color:"#06b6d4"}),o.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Project Audio ID Reference"})]}),Qi&&o.jsx("button",{onClick:()=>et(""),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:o.jsx(S,{size:14})})]}),o.jsx("input",{type:"text",placeholder:"Link an existing Audio ID (e.g. project_vocal_01)...",value:Qi,onChange:e=>et(e.target.value),style:{width:"100%",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",padding:"8px 12px",fontSize:"0.8rem",color:"white",outline:"none",fontFamily:"monospace"}})]}),o.jsxs("div",{style:{gridColumn:Z?"auto":"1 / span 2",padding:"12px 16px",background:"linear-gradient(90deg, rgba(168, 85, 247, 0.1) 0%, rgba(236, 72, 153, 0.1) 100%)",borderRadius:"12px",border:"1px solid rgba(168, 85, 247, 0.2)",display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"4px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"premium"===Xe?"rgba(168, 85, 247, 0.2)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",color:"premium"===Xe?"#a855f7":"rgba(255,255,255,0.4)"},children:o.jsx(w,{size:18,fill:"premium"===Xe?"#a855f7":"none"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"700",letterSpacing:"0.02em"},children:"ELEVENLABS PREMIUM ENGINE"}),o.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.5)"},children:"premium"===Xe?"Using HD neural voices & cloned mastery":"Using standard generation engines"})]})]}),o.jsx("button",{onClick:()=>Ze("premium"===Xe?"standard":"premium"),style:{padding:"6px 12px",borderRadius:"20px",background:"premium"===Xe?"#a855f7":"rgba(255,255,255,0.1)",border:"none",color:"white",fontSize:"0.7rem",fontWeight:"800",cursor:"pointer",boxShadow:"premium"===Xe?"0 0 15px rgba(168, 85, 247, 0.4)":"none",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},children:"premium"===Xe?"ACTIVATED":"ACTIVATE"})]})]}),!nt&&(Hi||Gi||Ki||_i)&&o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"10px"},children:[Hi&&o.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(236, 72, 153, 0.1)",color:"#ec4899",borderRadius:"6px",border:"1px solid rgba(236, 72, 153, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(T,{size:10})," Visual DNA"]}),Gi&&o.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(6, 182, 212, 0.1)",color:"#06b6d4",borderRadius:"6px",border:"1px solid rgba(6, 182, 212, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(D,{size:10})," Audio DNA"]}),Ki&&o.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(168, 85, 247, 0.1)",color:"#a855f7",borderRadius:"6px",border:"1px solid rgba(168, 85, 247, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(O,{size:10})," Lyrics DNA"]}),_i&&o.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b",borderRadius:"6px",border:"1px solid rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(W,{size:10})," Seed DNA"]})]})]}),o.jsx("div",{style:{padding:"8px",background:Ee.lyrics?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",borderRadius:"8px",marginBottom:"12px",fontSize:"0.75rem",color:Ee.lyrics?"#10b981":"#ef4444"},children:Ee.lyrics?"âœ… Lyrics ready - Create Vocal button should appear below":"âš ï¸ No lyrics yet - Click Generate above first"}),Ee.lyrics&&o.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(139, 92, 246, 0.05) 100%)",borderRadius:"16px",padding:"24px",border:"1px solid rgba(139, 92, 246, 0.4)",marginBottom:"24px"},children:[o.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:o.jsxs("div",{children:[o.jsx("h4",{style:{margin:"0 0 6px",fontSize:"1rem",fontWeight:"700",color:"#8b5cf6"},children:"ðŸŽ¤ Ghostwriter Vocal Performance"}),o.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Generate audio of the lyrics being recited or sung by different voice types"})]})}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[o.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"#8b5cf6",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px"},children:"ðŸ“ Lyrics Text"}),o.jsx("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"12px",maxHeight:"150px",overflowY:"auto",fontSize:"0.9rem",lineHeight:"1.6",fontFamily:"'Georgia', 'Times New Roman', serif",color:"rgba(255,255,255,0.85)",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"'Georgia', 'Times New Roman', serif"},children:Ee.lyrics})]}),o.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(139, 92, 246, 0.3)",display:"flex",flexDirection:"column"},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"#8b5cf6",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px"},children:"ðŸŽµ Vocal Audio"}),Pe.lyricsVocal?o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",flex:1},children:[o.jsx("audio",{src:f(Pe.lyricsVocal),controls:!0,style:{width:"100%",height:"38px",borderRadius:"8px"}}),o.jsxs("button",{onClick:()=>{const e=document.createElement("div");e.innerHTML=`\n                          <div style="\n                            position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n                            background: rgba(0,0,0,0.9); z-index: 9999;\n                            display: flex; align-items: center; justify-content: center;\n                            padding: 20px;\n                          " onclick="if(event.target === this) this.remove();">\n                            <div style="\n                              background: rgba(0,0,0,0.8); border-radius: 20px;\n                              padding: 24px; max-width: 500px; width: 100%;\n                              border: 1px solid rgba(139, 92, 246, 0.4);\n                            " onclick="event.stopPropagation();">\n                              <div style="\n                                font-weight: 700; margin-bottom: 16px; color: #8b5cf6;\n                              ">\n                                ðŸŽ§ Vocal Audio Player\n                              </div>\n                              <audio \n                                src="${Pe.lyricsVocal}"\n                                controls\n                                autoplay\n                                style="width: 100%; height: 50px; border-radius: 10px;"\n                              />\n                              <div style="\n                                margin-top: 16px; font-size: 0.85rem;\n                                color: var(--text-secondary);\n                              ">\n                                Voice Style: <strong>${Ke}</strong>\n                              </div>\n                            </div>\n                          </div>\n                        `,document.body.appendChild(e),e.onclick=i=>i.target===e&&e.remove()},style:{padding:"10px 16px",borderRadius:"8px",background:"rgba(139, 92, 246, 0.3)",border:"1px solid rgba(139, 92, 246, 0.5)",color:"#8b5cf6",fontWeight:"600",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[o.jsx(N,{size:14}),"Fullscreen"]})]}):o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"80px",color:"var(--text-secondary)",fontSize:"0.85rem",textAlign:"center"},children:'No audio yet â€¢ Click "Create Vocal" below'})]})]}),o.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[o.jsxs("select",{value:"cloned"===Ke&&Di?Ei.find(e=>e.url===Di)?`saved-${Ei.find(e=>e.url===Di).id}`:"cloned":Ke,onChange:e=>{const i=e.target.value;if(i.startsWith("saved-")){const e=i.replace("saved-",""),t=Ei.find(i=>i.id===e);t&&(Ai(t.url),qe("cloned"))}else qe(i)},style:{padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(139, 92, 246, 0.5)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:[o.jsxs("optgroup",{label:"ðŸ”¥ AI Rappers (Suno/Bark)",children:[o.jsx("option",{value:"rapper",children:"ðŸŽ¤ Male Rapper"}),o.jsx("option",{value:"rapper-female",children:"ðŸ’œ Female Rapper"})]}),o.jsxs("optgroup",{label:"ðŸŽµ AI Singers",children:[o.jsx("option",{value:"singer",children:"ðŸŽ¤ Male Singer (R&B/Soul)"}),o.jsx("option",{value:"singer-female",children:"ðŸ’« Female Singer (Pop/R&B)"})]}),o.jsxs("optgroup",{label:"ðŸ—£ï¸ Narration",children:[o.jsx("option",{value:"narrator",children:"ðŸ“¢ Narrator (Deep Voice)"}),o.jsx("option",{value:"spoken",children:"ðŸ’¬ Spoken Word"})]}),o.jsxs("optgroup",{label:"ðŸ§¬ Voice Cloning",children:[o.jsxs("option",{value:"cloned",disabled:!Di,children:["âœ¨ Cloned Voice ",!Di&&"(Upload sample first)"]}),Ei.length>0&&o.jsx("optgroup",{label:"ðŸ—„ï¸ Saved Voices",children:Ei.map(e=>o.jsxs("option",{value:`saved-${e.id}`,children:["ðŸ‘¤ ",e.name||"Unnamed Voice"]},e.id))})]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("input",{type:"file",id:"voice-sample-upload",accept:"audio/*",onChange:async e=>{const t=e.target.files[0];if(t)if(t.size>10485760)n.error("File too large (max 10MB)");else{Bi(!0),n.loading("Uploading voice sample...",{id:"voice-upload"});try{const e=await mt(),r=new FileReader;r.readAsDataURL(t),r.onload=async()=>{try{const a=r.result,p=await fetch(`${i}/api/upload-asset`,{method:"POST",headers:e,body:JSON.stringify({data:a,fileName:`voice-sample-${Date.now()}-${t.name.replace(/\s+/g,"-")}`,mimeType:t.type||"audio/wav",assetType:"audio"})}),g=await p.json();if(!p.ok||!g.url)throw new Error(g.error||"Upload failed");if(Ai(g.url),qe("cloned"),n.success('Voice sample uploaded! Model set to "Cloned Voice"',{id:"voice-upload"}),l.currentUser)try{const e=d(s,"users",l.currentUser?.uid);await c(e,{voiceSampleUrl:g.url,lastVoiceUpdate:Date.now()});const i={url:g.url,name:t.name.replace(/\.[^/.]+$/,""),createdAt:y(),type:"cloned"},r=await b(x(s,"users",l.currentUser?.uid,"voices"),i);Ui(e=>[{id:r.id,...i},...e]),n.success("Voice saved to library")}catch(o){}}catch(a){n.error("Failed to upload sample",{id:"voice-upload"})}finally{Bi(!1)}},r.onerror=()=>{n.error("Failed to read file"),Bi(!1)}}catch(r){n.error("Upload failed",{id:"voice-upload"}),Bi(!1)}}},style:{display:"none"}}),o.jsxs("button",{onClick:()=>document.getElementById("voice-sample-upload").click(),disabled:Wi,style:{padding:"10px 14px",borderRadius:"10px",background:Di?"rgba(34, 197, 94, 0.1)":"rgba(255, 255, 255, 0.05)",border:Di?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",color:Di?"#22c55e":"white",fontSize:"0.85rem",cursor:"pointer",flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",transition:"all 0.2s"},children:[Wi?o.jsx(C,{size:16,className:"spin"}):o.jsx(z,{size:16}),Di?"Voice Sample Attached âœ“":"Upload Voice Sample"]}),Di&&o.jsx("button",{onClick:()=>{Ai(null),"cloned"===Ke&&qe("rapper")},style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"10px",color:"#ef4444",cursor:"pointer",padding:"10px"},title:"Remove sample",children:o.jsx(S,{size:16})})]}),("premium"===Xe||"cloned"===Ke||Ke.startsWith("saved-"))&&o.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",gap:"8px"},children:[Vi.length>0?o.jsxs("select",{value:$i,onChange:e=>{Ti(e.target.value),localStorage.setItem("studio_elevenlabs_voice_id",e.target.value)},style:{width:"100%",padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:$i?"1px solid #fbbf24":"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.85rem",outline:"none",cursor:"pointer"},children:[o.jsx("option",{value:"",children:"Select ElevenLabs Voice (Premium)"}),o.jsx("optgroup",{label:"Professional Models",children:Vi.map(e=>o.jsxs("option",{value:e.voice_id,children:[e.name," (",e.labels?.accent||e.labels?.gender||"Pro",")"]},e.voice_id))})]}):o.jsx("input",{type:"text",placeholder:"ElevenLabs Voice ID (Optional for Premium)",value:$i,onChange:e=>{Ti(e.target.value),localStorage.setItem("studio_elevenlabs_voice_id",e.target.value)},style:{width:"100%",padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:$i?"1px solid #fbbf24":"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.8rem",outline:"none"}}),$i&&o.jsxs("div",{style:{position:"absolute",right:Vi.length>0?"30px":"10px",top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center",gap:"4px",pointerEvents:"none"},children:[o.jsx(w,{size:10,color:"#fbbf24",fill:"#fbbf24"}),o.jsx("span",{style:{fontSize:"0.65rem",color:"#fbbf24",fontWeight:"bold"},children:"PREMIUM"})]})]})]}),Ei.length>0&&o.jsxs("div",{style:{marginTop:"8px",background:"rgba(255,255,255,0.02)",borderRadius:"8px",padding:"10px"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",marginBottom:"6px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"My Voice Library"}),o.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Ei.map(e=>o.jsxs("div",{onClick:()=>{Ai(e.url),qe("cloned"),n.success(`Voice "${e.name}" loaded`)},style:{background:Di===e.url?"rgba(139, 92, 246, 0.2)":"rgba(255,255,255,0.05)",border:Di===e.url?"1px solid #8b5cf6":"1px solid rgba(255,255,255,0.1)",borderRadius:"16px",padding:"4px 10px",fontSize:"0.75rem",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[o.jsx(M,{size:10}),e.name||"Voice",o.jsx(S,{size:12,onClick:async i=>{if(i.stopPropagation(),window.confirm("Delete this voice from your library?"))try{await p(d(s,"users",l.currentUser?.uid,"voices",e.id)),Ui(i=>i.filter(i=>i.id!==e.id)),Di===e.url&&(Ai(null),qe("rapper")),n.success("Voice deleted")}catch(t){n.error("Failed to delete voice")}},onMouseEnter:e=>e.currentTarget.style.color="#ef4444",onMouseLeave:e=>e.currentTarget.style.color="inherit",style:{marginLeft:"4px",opacity:.5,cursor:"pointer"}})]},e.id))})]}),("rapper"===Ke||"rapper-female"===Ke)&&o.jsx("select",{value:Qe,onChange:e=>ei(e.target.value),style:{padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(236, 72, 153, 0.5)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:o.jsxs("optgroup",{label:"ðŸ”¥ Rap Flow",children:[o.jsx("option",{value:"aggressive",children:"ðŸ’¥ Aggressive"}),o.jsx("option",{value:"melodic",children:"ðŸŽµ Melodic"}),o.jsx("option",{value:"trap",children:"ðŸ”¥ Trap (Triplets)"}),o.jsx("option",{value:"drill",children:"ðŸ‡¬ðŸ‡§ Drill (UK)"}),o.jsx("option",{value:"boom-bap",children:"ðŸ“» Boom-Bap"}),o.jsx("option",{value:"fast",children:"âš¡ Fast Flow"}),o.jsx("option",{value:"chill",children:"ðŸ˜Ž Chill"}),o.jsx("option",{value:"hype",children:"ðŸ”Š Hype"})]})}),("singer"===Ke||"singer-female"===Ke)&&o.jsx("select",{value:ii,onChange:e=>ti(e.target.value),style:{padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(139, 92, 246, 0.5)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:o.jsxs("optgroup",{label:"ðŸŽ¶ Genre",children:[o.jsx("option",{value:"r&b",children:"ðŸ’œ R&B / Soul"}),o.jsx("option",{value:"pop",children:"ðŸŒŸ Pop"}),o.jsx("option",{value:"hip-hop",children:"ðŸ”¥ Hip-Hop"}),o.jsx("option",{value:"soul",children:"ðŸŽ· Gospel/Soul"})]})}),o.jsx("button",{onClick:()=>{ft()},disabled:ri,style:{padding:"10px 20px",borderRadius:"10px",background:ri?"rgba(139, 92, 246, 0.3)":"rgba(139, 92, 246, 0.5)",border:"1px solid rgba(139, 92, 246, 0.6)",color:"#8b5cf6",fontWeight:"600",fontSize:"0.9rem",cursor:ri?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:ri?.7:1},children:ri?o.jsxs(o.Fragment,{children:[o.jsx(C,{size:16,className:"spin"}),"Creating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(L,{size:16}),"Create Vocal"]})}),o.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(Ee.lyrics),n.success("Lyrics copied!")},style:{padding:"10px 16px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",fontWeight:"500",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx(H,{size:14}),"Copy Lyrics"]}),Pe.lyricsVocal&&Pe.lyricsVocal.startsWith("data:audio")&&o.jsxs("button",{onClick:()=>{const e=document.createElement("a");e.href=Pe.lyricsVocal;const i=Pe.lyricsVocal.includes("audio/wav")?"wav":"mp3";e.download=`${re||"lyrics"}-${Ke}.${i}`,e.click()},style:{padding:"10px 16px",borderRadius:"10px",background:"rgba(34, 197, 94, 0.15)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#22c55e",fontWeight:"600",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx(F,{size:14}),"Download Audio"]})]})]}),o.jsx("div",{className:"generator-grid-unified",style:{gap:Z?"0.75rem":"1rem",touchAction:"pan-y"},children:gt.map(e=>o.jsx(ie,{slot:e.key,agentId:$e[e.key],icon:e.icon,title:e.title,subtitle:e.subtitle,color:e.color,output:Ee[e.key],isLoading:We&&$e[e.key],mediaType:e.mediaType,mediaUrl:"audio"===e.key?Pe.audio:"lyrics"===e.key?Pe.vocals||Pe.lyricsVocal:"visual"===e.key?Pe.image:"video"===e.key?Pe.video:null,onGenerateMedia:"audio"===e.key?ht:"lyrics"===e.key?ft:"visual"===e.key?wt:"video"===e.key?kt:null,isGeneratingMedia:"audio"===e.key?Ve.audio:"lyrics"===e.key?Ve.vocals:"visual"===e.key?Ve.image:"video"===e.key&&Ve.video,onRegenerate:()=>bt(e.key),onEdit:i=>Rt(e.key,i),onDelete:()=>It(e.key),onDownload:()=>Ct(e.key),onSpeak:()=>xt(Ee[e.key],e.key),isSpeaking:Me===e.key,onMaximize:()=>ai(e.key),onUploadDna:"visual"===e.key?e=>vt("visual",e):"audio"===e.key?e=>vt("audio",e):"video"===e.key?e=>vt("video",e):"lyrics"===e.key?e=>vt("lyrics",e):null,dnaUrl:"visual"===e.key?Hi:"audio"===e.key?Gi:"video"===e.key?_i:"lyrics"===e.key?Ki:null,isUploadingDna:rt[e.key],onClearDna:()=>{"visual"===e.key&&Fi(null),"audio"===e.key&&Yi(null),"video"===e.key&&Ji(null),"lyrics"===e.key&&qi(null)}},e.key))}),o.jsx(te,{outputs:Ee,mediaUrls:Pe,songIdea:re,finalMixPreview:di,creatingFinalMix:si,musicVideoUrl:xi,generatingMusicVideo:pi,handleGenerateProfessionalMusicVideo:async()=>{if(!pi)if(Pe.audio&&Ee.video){gi(!0),n.loading("ðŸŽ¬ Syncing audio with video beats (~2-3 min)...",{id:"prof-video"});try{const e=await mt(),t=e.Authorization?"/api/generate-synced-video":"/api/generate-synced-video-test",r=await fetch(`${i}${t}`,{method:"POST",headers:{"Content-Type":"application/json",...e},body:JSON.stringify({audioUrl:Pe.audio,videoPrompt:Ee.video,songTitle:re||"Untitled",style:se||"cinematic",duration:"Extended"===je?180:"Radio Edit"===je?150:"Full Song"===je?90:60})}),o=await r.json();r.ok?o.videoUrl?(ui(o.videoUrl),di&&ci(e=>({...e,musicVideoUrl:o.videoUrl,musicVideoGenerated:!0,bpm:o.bpm,beatCount:o.beats})),n.success(`ðŸŽ¬ Image to video created! (${o.duration}s, ${o.bpm} BPM)`,{id:"prof-video"})):o.jobId&&n.success(`ðŸŽ¬ Video queued for processing (Job: ${o.jobId.substring(0,8)}...)`,{id:"prof-video"}):503===r.status?n.error("âŒ Video API not configured",{id:"prof-video"}):n.error(`âŒ ${o.error||"Video sync failed"}`,{id:"prof-video"})}catch(e){n.error("âŒ Image to video generation failed",{id:"prof-video"})}finally{gi(!1)}}else n.error("Need beat audio and video concept to sync")},handleCreateFinalMix:zt,handleCreateProject:Dt,setShowPreviewModal:yi,visualType:Ii,setVisualType:Ri,isMobile:Z,orchestratorBpm:De})]}),ni&&gt.find(e=>e.key===ni)&&o.jsx("div",{style:{position:"fixed",inset:0,background:"linear-gradient(180deg, rgba(0,0,0,0.98) 0%, rgba(10,10,20,0.98) 100%)",display:"flex",alignItems:Z?"flex-start":"center",justifyContent:"center",zIndex:2500,padding:Z?"10px":"20px",overflowY:"auto"},onClick:()=>ai(null),children:o.jsxs("div",{style:{background:"rgba(10, 10, 20, 0.95)",borderRadius:Z?"16px":"24px",border:"1px solid rgba(255,255,255,0.1)",width:"100%",maxWidth:"800px",maxHeight:Z?"95vh":"90vh",overflow:"auto",display:"flex",flexDirection:"column",marginTop:Z?"10px":"0"},onClick:e=>e.stopPropagation(),children:[o.jsxs("div",{style:{padding:Z?"12px 16px":"16px 24px",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(10px)",zIndex:10},children:[o.jsx("h3",{style:{margin:0,fontSize:Z?"1rem":"1.2rem",fontWeight:"700"},children:gt.find(e=>e.key===ni)?.title}),o.jsxs("button",{onClick:()=>ai(null),style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"10px",padding:Z?"6px 10px":"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",color:"#ef4444",fontWeight:"600",fontSize:Z?"0.8rem":"0.9rem",transition:"all 0.2s",minWidth:"36px",minHeight:"36px"},children:[o.jsx(S,{size:16}),!Z&&"Close"]})]}),o.jsx("div",{style:{padding:Z?"12px":"24px",flex:1,overflowY:"auto"},children:(()=>{const e=gt.find(e=>e.key===ni);return o.jsx(ie,{slot:e.key,agentId:$e[e.key],icon:e.icon,title:e.title,subtitle:e.subtitle,color:e.color,output:Ee[e.key],isLoading:We&&$e[e.key],mediaType:e.mediaType,mediaUrl:"audio"===e.key?Pe.audio:"lyrics"===e.key?Pe.vocals:"visual"===e.key?Pe.image:"video"===e.key?Pe.video:null,onGenerateMedia:"audio"===e.key?ht:"lyrics"===e.key?ft:"visual"===e.key?wt:"video"===e.key?kt:null,isGeneratingMedia:"audio"===e.key?Ve.audio:"lyrics"===e.key?Ve.vocals:"visual"===e.key?Ve.image:"video"===e.key&&Ve.video,onRegenerate:()=>bt(e.key),onEdit:i=>Rt(e.key,i),onDelete:()=>It(e.key),onDownload:()=>Ct(e.key),onSpeak:()=>xt(Ee[e.key],e.key),isSpeaking:Me===e.key,onUploadDna:"visual"===e.key?e=>vt("visual",e):"audio"===e.key?e=>vt("audio",e):"video"===e.key?e=>vt("video",e):"lyrics"===e.key?e=>vt("lyrics",e):null,dnaUrl:"visual"===e.key?Hi:"audio"===e.key?Gi:"video"===e.key?_i:"lyrics"===e.key?Ki:null,isUploadingDna:rt[e.key],onClearDna:()=>{"visual"===e.key&&Fi(null),"audio"===e.key&&Yi(null),"video"===e.key&&Ji(null),"lyrics"===e.key&&qi(null)}},`max-${e.key}`)})()}),o.jsx("div",{style:{padding:Z?"12px":"16px 24px",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"center",background:"rgba(0,0,0,0.3)"},children:o.jsxs("button",{onClick:()=>ai(null),style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(220, 38, 38, 0.2))",border:"1px solid rgba(239, 68, 68, 0.5)",borderRadius:"12px",padding:Z?"10px 20px":"14px 32px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer",color:"#ef4444",fontWeight:"700",fontSize:Z?"0.9rem":"1rem",transition:"all 0.2s",boxShadow:"0 4px 20px rgba(239, 68, 68, 0.2)"},children:[o.jsx(S,{size:20}),Z?"Close":"Close Preview"]})})]})}),Object.values(Ee).some(Boolean)&&o.jsxs("div",{style:{padding:"16px 24px",background:"rgba(0,0,0,0.8)",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",bottom:0,backdropFilter:"blur(10px)"},children:[o.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:[Object.values(Ee).filter(Boolean).length,"/4 generators complete â€¢",Object.values(Pe).filter(Boolean).length," media assets"]}),o.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o.jsxs("button",{onClick:()=>{const e={project:re,timestamp:(new Date).toISOString(),outputs:Ee,settings:{language:ne,style:se,model:me}},i=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(i),r=document.createElement("a");r.href=t,r.download=`${re||"project"}-export.json`,r.click(),URL.revokeObjectURL(t),n.success("Exported!")},style:{padding:"12px 20px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(F,{size:16}),"Export"]}),o.jsxs("button",{onClick:()=>Ye(!0),style:{padding:"12px 28px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",fontSize:"1rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.4)"},children:[o.jsx(G,{size:18}),"Save to Project"]})]})]}),Ge&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3},onClick:()=>Ye(!1),children:o.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:"24px",padding:"28px",maxWidth:"420px",width:"90%",border:"1px solid rgba(255,255,255,0.1)"},onClick:e=>e.stopPropagation(),children:[o.jsx("h3",{style:{margin:"0 0 20px",fontSize:"1.3rem",fontWeight:"700"},children:"Save to Project"}),o.jsx("input",{type:"text",value:He,onChange:e=>Fe(e.target.value),placeholder:re||"Project name...",style:{width:"100%",padding:"14px 18px",borderRadius:"12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"1rem",marginBottom:"20px",outline:"none"}}),o.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o.jsx("button",{onClick:()=>Ye(!1),className:"btn-pill glass",style:{flex:1,padding:"14px"},children:"Cancel"}),o.jsx("button",{onClick:Dt,className:"btn-pill primary",style:{flex:1,padding:"14px",fontWeight:"700"},children:"Save Project"})]})]})}),fi&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001,padding:"20px"},children:o.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",borderRadius:"20px",padding:"32px",border:"1px solid rgba(34, 197, 94, 0.4)",maxWidth:"450px",width:"100%",textAlign:"center",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[o.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"rgba(34, 197, 94, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:o.jsx(G,{size:32,color:"#22c55e"})}),o.jsx("h2",{style:{margin:"0 0 12px",fontSize:"1.4rem",fontWeight:"700",color:"white"},children:"Project Saved! ðŸŽ‰"}),o.jsxs("p",{style:{margin:"0 0 24px",color:"rgba(255,255,255,0.7)",fontSize:"0.95rem",lineHeight:"1.5"},children:['Your project "',He||re||"Untitled",'" has been saved with ',Object.values(Ee).filter(Boolean).length," assets."]}),o.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"12px",marginBottom:"24px",textAlign:"left"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.4)",fontWeight:"700",textTransform:"uppercase",marginBottom:"10px"},children:"Generated Content"}),Object.entries(Ee).filter(([e,i])=>null!==i).map(([e,i])=>{const t=gt.find(i=>i.key===e);return o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px",fontSize:"0.85rem",color:"rgba(255,255,255,0.8)"},children:[o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:t?.color||"#8b5cf6"}}),t?.title||e]},e)})]}),o.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o.jsx("button",{onClick:()=>{vi(!1),a?.()},className:"btn-pill glass",style:{flex:1,padding:"14px",fontWeight:"600"},children:"Go to Hub"}),o.jsxs("button",{onClick:()=>{vi(!1),yi(!0)},className:"btn-pill primary",style:{flex:1,padding:"14px",fontWeight:"700",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[o.jsx(N,{size:18}),"Preview"]})]})]})}),Si&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002,padding:"20px"},children:o.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",borderRadius:"20px",padding:"32px",border:"1px solid rgba(245, 158, 11, 0.4)",maxWidth:"450px",width:"100%",textAlign:"center",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[o.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:o.jsx(G,{size:32,color:"#f59e0b"})}),o.jsx("h2",{style:{margin:"0 0 12px",fontSize:"1.4rem",fontWeight:"700",color:"white"},children:"Save Your Work?"}),o.jsxs("p",{style:{margin:"0 0 24px",color:"rgba(255,255,255,0.7)",fontSize:"0.95rem",lineHeight:"1.5"},children:["You have ",Object.values(ct).filter(Boolean).length+Object.values(pt).filter(Boolean).length," unsaved creations. Would you like to save before leaving?"]}),o.jsxs("div",{style:{display:"flex",gap:"12px",flexDirection:"column"},children:[o.jsxs("button",{onClick:()=>{ki(!1),Ye(!0)},className:"btn-pill primary",style:{width:"100%",padding:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[o.jsx(G,{size:18}),"Save Project"]}),o.jsxs("div",{style:{display:"flex",gap:"12px",flexDirection:Z?"column-reverse":"row"},children:[o.jsx("button",{onClick:()=>{ki(!1)},className:"btn-pill glass",style:{flex:1,padding:"12px"},children:"Cancel"}),o.jsx("button",{onClick:()=>{ki(!1),a?.()},className:"btn-pill secondary",style:{flex:1,padding:"12px"},children:"Discard & Exit"})]})]})]})}),mi&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:bi?"0":"20px"},onClick:e=>{e.target===e.currentTarget&&yi(!1)},children:o.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",borderRadius:bi?"0":"20px",padding:bi||Z?"16px":"24px",border:bi?"none":"1px solid rgba(148, 163, 184, 0.2)",width:"100%",maxWidth:bi?"100%":"900px",height:bi?"100%":"auto",maxHeight:bi?"100%":"90vh",overflowY:"auto",position:"relative",boxShadow:bi?"none":"0 25px 80px rgba(0,0,0,0.5)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",position:"sticky",top:0,background:bi?"rgba(15, 23, 42, 0.95)":"transparent",padding:bi?"8px 0 16px":"0",zIndex:5},children:[o.jsxs("h2",{style:{margin:0,fontSize:bi?"1.75rem":"1.5rem",fontWeight:"700",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx(N,{size:bi?28:24,color:"#8b5cf6"}),"Preview All Creations"]}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsxs("button",{onClick:()=>hi(!bi),style:{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"10px",padding:"10px",cursor:"pointer",color:"white",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.85rem"},title:bi?"Minimize":"Maximize",children:[o.jsx(Y,{size:18}),bi?"Minimize":"Maximize"]}),o.jsx("button",{onClick:()=>yi(!1),style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"10px",padding:"10px",cursor:"pointer",color:"#ef4444"},children:o.jsx(S,{size:20})})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:Z?"1fr":"repeat(2, 1fr)",gap:Z?"16px":bi?"32px":"24px",marginBottom:"24px"},children:[o.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",borderRadius:"16px",padding:Z?"12px":"16px",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[o.jsxs("h3",{style:{margin:0,color:"#a78bfa",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(O,{size:18}),"Lyrics"]}),o.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:ct.lyrics?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:ct.lyrics?"#22c55e":"rgba(255,255,255,0.5)"},children:ct.lyrics?"âœ“ Ready":"Pending"})]}),o.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"16px",minHeight:bi?"300px":"180px",maxHeight:bi?"400px":"200px",overflowY:"auto",fontSize:"1rem",lineHeight:"1.7",fontFamily:"'Georgia', 'Times New Roman', serif",color:ct.lyrics?"rgba(255,255,255,0.9)":"rgba(255,255,255,0.4)",whiteSpace:"pre-wrap",wordBreak:"break-word",fontStyle:ct.lyrics?"normal":"italic",fontFamily:"'Georgia', 'Times New Roman', serif"},children:ct.lyrics||"No lyrics generated yet. Use the Lyrics generator to create lyrics."})]}),o.jsxs("div",{style:{background:"rgba(6, 182, 212, 0.1)",borderRadius:"16px",padding:Z?"12px":"16px",border:"1px solid rgba(6, 182, 212, 0.3)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[o.jsxs("h3",{style:{margin:0,color:"#22d3ee",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(D,{size:18}),"Beat Audio"]}),o.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:pt.audio?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:pt.audio?"#22c55e":"rgba(255,255,255,0.5)"},children:pt.audio?"âœ“ Ready":"Pending"})]}),o.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"16px",minHeight:"100px"},children:pt.audio?o.jsxs(o.Fragment,{children:[o.jsx("audio",{controls:!0,style:{width:"100%",marginBottom:"12px"},src:f(pt.audio),onError:e=>{}}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx(L,{size:14}),"Audio ready to play"]})]}):o.jsx("div",{style:{textAlign:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem",padding:"24px",fontStyle:"italic"},children:"No audio generated yet. Generate a beat to preview audio."})})]}),o.jsxs("div",{style:{background:"rgba(236, 72, 153, 0.1)",borderRadius:"16px",padding:Z?"12px":"16px",border:"1px solid rgba(236, 72, 153, 0.3)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[o.jsxs("h3",{style:{margin:0,color:"#f472b6",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(T,{size:18}),"Cover Visual"]}),o.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:pt.image?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:pt.image?"#22c55e":"rgba(255,255,255,0.5)"},children:pt.image?"âœ“ Ready":"Pending"})]}),o.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"8px",aspectRatio:"1",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:pt.image?o.jsx("img",{src:v(pt.image),alt:"Cover Art",style:{width:"100%",height:"100%",borderRadius:"8px",objectFit:"cover"},onError:e=>{e.target.style.display="none"}}):o.jsx("div",{style:{textAlign:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem",fontStyle:"italic"},children:"No image generated yet"})})]}),o.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",borderRadius:"16px",padding:Z?"12px":"16px",border:xi?"1px solid rgba(34, 197, 94, 0.5)":"1px solid rgba(245, 158, 11, 0.3)",boxShadow:xi?"0 0 15px rgba(34, 197, 94, 0.2)":"none"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[o.jsxs("h3",{style:{margin:0,color:xi?"#22c55e":"#fbbf24",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[xi?o.jsx(w,{size:18}):o.jsx(W,{size:18}),xi?"Professional Sync":"Concept Video"]}),o.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:xi||pt.video?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:xi||pt.video?"#22c55e":"rgba(255,255,255,0.5)"},children:xi?"âœ“ Synced":pt.video?"âœ“ Concept":"Pending"})]}),o.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"8px",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:xi||pt.video?o.jsx("video",{src:j(xi||pt.video),controls:!0,style:{width:"100%",height:"100%",borderRadius:"8px",objectFit:"contain",backgroundColor:"#000"},onError:e=>{}}):o.jsx("div",{style:{textAlign:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem",fontStyle:"italic"},children:"No video generated yet"})})]})]}),o.jsx("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(148, 163, 184, 0.2)",marginBottom:"20px"},children:o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",fontSize:"0.9rem"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Lyrics"}),o.jsx("div",{style:{fontWeight:"700",color:"#a78bfa",fontSize:"1.1rem"},children:ct.lyrics?`${ct.lyrics.length} chars`:"â€”"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Audio"}),o.jsx("div",{style:{fontWeight:"700",color:"#22d3ee",fontSize:"1.1rem"},children:pt.audio?"âœ“ Ready":"â€”"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Visual"}),o.jsx("div",{style:{fontWeight:"700",color:"#f472b6",fontSize:"1.1rem"},children:pt.image?"âœ“ Ready":"â€”"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Video"}),o.jsx("div",{style:{fontWeight:"700",color:"#fbbf24",fontSize:"1.1rem"},children:pt.video?"âœ“ Ready":"â€”"})]})]})}),o.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>yi(!1),style:{flex:1,minWidth:"120px",padding:"14px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",fontWeight:"600",cursor:"pointer",fontSize:"0.95rem"},children:"Close Preview"}),o.jsxs("button",{onClick:()=>{yi(!1),Ye(!0)},style:{flex:1,minWidth:"140px",padding:"14px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",cursor:"pointer",fontSize:"0.95rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[o.jsx(G,{size:18}),"Save Project"]}),o.jsx("button",{onClick:()=>{yi(!1),zt()},disabled:si||!Object.values(ct).some(Boolean),style:{flex:1,minWidth:"140px",padding:"14px",borderRadius:"12px",background:si||!Object.values(ct).some(Boolean)?"rgba(34, 197, 94, 0.2)":"rgba(34, 197, 94, 0.5)",border:"1px solid rgba(34, 197, 94, 0.6)",color:"#22c55e",fontWeight:"600",cursor:si||!Object.values(ct).some(Boolean)?"not-allowed":"pointer",fontSize:"0.95rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",opacity:Object.values(ct).some(Boolean)?1:.5},children:si?o.jsxs(o.Fragment,{children:[o.jsx(C,{size:16,className:"spin"}),"Creating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(w,{size:16}),"Final Mix"]})})]})]})}),o.jsx("style",{children:"\n        .loading-dots {\n          display: flex;\n          gap: 4px;\n        }\n        .loading-dots span {\n          width: 8px;\n          height: 8px;\n          border-radius: 50%;\n          animation: bounce 1.4s infinite ease-in-out both;\n        }\n        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }\n        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }\n        .loading-dots span:nth-child(3) { animation-delay: 0s; }\n        \n        @keyframes bounce {\n          0%, 80%, 100% { transform: scale(0); opacity: 0.5; }\n          40% { transform: scale(1); opacity: 1; }\n        }\n        \n        .spin {\n          animation: spin 1s linear infinite;\n        }\n        \n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        \n        .animate-fadeIn {\n          animation: fadeIn 0.3s ease;\n        }\n        \n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n      "})]}):null}export{re as default};
