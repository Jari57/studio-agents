import{r as e,j as i}from"./react-vendor-B4kYgmlj.js";import{B as s}from"./index-D28i5j2U.js";import{V as a,b as t,S as n,a1 as l,P as r,K as c,M as o,e as h}from"./icons-DM36n8BT.js";import"./vendor-BjQYSgJ0.js";import"./firebase-BzYbMxZk.js";function d({initialTopic:d="My new summer anthem",onCreateProject:p=null}){const[m,v]=e.useState(d),[j,x]=e.useState("English"),[u,g]=e.useState("Modern Hip-Hop"),[N,f]=e.useState("Gemini 2.0 Flash"),[y,S]=e.useState(!1),[b,w]=e.useState(null),[C,P]=e.useState(!1),[E,G]=e.useState(0);e.useRef(null);e.useEffect(()=>{let e;return C&&(e=setInterval(()=>{G(e=>e>=100?(P(!1),0):e+1)},70)),()=>clearInterval(e)},[C]);return i.jsxs("div",{className:"viral-pitch-card",children:[i.jsxs("div",{className:"viral-pitch-header",children:[i.jsx("div",{className:"viral-pitch-icon",children:i.jsx(a,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"viral-pitch-title",children:"Instant Pitch Generator"}),i.jsx("p",{className:"viral-pitch-subtitle",children:"Create a 7-second viral hook in one click"})]})]}),i.jsxs("div",{className:"viral-pitch-controls",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("select",{value:j,onChange:e=>x(e.target.value),className:"viral-pitch-select",children:[i.jsx("option",{children:"English"}),i.jsx("option",{children:"Spanish"}),i.jsx("option",{children:"French"}),i.jsx("option",{children:"German"}),i.jsx("option",{children:"Japanese"})]}),i.jsxs("select",{value:u,onChange:e=>g(e.target.value),className:"viral-pitch-select",children:[i.jsx("option",{children:"Modern Hip-Hop"}),i.jsx("option",{children:"Cinematic Pop"}),i.jsx("option",{children:"Lo-Fi Chill"}),i.jsx("option",{children:"Aggressive Phonk"}),i.jsx("option",{children:"Acoustic Indie"})]})]}),i.jsxs("select",{value:N,onChange:e=>f(e.target.value),className:"viral-pitch-select",children:[i.jsx("option",{children:"Gemini 2.0 Flash"}),i.jsx("option",{children:"Gemini 2.0 Pro (Exp)"}),i.jsx("option",{children:"Gemini 1.5 Flash"}),i.jsx("option",{children:"Gemini 1.5 Pro"})]}),i.jsx("input",{type:"text",value:m,onChange:e=>v(e.target.value),placeholder:"What's your song about?",className:"viral-pitch-input"}),i.jsxs("button",{onClick:async()=>{S(!0),w(null),G(0);try{const e={"Gemini 2.0 Flash":"gemini-2.0-flash","Gemini 2.0 Pro (Exp)":"gemini-2.0-flash-exp","Gemini 1.5 Flash":"gemini-1.5-flash","Gemini 1.5 Pro":"gemini-1.5-pro"}[N]||"gemini-2.0-flash",i=await fetch(`${s}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:`Write a 7-second viral TikTok video script for a song about: "${m}". \n          Language: ${j}. Style: ${u}.\n          Format: \n          [SCENE 1]: text\n          [SCENE 2]: text\n          [SCENE 3]: text\n          Keep it under 15 words total. Punchy.`,systemInstruction:"You are a viral content strategist.",model:e})}),a=(await i.json()).output.split("\n").filter(e=>e.trim().length>0).slice(0,3);w(a),P(!0)}catch(e){w(["POV: You found the song of the summer â˜€ï¸","Wait for the drop... ðŸŽµ","Stream 'Heatwave' now! ðŸ”¥"]),P(!0)}finally{S(!1)}},disabled:y,className:"viral-pitch-generate-btn",children:[y?i.jsx(t,{className:"w-4 h-4 animate-spin"}):i.jsx(n,{className:"w-4 h-4"}),y?"Generating...":"Generate Pitch"]})]}),i.jsxs("div",{className:"viral-pitch-preview group",children:[i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4 text-center",children:[b?i.jsx("div",{className:"viral-pitch-script",children:b.map((e,s)=>i.jsx("div",{className:"viral-pitch-line "+(E>33*s?"":"hidden"),children:e.replace(/\[SCENE \d\]: /,"")},s))}):i.jsxs("div",{className:"viral-pitch-empty",children:[i.jsx(a,{className:"w-8 h-8"}),i.jsx("p",{children:"Your viral pitch will appear here"})]}),i.jsx("div",{className:"viral-pitch-visualizer "+(C?"active":""),children:C&&i.jsx("div",{className:"viral-pitch-bars",children:[...Array(8)].map((e,s)=>i.jsx("div",{className:"viral-pitch-bar",style:{height:20+60*Math.random()+"%",animationDelay:.1*s+"s"}},s))})})]}),i.jsx("div",{className:"viral-pitch-progress",children:i.jsx("div",{className:"viral-pitch-progress-fill",style:{width:`${E}%`}})}),i.jsx("div",{className:"viral-pitch-overlay",children:i.jsx("button",{onClick:()=>P(!C),className:"viral-pitch-play-btn",children:C?i.jsx(l,{className:"w-5 h-5"}):i.jsx(r,{className:"w-5 h-5 ml-0.5"})})})]}),i.jsxs("div",{className:"viral-pitch-actions",children:[i.jsxs("div",{className:"viral-pitch-actions-row",children:[i.jsxs("button",{className:"viral-pitch-action-btn",children:[i.jsx(c,{}),"Share"]}),i.jsxs("button",{className:"viral-pitch-action-btn",children:[i.jsx(o,{}),"Audio"]})]}),b&&p&&i.jsxs("button",{onClick:()=>{if(!p||!m)return;const e={id:String(Date.now()),name:m,category:"social",description:`Video pitch project: ${m}`,language:j,style:u,model:N,date:(new Date).toLocaleDateString(),status:"active",progress:20,assets:[{id:"script-1",type:"text",title:"Video Script",content:b?.join("\n"),agent:"Viral Strategist"}].filter(e=>e.content)};p(e)},className:"viral-pitch-create-btn",children:[i.jsx(h,{}),"Create Project from Pitch"]})]})]})}export{d as default};
