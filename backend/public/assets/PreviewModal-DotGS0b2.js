import{r as e,j as t}from"./react-vendor-03wl4UEb.js";import{a as i,b as r,f as o}from"./StudioView-BfdKxcrP.js";import{an as n,ac as a,I as s,X as l}from"./icons-DT0eBrXO.js";import"./vendor-DPgDnBIk.js";import"./index-CeFgmZMl.js";import"./constants-hRVrvfLk.js";import"./firebase-DgNc3hGb.js";import"./firebase-C6j5ZoHL.js";function d({isOpen:d,onClose:p,mediaUrl:c,mediaType:x,title:g="Asset Preview",textContent:h=null,onDownload:m=null,item:b=null}){const[f,u]=e.useState(!1);if(e.useEffect(()=>{if(!d)return;const e=e=>{"Escape"===e.key&&p()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[d,p]),!d||!c&&!h)return null;return t.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.98)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002,backdropFilter:"blur(12px)",animation:"fadeIn 0.2s ease-out"},onClick:p,children:[t.jsxs("div",{style:{position:"relative",width:"95vw",maxWidth:"1200px",height:"90vh",maxHeight:"900px",display:"flex",flexDirection:"column",background:"rgba(20, 20, 20, 0.95)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",overflow:"hidden",backdropFilter:"blur(16px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"},onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 12px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",background:"rgba(0, 0, 0, 0.3)",flexShrink:0,gap:"8px",flexWrap:"wrap"},children:[t.jsxs("h2",{style:{margin:0,fontSize:"0.85rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",textTransform:"uppercase",letterSpacing:"0.05em",flex:"1 1 auto",minWidth:"80px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[g," Preview"]}),t.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",alignItems:"center"},children:["text"===x&&h&&t.jsxs("button",{onClick:async()=>{h&&(await navigator.clipboard.writeText(h),u(!0),setTimeout(()=>u(!1),2e3))},style:{background:f?"rgba(34, 197, 94, 0.2)":"rgba(139, 92, 246, 0.2)",border:"1px solid "+(f?"rgba(34, 197, 94, 0.4)":"rgba(139, 92, 246, 0.4)"),color:f?"#22c55e":"#8b5cf6",padding:"6px 10px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"0.75rem",fontWeight:"600",transition:"all 0.2s",touchAction:"manipulation",minHeight:"36px",whiteSpace:"nowrap"},children:[f?t.jsx(n,{size:12}):t.jsx(a,{size:12}),f?"Copied":"Copy"]}),"audio"===x&&m&&b?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>m(b,"mp3"),style:{background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.4)",color:"#3b82f6",padding:"6px 10px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"0.75rem",fontWeight:"600",transition:"all 0.2s",touchAction:"manipulation",minHeight:"36px",whiteSpace:"nowrap"},children:[t.jsx(s,{size:12}),"MP3"]}),t.jsxs("button",{onClick:()=>m(b,"wav"),style:{background:"rgba(139, 92, 246, 0.2)",border:"1px solid rgba(139, 92, 246, 0.4)",color:"#8b5cf6",padding:"6px 10px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"0.75rem",fontWeight:"600",transition:"all 0.2s",touchAction:"manipulation",minHeight:"36px",whiteSpace:"nowrap"},children:[t.jsx(s,{size:12}),"WAV"]})]}):t.jsxs("button",{onClick:m&&b?()=>m(b):()=>{if("image"===x&&c){const e=c.startsWith("http")||c.startsWith("data:")?c:`data:image/png;base64,${c}`,t=document.createElement("a");t.href=e,t.download=`${g}-${Date.now()}.png`,t.click()}else if("video"===x&&c){const e=document.createElement("a");e.href=c,e.download=`${g}-${Date.now()}.mp4`,e.click()}else if("audio"===x&&c){const e=document.createElement("a");e.href=c,e.download=`${g}-${Date.now()}.mp3`,e.click()}else if("text"===x&&h){const e=new Blob([h],{type:"text/plain"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=`${g}-${Date.now()}.txt`,t.click(),URL.revokeObjectURL(t.href)}},style:{background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.4)",color:"#3b82f6",padding:"6px 10px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"0.75rem",fontWeight:"600",transition:"all 0.2s",touchAction:"manipulation",minHeight:"36px",whiteSpace:"nowrap"},children:[t.jsx(s,{size:12}),"video"===x?"MP4":"Save"]}),t.jsxs("button",{onClick:p,style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",color:"#ef4444",padding:"6px 10px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"0.75rem",fontWeight:"600",transition:"all 0.2s",touchAction:"manipulation",minHeight:"36px",whiteSpace:"nowrap"},children:[t.jsx(l,{size:14}),"Close"]})]})]}),t.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",overflow:"auto",minHeight:"300px"},children:["image"===x&&c&&t.jsx("img",{src:i(c),alt:g||"Preview",style:{maxWidth:"100%",maxHeight:"calc(90vh - 120px)",borderRadius:"8px",objectFit:"contain",animation:"zoomIn 0.3s ease-out"},onError:e=>{e.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300"%3E%3Crect fill="%231a1a2e" width="400" height="300"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23666" font-size="16" font-family="sans-serif"%3EImage could not be loaded%3C/text%3E%3C/svg%3E'}}),"video"===x&&c&&t.jsx("video",{src:r(c),controls:!0,autoPlay:!0,style:{maxWidth:"100%",maxHeight:"calc(90vh - 120px)",borderRadius:"8px",animation:"zoomIn 0.3s ease-out"},onError:e=>{}}),"audio"===x&&c&&t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"32px",width:"100%",maxWidth:"700px",padding:"60px 40px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1))",borderRadius:"24px",border:"1px solid rgba(139, 92, 246, 0.2)"},children:[t.jsx("div",{style:{width:"140px",height:"140px",borderRadius:"50%",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 12px 48px rgba(59, 130, 246, 0.4)",animation:"pulse 2s infinite"},children:t.jsxs("svg",{width:"70",height:"70",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[t.jsx("path",{d:"M9 18V5l12-2v13"}),t.jsx("circle",{cx:"6",cy:"18",r:"3"}),t.jsx("circle",{cx:"18",cy:"16",r:"3"})]})}),t.jsx("h3",{style:{color:"white",fontSize:"1.5rem",fontWeight:"700",margin:0,textAlign:"center"},children:"ðŸŽµ Beat Lab Preview"}),t.jsx("div",{style:{width:"100%",background:"rgba(0,0,0,0.3)",borderRadius:"16px",padding:"24px",border:"1px solid rgba(255,255,255,0.1)"},children:t.jsx("audio",{src:o(c),controls:!0,crossOrigin:"anonymous",style:{width:"100%",height:"54px",borderRadius:"8px"},onError:e=>{c?.startsWith("http")&&!e.target.dataset.retried&&(e.target.dataset.retried="true",e.target.removeAttribute("crossorigin"),e.target.src=c)}})}),t.jsx("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"1rem",textAlign:"center"},children:"Use the controls above to play, pause, or adjust volume"}),t.jsxs("button",{onClick:p,style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(220, 38, 38, 0.2))",border:"1px solid rgba(239, 68, 68, 0.5)",borderRadius:"14px",padding:"16px 40px",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",cursor:"pointer",color:"#ef4444",fontWeight:"700",fontSize:"1.1rem",transition:"all 0.2s",boxShadow:"0 6px 24px rgba(239, 68, 68, 0.25)",marginTop:"8px",touchAction:"manipulation",minWidth:"200px"},children:[t.jsx(l,{size:22}),"Close Preview"]})]}),"text"===x&&h&&t.jsx("div",{style:{width:"100%",maxWidth:"900px",height:"100%",maxHeight:"calc(90vh - 140px)",overflow:"auto",padding:"20px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",animation:"zoomIn 0.3s ease-out"},children:t.jsx("pre",{style:{margin:0,fontFamily:"inherit",fontSize:"1rem",lineHeight:"1.8",color:"rgba(255, 255, 255, 0.9)",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:h})})]}),t.jsx("div",{style:{padding:"8px 16px",borderTop:"1px solid rgba(255, 255, 255, 0.05)",background:"rgba(0, 0, 0, 0.3)",fontSize:"0.7rem",color:"rgba(255, 255, 255, 0.4)",textAlign:"center",flexShrink:0},children:'Click "Close" or tap outside to dismiss'})]}),t.jsx("style",{children:"\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n          }\n          to {\n            opacity: 1;\n          }\n        }\n        @keyframes zoomIn {\n          from {\n            opacity: 0;\n            transform: scale(0.95);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n        @keyframes pulse {\n          0%, 100% {\n            transform: scale(1);\n            box-shadow: 0 8px 32px rgba(59, 130, 246, 0.3);\n          }\n          50% {\n            transform: scale(1.05);\n            box-shadow: 0 12px 40px rgba(59, 130, 246, 0.5);\n          }\n        }\n      "})]})}export{d as PreviewModal,d as default};
