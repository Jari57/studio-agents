import{j as e,r as t,z as i}from"./react-vendor-B4kYgmlj.js";import{A as n,B as o}from"./index-CBmC3J4r.js";import{J as r,X as a,Z as s,aA as l,Y as d,aB as c,S as p,d as g,M as x,N as u,V as b,U as y,e as m,a4 as h,aC as f,a5 as v,aD as j,a7 as k,b as w,a6 as S}from"./icons-KjcyvQKf.js";import"./vendor-BjQYSgJ0.js";import"./firebase-BzYbMxZk.js";function z({isOpen:t,onClose:i,mediaUrl:n,mediaType:o,title:s="Asset Preview"}){if(!t||!n)return null;return e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(8px)",animation:"fadeIn 0.2s ease-out"},onClick:i,children:[e.jsxs("div",{style:{position:"relative",maxWidth:"90vw",maxHeight:"90vh",display:"flex",flexDirection:"column",background:"rgba(20, 20, 20, 0.8)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",overflow:"hidden",backdropFilter:"blur(16px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",background:"rgba(0, 0, 0, 0.3)"},children:[e.jsxs("h2",{style:{margin:0,fontSize:"1rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",textTransform:"uppercase",letterSpacing:"0.05em"},children:[s," Preview"]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>{if("image"===o){const e=document.createElement("a");e.href=n.startsWith("data:")?n:`data:image/png;base64,${n}`,e.download=`${s}-${Date.now()}.png`,e.click()}else if("video"===o){const e=document.createElement("a");e.href=n,e.download=`${s}-${Date.now()}.mp4`,e.click()}else if("audio"===o){const e=document.createElement("a");e.href=n,e.download=`${s}-${Date.now()}.mp3`,e.click()}},style:{background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.4)",color:"#3b82f6",padding:"8px 12px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.8rem",fontWeight:"600",transition:"all 0.2s"},onMouseOver:e=>{e.target.style.background="rgba(59, 130, 246, 0.3)",e.target.style.borderColor="rgba(59, 130, 246, 0.6)"},onMouseOut:e=>{e.target.style.background="rgba(59, 130, 246, 0.2)",e.target.style.borderColor="rgba(59, 130, 246, 0.4)"},children:[e.jsx(r,{size:14}),"Download"]}),e.jsx("button",{onClick:i,style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"rgba(255, 255, 255, 0.7)",padding:"8px 12px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",fontSize:"0.8rem",fontWeight:"600",transition:"all 0.2s"},onMouseOver:e=>{e.target.style.background="rgba(255, 255, 255, 0.15)",e.target.style.color="rgba(255, 255, 255, 0.9)"},onMouseOut:e=>{e.target.style.background="rgba(255, 255, 255, 0.1)",e.target.style.color="rgba(255, 255, 255, 0.7)"},children:e.jsx(a,{size:16})})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",overflow:"auto",minHeight:"400px"},children:["image"===o&&e.jsx("img",{src:n.startsWith("data:")?n:`data:image/png;base64,${n}`,alt:s,style:{maxWidth:"100%",maxHeight:"100%",borderRadius:"8px",objectFit:"contain",animation:"zoomIn 0.3s ease-out"}}),"video"===o&&e.jsx("video",{src:n,controls:!0,autoPlay:!0,style:{maxWidth:"100%",maxHeight:"100%",borderRadius:"8px",animation:"zoomIn 0.3s ease-out"}}),"audio"===o&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[e.jsx("audio",{src:n,controls:!0,autoPlay:!0,style:{width:"100%",maxWidth:"500px"}}),e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.9rem",textAlign:"center"},children:"Audio player ready"})]})]}),e.jsx("div",{style:{padding:"12px 20px",borderTop:"1px solid rgba(255, 255, 255, 0.05)",background:"rgba(0, 0, 0, 0.3)",fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.5)",textAlign:"center"},children:"Click outside or press Escape to close • Tip: Right-click to save"})]}),e.jsx("style",{children:"\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n          }\n          to {\n            opacity: 1;\n          }\n        }\n        @keyframes zoomIn {\n          from {\n            opacity: 0;\n            transform: scale(0.95);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n      "})]})}function C({slot:o,agentId:a,icon:s,title:l,subtitle:d,color:p,output:g,isLoading:y,mediaType:m=null,mediaUrl:C=null,onGenerateMedia:R=null,isGeneratingMedia:$=!1,onRegenerate:I=null,onEdit:T=null,onDelete:W=null,onSaveToProject:D=null,onDownload:O=null,onSpeak:P=null,isSpeaking:B=!1}){const[E,U]=t.useState(!1),[G,A]=t.useState(!1),[M,L]=t.useState(g||""),[F,H]=t.useState(!1);t.useEffect(()=>{L(g||"")},[g]);const N=n.find(e=>e.id===a);return e.jsxs("div",{className:"generator-card",style:{background:"rgba(0,0,0,0.4)",borderRadius:"20px",border:`1px solid ${p}33`,overflow:"hidden",display:"flex",flexDirection:"column",position:"relative",transition:"all 0.3s ease",minHeight:"380px"},children:[e.jsx("div",{style:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:`radial-gradient(circle at center, ${p}08 0%, transparent 50%)`,pointerEvents:"none"}}),e.jsxs("div",{style:{padding:"16px 20px",borderBottom:`1px solid ${p}22`,display:"flex",alignItems:"center",gap:"12px",position:"relative",zIndex:1},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:`linear-gradient(135deg, ${p}30, ${p}10)`,border:`2px solid ${p}60`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 20px ${p}20`},children:e.jsx(s,{size:24,color:p})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700",color:"white"},children:l}),e.jsx("p",{style:{margin:"2px 0 0",fontSize:"0.75rem",color:"var(--text-secondary)"},children:N?.name||d})]}),(y||$)&&e.jsxs("div",{style:{padding:"6px 12px",borderRadius:"20px",background:`${p}20`,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(c,{size:14,color:p,className:"spin"}),e.jsx("span",{style:{fontSize:"0.7rem",color:p,fontWeight:"600"},children:y?"Generating...":"Creating Media..."})]})]}),e.jsxs("div",{style:{flex:1,padding:"16px 20px",display:"flex",flexDirection:"column",gap:"12px",position:"relative",zIndex:1},children:[!y&&g?e.jsx(e.Fragment,{children:G?e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("textarea",{value:M,onChange:e=>L(e.target.value),style:{flex:1,padding:"12px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:`1px solid ${p}40`,color:"white",fontSize:"0.9rem",lineHeight:"1.5",resize:"none",outline:"none",minHeight:"120px"},autoFocus:!0}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>A(!1),style:{flex:1,padding:"8px",borderRadius:"8px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer",fontSize:"0.8rem"},children:"Cancel"}),e.jsx("button",{onClick:()=>{T&&T(M),A(!1)},style:{flex:1,padding:"8px",borderRadius:"8px",background:p,border:"none",color:"white",cursor:"pointer",fontWeight:"600",fontSize:"0.8rem"},children:"Save"})]})]}):e.jsx("div",{onClick:()=>H(!F),style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"14px",flex:1,overflow:"auto",cursor:"pointer",maxHeight:F?"200px":"100px",transition:"max-height 0.3s ease"},children:e.jsx("p",{style:{fontSize:"0.9rem",lineHeight:"1.6",color:"rgba(255,255,255,0.9)",margin:0,whiteSpace:"pre-wrap"},children:g})})}):y?e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{className:"loading-dots",children:[e.jsx("span",{style:{background:p}}),e.jsx("span",{style:{background:p}}),e.jsx("span",{style:{background:p}})]}),e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"AI is thinking..."})]}):e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"8px",color:"var(--text-secondary)",textAlign:"center",padding:"20px"},children:[e.jsx(s,{size:32,style:{opacity:.3}}),e.jsx("span",{style:{fontSize:"0.85rem",opacity:.5},children:'Click "Generate All" to create content'})]}),g&&m&&e.jsx("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"12px",border:`1px solid ${p}22`},children:C?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:e.jsxs("div",{onClick:()=>U(!0),style:{cursor:"pointer",position:"relative",borderRadius:"8px",overflow:"hidden"},children:["audio"===m&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"8px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:`linear-gradient(135deg, ${p}, ${p}88)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 12px ${p}44`},children:e.jsx(x,{size:18,color:"white"})}),e.jsx("audio",{src:C,controls:!0,style:{flex:1,height:"32px"}})]}),"image"===m&&e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{src:C.startsWith("data:")?C:`data:image/png;base64,${C}`,alt:"Generated",style:{width:"100%",maxHeight:"120px",objectFit:"cover",borderRadius:"8px"}}),e.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.2s",borderRadius:"8px"},onMouseEnter:e=>e.currentTarget.style.opacity=1,onMouseLeave:e=>e.currentTarget.style.opacity=0,children:e.jsx(h,{size:24,color:"white"})})]}),"video"===m&&e.jsx("video",{src:C,style:{width:"100%",maxHeight:"120px",objectFit:"cover",borderRadius:"8px"},controls:!0})]})}):R?e.jsx("button",{onClick:R,disabled:$,style:{width:"100%",padding:"12px",borderRadius:"10px",background:$?"rgba(255,255,255,0.05)":`${p}15`,border:`1px dashed ${p}50`,color:p,fontSize:"0.85rem",fontWeight:"600",cursor:$?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s"},children:$?e.jsxs(e.Fragment,{children:[e.jsx(c,{size:16,className:"spin"}),"Creating ",m,"..."]}):e.jsxs(e.Fragment,{children:["audio"===m&&e.jsx(x,{size:16}),"image"===m&&e.jsx(u,{size:16}),"video"===m&&e.jsx(b,{size:16}),"Generate ",m.charAt(0).toUpperCase()+m.slice(1)]})}):null})]}),g&&!G&&e.jsxs("div",{style:{padding:"12px 20px 16px",borderTop:"1px solid rgba(255,255,255,0.05)",display:"flex",gap:"8px",flexWrap:"wrap",position:"relative",zIndex:1},children:[e.jsxs("button",{onClick:P,title:B?"Stop Speaking":"Text to Speech",style:{padding:"8px 12px",borderRadius:"8px",background:B?`${p}30`:"rgba(255,255,255,0.05)",border:`1px solid ${B?p:"rgba(255,255,255,0.1)"}`,color:B?p:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.75rem",fontWeight:"500",transition:"all 0.2s"},children:[B?e.jsx(f,{size:14}):e.jsx(v,{size:14}),B?"Stop":"TTS"]}),e.jsxs("button",{onClick:()=>{g&&(navigator.clipboard.writeText(g),i.success("Copied to clipboard"))},title:"Copy to Clipboard",style:{padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.75rem",fontWeight:"500"},children:[e.jsx(j,{size:14}),"Copy"]}),e.jsxs("button",{onClick:()=>A(!0),title:"Edit Output",style:{padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.75rem",fontWeight:"500"},children:[e.jsx(k,{size:14}),"Edit"]}),I&&e.jsxs("button",{onClick:I,title:"Regenerate",style:{padding:"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.75rem",fontWeight:"500"},children:[e.jsx(w,{size:14}),"Redo"]}),e.jsx("div",{style:{flex:1}}),C&&e.jsxs("button",{onClick:()=>U(!0),title:"Preview",style:{padding:"8px 12px",borderRadius:"8px",background:`${p}20`,border:`1px solid ${p}40`,color:p,cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.75rem",fontWeight:"600"},children:[e.jsx(h,{size:14}),"Preview"]}),(g||C)&&e.jsx("button",{onClick:O,title:"Download",style:{padding:"8px 12px",borderRadius:"8px",background:"rgba(34, 197, 94, 0.15)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#22c55e",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.75rem",fontWeight:"600"},children:e.jsx(r,{size:14})}),W&&e.jsx("button",{onClick:W,title:"Delete",style:{padding:"8px 12px",borderRadius:"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.75rem",fontWeight:"500"},children:e.jsx(S,{size:14})})]}),e.jsx(z,{isOpen:E,onClose:()=>U(!1),mediaUrl:C,mediaType:m,title:l}),e.jsx("style",{children:"\n        .generator-card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 10px 40px rgba(0,0,0,0.3);\n        }\n      "})]})}function R({isOpen:h,onClose:f,onCreateProject:v,authToken:j=null,existingProject:k=null,onUpdateCreations:w=null}){const[S,z]=t.useState(k?.name||""),[R,$]=t.useState("English"),[I,T]=t.useState("Modern Hip-Hop"),[W,D]=t.useState("Gemini 2.0 Flash"),[O,P]=t.useState({lyrics:"ghost",audio:"beat",visual:"album",video:"video-creator"}),[B,E]=t.useState(!1),[U,G]=t.useState({lyrics:null,audio:null,visual:null,video:null}),[A,M]=t.useState({audio:null,image:null,video:null}),[L,F]=t.useState({audio:!1,image:!1,video:!1}),[H,N]=t.useState(null),[J,V]=t.useState(""),[Y,K]=t.useState(!1),[Z,q]=t.useState(!1);t.useRef(null);const Q=t.useRef(null),X=[{key:"lyrics",title:"Lyrics & Hook",subtitle:"Song writing",icon:g,color:"#8b5cf6",mediaType:null},{key:"audio",title:"Beat & Audio",subtitle:"Music production",icon:x,color:"#06b6d4",mediaType:"audio"},{key:"visual",title:"Cover Art",subtitle:"Visual design",icon:u,color:"#ec4899",mediaType:"image"},{key:"video",title:"Music Video",subtitle:"Video creation",icon:b,color:"#f59e0b",mediaType:"video"}],_=async()=>{const e={"Content-Type":"application/json"};return j&&(e.Authorization=`Bearer ${j}`),e},ee=async()=>{if(!S.trim())return void i.error("Please enter a song idea");const e=Object.entries(O).filter(([e,t])=>t);if(0===e.length)return void i.error("Please select at least one agent");if(!j)return void i.error("Please sign in to generate");E(!0);const t={lyrics:null,audio:null,visual:null,video:null};try{const a=await _();for(const[i,s]of e){const e=n.find(e=>e.id===s);if(!e)continue;const l=X.find(e=>e.key===i),d=`You are ${e.name}, a professional ${e.role}. \n        Create content for a ${I} song about: "${S}" in ${R}.\n        Be creative, professional, and match the genre's style.\n        ${"lyrics"===i?"Write a catchy hook and verse lyrics.":""}\n        ${"audio"===i?"Describe a detailed beat/instrumental concept with BPM, key, and production elements.":""}\n        ${"visual"===i?"Describe a striking album cover or visual concept in detail for image generation.":""}\n        ${"video"===i?"Write a creative music video concept/storyboard with scene descriptions.":""}`;try{const e=await fetch(`${o}/api/generate`,{method:"POST",headers:a,body:JSON.stringify({prompt:`Create ${l.title.toLowerCase()} content for: "${S}"`,systemInstruction:d})});if(e.ok){const n=await e.json();t[i]=n.output}}catch(r){}}G(t),i.success("Generation complete!")}catch(r){i.error("Generation failed")}finally{E(!1)}},te=async()=>{if(U.audio){F(e=>({...e,audio:!0})),i.loading("Generating audio...",{id:"gen-audio"});try{const e=await _(),t=await fetch(`${o}/api/generate-audio`,{method:"POST",headers:e,body:JSON.stringify({prompt:`${I} instrumental beat: ${U.audio.substring(0,200)}`,duration:8})});if(t.ok){const e=await t.json();e.audioUrl&&(M(t=>({...t,audio:e.audioUrl})),i.success("Audio created!",{id:"gen-audio"}))}}catch(e){i.error("Audio generation failed",{id:"gen-audio"})}finally{F(e=>({...e,audio:!1}))}}},ie=async()=>{if(U.visual){F(e=>({...e,image:!0})),i.loading("Generating image...",{id:"gen-image"});try{const e=await _(),t=await fetch(`${o}/api/generate-image`,{method:"POST",headers:e,body:JSON.stringify({prompt:`Album cover art: ${U.visual.substring(0,300)}`})});if(t.ok){const e=await t.json();e.imageData&&(M(t=>({...t,image:e.imageData})),i.success("Image created!",{id:"gen-image"}))}}catch(e){i.error("Image generation failed",{id:"gen-image"})}finally{F(e=>({...e,image:!1}))}}},ne=async()=>{if(U.video){F(e=>({...e,video:!0})),i.loading("Generating video (this takes ~2 min)...",{id:"gen-video"});try{const e=await _(),t=await fetch(`${o}/api/generate-video`,{method:"POST",headers:e,body:JSON.stringify({prompt:`Music video: ${U.video.substring(0,200)}`})});if(t.ok){const e=await t.json();e.videoUrl&&(M(t=>({...t,video:e.videoUrl})),i.success("Video created!",{id:"gen-video"}))}}catch(e){i.error("Video generation failed",{id:"gen-video"})}finally{F(e=>({...e,video:!1}))}}};return h?e.jsxs("div",{className:"studio-orchestrator-overlay animate-fadeIn",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"linear-gradient(180deg, rgba(0,0,0,0.98) 0%, rgba(10,10,20,0.98) 100%)",zIndex:2e3,display:"flex",flexDirection:"column",overflowY:"auto"},children:[e.jsxs("div",{style:{padding:"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.5)",backdropFilter:"blur(10px)",position:"sticky",top:0,zIndex:10},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.3)"},children:e.jsx(s,{size:26,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.4rem",fontWeight:"700"},children:"Studio Orchestrator"}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"var(--text-secondary)"},children:"4 AI Generators • One Unified Pipeline"})]})]}),e.jsx("button",{onClick:f,style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"12px",width:"44px",height:"44px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},children:e.jsx(a,{size:22,color:"white"})})]}),e.jsxs("div",{style:{flex:1,padding:"24px",maxWidth:"1200px",margin:"0 auto",width:"100%"},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"20px",padding:"24px",marginBottom:"24px",border:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:[e.jsx("input",{type:"text",value:S,onChange:e=>z(e.target.value),onKeyDown:e=>"Enter"===e.key&&ee(),placeholder:"Describe your song idea, vibe, or concept...",style:{flex:1,padding:"18px 24px",borderRadius:"16px",background:"rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.15)",color:"white",fontSize:"1.1rem",outline:"none"}}),e.jsx("button",{onClick:Z?()=>{Q.current&&Q.current.stop(),q(!1)}:()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;Q.current=new e,Q.current.continuous=!1,Q.current.interimResults=!0,Q.current.onresult=e=>{const t=Array.from(e.results).map(e=>e[0].transcript).join("");z(t)},Q.current.onend=()=>q(!1),Q.current.onerror=()=>q(!1),Q.current.start(),q(!0),i.success("Listening...")}else i.error("Speech recognition not supported")},style:{padding:"18px",borderRadius:"16px",background:Z?"rgba(239, 68, 68, 0.2)":"rgba(255,255,255,0.05)",border:"1px solid "+(Z?"#ef4444":"rgba(255,255,255,0.15)"),color:Z?"#ef4444":"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:Z?"Stop Listening":"Voice Input",children:Z?e.jsx(l,{size:22}):e.jsx(d,{size:22})}),e.jsx("button",{onClick:ee,disabled:B||!S.trim(),style:{padding:"18px 32px",borderRadius:"16px",background:B?"rgba(139, 92, 246, 0.3)":"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",fontSize:"1.05rem",cursor:B||!S.trim()?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"10px",opacity:S.trim()?1:.5,boxShadow:B?"none":"0 4px 20px rgba(139, 92, 246, 0.4)"},children:B?e.jsxs(e.Fragment,{children:[e.jsx(c,{size:22,className:"spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{size:22}),"Generate All"]})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Try:"}),["Summer love in Brooklyn","Trap anthem about success","Lo-fi study beats","Emotional R&B ballad"].map((t,i)=>e.jsx("button",{onClick:()=>z(t),style:{padding:"8px 16px",borderRadius:"20px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",fontSize:"0.85rem",cursor:"pointer"},children:t},i))]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px",marginBottom:"24px"},children:[{label:"Language",value:R,setter:$,options:["English","Spanish","French","German","Japanese","Korean","Portuguese"]},{label:"Genre",value:I,setter:T,options:["Modern Hip-Hop","90s Boom Bap","Trap","R&B / Soul","Pop","Rock","Electronic","Lo-Fi"]},{label:"AI Model",value:W,setter:D,options:["Gemini 2.0 Flash","Gemini 2.0 Pro (Exp)","Gemini 1.5 Pro"]}].map(t=>e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"6px",textTransform:"uppercase",fontWeight:"600",letterSpacing:"0.05em"},children:t.label}),e.jsx("select",{value:t.value,onChange:e=>t.setter(e.target.value),style:{width:"100%",padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:t.options.map(t=>e.jsx("option",{value:t,style:{background:"#1a1a1a"},children:t},t))})]},t.label))}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px",marginBottom:"24px"},children:X.map(t=>e.jsx(C,{slot:t.key,agentId:O[t.key],icon:t.icon,title:t.title,subtitle:t.subtitle,color:t.color,output:U[t.key],isLoading:B&&O[t.key],mediaType:t.mediaType,mediaUrl:"audio"===t.key?A.audio:"visual"===t.key?A.image:"video"===t.key?A.video:null,onGenerateMedia:"audio"===t.key?te:"visual"===t.key?ie:"video"===t.key?ne:null,isGeneratingMedia:"audio"===t.key?L.audio:"visual"===t.key?L.image:"video"===t.key&&L.video,onRegenerate:()=>(async e=>{if(!O[e])return;const t=n.find(t=>t.id===O[e]);if(t){G(t=>({...t,[e]:null}));try{const n=await _(),r=X.find(t=>t.key===e),a=await fetch(`${o}/api/generate`,{method:"POST",headers:n,body:JSON.stringify({prompt:`Create fresh ${r.title.toLowerCase()} content for: "${S}"`,systemInstruction:`You are ${t.name}. Create NEW and DIFFERENT content for a ${I} song about: "${S}". Be creative and fresh.`})});if(a.ok){const t=await a.json();G(i=>({...i,[e]:t.output})),i.success(`${r.title} regenerated!`)}}catch(r){i.error("Regeneration failed")}}})(t.key),onEdit:e=>((e,t)=>{G(i=>({...i,[e]:t})),i.success("Saved")})(t.key,e),onDelete:()=>(e=>{G(t=>({...t,[e]:null})),"audio"===e&&M(e=>({...e,audio:null})),"visual"===e&&M(e=>({...e,image:null})),"video"===e&&M(e=>({...e,video:null})),i.success("Deleted")})(t.key),onDownload:()=>(e=>{const t=U[e],i=X.find(t=>t.key===e);if(t){const e=new Blob([t],{type:"text/plain"}),n=URL.createObjectURL(e),o=document.createElement("a");o.href=n,o.download=`${S||"output"}-${i.title}.txt`,o.click(),URL.revokeObjectURL(n)}const n={audio:A.audio,visual:A.image,video:A.video};if(n[e]){const t=document.createElement("a");t.href=n[e],t.download=`${S||"media"}-${e}`,t.click()}})(t.key),onSpeak:()=>((e,t)=>{if(H===t)return window.speechSynthesis.cancel(),void N(null);window.speechSynthesis.cancel();const i=new SpeechSynthesisUtterance(e);i.rate=.9,i.onend=()=>N(null),i.onerror=()=>N(null),window.speechSynthesis.speak(i),N(t)})(U[t.key],t.key),isSpeaking:H===t.key},t.key))}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:"20px",border:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[e.jsx(y,{size:16,color:"var(--text-secondary)"}),e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Assign Agents to Each Generator"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px"},children:X.map(t=>e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.7rem",color:t.color,marginBottom:"6px",fontWeight:"500"},children:t.title}),e.jsxs("select",{value:O[t.key]||"",onChange:e=>P(i=>({...i,[t.key]:e.target.value||null})),style:{width:"100%",padding:"10px 12px",borderRadius:"10px",background:O[t.key]?"rgba(0,0,0,0.4)":"rgba(0,0,0,0.2)",border:"1px solid "+(O[t.key]?t.color+"60":"rgba(255,255,255,0.1)"),color:O[t.key]?"white":"var(--text-muted)",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:[e.jsx("option",{value:"",style:{background:"#1a1a1a"},children:"— None —"}),n.filter(e=>"free"===e.tier).map(t=>e.jsx("option",{value:t.id,style:{background:"#1a1a1a"},children:t.name},t.id))]})]},t.key))})]})]}),Object.values(U).some(Boolean)&&e.jsxs("div",{style:{padding:"16px 24px",background:"rgba(0,0,0,0.8)",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",bottom:0,backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:[Object.values(U).filter(Boolean).length,"/4 generators complete •",Object.values(A).filter(Boolean).length," media assets"]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsxs("button",{onClick:()=>{const e={project:S,timestamp:(new Date).toISOString(),outputs:U,settings:{language:R,style:I,model:W}},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=`${S||"project"}-export.json`,o.click(),URL.revokeObjectURL(n),i.success("Exported!")},style:{padding:"12px 20px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(r,{size:16}),"Export"]}),e.jsxs("button",{onClick:()=>K(!0),style:{padding:"12px 28px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",fontSize:"1rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.4)"},children:[e.jsx(m,{size:18}),"Save to Project"]})]})]}),Y&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3},onClick:()=>K(!1),children:e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:"24px",padding:"28px",maxWidth:"420px",width:"90%",border:"1px solid rgba(255,255,255,0.1)"},onClick:e=>e.stopPropagation(),children:[e.jsx("h3",{style:{margin:"0 0 20px",fontSize:"1.3rem",fontWeight:"700"},children:"Save to Project"}),e.jsx("input",{type:"text",value:J,onChange:e=>V(e.target.value),placeholder:S||"Project name...",style:{width:"100%",padding:"14px 18px",borderRadius:"12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"1rem",marginBottom:"20px",outline:"none"}}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>K(!1),style:{flex:1,padding:"14px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer",fontSize:"0.95rem"},children:"Cancel"}),e.jsx("button",{onClick:()=>{const e=[];X.forEach(t=>{if(U[t.key]){const i=n.find(e=>e.id===O[t.key]);e.push({id:String(Date.now()+Math.random()),title:t.title,type:t.key,agent:i?.name||t.subtitle,content:U[t.key],snippet:U[t.key].substring(0,100),audioUrl:"audio"===t.key?A.audio:null,imageUrl:"visual"===t.key&&A.image?`data:image/png;base64,${A.image}`:null,videoUrl:"video"===t.key?A.video:null,date:"Just now",color:`agent-${t.color.replace("#","")}`})}});const t={id:String(Date.now()),name:J||S||"Untitled Project",description:`Created with Studio Orchestrator: "${S}"`,category:"Music",language:R,style:I,model:W,date:(new Date).toLocaleDateString(),agents:Object.values(O).filter(Boolean).map(e=>{const t=n.find(t=>t.id===e);return t?.name||e}),assets:e,coverImage:A.image?`data:image/png;base64,${A.image}`:null};v&&v(t),K(!1),f?.()},style:{flex:1,padding:"14px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",cursor:"pointer",fontSize:"0.95rem"},children:"Save Project"})]})]})}),e.jsx("style",{children:"\n        .loading-dots {\n          display: flex;\n          gap: 4px;\n        }\n        .loading-dots span {\n          width: 8px;\n          height: 8px;\n          border-radius: 50%;\n          animation: bounce 1.4s infinite ease-in-out both;\n        }\n        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }\n        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }\n        .loading-dots span:nth-child(3) { animation-delay: 0s; }\n        \n        @keyframes bounce {\n          0%, 80%, 100% { transform: scale(0); opacity: 0.5; }\n          40% { transform: scale(1); opacity: 1; }\n        }\n        \n        .spin {\n          animation: spin 1s linear infinite;\n        }\n        \n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        \n        .animate-fadeIn {\n          animation: fadeIn 0.3s ease;\n        }\n        \n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n      "})]}):null}export{R as default};
