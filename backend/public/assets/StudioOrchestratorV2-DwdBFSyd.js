import{r as e,j as i,z as t,R as r}from"./react-vendor-DygdCveO.js";import{A as o,d as n,a,B as s}from"./index-By1UzWKh.js";import{w as l,n as d,x as c,y as p,z as x,p as g,q as u,A as h,B as m}from"./firebase-CVZOV_el.js";import{f as b,a as y,b as f}from"./StudioView-OKdodaUd.js";import{an as v,ad as j,Q as w,X as k,Z as S,aE as z,a1 as C,z as R,S as I,L as W,M as $,b as U,U as D,d as T,Y as A,V as B,y as E,a7 as P,a8 as V,N as O,ac as M,e as N,am as F,aF as H,ab as L,ae as G,j as J,aG as Y,q as K}from"./icons-CkwixxDJ.js";import"./vendor-CH73EFhk.js";function q({isOpen:t,onClose:r,mediaUrl:o,mediaType:n,title:a="Asset Preview",textContent:s=null}){const[l,d]=e.useState(!1);if(!t||!o&&!s)return null;return i.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.98)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(12px)",animation:"fadeIn 0.2s ease-out"},onClick:r,children:[i.jsxs("div",{style:{position:"relative",width:"95vw",maxWidth:"1200px",height:"90vh",maxHeight:"900px",display:"flex",flexDirection:"column",background:"rgba(20, 20, 20, 0.95)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",overflow:"hidden",backdropFilter:"blur(16px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"},onClick:e=>e.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 12px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",background:"rgba(0, 0, 0, 0.3)",flexShrink:0,gap:"8px",flexWrap:"wrap"},children:[i.jsxs("h2",{style:{margin:0,fontSize:"0.85rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",textTransform:"uppercase",letterSpacing:"0.05em",flex:"1 1 auto",minWidth:"80px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a," Preview"]}),i.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",alignItems:"center"},children:["text"===n&&s&&i.jsxs("button",{onClick:async()=>{s&&(await navigator.clipboard.writeText(s),d(!0),setTimeout(()=>d(!1),2e3))},style:{background:l?"rgba(34, 197, 94, 0.2)":"rgba(139, 92, 246, 0.2)",border:"1px solid "+(l?"rgba(34, 197, 94, 0.4)":"rgba(139, 92, 246, 0.4)"),color:l?"#22c55e":"#8b5cf6",padding:"6px 10px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"0.75rem",fontWeight:"600",transition:"all 0.2s",touchAction:"manipulation",minHeight:"36px",whiteSpace:"nowrap"},children:[l?i.jsx(v,{size:12}):i.jsx(j,{size:12}),l?"Copied":"Copy"]}),i.jsxs("button",{onClick:()=>{if("image"===n&&o){const e=o.startsWith("http")||o.startsWith("data:")?o:`data:image/png;base64,${o}`,i=document.createElement("a");i.href=e,i.download=`${a}-${Date.now()}.png`,i.click()}else if("video"===n&&o){const e=document.createElement("a");e.href=o,e.download=`${a}-${Date.now()}.mp4`,e.click()}else if("audio"===n&&o){const e=document.createElement("a");e.href=o,e.download=`${a}-${Date.now()}.mp3`,e.click()}else if("text"===n&&s){const e=new Blob([s],{type:"text/plain"}),i=document.createElement("a");i.href=URL.createObjectURL(e),i.download=`${a}-${Date.now()}.txt`,i.click(),URL.revokeObjectURL(i.href)}},style:{background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.4)",color:"#3b82f6",padding:"6px 10px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"0.75rem",fontWeight:"600",transition:"all 0.2s",touchAction:"manipulation",minHeight:"36px",whiteSpace:"nowrap"},children:[i.jsx(w,{size:12}),"Save"]}),i.jsxs("button",{onClick:r,style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",color:"#ef4444",padding:"6px 10px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"0.75rem",fontWeight:"600",transition:"all 0.2s",touchAction:"manipulation",minHeight:"36px",whiteSpace:"nowrap"},children:[i.jsx(k,{size:14}),"Close"]})]})]}),i.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",overflow:"auto",minHeight:"300px"},children:["image"===n&&o&&i.jsx("img",{src:b(o),alt:a||"Preview",style:{maxWidth:"100%",maxHeight:"calc(90vh - 120px)",borderRadius:"8px",objectFit:"contain",animation:"zoomIn 0.3s ease-out"},onError:e=>{e.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300"%3E%3Crect fill="%231a1a2e" width="400" height="300"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23666" font-size="16" font-family="sans-serif"%3EImage could not be loaded%3C/text%3E%3C/svg%3E'}}),"video"===n&&o&&i.jsx("video",{src:y(o),controls:!0,autoPlay:!0,style:{maxWidth:"100%",maxHeight:"calc(90vh - 120px)",borderRadius:"8px",animation:"zoomIn 0.3s ease-out"},onError:e=>{}}),"audio"===n&&o&&i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"32px",width:"100%",maxWidth:"700px",padding:"60px 40px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1))",borderRadius:"24px",border:"1px solid rgba(139, 92, 246, 0.2)"},children:[i.jsx("div",{style:{width:"140px",height:"140px",borderRadius:"50%",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 12px 48px rgba(59, 130, 246, 0.4)",animation:"pulse 2s infinite"},children:i.jsxs("svg",{width:"70",height:"70",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[i.jsx("path",{d:"M9 18V5l12-2v13"}),i.jsx("circle",{cx:"6",cy:"18",r:"3"}),i.jsx("circle",{cx:"18",cy:"16",r:"3"})]})}),i.jsx("h3",{style:{color:"white",fontSize:"1.5rem",fontWeight:"700",margin:0,textAlign:"center"},children:"ðŸŽµ Beat Lab Preview"}),i.jsx("div",{style:{width:"100%",background:"rgba(0,0,0,0.3)",borderRadius:"16px",padding:"24px",border:"1px solid rgba(255,255,255,0.1)"},children:i.jsx("audio",{src:f(o),controls:!0,autoPlay:!0,style:{width:"100%",height:"54px",borderRadius:"8px"},onError:e=>{}})}),i.jsx("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"1rem",textAlign:"center"},children:"Use the controls above to play, pause, or adjust volume"}),i.jsxs("button",{onClick:r,style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(220, 38, 38, 0.2))",border:"1px solid rgba(239, 68, 68, 0.5)",borderRadius:"14px",padding:"16px 40px",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",cursor:"pointer",color:"#ef4444",fontWeight:"700",fontSize:"1.1rem",transition:"all 0.2s",boxShadow:"0 6px 24px rgba(239, 68, 68, 0.25)",marginTop:"8px",touchAction:"manipulation",minWidth:"200px"},children:[i.jsx(k,{size:22}),"Close Preview"]})]}),"text"===n&&s&&i.jsx("div",{style:{width:"100%",maxWidth:"900px",height:"100%",maxHeight:"calc(90vh - 140px)",overflow:"auto",padding:"20px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",animation:"zoomIn 0.3s ease-out"},children:i.jsx("pre",{style:{margin:0,fontFamily:"inherit",fontSize:"1rem",lineHeight:"1.8",color:"rgba(255, 255, 255, 0.9)",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:s})})]}),i.jsx("div",{style:{padding:"8px 16px",borderTop:"1px solid rgba(255, 255, 255, 0.05)",background:"rgba(0, 0, 0, 0.3)",fontSize:"0.7rem",color:"rgba(255, 255, 255, 0.4)",textAlign:"center",flexShrink:0},children:'Click "Close" or tap outside to dismiss'})]}),i.jsx("style",{children:"\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n          }\n          to {\n            opacity: 1;\n          }\n        }\n        @keyframes zoomIn {\n          from {\n            opacity: 0;\n            transform: scale(0.95);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n        @keyframes pulse {\n          0%, 100% {\n            transform: scale(1);\n            box-shadow: 0 8px 32px rgba(59, 130, 246, 0.3);\n          }\n          50% {\n            transform: scale(1.05);\n            box-shadow: 0 12px 40px rgba(59, 130, 246, 0.5);\n          }\n        }\n      "})]})}const X=({height:e="14px",width:t="100%",marginBottom:r="8px",opacity:o=.1})=>i.jsx("div",{style:{height:e,width:t,marginBottom:r,borderRadius:"4px",background:`linear-gradient(90deg, rgba(255,255,255,${o}) 25%, rgba(255,255,255,${2*o}) 50%, rgba(255,255,255,${o}) 75%)`,backgroundSize:"200% 100%",animation:"shimmer 2s infinite linear"}});function Q({slot:n,agentId:a,icon:s,title:l,subtitle:d,color:c,output:p,isLoading:x,mediaType:g=null,mediaUrl:u=null,onGenerateMedia:h=null,isGeneratingMedia:m=!1,onRegenerate:v=null,onEdit:z=null,onDelete:C=null,onDownload:I=null,onSpeak:D=null,isSpeaking:E=!1,onMaximize:P=null,onUploadDna:O=null,onClearDna:N=null,dnaUrl:J=null,isUploadingDna:Y=!1}){const[K,Q]=e.useState(!1),[Z,_]=e.useState(!1),[ee,ie]=e.useState(p||""),[te,re]=e.useState(!1),[oe,ne]=e.useState(!1),{intro:ae,content:se}=(e=>{if(!e)return{intro:"",content:""};if("string"!=typeof e)return{intro:"",content:JSON.stringify(e,null,2)};const i=[/\[Verse/i,/\[Chorus/i,/\[Hook/i,/\[Bridge/i,/\[Intro\]/i,/Verse 1:/i,/Chorus:/i,/\(Verse/i];let t=-1;for(const r of i){const i=e.match(r);i&&(-1===t||i.index<t)&&(t=i.index)}if(-1!==t)return{intro:e.substring(0,t).trim(),content:e.substring(t).trim()};if(e.includes("Summary:")){const i=e.split("Summary:");return{intro:i[0].trim(),content:("Summary: "+i[1]).trim()}}return{intro:"",content:e}})(p),le=oe?ae:se,[de,ce]=e.useState("undefined"!=typeof window&&window.innerWidth<768);e.useEffect(()=>{const e=()=>ce(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const pe=e.useRef(p);e.useEffect(()=>{pe.current!==p&&(pe.current=p,ie(p||""))},[p]);const xe=o.find(e=>e.id===a);return i.jsxs("div",{className:"generator-card-unified",style:{minHeight:de?"auto":"380px",padding:0,touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[i.jsx("div",{style:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:`radial-gradient(circle at center, ${c}08 0%, transparent 50%)`,pointerEvents:"none"}}),i.jsxs("div",{className:"generator-card-header",style:{padding:de?"12px":"1.25rem",display:"flex",alignItems:"center",gap:de?"10px":"12px",position:"relative",zIndex:1},children:[i.jsx("div",{className:"generator-icon-box",children:r.createElement(s,{size:de?20:24})}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("h3",{style:{margin:0,fontSize:de?"0.95rem":"1.125rem",fontWeight:"700",color:"white",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l}),i.jsx("p",{style:{margin:"2px 0 0",fontSize:"0.75rem",color:"var(--text-secondary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:xe?.name||d})]}),O&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx("input",{type:"file",id:`dna-upload-${n}`,accept:"audio"===n?"audio/*":"lyrics"===n?".txt,.doc,.docx,.pdf":"image/*",onChange:O,style:{display:"none"}}),i.jsxs("button",{onClick:()=>document.getElementById(`dna-upload-${n}`).click(),disabled:Y,title:`${"video"===n?"Image":n.charAt(0).toUpperCase()+n.slice(1)} DNA (Reference)`,style:{padding:"8px",borderRadius:"8px",background:J?`${c}20`:"rgba(255,255,255,0.05)",border:"1px solid "+(J?c+"80":"rgba(255,255,255,0.1)"),color:J?c:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s",fontSize:"0.7rem",fontWeight:"600"},children:[Y?i.jsx(R,{size:14,className:"spin"}):i.jsx(S,{size:14}),J&&!de&&"DNAâœ“"]}),J&&i.jsx("button",{onClick:e=>{e.stopPropagation(),N&&N()},style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer",padding:"4px"},children:i.jsx(k,{size:12})})]}),(x||m)&&i.jsxs("div",{style:{padding:"6px 12px",borderRadius:"20px",background:`${c}20`,display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx(R,{size:14,color:c,className:"spin"}),i.jsx("span",{style:{fontSize:"0.7rem",color:c,fontWeight:"600"},children:x?"Generating...":"Creating Media..."})]})]}),i.jsxs("div",{style:{flex:1,padding:de?"10px 12px":"16px 20px",display:"flex",flexDirection:"column",gap:de?"8px":"12px",position:"relative",zIndex:1},children:[!x&&p?i.jsx(i.Fragment,{children:Z?i.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},children:[i.jsx("textarea",{value:ee,onChange:e=>ie(e.target.value),style:{flex:1,padding:de?"8px":"12px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:`1px solid ${c}40`,color:"white",fontSize:de?"0.8rem":"0.9rem",lineHeight:"1.5",resize:"none",outline:"none",minHeight:"120px"},autoFocus:!0}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsx("button",{onClick:()=>_(!1),style:{flex:1,padding:"8px",borderRadius:"8px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer",fontSize:"0.8rem"},children:"Cancel"}),i.jsx("button",{onClick:()=>{z&&z(ee),_(!1)},style:{flex:1,padding:"8px",borderRadius:"8px",background:c,border:"none",color:"white",cursor:"pointer",fontWeight:"600",fontSize:"0.8rem"},children:"Save"})]})]}):i.jsxs("div",{onClick:()=>re(!te),className:"lyrics-stanza-view",style:{background:"rgba(0,0,0,0.3)",borderRadius:de?"8px":"12px",padding:de?"10px":"16px",flex:1,overflow:"auto",cursor:"pointer",maxHeight:te?de?"300px":"400px":de?"150px":"280px",transition:"max-height 0.3s ease",position:"relative"},children:[ae&&i.jsxs("button",{onClick:e=>{e.stopPropagation(),ne(!oe)},style:{position:"absolute",top:"8px",right:"8px",background:oe?c:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",padding:"4px 8px",fontSize:"0.65rem",fontWeight:"700",color:"white",zIndex:2,display:"flex",alignItems:"center",gap:"4px",boxShadow:oe?`0 2px 8px ${c}44`:"none"},children:[oe?i.jsx(T,{size:10}):i.jsx(W,{size:10}),oe?"SHOW LYRICS":"SHOW PROMPT"]}),i.jsx("p",{style:{fontSize:de?"0.85rem":"1rem",lineHeight:de?"1.5":"1.8",color:"rgba(255,255,255,0.95)",margin:0,whiteSpace:"pre-wrap",fontFamily:"'Georgia', 'Times New Roman', serif",letterSpacing:"0.01em"},children:le?.split(/\n\n+/).map((e,t)=>i.jsx("span",{style:{display:"block",marginBottom:t<le.split(/\n\n+/).length-1?"1em":0},children:e},t))})]})}):x?i.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"12px",padding:"4px"},children:[i.jsx(X,{width:"40%",height:"20px",marginBottom:"12px",opacity:.15}),i.jsx(X,{width:"100%",height:"14px"}),i.jsx(X,{width:"90%",height:"14px"}),i.jsx(X,{width:"95%",height:"14px"}),i.jsx(X,{width:"70%",height:"14px",marginBottom:"20px"}),i.jsx(X,{width:"100%",height:"14px"}),i.jsx(X,{width:"85%",height:"14px"}),i.jsx(X,{width:"40%",height:"14px"}),i.jsxs("div",{style:{marginTop:"auto",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"12px",background:"rgba(255,255,255,0.02)",borderRadius:"8px"},children:[i.jsx(R,{size:16,className:"spin",color:c}),i.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:"500"},children:xe?.name?`${xe.name} is writing...`:"AI is thinking..."})]})]}):i.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"8px",color:"var(--text-secondary)",textAlign:"center",padding:"20px"},children:[r.createElement(s,{size:32,style:{opacity:.3}}),i.jsx("span",{style:{fontSize:"0.85rem",opacity:.5},children:'Click "Generate All" to create content'})]}),p&&g&&i.jsx("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"12px",border:`1px solid ${c}22`},children:u?i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:i.jsxs("div",{onClick:()=>Q(!0),style:{cursor:"pointer",position:"relative",borderRadius:"8px",overflow:"hidden"},children:["audio"===g&&u&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"8px"},children:[i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:`linear-gradient(135deg, ${c}, ${c}88)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 12px ${c}44`},children:i.jsx($,{size:18,color:"white"})}),i.jsx("audio",{src:f(u),controls:!0,style:{flex:1,height:"32px"}})]}),"image"===g&&u&&i.jsxs("div",{style:{position:"relative"},children:[i.jsx("img",{src:b(u),alt:"Generated",style:{width:"100%",maxHeight:"120px",objectFit:"cover",borderRadius:"8px"},onError:e=>{e.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="120" viewBox="0 0 200 120"%3E%3Crect fill="%231a1a2e" width="200" height="120"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23666" font-size="12" font-family="sans-serif"%3EImage unavailable%3C/text%3E%3C/svg%3E'}}),i.jsx("div",{className:"image-hover-overlay",style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,borderRadius:"8px",pointerEvents:"none"},children:i.jsx(V,{size:24,color:"white"})})]}),"video"===g&&u&&i.jsx("video",{src:y(u),style:{width:"100%",maxHeight:"120px",objectFit:"cover",borderRadius:"8px"},controls:!0})]})}):m?i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[i.jsx(X,{height:"image"===g||"video"===g?"120px":"44px",width:"100%",opacity:.2}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px"},children:[i.jsx(R,{size:14,className:"spin",color:c}),i.jsx("span",{style:{fontSize:"0.75rem",color:c,fontWeight:"600"},children:"lyrics"===n?"Cloning vocals...":`Synthesizing ${g}...`})]})]}):h?i.jsxs("button",{onClick:h,disabled:m,style:{width:"100%",padding:"12px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",border:`1px dashed ${c}50`,color:c,fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s"},children:["audio"===g&&i.jsx($,{size:16}),"image"===g&&i.jsx(A,{size:16}),"video"===g&&i.jsx(B,{size:16}),"lyrics"===n?"Create AI Vocals":`Generate ${g.charAt(0).toUpperCase()+g.slice(1)}`]}):null})]}),p&&!Z&&i.jsxs("div",{style:{padding:de?"8px 10px 10px":"12px 20px 16px",borderTop:"1px solid rgba(255,255,255,0.05)",display:"flex",gap:de?"6px":"8px",flexWrap:"wrap",position:"relative",zIndex:1,touchAction:"manipulation"},children:[i.jsxs("button",{onClick:D,title:E?"Stop":"lyrics"===n&&u?"Play AI Vocals":"Text to Speech",style:{padding:de?"8px 10px":"8px 12px",borderRadius:"8px",background:E?`${c}30`:"rgba(255,255,255,0.05)",border:`1px solid ${E?c:"rgba(255,255,255,0.1)"}`,color:E?c:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:de?"0.7rem":"0.75rem",fontWeight:"500",minHeight:de?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[E?i.jsx(H,{size:14}):i.jsx(M,{size:14}),!de&&(E?"Stop":"lyrics"===n&&u?"Hear Vocals":"TTS")]}),i.jsxs("button",{onClick:()=>{if(p){const e="lyrics"!==n||oe?p:se;navigator.clipboard.writeText(e),t.success("lyrics"!==n||oe?"Copied to clipboard":"Lyrics copied")}},title:"Copy to Clipboard",style:{padding:de?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:de?"0.7rem":"0.75rem",fontWeight:"500",minHeight:de?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[i.jsx(j,{size:14}),!de&&"Copy"]}),i.jsxs("button",{onClick:()=>_(!0),title:"Edit Output",style:{padding:de?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:de?"0.7rem":"0.75rem",fontWeight:"500",minHeight:de?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[i.jsx(L,{size:14}),!de&&"Edit"]}),(u||p&&!g)&&i.jsxs("button",{onClick:()=>Q(!0),title:"Preview",style:{padding:de?"8px 10px":"8px 12px",borderRadius:"8px",background:`${c}20`,border:`1px solid ${c}40`,color:c,cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:de?"0.7rem":"0.75rem",fontWeight:"600",minHeight:de?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[i.jsx(V,{size:14}),!de&&"Preview"]}),v&&i.jsxs("button",{onClick:v,title:"Regenerate",style:{padding:de?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:de?"0.7rem":"0.75rem",fontWeight:"500",minHeight:de?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[i.jsx(U,{size:14}),!de&&"Redo"]}),!de&&i.jsx("div",{style:{flex:1}}),p&&P&&i.jsx("button",{onClick:P,title:"Expand to Fullscreen",style:{padding:de?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:de?"0.7rem":"0.75rem",fontWeight:"500",minHeight:de?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:i.jsx(F,{size:14})}),(p||u)&&i.jsx("button",{onClick:I,title:"Download",style:{padding:de?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(34, 197, 94, 0.15)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#22c55e",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:de?"0.7rem":"0.75rem",fontWeight:"600",minHeight:de?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:i.jsx(w,{size:14})}),C&&i.jsx("button",{onClick:C,title:"Delete",style:{padding:de?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:de?"0.7rem":"0.75rem",fontWeight:"500",minHeight:de?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:i.jsx(G,{size:14})})]}),i.jsx(q,{isOpen:K,onClose:()=>Q(!1),mediaUrl:u,mediaType:g||"text",title:l,textContent:g?null:p}),i.jsx("style",{children:"\n        /* Desktop-only hover effects */\n        @media (hover: hover) and (pointer: fine) {\n          .generator-card:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 10px 40px rgba(0,0,0,0.3);\n          }\n          .image-hover-overlay {\n            transition: opacity 0.2s ease;\n          }\n          .generator-card:hover .image-hover-overlay {\n            opacity: 1 !important;\n          }\n        }\n        /* Mobile touch optimization */\n        @media (hover: none) {\n          .generator-card {\n            transform: none !important;\n          }\n          .generator-card:active {\n            opacity: 0.9;\n          }\n        }\n      "})]})}function Z({outputs:e,mediaUrls:r,songIdea:o,finalMixPreview:n,creatingFinalMix:a,musicVideoUrl:s,generatingMusicVideo:l,handleGenerateProfessionalMusicVideo:d,handleCreateFinalMix:c,handleCreateProject:p,setShowPreviewModal:x,visualType:g,setVisualType:u,isMobile:h,orchestratorBpm:m=120}){const b=Object.values(e).filter(Boolean).length,y=4===b,f=b>0,v=b/4*100,j=!!r.audio,w=!!r.vocals||!!e.lyrics,k=!!r.video,z=j&&(k||w),C=!!s;return i.jsxs("div",{style:{background:y?"linear-gradient(135deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.98))":"rgba(15, 23, 42, 0.4)",borderRadius:"24px",padding:h?"20px":"28px",border:"1px solid rgba(255,255,255,0.1)",marginTop:"32px",position:"relative",overflow:"hidden",boxShadow:y?"0 10px 40px rgba(0,0,0,0.4), 0 0 0 1px rgba(79, 70, 229, 0.3)":"none",transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:[y&&i.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #4f46e5, #9333ea, #ec4899)",boxShadow:"0 0 15px rgba(79, 70, 229, 0.5)"}}),i.jsxs("div",{style:{display:"flex",flexDirection:h?"column":"row",justifyContent:"space-between",alignItems:h?"stretch":"center",gap:"24px",position:"relative",zIndex:1},children:[i.jsxs("div",{style:{flex:1},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:y?"rgba(79, 70, 229, 0.2)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",color:y?"#818cf8":"rgba(255,255,255,0.3)",border:"1px solid "+(y?"rgba(79, 70, 229, 0.4)":"rgba(255,255,255,0.1)")},children:y?i.jsx(S,{size:20}):i.jsx(J,{size:20})}),i.jsxs("div",{children:[i.jsxs("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700",color:y?"white":"rgba(255,255,255,0.5)",display:"flex",alignItems:"center",gap:"8px"},children:[y?"Production Complete":"Production Status",y&&i.jsx(Y,{size:18,color:"#22c55e"})]}),i.jsx("p",{style:{margin:"4px 0 0",fontSize:"0.85rem",color:"rgba(255,255,255,0.4)"},children:y?"All assets are master-ready":`${b}/4 assets finalized â€¢ ${4-b} remaining`})]})]}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:["lyrics","audio","visual","video"].map(t=>{const o=t.charAt(0).toUpperCase()+t.slice(1),n=!!e[t],a=!!r["lyrics"===t?"vocals":t];return i.jsxs("div",{style:{padding:"6px 12px",borderRadius:"100px",fontSize:"0.75rem",fontWeight:"600",background:n?"rgba(34, 197, 94, 0.1)":"rgba(255,255,255,0.03)",color:n?"#4ade80":"rgba(255,255,255,0.2)",border:"1px solid "+(n?"rgba(34, 197, 94, 0.2)":"rgba(255,255,255,0.05)"),display:"flex",alignItems:"center",gap:"6px"},children:[n?"â—":"â—‹"," ",o,a&&i.jsx("span",{title:"Media Created",children:"ðŸ’Ž"})]},t)})}),i.jsxs("div",{style:{marginTop:"20px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(255,255,255,0.05)",display:h?"none":"block"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[i.jsx("span",{style:{fontSize:"0.7rem",color:"rgba(255,255,255,0.3)",fontWeight:"700",textTransform:"uppercase"},children:"Production Timeline"}),i.jsxs("span",{style:{fontSize:"0.7rem",color:"#818cf8",fontWeight:"700"},children:[m," BPM â€¢ STEREO"]})]}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[{label:"BEAT",type:"audio",color:"#22d3ee"},{label:"VOCALS",type:"lyrics",color:"#a78bfa"},{label:"VISUALS",type:"visual",color:"#fb923c"},{label:"IMG TO VIDEO",type:"video",color:"#f87171"}].map(t=>i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{width:"70px",fontSize:"0.65rem",fontWeight:"800",color:e[t.type]?t.color:"rgba(255,255,255,0.2)",letterSpacing:"0.05em"},children:t.label}),i.jsx("div",{style:{flex:1,height:"24px",background:"rgba(255,255,255,0.03)",borderRadius:"4px",position:"relative",overflow:"hidden",border:"1px solid rgba(255,255,255,0.05)"},children:e[t.type]&&i.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:r["lyrics"===t.type?"vocals":"visual"===t.type?"image":t.type]?"100%":"30%",background:`linear-gradient(90deg, ${t.color}40, ${t.color}80)`,borderRight:`2px solid ${t.color}`,transition:"width 1s ease-in-out"},children:("audio"===t.type||"lyrics"===t.type)&&i.jsx("div",{style:{display:"flex",alignItems:"center",gap:"2px",height:"100%",paddingLeft:"8px",opacity:.5},children:[...Array(20)].map((e,r)=>i.jsx("div",{style:{width:"2px",height:80*Math.random()+"%",background:t.color,borderRadius:"2px"}},r))})})}),i.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",background:e[t.type]?"#22c55e":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center"},children:e[t.type]&&i.jsx(Y,{size:10,color:"white"})})]},t.label))})]})]}),i.jsxs("div",{style:{display:"flex",flexDirection:h?"column":"row",gap:"12px",alignItems:"stretch"},children:[z&&!C&&i.jsxs("button",{onClick:d,disabled:l,style:{padding:"14px 24px",borderRadius:"16px",background:"rgba(236, 72, 153, 0.1)",border:"1px solid rgba(236, 72, 153, 0.3)",color:"#f472b6",fontWeight:"600",fontSize:"0.9rem",cursor:l?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[l?i.jsx(U,{size:18,className:"spin"}):s?i.jsx(S,{size:18,fill:"#22c55e"}):i.jsx(B,{size:18}),l?"Syncing...":s?"Image to Video Sync âœ“":"Image to Video Sync"]}),i.jsx("button",{onClick:()=>{y?x(!0):t.info("Finish all generators to enable Master Preview")},style:{padding:"14px 32px",borderRadius:"16px",background:y?"linear-gradient(135deg, #4f46e5, #7c3aed)":"rgba(255,255,255,0.05)",border:y?"none":"1px solid rgba(255,255,255,0.1)",color:y?"white":"rgba(255,255,255,0.3)",fontWeight:"700",fontSize:"1rem",cursor:y?"pointer":"default",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",boxShadow:y?"0 8px 25px rgba(79, 70, 229, 0.4)":"none",transition:"all 0.3s ease",minWidth:h?"100%":"220px"},children:y?i.jsxs(i.Fragment,{children:[i.jsx(V,{size:20}),"Master & Preview Mix"]}):i.jsxs(i.Fragment,{children:[i.jsx(K,{size:18}),"Master Preview Locked"]})}),f&&i.jsxs("button",{onClick:p,style:{padding:"14px 24px",borderRadius:"16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontWeight:"600",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:y?1:.7},children:[i.jsx(N,{size:18}),!h&&"Publish to Hub"]})]})]}),!y&&i.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"4px",background:"rgba(255,255,255,0.05)"},children:i.jsx("div",{style:{width:`${v}%`,height:"100%",background:"linear-gradient(90deg, #3b82f6, #6366f1)",transition:"width 0.8s cubic-bezier(0.16, 1, 0.3, 1)"}})})]})}function _({isOpen:r,onClose:v,onCreateProject:H,onSaveToProject:L,authToken:G=null,existingProject:J=null,userPlan:Y="Free"}){const[K,q]=e.useState("undefined"!=typeof window&&window.innerWidth<768);e.useEffect(()=>{const e=()=>q(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e.useEffect(()=>{r&&(async()=>{if(a.currentUser){zi(!0);try{const e=c(p(n,"users",a.currentUser.uid,"voices")),i=(await x(e)).docs.map(e=>({id:e.id,...e.data()}));ki(i)}catch(e){}finally{zi(!1)}}})()},[r]),e.useEffect(()=>{(async()=>{if(a.currentUser&&r)try{const e=d(n,"users",a.currentUser.uid),i=await g(e);if(i.exists()){const e=i.data();e.visualDnaUrl&&Ri(e.visualDnaUrl),e.audioDnaUrl&&Wi(e.audioDnaUrl),e.videoDnaUrl&&Ui(e.videoDnaUrl),e.lyricsDnaUrl&&Ti(e.lyricsDnaUrl),e.voiceSampleUrl&&fi(e.voiceSampleUrl)}}catch(e){}})()},[r]);const[X,_]=e.useState(J?.name||""),[ee,ie]=e.useState("English"),[te,re]=e.useState("Modern Hip-Hop"),[oe,ne]=e.useState(90),[ae,se]=e.useState("Gemini 2.0 Flash"),[le,de]=e.useState("music-gpt"),[ce,pe]=e.useState("Energetic"),[xe,ge]=e.useState("Full Song");e.useEffect(()=>{ne("Full Song"===xe?90:"Radio Edit"===xe?150:"Extended"===xe?180:"Loop"===xe?30:15)},[xe]);const[ue,he]=e.useState(!0),[me,be]=e.useState(-1),[ye,fe]=e.useState("Full Mix"),[ve,je]=e.useState(J?.bpm||J?.settings?.bpm||120),[we,ke]=e.useState({lyrics:"ghost",audio:"beat",visual:"album",video:"video-creator"}),[Se,ze]=e.useState(!1),[Ce,Re]=e.useState({lyrics:null,audio:null,visual:null,video:null}),[Ie,We]=e.useState({audio:null,image:null,video:null,vocals:null}),[$e,Ue]=e.useState({audio:!1,image:!1,video:!1,vocals:!1}),[De,Te]=e.useState(null),[Ae,Be]=e.useState(""),[Ee,Pe]=e.useState(!1),[Ve,Oe]=e.useState(!1),[Me,Ne]=e.useState("rapper"),[Fe,He]=e.useState("aggressive"),[Le,Ge]=e.useState("hip-hop"),[Je,Ye]=e.useState(!1),[Ke,qe]=e.useState(null),[Xe,Qe]=e.useState(!1),[Ze,_e]=e.useState(null),[ei,ii]=e.useState(!1),[ti,ri]=e.useState(null),[oi,ni]=e.useState(!1),[ai,si]=e.useState(!1),[li,di]=e.useState(!1),[ci,pi]=e.useState(!1),[xi,gi]=e.useState(!1),[ui,hi]=e.useState(!1),[mi,bi]=e.useState("image"),[yi,fi]=e.useState(null),[vi,ji]=e.useState(!1),[wi,ki]=e.useState([]),[Si,zi]=e.useState(!1),[Ci,Ri]=e.useState(null),[Ii,Wi]=e.useState(null),[$i,Ui]=e.useState(null),[Di,Ti]=e.useState(null),[Ai,Bi]=e.useState({visual:!1,audio:!1,video:!1,lyrics:!1}),[Ei,Pi]=e.useState(!1),Vi=e.useRef(null),Oi=e.useRef(null),Mi=Ce||{lyrics:null,audio:null,visual:null,video:null},Ni=Ie||{audio:null,image:null,video:null},Fi=[{key:"lyrics",title:"Lyrics & Hook",subtitle:"Song writing",icon:T,color:"#8b5cf6",mediaType:"audio"},{key:"audio",title:"Beat & Audio",subtitle:"Music production",icon:$,color:"#06b6d4",mediaType:"audio"},{key:"visual",title:"Cover Art",subtitle:"Visual design",icon:A,color:"#ec4899",mediaType:"image"},{key:"video",title:"Image to Video",subtitle:"Video creation",icon:B,color:"#f59e0b",mediaType:"video"}],Hi=(e,i)=>{if(De===i)return window.speechSynthesis.cancel(),Oi.current&&(Oi.current.pause(),Oi.current.currentTime=0),void Te(null);if("lyrics"===i&&Ie.vocals)try{Oi.current&&Oi.current.pause(),window.speechSynthesis.cancel();const t=document.createElement("audio");return t.src=f(Ie.vocals),Oi.current=t,t.play().catch(t=>{Li(e,i)}),t.onended=()=>Te(null),void Te(i)}catch(t){}Li(e,i)},Li=(e,i)=>{try{if(window.speechSynthesis.cancel(),"undefined"==typeof SpeechSynthesisUtterance)return;const t=new SpeechSynthesisUtterance(e),r=window.speechSynthesis.getVoices();if("rapper"===Me||"rapper-female"===Me){t.rate="fast"===Fe?1.3:"chill"===Fe?.85:1,t.pitch="rapper-female"===Me?1.2:.9;const e=r.find(e=>"rapper-female"===Me?e.name.toLowerCase().includes("female")||e.name.toLowerCase().includes("zira")||e.name.toLowerCase().includes("samantha"):e.name.toLowerCase().includes("male")||e.name.toLowerCase().includes("david")||e.name.toLowerCase().includes("alex"));e&&(t.voice=e)}else if("singer"===Me||"singer-female"===Me){t.rate=.85,t.pitch="singer-female"===Me?1.3:1;const e=r.find(e=>"singer-female"===Me?e.name.toLowerCase().includes("female")||e.name.toLowerCase().includes("zira"):e.name.toLowerCase().includes("male")||e.name.toLowerCase().includes("david"));e&&(t.voice=e)}else if("narrator"===Me){t.rate=.9,t.pitch=.8;const e=r.find(e=>e.name.toLowerCase().includes("david")||e.name.toLowerCase().includes("male"));e&&(t.voice=e)}else t.rate=.9;t.onend=()=>Te(null),t.onerror=()=>Te(null),window.speechSynthesis.speak(t),Te(i)}catch(t){Te(null)}},Gi=e.useCallback(async()=>{const e={"Content-Type":"application/json"};return G&&(e.Authorization=`Bearer ${G}`),e},[G]),Ji=async()=>{if(Se)return;if(!X.trim())return void t.error("Please enter a song idea");const e=Object.entries(we).filter(([,e])=>e);if(0===e.length)return void t.error("Please select at least one agent");ze(!0),t.loading("Generating content...",{id:"gen-all"});const r={lyrics:null,vocals:null,audio:null,visual:null,video:null};try{const i=await Gi(),n="Gemini 2.0 Flash"===ae?"gemini-2.0-flash":"Gemini 2.0 Pro (Exp)"===ae?"gemini-2.0-flash-exp":"Gemini 1.5 Pro"===ae?"gemini-1.5-pro":"gemini-2.0-flash",a=e.map(async([e,t])=>{const a=o.find(e=>e.id===t);if(!a)return;const l=Fi.find(i=>i.key===e),d=`You are ${a.name}, a professional ${a.category} specialist. \n        Create content for a ${te} song about: "${X}" in ${ee}.\n        Be creative, professional, and match the genre's style.\n        ${"lyrics"===e?"Write a catchy hook and verse lyrics.":""}\n        ${"vocals"===e?'Describe the vocal performance style, tone, and character in detail (e.g., "Energetic female vocal with a soulful grit and rapid-fire delivery in the verses").':""}\n        ${"audio"===e?"Describe a detailed beat/instrumental concept with BPM, key, and production elements.":""}\n        ${"visual"===e?"Describe a striking album cover or visual concept in detail for image generation.":""}\n        ${"video"===e?"Write a creative image to video concept/storyboard with scene descriptions.":""}`;try{const t=await fetch(`${s}/api/generate`,{method:"POST",headers:i,body:JSON.stringify({prompt:`Create ${l.title.toLowerCase()} content for: "${X}"`,systemInstruction:d,model:n,duration:oe,language:ee,referenceUrl:"lyrics"===e?Di:null})});if(t.ok){const i=await t.json();r[e]=i.output}else{await t.text()}}catch(c){}});await Promise.all(a),Re(r),t.dismiss("gen-all"),t.success("Generation complete!")}catch(n){t.error(i.jsxs("div",{children:[i.jsx("strong",{children:"Generation failed"}),i.jsx("p",{style:{fontSize:"12px",marginTop:"4px"},children:n.message||"Check your connection and try again"})]}),{duration:5e3})}finally{ze(!1)}},Yi=async e=>{if(Se)return;if(!we[e])return;const i=o.find(i=>i.id===we[e]);if(i){ze(!0),Re(i=>({...i,[e]:null}));try{const r=await Gi(),o=Fi.find(i=>i.key===e),n="Gemini 2.0 Flash"===ae?"gemini-2.0-flash":"Gemini 2.0 Pro (Exp)"===ae?"gemini-2.0-flash-exp":"Gemini 1.5 Pro"===ae?"gemini-1.5-pro":"gemini-2.0-flash",a=await fetch(`${s}/api/generate`,{method:"POST",headers:r,body:JSON.stringify({prompt:`Create fresh ${o.title.toLowerCase()} content for: "${X}"`,systemInstruction:`You are ${i.name}. Create NEW and DIFFERENT content for a ${te} song about: "${X}". Be creative and fresh.`,model:n,duration:oe,language:ee})});let l;if(!a.headers.get("content-type")?.includes("application/json"))throw new Error(`Invalid server response (${a.status})`);l=await a.json(),a.ok?(Re(i=>({...i,[e]:l.output})),t.success(`${o.title} regenerated!`)):t.error(l.error||`Failed to regenerate ${o.title}`)}catch{t.error("Regeneration failed")}finally{ze(!1)}}},Ki=async()=>{if($e.audio)return;if(!Ce.audio)return void t.error("Generate beat description first");Ue(e=>({...e,audio:!0}));const e="Extended"===xe?"3 minutes":"Radio Edit"===xe?"2 minutes":"60 seconds";t.loading(`Generating AI beat (${e})...`,{id:"gen-audio"});try{const e=await Gi(),r=await fetch(`${s}/api/generate-audio`,{method:"POST",headers:e,body:JSON.stringify({prompt:`${te} ${ce} instrumental, ${xe} format: ${Ce.audio.substring(0,250)}`,genre:te||"hip-hop",mood:ce.toLowerCase()||"energetic",bpm:ve||90,durationSeconds:oe||("Full Song"===xe?90:"Radio Edit"===xe?150:"Extended"===xe?180:"Loop"===xe?15:30),referenceAudio:Ii,engine:le||"music-gpt",highMusicality:ue,seed:me,stem:ye})});let o;if(!r.headers.get("content-type")?.includes("application/json"))throw new Error(`Invalid audio response (${r.status})`);if(o=await r.json(),r.ok)o.audioUrl?(We(e=>({...e,audio:o.audioUrl})),t.success("AI beat generated!",{id:"gen-audio"})):t.error("No audio returned",{id:"gen-audio"});else{const e=await r.json().catch(()=>({}));503===r.status&&e.setup?t.error(i.jsxs("div",{children:[i.jsx("strong",{children:"Audio API Not Ready"}),i.jsx("p",{style:{fontSize:"12px",marginTop:"4px"},children:e.details})]}),{id:"gen-audio",duration:8e3}):t.error(e.details||e.error||"Audio generation failed",{id:"gen-audio"})}}catch(r){t.error("Audio generation failed",{id:"gen-audio"})}finally{Ue(e=>({...e,audio:!1}))}},qi=async()=>{if(!$e.vocals)if(Ce.lyrics){Ue(e=>({...e,vocals:!0})),t.loading("Generating AI Vocals (up to 2 mins)...",{id:"gen-vocals"});try{const e=await Gi(),i={rapper:"rapper-male-1","rapper-female":"rapper-female-1",singer:"singer-male","singer-female":"singer-female",narrator:"narrator",whisper:"whisper",spoken:"spoken"}[Me]||"rapper-male-1",r=await fetch(`${s}/api/generate-speech`,{method:"POST",headers:e,body:JSON.stringify({prompt:Ce.lyrics.substring(0,500),voice:i,style:Me,rapStyle:Fe,genre:Le,speakerUrl:"cloned"===Me?yi:null})}),o=await r.json();r.ok&&o.audioUrl?(We(e=>({...e,vocals:o.audioUrl,lyricsVocal:o.audioUrl})),Re(e=>({...e,vocals:e.vocals||`AI Vocal Performance generated for "${X||"song"}"`})),t.success("AI Vocals generated!",{id:"gen-vocals"})):t.error(o.details||"Vocal generation failed",{id:"gen-vocals"})}catch(e){t.error("Vocal generation failed",{id:"gen-vocals"})}finally{Ue(e=>({...e,vocals:!1}))}}else t.error("Generate lyrics first")},Xi=async(e,i)=>{if(Ai[e])return;const r=i.target.files[0];if(!r)return;if(r.size>10485760)return void t.error("File too large (max 10MB)");Bi(i=>({...i,[e]:!0}));const o=t.loading(`Uploading ${e} DNA...`,{id:`upload-dna-${e}`});try{const i=await Gi(),l=new FileReader;l.readAsDataURL(r),l.onload=async()=>{try{const p=l.result,x=await fetch(`${s}/api/upload-asset`,{method:"POST",headers:i,body:JSON.stringify({data:p,fileName:`${e}-dna-${Date.now()}-${r.name.replace(/\s+/g,"-")}`,mimeType:r.type,assetType:"visual"===e||"video"===e?"image":"audio"===e?"audio":"document"})}),g=await x.json();if(!x.ok||!g.url)throw new Error(g.error||"Upload failed");{const i=g.url;if("visual"===e&&Ri(i),"audio"===e&&Wi(i),"video"===e&&Ui(i),"lyrics"===e&&Ti(i),a.currentUser?.uid)try{const t=d(n,"users",a.currentUser.uid);await u(t,{[`${e}DnaUrl`]:i,lastDnaUpdate:Date.now()})}catch(c){}t.success(`${"video"===e?"Image":e.charAt(0).toUpperCase()+e.slice(1)} DNA attached!`,{id:o})}}catch(p){t.error(`Failed to upload ${e} DNA`,{id:o})}finally{Bi(i=>({...i,[e]:!1}))}},l.onerror=()=>{t.error("Failed to read file"),Bi(i=>({...i,[e]:!1}))}}catch(l){t.error("Upload failed",{id:o}),Bi(i=>({...i,[e]:!1}))}},Qi=e=>new Promise((i,t)=>{try{const r=document.createElement("video");r.crossOrigin="anonymous",r.muted=!0,r.onloadeddata=()=>{r.currentTime=Math.min(1,.1*r.duration)},r.onseeked=()=>{try{const e=document.createElement("canvas");e.width=r.videoWidth||640,e.height=r.videoHeight||360;e.getContext("2d").drawImage(r,0,0,e.width,e.height);const t=e.toDataURL("image/jpeg",.9);r.remove(),i(t)}catch(e){t(e)}},r.onerror=()=>{t(new Error("Video load failed"))},r.src=e,r.load(),setTimeout(()=>{r.remove(),t(new Error("Frame extraction timeout"))},1e4)}catch(r){t(r)}}),Zi=async()=>{if(!$e.image&&Ce.visual){Ue(e=>({...e,image:!0})),t.loading("Generating image (~10 seconds)...",{id:"gen-image"});try{const e=await Gi(),i=await fetch(`${s}/api/generate-image`,{method:"POST",headers:e,body:JSON.stringify({prompt:`Album cover art: ${Ce.visual.substring(0,300)}`,referenceImage:Ci})});let r;if(!i.headers.get("content-type")?.includes("application/json"))throw new Error(`Invalid image response (${i.status})`);if(r=await i.json(),i.ok){let e=null;r.output?e=r.output:r.images&&r.images.length>0?e=r.images[0]:r.imageData&&(e=r.imageData),e?(We(i=>({...i,image:e})),t.success("Image created!",{id:"gen-image"})):await _i()}else{await i.text();await _i()}}catch(e){await _i()}finally{Ue(e=>({...e,image:!1}))}}},_i=async()=>{const e=Ie.video||ti;if(e){t.loading("Extracting frame from video...",{id:"gen-image"});try{const i=await Gi(),r=await fetch(`${s}/api/extract-video-frame`,{method:"POST",headers:i,body:JSON.stringify({videoUrl:e,timestamp:1})});if(r.ok){const i=await r.json();if(i.extractClientSide){const i=await Qi(e);return We(e=>({...e,image:i})),void t.success("Frame extracted from video!",{id:"gen-image"})}if(i.output||i.imageData){const e=i.output||`data:${i.mimeType||"image/jpeg"};base64,${i.imageData}`;return We(i=>({...i,image:e})),void t.success("Frame extracted from video!",{id:"gen-image"})}}const o=await Qi(e);We(e=>({...e,image:o})),t.success("Frame extracted from video!",{id:"gen-image"})}catch(i){t.error("Could not extract frame from video",{id:"gen-image"})}}else t.error("No image or video available",{id:"gen-image"})},et=async()=>{if(!$e.video&&Ce.video){Ue(e=>({...e,video:!0})),t.loading("Generating video (this takes ~2 min)...",{id:"gen-video"});try{const r=await Gi(),o=await fetch(`${s}/api/generate-video`,{method:"POST",headers:r,body:JSON.stringify({prompt:`Image to video: ${Ce.video.substring(0,200)}`,referenceImage:$i,duration:oe})});if(o.ok){const i=await o.json();if("image"===i.type||i.mimeType&&i.mimeType.startsWith("image/")){const e=i.output||i.imageUrl;if(e&&"string"==typeof e){const r=e.startsWith("data:")||e.startsWith("http")?e:`data:${i.mimeType||"image/png"};base64,${e}`;We(e=>({...e,image:r})),t.success("Cover image generated! (Video generation unavailable)",{id:"gen-video",duration:5e3})}else t.error("Video generation unavailable",{id:"gen-video"})}else{const r=i.videoUrl||i.output||i.video;if(r&&"string"==typeof r&&(r.startsWith("http")||r.startsWith("blob:"))){if(We(e=>({...e,video:r})),t.success(i.isDemo?"Demo video loaded!":"Video created!",{id:"gen-video"}),!Ie.image){t.loading("Extracting cover frame...",{id:"extract-frame"});try{const e=await Qi(r);We(i=>({...i,image:e})),t.success("Cover image extracted!",{id:"extract-frame"})}catch(e){t.dismiss("extract-frame")}}}else t.error(i.message||"Video generation unavailable",{id:"gen-video"})}}else{const e=await o.json().catch(()=>({}));503===o.status&&e.setup?t.error(i.jsxs("div",{children:[i.jsx("strong",{children:"Video API Not Ready"}),i.jsx("p",{style:{fontSize:"12px",marginTop:"4px"},children:e.details})]}),{id:"gen-video",duration:8e3}):t.error(e.details||e.error||"Video generation failed",{id:"gen-video"})}}catch(r){t.error("Video generation failed",{id:"gen-video"})}finally{Ue(e=>({...e,video:!1}))}}},it=async()=>{if(Xe)return;if(Object.entries(we).filter(([,e])=>null!==e).map(([e])=>e).some(e=>Ce[e])){Qe(!0),t.loading("Creating final mix (~15 seconds)...",{id:"final-mix"});try{const e={id:`mix-${Date.now()}`,title:`${X} - Complete Mix`,description:`Full production of "${X}" with lyrics, beat, visual, and video`,created:(new Date).toISOString(),components:{lyrics:{content:Ce.lyrics,agent:o.find(e=>e.id===we.lyrics)?.name||"Ghostwriter",vocalUrl:Ie.lyricsVocal||null},audio:{content:Ce.audio,agent:o.find(e=>e.id===we.audio)?.name||"Beat Maker",audioUrl:Ie.audio||null},visual:{content:Ce.visual,agent:o.find(e=>e.id===we.visual)?.name||"Designer",imageUrl:Ie.image||null},video:{content:Ce.video,agent:o.find(e=>e.id===we.video)?.name||"Video Creator",videoUrl:Ie.video||null}},settings:{language:ee,style:te,model:ae,bpm:ve}};_e(e),t.success("Final mix ready!",{id:"final-mix"})}catch(e){t.error("Failed to create final mix",{id:"final-mix"})}finally{Qe(!1)}}else t.error("Generate at least one output first")},tt=e=>{const i=Ce[e];if(!i)return;const t=Fi.find(i=>i.key===e),r="string"==typeof i?i:JSON.stringify(i,null,2),o=new Blob([r],{type:"text/plain"}),n=URL.createObjectURL(o),a=document.createElement("a");a.href=n,a.download=`${X||"output"}-${t?.title||e}.txt`,a.click(),URL.revokeObjectURL(n);const s={audio:Ie.audio,visual:Ie.image,video:Ie.video}[e];if(s){let i=s;"visual"===e&&(i=b(s)),"audio"===e&&(i=f(s)),"video"===e&&(i=y(s));const t=document.createElement("a");t.href=i,t.download=`${X||"media"}-${e}`,t.click()}},rt=e=>{Re(i=>({...i,[e]:null})),"audio"===e&&We(e=>({...e,audio:null})),"visual"===e&&We(e=>({...e,image:null})),"video"===e&&We(e=>({...e,video:null})),t.success("Deleted")},ot=(e,i)=>{Re(t=>({...t,[e]:i})),t.success("Saved")},nt=()=>{const e=Object.values(Ce).some(e=>null!==e),i=Object.values(Ie).some(e=>null!==e);if(!e&&!i)return void t.error("No content to save! Generate some content first.");const r=[];Fi.forEach(e=>{const i=Ce[e.key];if(i){const t=o.find(i=>i.id===we[e.key]),n="string"==typeof i?i:JSON.stringify(i),a={id:`${e.key}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:e.title,type:e.key,agent:t?.name||e.subtitle,content:n,snippet:n.substring(0,100),audioUrl:"audio"===e.key?Ie.audio||null:"vocals"===e.key&&Ie.vocals||null,imageUrl:"visual"===e.key&&b(Ie.image)||null,videoUrl:"video"===e.key&&Ie.video||null,date:(new Date).toLocaleDateString(),createdAt:(new Date).toISOString(),color:`agent-${(e.color||"").replace("#","")}`};r.push(a)}});const n={id:J?.id||String(Date.now()),name:Ae||X||J?.name||"Untitled Project",description:`Created with Studio Orchestrator: "${X}"`,category:J?.category||"Music",language:ee,style:te,model:ae,bpm:ve,date:J?.date||(new Date).toLocaleDateString(),updatedAt:(new Date).toISOString(),agents:Object.values(we).filter(Boolean).map(e=>{const i=o.find(i=>i.id===e);return i?.name||e}),assets:r,coverImage:b(Ie.image)||J?.coverImage||null};if(H)try{return H(n),t.success(`Saved ${n.assets.length} assets to "${n.name}"!`),hi(!0),Pe(!1),void di(!0)}catch(a){t.error("Save failed - callback error")}else t.error("Save failed - no handler");Pe(!1)};return r?i.jsxs("div",{className:"studio-orchestrator-overlay animate-fadeIn",style:{position:"fixed",top:0,left:0,right:0,height:"100dvh",background:"linear-gradient(180deg, rgba(0,0,0,0.98) 0%, rgba(10,10,20,0.98) 100%)",zIndex:1e4,display:"flex",flexDirection:"column",overflow:"hidden"},children:[i.jsxs("div",{style:{padding:K?"12px 16px":"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.5)",backdropFilter:"blur(10px)",position:"sticky",top:0,zIndex:10},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{width:K?"40px":"48px",height:K?"40px":"48px",borderRadius:"14px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.3)"},children:i.jsx(S,{size:K?22:26,color:"white"})}),i.jsxs("div",{children:[i.jsx("h2",{style:{margin:0,fontSize:K?"1.1rem":"1.4rem",fontWeight:"700"},children:"Studio Orchestrator"}),i.jsx("p",{style:{margin:0,fontSize:K?"0.75rem":"0.8rem",color:"var(--text-secondary)"},children:"4 AI Generators â€¢ One Unified Pipeline"})]})]}),i.jsx("button",{onClick:()=>{!Object.values(Mi).some(Boolean)&&!Object.values(Ni).some(Boolean)||ui?v?.():gi(!0)},style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"12px",width:K?"38px":"44px",height:K?"38px":"44px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},children:i.jsx(k,{size:20,color:"white"})})]}),i.jsxs("div",{style:{flex:1,padding:K?"12px 10px":"16px",maxWidth:"1200px",margin:"0 auto",width:"100%",overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch"},children:[i.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:K?"10px":"16px",marginBottom:K?"12px":"20px",border:"1px solid rgba(255,255,255,0.06)"},children:[i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:K?"8px":"12px",marginBottom:K?"12px":"16px"},children:[i.jsx("textarea",{value:X,onChange:e=>_(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Ji())},placeholder:"Describe your song idea, vibe, or concept...",rows:K?3:2,style:{width:"100%",padding:K?"10px 12px":"16px 20px",borderRadius:"12px",background:"rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.15)",color:"white",fontSize:K?"0.9rem":"1rem",outline:"none",minHeight:K?"100px":"56px",resize:"none",fontFamily:"inherit",lineHeight:"1.5"}}),i.jsxs("div",{style:{display:"flex",gap:"10px"},children:[i.jsx("button",{onClick:Ve?()=>{Vi.current&&Vi.current.stop(),Oe(!1)}:()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const i=window.SpeechRecognition||window.webkitSpeechRecognition;if(!i||"function"!=typeof i)return void t.error("Voice recognition not supported");try{Vi.current=new i,Vi.current.continuous=!1,Vi.current.interimResults=!0,Vi.current.onresult=e=>{const i=Array.from(e.results).map(e=>e[0].transcript).join("");_(i)},Vi.current.onend=()=>Oe(!1),Vi.current.onerror=e=>{Oe(!1)},Vi.current.start(),Oe(!0),t.success("Listening...")}catch(e){t.error("Voice input failed")}}else t.error("Speech recognition not supported")},style:{padding:"14px 16px",borderRadius:"12px",background:Ve?"rgba(239, 68, 68, 0.2)":"rgba(255,255,255,0.05)",border:"1px solid "+(Ve?"#ef4444":"rgba(255,255,255,0.15)"),color:Ve?"#ef4444":"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"52px",minHeight:"52px"},title:Ve?"Stop Listening":"Voice Input",children:Ve?i.jsx(z,{size:22}):i.jsx(C,{size:22})}),i.jsx("button",{onClick:Ji,disabled:Se||!X.trim()||0===Object.values(we).filter(Boolean).length,style:{flex:1,padding:"14px 24px",borderRadius:"12px",background:Se?"rgba(139, 92, 246, 0.3)":"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",fontSize:"1rem",cursor:Se||!X.trim()||0===Object.values(we).filter(Boolean).length?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",opacity:X.trim()&&0!==Object.values(we).filter(Boolean).length?1:.5,boxShadow:Se?"none":"0 4px 20px rgba(139, 92, 246, 0.4)",minHeight:"52px"},children:Se?i.jsxs(i.Fragment,{children:[i.jsx(R,{size:20,className:"spin"}),"Generating..."]}):i.jsxs(i.Fragment,{children:[i.jsx(I,{size:20}),"Generate ",4===Object.values(we).filter(Boolean).length?"All":`${Object.values(we).filter(Boolean).length} Output${1!==Object.values(we).filter(Boolean).length?"s":""}`]})})]})]}),i.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center",paddingBottom:"4px"},children:[i.jsxs("button",{onClick:()=>pi(!ci),style:{padding:"8px 14px",borderRadius:"10px",background:ci?"rgba(139, 92, 246, 0.2)":"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:ci?"#a855f7":"var(--text-secondary)",fontSize:"0.8rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",minHeight:"40px",whiteSpace:"nowrap"},children:[i.jsx(W,{size:14}),ci?"Hide Ideas":"Need Ideas?"]}),ci&&EXAMPLE_IDEAS.map((e,t)=>i.jsx("button",{onClick:()=>{_(e),pi(!1)},style:{padding:"10px 16px",borderRadius:"20px",background:"rgba(139, 92, 246, 0.15)",border:"1px solid rgba(139, 92, 246, 0.3)",color:"rgba(255,255,255,0.8)",fontSize:"0.85rem",cursor:"pointer",whiteSpace:"nowrap",minHeight:"40px"},children:e},t))]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"10px",marginBottom:"20px"},children:[[{label:"Language",value:ee,setter:ie,options:["English","Spanish","French","German","Japanese","Korean","Portuguese"]},{label:"Genre",value:te,setter:re,options:["Modern Hip-Hop","90s Boom Bap","Trap","R&B / Soul","Pop","Rock","Electronic","Lo-Fi"]},{label:"AI Model",value:ae,setter:se,options:["Gemini 2.0 Flash","Gemini 2.0 Pro (Exp)","Gemini 1.5 Pro"]},{label:"Mood",value:ce,setter:pe,options:["Chill","Energetic","Dark","Happy","Epic","Mysterious","Dreamy"]},{label:"Target Duration",value:oe,setter:ne,options:[15,30,60,90,120,180,240,300]},{label:"Structure",value:xe,setter:ge,options:["Full Song","Radio Edit","Extended","Loop","Intro","Verse","Chorus","Outro"]},{label:"Music Engine",value:le,setter:de,options:["Music GPT (MusicGen)","Mureaka","Riffusion (Visual)","Stability Pro","Uberduck","Auto-Selection"]},{label:"Stem Mode",value:ye,setter:fe,options:["Full Mix","Drums Only","No Drums","Melody Only","Bass Only"]}].map(e=>i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"6px",textTransform:"uppercase",fontWeight:"600",letterSpacing:"0.05em"},children:e.label}),i.jsx("select",{value:"Music Engine"===e.label?"music-gpt"===le?"Music GPT (MusicGen)":"mureka"===le?"Mureaka":"riffusion"===le?"Riffusion (Visual)":"stability"===le?"Stability Pro":"uberduck"===le?"Uberduck":"Auto-Selection":e.value,onChange:i=>{if("Music Engine"===e.label){const e=i.target.value;de("Music GPT (MusicGen)"===e?"music-gpt":"Mureaka"===e?"mureka":"Riffusion (Visual)"===e?"riffusion":"Stability Pro"===e?"stability":"Uberduck"===e?"uberduck":"auto")}else e.setter(i.target.value)},style:{width:"100%",padding:"12px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none",minHeight:"48px",WebkitAppearance:"none",appearance:"none",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23888' d='M6 8L1 3h10z'/%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:e.options.map(e=>i.jsx("option",{value:e,style:{background:"#1a1a1a"},children:e},e))})]},e.label)),i.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[i.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"6px",textTransform:"uppercase",fontWeight:"600"},children:"High Musicality (Udio)"}),i.jsxs("button",{onClick:()=>he(!ue),style:{height:"48px",borderRadius:"10px",background:ue?"rgba(139, 92, 246, 0.2)":"rgba(0,0,0,0.4)",border:"1px solid "+(ue?"#8b5cf6":"rgba(255,255,255,0.1)"),color:ue?"#a78bfa":"var(--text-secondary)",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},children:[i.jsx($,{size:14}),ue?"Enabled":"Disabled"]})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[i.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"6px",textTransform:"uppercase",fontWeight:"600"},children:"Generation Seed"}),i.jsxs("div",{style:{display:"flex",gap:"4px"},children:[i.jsx("input",{type:"number",value:me,onChange:e=>be(parseInt(e.target.value)),style:{flex:1,height:"48px",padding:"0 12px",borderRadius:"10px 0 0 10px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.8rem",outline:"none"},placeholder:"Random"}),i.jsx("button",{onClick:()=>be(Math.floor(1e6*Math.random())),style:{padding:"0 12px",borderRadius:"0 10px 10px 0",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderLeft:"none",color:"var(--text-secondary)",cursor:"pointer"},title:"Randomize Seed",children:i.jsx(U,{size:14})})]})]})]}),i.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:K?"16px":"20px",border:"1px solid rgba(255,255,255,0.06)",marginBottom:"24px"},children:[i.jsx("div",{style:{display:"flex",alignItems:K?"flex-start":"center",justifyContent:"space-between",gap:"8px",marginBottom:"16px",flexWrap:"wrap",flexDirection:K?"column":"row"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(D,{size:K?14:16,color:"var(--text-secondary)"}),i.jsx("span",{style:{fontSize:K?"0.75rem":"0.8rem",color:"var(--text-secondary)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Choose Your Generators"}),i.jsxs("span",{style:{padding:"2px 8px",borderRadius:"10px",background:"rgba(139, 92, 246, 0.3)",color:"#a78bfa",fontSize:"0.7rem",fontWeight:"600"},children:[Object.values(we).filter(Boolean).length," / 4 active"]})]})}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px"},children:Fi.map(e=>i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"6px"},children:[i.jsx("label",{style:{fontSize:"0.7rem",color:e.color,fontWeight:"500"},children:e.title}),we[e.key]&&i.jsx("div",{title:`${o.find(i=>i.id===we[e.key])?.name} Capabilities:\nâ€¢ ${o.find(i=>i.id===we[e.key])?.capabilities?.join("\nâ€¢ ")}`,style:{color:"rgba(255,255,255,0.3)",cursor:"help"},children:i.jsx(E,{size:12})})]}),i.jsxs("select",{value:we[e.key]||"",onChange:i=>ke(t=>({...t,[e.key]:i.target.value||null})),style:{width:"100%",padding:"10px 12px",borderRadius:"10px",background:we[e.key]?"rgba(0,0,0,0.4)":"rgba(0,0,0,0.2)",border:"1px solid "+(we[e.key]?e.color+"60":"rgba(255,255,255,0.1)"),color:we[e.key]?"white":"var(--text-muted)",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:[i.jsx("option",{value:"",style:{background:"#1a1a1a"},children:"â€” None â€”"}),o.filter(e=>"Pro"===Y||("Monthly"===Y?"free"===e.tier||"monthly"===e.tier:"free"===e.tier)).map(e=>i.jsxs("option",{value:e.id,style:{background:"#1a1a1a"},disabled:e.comingSoon,children:[e.name," ",e.comingSoon?"(Coming Soon)":""]},e.id))]})]},e.key))})]}),i.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:K?"12px":"16px",marginBottom:"24px",border:"1px solid rgba(168, 85, 247, 0.15)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:Ei?"16px":"0"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx(P,{size:18,color:"#a855f7"}),i.jsxs("div",{children:[i.jsx("h3",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"white"},children:"Studio DNA Vault"}),!Ei&&i.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"rgba(255,255,255,0.4)"},children:Ci||Ii||Di||$i?"Persistent references active":"No reference files attached"})]})]}),i.jsxs("button",{onClick:()=>Pi(!Ei),style:{padding:"6px 12px",background:"rgba(168, 85, 247, 0.15)",border:"1px solid rgba(168, 85, 247, 0.3)",borderRadius:"8px",fontSize:"0.8rem",color:"#a855f7",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[Ei?"Close Vault":"Manage DNA",Ei?i.jsx(ChevronUp,{size:14}):i.jsx(ChevronRight,{size:14})]})]}),Ei&&i.jsxs("div",{style:{display:"grid",gridTemplateColumns:K?"1fr":"repeat(2, 1fr)",gap:"10px",marginTop:"12px",animation:"fadeIn 0.3s ease"},children:[i.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx(A,{size:18,color:"#ec4899"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Visual DNA"}),i.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Ci?"Reference Active":"No Image"})]})]}),i.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Ci&&i.jsx("button",{onClick:()=>Ri(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:i.jsx(k,{size:14})}),i.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[i.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:e=>Xi("visual",e)}),Ai.visual?i.jsx(R,{size:12,className:"spin"}):"Upload"]})]})]}),i.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx($,{size:18,color:"#06b6d4"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Audio DNA"}),i.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Ii?"Ref Active":"No Beat"})]})]}),i.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Ii&&i.jsx("button",{onClick:()=>Wi(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:i.jsx(k,{size:14})}),i.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[i.jsx("input",{type:"file",accept:"audio/*",style:{display:"none"},onChange:e=>Xi("audio",e)}),Ai.audio?i.jsx(R,{size:12,className:"spin"}):"Upload"]})]})]}),i.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx(T,{size:18,color:"#a855f7"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Lyrics DNA"}),i.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Di?"Text Ready":"No Context"})]})]}),i.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Di&&i.jsx("button",{onClick:()=>Ti(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:i.jsx(k,{size:14})}),i.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[i.jsx("input",{type:"file",style:{display:"none"},onChange:e=>Xi("lyrics",e)}),Ai.lyrics?i.jsx(R,{size:12,className:"spin"}):"Upload"]})]})]}),i.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx(B,{size:18,color:"#f59e0b"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Seed DNA"}),i.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:$i?"Profile Active":"No Seed"})]})]}),i.jsxs("div",{style:{display:"flex",gap:"6px"},children:[$i&&i.jsx("button",{onClick:()=>Ui(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:i.jsx(k,{size:14})}),i.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[i.jsx("input",{type:"file",style:{display:"none"},onChange:e=>Xi("video",e)}),Ai.video?i.jsx(R,{size:12,className:"spin"}):"Upload"]})]})]})]}),!Ei&&(Ci||Ii||Di||$i)&&i.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"10px"},children:[Ci&&i.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(236, 72, 153, 0.1)",color:"#ec4899",borderRadius:"6px",border:"1px solid rgba(236, 72, 153, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx(A,{size:10})," Visual DNA"]}),Ii&&i.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(6, 182, 212, 0.1)",color:"#06b6d4",borderRadius:"6px",border:"1px solid rgba(6, 182, 212, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx($,{size:10})," Audio DNA"]}),Di&&i.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(168, 85, 247, 0.1)",color:"#a855f7",borderRadius:"6px",border:"1px solid rgba(168, 85, 247, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx(T,{size:10})," Lyrics DNA"]}),$i&&i.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b",borderRadius:"6px",border:"1px solid rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx(B,{size:10})," Seed DNA"]})]})]}),i.jsx("div",{style:{padding:"8px",background:Ce.lyrics?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",borderRadius:"8px",marginBottom:"12px",fontSize:"0.75rem",color:Ce.lyrics?"#10b981":"#ef4444"},children:Ce.lyrics?"âœ… Lyrics ready - Create Vocal button should appear below":"âš ï¸ No lyrics yet - Click Generate above first"}),Ce.lyrics&&i.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(139, 92, 246, 0.05) 100%)",borderRadius:"16px",padding:"24px",border:"1px solid rgba(139, 92, 246, 0.4)",marginBottom:"24px"},children:[i.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:i.jsxs("div",{children:[i.jsx("h4",{style:{margin:"0 0 6px",fontSize:"1rem",fontWeight:"700",color:"#8b5cf6"},children:"ðŸŽ¤ Ghostwriter Vocal Performance"}),i.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Generate audio of the lyrics being recited or sung by different voice types"})]})}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[i.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[i.jsx("div",{style:{fontSize:"0.7rem",color:"#8b5cf6",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px"},children:"ðŸ“ Lyrics Text"}),i.jsx("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"12px",maxHeight:"150px",overflowY:"auto",fontSize:"0.85rem",lineHeight:"1.6",color:"rgba(255,255,255,0.85)",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:Ce.lyrics})]}),i.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(139, 92, 246, 0.3)",display:"flex",flexDirection:"column"},children:[i.jsx("div",{style:{fontSize:"0.7rem",color:"#8b5cf6",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px"},children:"ðŸŽµ Vocal Audio"}),Ie.lyricsVocal?i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",flex:1},children:[i.jsx("audio",{src:f(Ie.lyricsVocal),controls:!0,style:{width:"100%",height:"38px",borderRadius:"8px"}}),i.jsxs("button",{onClick:()=>{const e=document.createElement("div");e.innerHTML=`\n                          <div style="\n                            position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n                            background: rgba(0,0,0,0.9); z-index: 9999;\n                            display: flex; align-items: center; justify-content: center;\n                            padding: 20px;\n                          " onclick="if(event.target === this) this.remove();">\n                            <div style="\n                              background: rgba(0,0,0,0.8); border-radius: 20px;\n                              padding: 24px; max-width: 500px; width: 100%;\n                              border: 1px solid rgba(139, 92, 246, 0.4);\n                            " onclick="event.stopPropagation();">\n                              <div style="\n                                font-weight: 700; margin-bottom: 16px; color: #8b5cf6;\n                              ">\n                                ðŸŽ§ Vocal Audio Player\n                              </div>\n                              <audio \n                                src="${Ie.lyricsVocal}"\n                                controls\n                                autoplay\n                                style="width: 100%; height: 50px; border-radius: 10px;"\n                              />\n                              <div style="\n                                margin-top: 16px; font-size: 0.85rem;\n                                color: var(--text-secondary);\n                              ">\n                                Voice Style: <strong>${Me}</strong>\n                              </div>\n                            </div>\n                          </div>\n                        `,document.body.appendChild(e),e.onclick=i=>i.target===e&&e.remove()},style:{padding:"10px 16px",borderRadius:"8px",background:"rgba(139, 92, 246, 0.3)",border:"1px solid rgba(139, 92, 246, 0.5)",color:"#8b5cf6",fontWeight:"600",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[i.jsx(V,{size:14}),"Fullscreen"]})]}):i.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"80px",color:"var(--text-secondary)",fontSize:"0.85rem",textAlign:"center"},children:'No audio yet â€¢ Click "Create Vocal" below'})]})]}),i.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[i.jsxs("select",{value:"cloned"===Me&&yi?wi.find(e=>e.url===yi)?`saved-${wi.find(e=>e.url===yi).id}`:"cloned":Me,onChange:e=>{const i=e.target.value;if(i.startsWith("saved-")){const e=i.replace("saved-",""),t=wi.find(i=>i.id===e);t&&(fi(t.url),Ne("cloned"))}else Ne(i)},style:{padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(139, 92, 246, 0.5)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:[i.jsxs("optgroup",{label:"ðŸ”¥ AI Rappers (Suno/Bark)",children:[i.jsx("option",{value:"rapper",children:"ðŸŽ¤ Male Rapper"}),i.jsx("option",{value:"rapper-female",children:"ðŸ’œ Female Rapper"})]}),i.jsxs("optgroup",{label:"ðŸŽµ AI Singers",children:[i.jsx("option",{value:"singer",children:"ðŸŽ¤ Male Singer (R&B/Soul)"}),i.jsx("option",{value:"singer-female",children:"ðŸ’« Female Singer (Pop/R&B)"})]}),i.jsxs("optgroup",{label:"ðŸ—£ï¸ Narration",children:[i.jsx("option",{value:"narrator",children:"ðŸ“¢ Narrator (Deep Voice)"}),i.jsx("option",{value:"spoken",children:"ðŸ’¬ Spoken Word"})]}),i.jsxs("optgroup",{label:"ðŸ§¬ Voice Cloning",children:[i.jsxs("option",{value:"cloned",disabled:!yi,children:["âœ¨ Cloned Voice ",!yi&&"(Upload sample first)"]}),wi.length>0&&i.jsx("optgroup",{label:"ðŸ—„ï¸ Saved Voices",children:wi.map(e=>i.jsxs("option",{value:`saved-${e.id}`,children:["ðŸ‘¤ ",e.name||"Unnamed Voice"]},e.id))})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("input",{type:"file",id:"voice-sample-upload",accept:"audio/*",onChange:async e=>{const i=e.target.files[0];if(i)if(i.size>10485760)t.error("File too large (max 10MB)");else{ji(!0),t.loading("Uploading voice sample...",{id:"voice-upload"});try{const e=await Gi(),r=new FileReader;r.readAsDataURL(i),r.onload=async()=>{try{const l=r.result,c=await fetch(`${s}/api/upload-asset`,{method:"POST",headers:e,body:JSON.stringify({data:l,fileName:`voice-sample-${Date.now()}-${i.name.replace(/\s+/g,"-")}`,mimeType:i.type||"audio/wav",assetType:"audio"})}),x=await c.json();if(!c.ok||!x.url)throw new Error(x.error||"Upload failed");if(fi(x.url),Ne("cloned"),t.success('Voice sample uploaded! Model set to "Cloned Voice"',{id:"voice-upload"}),a.currentUser)try{const e=d(n,"users",a.currentUser.uid);await u(e,{voiceSampleUrl:x.url,lastVoiceUpdate:Date.now()});const r={url:x.url,name:i.name.replace(/\.[^/.]+$/,""),createdAt:h(),type:"cloned"},o=await m(p(n,"users",a.currentUser.uid,"voices"),r);ki(e=>[{id:o.id,...r},...e]),t.success("Voice saved to library")}catch(o){}}catch(l){t.error("Failed to upload sample",{id:"voice-upload"})}finally{ji(!1)}},r.onerror=()=>{t.error("Failed to read file"),ji(!1)}}catch(r){t.error("Upload failed",{id:"voice-upload"}),ji(!1)}}},style:{display:"none"}}),i.jsxs("button",{onClick:()=>document.getElementById("voice-sample-upload").click(),disabled:vi,style:{padding:"10px 14px",borderRadius:"10px",background:yi?"rgba(34, 197, 94, 0.1)":"rgba(255, 255, 255, 0.05)",border:yi?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",color:yi?"#22c55e":"white",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[vi?i.jsx(R,{size:16,className:"spin"}):i.jsx(C,{size:16}),yi?"Voice Sample Attached âœ“":"Upload Voice Sample"]}),yi&&i.jsx("button",{onClick:()=>{fi(null),"cloned"===Me&&Ne("rapper")},style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"0.8rem",padding:"4px"},title:"Remove sample",children:i.jsx(k,{size:14})})]}),wi.length>0&&i.jsxs("div",{style:{marginTop:"8px",background:"rgba(255,255,255,0.02)",borderRadius:"8px",padding:"10px"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",marginBottom:"6px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"My Voice Library"}),i.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:wi.map(e=>i.jsxs("div",{onClick:()=>{fi(e.url),Ne("cloned"),t.success(`Voice "${e.name}" loaded`)},style:{background:yi===e.url?"rgba(139, 92, 246, 0.2)":"rgba(255,255,255,0.05)",border:yi===e.url?"1px solid #8b5cf6":"1px solid rgba(255,255,255,0.1)",borderRadius:"16px",padding:"4px 10px",fontSize:"0.75rem",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[i.jsx(O,{size:10}),e.name||"Voice",i.jsx(k,{size:12,onClick:async i=>{if(i.stopPropagation(),window.confirm("Delete this voice from your library?"))try{await l(d(n,"users",a.currentUser.uid,"voices",e.id)),ki(i=>i.filter(i=>i.id!==e.id)),yi===e.url&&(fi(null),Ne("rapper")),t.success("Voice deleted")}catch(r){t.error("Failed to delete voice")}},onMouseEnter:e=>e.currentTarget.style.color="#ef4444",onMouseLeave:e=>e.currentTarget.style.color="inherit",style:{marginLeft:"4px",opacity:.5,cursor:"pointer"}})]},e.id))})]}),("rapper"===Me||"rapper-female"===Me)&&i.jsx("select",{value:Fe,onChange:e=>He(e.target.value),style:{padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(236, 72, 153, 0.5)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:i.jsxs("optgroup",{label:"ðŸ”¥ Rap Flow",children:[i.jsx("option",{value:"aggressive",children:"ðŸ’¥ Aggressive"}),i.jsx("option",{value:"melodic",children:"ðŸŽµ Melodic"}),i.jsx("option",{value:"trap",children:"ðŸ”¥ Trap (Triplets)"}),i.jsx("option",{value:"drill",children:"ðŸ‡¬ðŸ‡§ Drill (UK)"}),i.jsx("option",{value:"boom-bap",children:"ðŸ“» Boom-Bap"}),i.jsx("option",{value:"fast",children:"âš¡ Fast Flow"}),i.jsx("option",{value:"chill",children:"ðŸ˜Ž Chill"}),i.jsx("option",{value:"hype",children:"ðŸ”Š Hype"})]})}),("singer"===Me||"singer-female"===Me)&&i.jsx("select",{value:Le,onChange:e=>Ge(e.target.value),style:{padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(139, 92, 246, 0.5)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:i.jsxs("optgroup",{label:"ðŸŽ¶ Genre",children:[i.jsx("option",{value:"r&b",children:"ðŸ’œ R&B / Soul"}),i.jsx("option",{value:"pop",children:"ðŸŒŸ Pop"}),i.jsx("option",{value:"hip-hop",children:"ðŸ”¥ Hip-Hop"}),i.jsx("option",{value:"soul",children:"ðŸŽ· Gospel/Soul"})]})}),i.jsx("button",{onClick:()=>{(async()=>{if(Je||$e.vocals)return;if(!Ce.lyrics)return void t.error("Generate lyrics first");Ye(!0),Ue(e=>({...e,vocals:!0})),t.loading("Creating vocal performance (~60s)...",{id:"gen-vocal"});const e=J;try{const i=await Gi(),r={rapper:"rapper-male-1","rapper-female":"rapper-female-1",singer:"singer-male","singer-female":"singer-female",narrator:"narrator",whisper:"whisper",spoken:"spoken"}[Me]||"rapper-male-1",o=Ce.lyrics.substring(0,500),n=await fetch(`${s}/api/generate-speech`,{method:"POST",headers:i,body:JSON.stringify({prompt:o,voice:r,style:Me,rapStyle:Fe,genre:Le,speakerUrl:"cloned"===Me?yi:null})});if(n.ok){const i=await n.json();i.audioUrl&&(i.audioUrl.startsWith("data:audio")||i.audioUrl.startsWith("http"))?(We(e=>({...e,lyricsVocal:i.audioUrl,vocals:i.audioUrl})),Re(e=>({...e,vocals:e.vocals||`AI Vocal Performance generated for "${X||"song"}"`})),e&&L&&L({...e,assets:[{id:`vocal-${Date.now()}`,type:"vocal",agent:"Vocal Architect",audioUrl:i.audioUrl,mimeType:i.mimeType||"audio/wav",snippet:`ðŸŽ¤ AI Vocal: "${o.substring(0,50)}..."`,createdAt:(new Date).toISOString()},...e.assets||[]]}),t.success(`${Fe} ${Me} vocal created!`,{id:"gen-vocal"})):i.error?t.error(i.error||"Vocal generation failed",{id:"gen-vocal"}):t.error("No audio generated - try again",{id:"gen-vocal"})}else{const e=await n.json().catch(()=>({}));t.error(e.error||"Failed to generate vocal",{id:"gen-vocal"})}}catch(i){t.error("Vocal generation failed",{id:"gen-vocal"})}finally{Ye(!1),Ue(e=>({...e,vocals:!1}))}})()},disabled:Je,style:{padding:"10px 20px",borderRadius:"10px",background:Je?"rgba(139, 92, 246, 0.3)":"rgba(139, 92, 246, 0.5)",border:"1px solid rgba(139, 92, 246, 0.6)",color:"#8b5cf6",fontWeight:"600",fontSize:"0.9rem",cursor:Je?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:Je?.7:1},children:Je?i.jsxs(i.Fragment,{children:[i.jsx(R,{size:16,className:"spin"}),"Creating..."]}):i.jsxs(i.Fragment,{children:[i.jsx(M,{size:16}),"Create Vocal"]})}),i.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(Ce.lyrics),t.success("Lyrics copied!")},style:{padding:"10px 16px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",fontWeight:"500",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx(j,{size:14}),"Copy Lyrics"]}),Ie.lyricsVocal&&Ie.lyricsVocal.startsWith("data:audio")&&i.jsxs("button",{onClick:()=>{const e=document.createElement("a");e.href=Ie.lyricsVocal;const i=Ie.lyricsVocal.includes("audio/wav")?"wav":"mp3";e.download=`${X||"lyrics"}-${Me}.${i}`,e.click()},style:{padding:"10px 16px",borderRadius:"10px",background:"rgba(34, 197, 94, 0.15)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#22c55e",fontWeight:"600",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx(w,{size:14}),"Download Audio"]})]})]}),i.jsx("div",{className:"generator-grid-unified",style:{gap:K?"0.75rem":"1rem",touchAction:"pan-y"},children:Fi.map(e=>i.jsx(Q,{slot:e.key,agentId:we[e.key],icon:e.icon,title:e.title,subtitle:e.subtitle,color:e.color,output:Ce[e.key],isLoading:Se&&we[e.key],mediaType:e.mediaType,mediaUrl:"audio"===e.key?Ie.audio:"lyrics"===e.key?Ie.vocals:"visual"===e.key?Ie.image:"video"===e.key?Ie.video:null,onGenerateMedia:"audio"===e.key?Ki:"lyrics"===e.key?qi:"visual"===e.key?Zi:"video"===e.key?et:null,isGeneratingMedia:"audio"===e.key?$e.audio:"lyrics"===e.key?$e.vocals:"visual"===e.key?$e.image:"video"===e.key&&$e.video,onRegenerate:()=>Yi(e.key),onEdit:i=>ot(e.key,i),onDelete:()=>rt(e.key),onDownload:()=>tt(e.key),onSpeak:()=>Hi(Ce[e.key],e.key),isSpeaking:De===e.key,onMaximize:()=>qe(e.key),onUploadDna:"visual"===e.key?e=>Xi("visual",e):"audio"===e.key?e=>Xi("audio",e):"video"===e.key?e=>Xi("video",e):"lyrics"===e.key?e=>Xi("lyrics",e):null,dnaUrl:"visual"===e.key?Ci:"audio"===e.key?Ii:"video"===e.key?$i:"lyrics"===e.key?Di:null,isUploadingDna:Ai[e.key],onClearDna:()=>{"visual"===e.key&&Ri(null),"audio"===e.key&&Wi(null),"video"===e.key&&Ui(null),"lyrics"===e.key&&Ti(null)}},e.key))}),i.jsx(Z,{outputs:Ce,mediaUrls:Ie,songIdea:X,finalMixPreview:Ze,creatingFinalMix:Xe,musicVideoUrl:ti,generatingMusicVideo:ei,handleGenerateProfessionalMusicVideo:async()=>{if(!ei)if(Ie.audio&&Ce.video){ii(!0),t.loading("ðŸŽ¬ Syncing audio with video beats (~2-3 min)...",{id:"prof-video"});try{const e=await Gi(),i=e.Authorization?"/api/generate-synced-video":"/api/generate-synced-video-test",r=await fetch(`${s}${i}`,{method:"POST",headers:{"Content-Type":"application/json",...e},body:JSON.stringify({audioUrl:Ie.audio,videoPrompt:Ce.video,songTitle:X||"Untitled",style:te||"cinematic",duration:"Extended"===xe?180:"Radio Edit"===xe?150:"Full Song"===xe?90:60})}),o=await r.json();r.ok?o.videoUrl?(ri(o.videoUrl),Ze&&_e(e=>({...e,musicVideoUrl:o.videoUrl,musicVideoGenerated:!0,bpm:o.bpm,beatCount:o.beats})),t.success(`ðŸŽ¬ Image to video created! (${o.duration}s, ${o.bpm} BPM)`,{id:"prof-video"})):o.jobId&&t.success(`ðŸŽ¬ Video queued for processing (Job: ${o.jobId.substring(0,8)}...)`,{id:"prof-video"}):503===r.status?t.error("âŒ Video API not configured",{id:"prof-video"}):t.error(`âŒ ${o.error||"Video sync failed"}`,{id:"prof-video"})}catch(e){t.error("âŒ Image to video generation failed",{id:"prof-video"})}finally{ii(!1)}}else t.error("Need beat audio and video concept to sync")},handleCreateFinalMix:it,handleCreateProject:nt,setShowPreviewModal:ni,visualType:mi,setVisualType:bi,isMobile:K,orchestratorBpm:ve})]}),Ke&&Fi.find(e=>e.key===Ke)&&i.jsx("div",{style:{position:"fixed",inset:0,background:"linear-gradient(180deg, rgba(0,0,0,0.98) 0%, rgba(10,10,20,0.98) 100%)",display:"flex",alignItems:K?"flex-start":"center",justifyContent:"center",zIndex:2500,padding:K?"10px":"20px",overflowY:"auto"},onClick:()=>qe(null),children:i.jsxs("div",{style:{background:"rgba(10, 10, 20, 0.95)",borderRadius:K?"16px":"24px",border:"1px solid rgba(255,255,255,0.1)",width:"100%",maxWidth:"800px",maxHeight:K?"95vh":"90vh",overflow:"auto",display:"flex",flexDirection:"column",marginTop:K?"10px":"0"},onClick:e=>e.stopPropagation(),children:[i.jsxs("div",{style:{padding:K?"12px 16px":"16px 24px",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(10px)",zIndex:10},children:[i.jsx("h3",{style:{margin:0,fontSize:K?"1rem":"1.2rem",fontWeight:"700"},children:Fi.find(e=>e.key===Ke)?.title}),i.jsxs("button",{onClick:()=>qe(null),style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"10px",padding:K?"6px 10px":"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",color:"#ef4444",fontWeight:"600",fontSize:K?"0.8rem":"0.9rem",transition:"all 0.2s",minWidth:"36px",minHeight:"36px"},children:[i.jsx(k,{size:16}),!K&&"Close"]})]}),i.jsx("div",{style:{padding:K?"12px":"24px",flex:1,overflowY:"auto"},children:(()=>{const e=Fi.find(e=>e.key===Ke);return i.jsx(Q,{slot:e.key,agentId:we[e.key],icon:e.icon,title:e.title,subtitle:e.subtitle,color:e.color,output:Ce[e.key],isLoading:Se&&we[e.key],mediaType:e.mediaType,mediaUrl:"audio"===e.key?Ie.audio:"lyrics"===e.key?Ie.vocals:"visual"===e.key?Ie.image:"video"===e.key?Ie.video:null,onGenerateMedia:"audio"===e.key?Ki:"lyrics"===e.key?qi:"visual"===e.key?Zi:"video"===e.key?et:null,isGeneratingMedia:"audio"===e.key?$e.audio:"lyrics"===e.key?$e.vocals:"visual"===e.key?$e.image:"video"===e.key&&$e.video,onRegenerate:()=>Yi(e.key),onEdit:i=>ot(e.key,i),onDelete:()=>rt(e.key),onDownload:()=>tt(e.key),onSpeak:()=>Hi(Ce[e.key],e.key),isSpeaking:De===e.key,onUploadDna:"visual"===e.key?e=>Xi("visual",e):"audio"===e.key?e=>Xi("audio",e):"video"===e.key?e=>Xi("video",e):"lyrics"===e.key?e=>Xi("lyrics",e):null,dnaUrl:"visual"===e.key?Ci:"audio"===e.key?Ii:"video"===e.key?$i:"lyrics"===e.key?Di:null,isUploadingDna:Ai[e.key],onClearDna:()=>{"visual"===e.key&&Ri(null),"audio"===e.key&&Wi(null),"video"===e.key&&Ui(null),"lyrics"===e.key&&Ti(null)}},`max-${e.key}`)})()}),i.jsx("div",{style:{padding:K?"12px":"16px 24px",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"center",background:"rgba(0,0,0,0.3)"},children:i.jsxs("button",{onClick:()=>qe(null),style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(220, 38, 38, 0.2))",border:"1px solid rgba(239, 68, 68, 0.5)",borderRadius:"12px",padding:K?"10px 20px":"14px 32px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer",color:"#ef4444",fontWeight:"700",fontSize:K?"0.9rem":"1rem",transition:"all 0.2s",boxShadow:"0 4px 20px rgba(239, 68, 68, 0.2)"},children:[i.jsx(k,{size:20}),K?"Close":"Close Preview"]})})]})}),Object.values(Ce).some(Boolean)&&i.jsxs("div",{style:{padding:"16px 24px",background:"rgba(0,0,0,0.8)",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",bottom:0,backdropFilter:"blur(10px)"},children:[i.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:[Object.values(Ce).filter(Boolean).length,"/4 generators complete â€¢",Object.values(Ie).filter(Boolean).length," media assets"]}),i.jsxs("div",{style:{display:"flex",gap:"12px"},children:[i.jsxs("button",{onClick:()=>{const e={project:X,timestamp:(new Date).toISOString(),outputs:Ce,settings:{language:ee,style:te,model:ae}},i=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(i),o=document.createElement("a");o.href=r,o.download=`${X||"project"}-export.json`,o.click(),URL.revokeObjectURL(r),t.success("Exported!")},style:{padding:"12px 20px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(w,{size:16}),"Export"]}),i.jsxs("button",{onClick:()=>Pe(!0),style:{padding:"12px 28px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",fontSize:"1rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.4)"},children:[i.jsx(N,{size:18}),"Save to Project"]})]})]}),Ee&&i.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3},onClick:()=>Pe(!1),children:i.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:"24px",padding:"28px",maxWidth:"420px",width:"90%",border:"1px solid rgba(255,255,255,0.1)"},onClick:e=>e.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 20px",fontSize:"1.3rem",fontWeight:"700"},children:"Save to Project"}),i.jsx("input",{type:"text",value:Ae,onChange:e=>Be(e.target.value),placeholder:X||"Project name...",style:{width:"100%",padding:"14px 18px",borderRadius:"12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"1rem",marginBottom:"20px",outline:"none"}}),i.jsxs("div",{style:{display:"flex",gap:"12px"},children:[i.jsx("button",{onClick:()=>Pe(!1),style:{flex:1,padding:"14px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer",fontSize:"0.95rem",whiteSpace:"nowrap"},children:"Cancel"}),i.jsx("button",{onClick:nt,style:{flex:1,padding:"14px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",cursor:"pointer",fontSize:"0.95rem",whiteSpace:"nowrap"},children:"Save Project"})]})]})}),li&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001,padding:"20px"},children:i.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",borderRadius:"20px",padding:"32px",border:"1px solid rgba(34, 197, 94, 0.4)",maxWidth:"450px",width:"100%",textAlign:"center",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[i.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"rgba(34, 197, 94, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:i.jsx(N,{size:32,color:"#22c55e"})}),i.jsx("h2",{style:{margin:"0 0 12px",fontSize:"1.4rem",fontWeight:"700",color:"white"},children:"Project Saved! ðŸŽ‰"}),i.jsxs("p",{style:{margin:"0 0 24px",color:"rgba(255,255,255,0.7)",fontSize:"0.95rem",lineHeight:"1.5"},children:['Your project "',Ae||X||"Untitled",'" has been saved with ',Object.values(Ce).filter(Boolean).length," assets."]}),i.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"12px",marginBottom:"24px",textAlign:"left"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.4)",fontWeight:"700",textTransform:"uppercase",marginBottom:"10px"},children:"Generated Content"}),Object.entries(Ce).filter(([e,i])=>null!==i).map(([e,t])=>{const r=Fi.find(i=>i.key===e);return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px",fontSize:"0.85rem",color:"rgba(255,255,255,0.8)"},children:[i.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:r?.color||"#8b5cf6"}}),r?.title||e]},e)})]}),i.jsxs("div",{style:{display:"flex",gap:"12px"},children:[i.jsx("button",{onClick:()=>{di(!1),v?.()},style:{flex:1,padding:"14px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",fontWeight:"600",cursor:"pointer",fontSize:"0.95rem",whiteSpace:"nowrap"},children:"Go to Hub"}),i.jsxs("button",{onClick:()=>{di(!1),ni(!0)},style:{flex:1,padding:"14px",borderRadius:"12px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",border:"none",color:"white",fontWeight:"700",cursor:"pointer",fontSize:"0.95rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",whiteSpace:"nowrap"},children:[i.jsx(V,{size:18}),"Preview"]})]})]})}),xi&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002,padding:"20px"},children:i.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",borderRadius:"20px",padding:"32px",border:"1px solid rgba(245, 158, 11, 0.4)",maxWidth:"450px",width:"100%",textAlign:"center",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[i.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:i.jsx(N,{size:32,color:"#f59e0b"})}),i.jsx("h2",{style:{margin:"0 0 12px",fontSize:"1.4rem",fontWeight:"700",color:"white"},children:"Save Your Work?"}),i.jsxs("p",{style:{margin:"0 0 24px",color:"rgba(255,255,255,0.7)",fontSize:"0.95rem",lineHeight:"1.5"},children:["You have ",Object.values(Mi).filter(Boolean).length+Object.values(Ni).filter(Boolean).length," unsaved creations. Would you like to save before leaving?"]}),i.jsxs("div",{style:{display:"flex",gap:"12px",flexDirection:"column"},children:[i.jsxs("button",{onClick:()=>{gi(!1),Pe(!0)},style:{width:"100%",padding:"14px",borderRadius:"12px",background:"linear-gradient(135deg, #22c55e, #16a34a)",border:"none",color:"white",fontWeight:"700",cursor:"pointer",fontSize:"0.95rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[i.jsx(N,{size:18}),"Save Project"]}),i.jsxs("div",{style:{display:"flex",gap:"12px",flexDirection:K?"column-reverse":"row"},children:[i.jsx("button",{onClick:()=>{gi(!1)},style:{flex:1,padding:"14px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",fontWeight:"600",cursor:"pointer",fontSize:"0.95rem",whiteSpace:"nowrap"},children:"Cancel"}),i.jsx("button",{onClick:()=>{gi(!1),v?.()},style:{flex:1,padding:"14px",borderRadius:"12px",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",color:"#ef4444",fontWeight:"600",cursor:"pointer",fontSize:"0.95rem",whiteSpace:"nowrap"},children:"Discard & Exit"})]})]})]})}),oi&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:ai?"0":"20px"},onClick:e=>{e.target===e.currentTarget&&ni(!1)},children:i.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",borderRadius:ai?"0":"20px",padding:ai||K?"16px":"24px",border:ai?"none":"1px solid rgba(148, 163, 184, 0.2)",width:"100%",maxWidth:ai?"100%":"900px",height:ai?"100%":"auto",maxHeight:ai?"100%":"90vh",overflowY:"auto",position:"relative",boxShadow:ai?"none":"0 25px 80px rgba(0,0,0,0.5)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",position:"sticky",top:0,background:ai?"rgba(15, 23, 42, 0.95)":"transparent",padding:ai?"8px 0 16px":"0",zIndex:5},children:[i.jsxs("h2",{style:{margin:0,fontSize:ai?"1.75rem":"1.5rem",fontWeight:"700",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx(V,{size:ai?28:24,color:"#8b5cf6"}),"Preview All Creations"]}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsxs("button",{onClick:()=>si(!ai),style:{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"10px",padding:"10px",cursor:"pointer",color:"white",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.85rem"},title:ai?"Minimize":"Maximize",children:[i.jsx(F,{size:18}),ai?"Minimize":"Maximize"]}),i.jsx("button",{onClick:()=>ni(!1),style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"10px",padding:"10px",cursor:"pointer",color:"#ef4444"},children:i.jsx(k,{size:20})})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:K?"1fr":"repeat(2, 1fr)",gap:K?"16px":ai?"32px":"24px",marginBottom:"24px"},children:[i.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",borderRadius:"16px",padding:K?"12px":"16px",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[i.jsxs("h3",{style:{margin:0,color:"#a78bfa",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(T,{size:18}),"Lyrics"]}),i.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:Mi.lyrics?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:Mi.lyrics?"#22c55e":"rgba(255,255,255,0.5)"},children:Mi.lyrics?"âœ“ Ready":"Pending"})]}),i.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"16px",minHeight:ai?"300px":"180px",maxHeight:ai?"400px":"200px",overflowY:"auto",fontSize:"0.9rem",lineHeight:"1.7",color:Mi.lyrics?"rgba(255,255,255,0.9)":"rgba(255,255,255,0.4)",whiteSpace:"pre-wrap",wordBreak:"break-word",fontStyle:Mi.lyrics?"normal":"italic"},children:Mi.lyrics||"No lyrics generated yet. Use the Lyrics generator to create lyrics."})]}),i.jsxs("div",{style:{background:"rgba(6, 182, 212, 0.1)",borderRadius:"16px",padding:K?"12px":"16px",border:"1px solid rgba(6, 182, 212, 0.3)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[i.jsxs("h3",{style:{margin:0,color:"#22d3ee",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx($,{size:18}),"Beat Audio"]}),i.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:Ni.audio?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:Ni.audio?"#22c55e":"rgba(255,255,255,0.5)"},children:Ni.audio?"âœ“ Ready":"Pending"})]}),i.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"16px",minHeight:"100px"},children:Ni.audio?i.jsxs(i.Fragment,{children:[i.jsx("audio",{controls:!0,style:{width:"100%",marginBottom:"12px"},src:f(Ni.audio),onError:e=>{}}),i.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx(M,{size:14}),"Audio ready to play"]})]}):i.jsx("div",{style:{textAlign:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem",padding:"24px",fontStyle:"italic"},children:"No audio generated yet. Generate a beat to preview audio."})})]}),i.jsxs("div",{style:{background:"rgba(236, 72, 153, 0.1)",borderRadius:"16px",padding:K?"12px":"16px",border:"1px solid rgba(236, 72, 153, 0.3)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[i.jsxs("h3",{style:{margin:0,color:"#f472b6",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(A,{size:18}),"Cover Visual"]}),i.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:Ni.image?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:Ni.image?"#22c55e":"rgba(255,255,255,0.5)"},children:Ni.image?"âœ“ Ready":"Pending"})]}),i.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"8px",aspectRatio:"1",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:Ni.image?i.jsx("img",{src:b(Ni.image),alt:"Cover Art",style:{width:"100%",height:"100%",borderRadius:"8px",objectFit:"cover"},onError:e=>{e.target.style.display="none"}}):i.jsx("div",{style:{textAlign:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem",fontStyle:"italic"},children:"No image generated yet"})})]}),i.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",borderRadius:"16px",padding:K?"12px":"16px",border:"1px solid rgba(245, 158, 11, 0.3)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[i.jsxs("h3",{style:{margin:0,color:"#fbbf24",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(B,{size:18}),"Video"]}),i.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:Ni.video?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:Ni.video?"#22c55e":"rgba(255,255,255,0.5)"},children:Ni.video?"âœ“ Ready":"Pending"})]}),i.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"8px",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:Ni.video?i.jsx("video",{src:y(Ni.video),controls:!0,style:{width:"100%",height:"100%",borderRadius:"8px",objectFit:"contain",backgroundColor:"#000"},onError:e=>{}}):i.jsx("div",{style:{textAlign:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem",fontStyle:"italic"},children:"No video generated yet"})})]})]}),i.jsx("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(148, 163, 184, 0.2)",marginBottom:"20px"},children:i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",fontSize:"0.9rem"},children:[i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Lyrics"}),i.jsx("div",{style:{fontWeight:"700",color:"#a78bfa",fontSize:"1.1rem"},children:Mi.lyrics?`${Mi.lyrics.length} chars`:"â€”"})]}),i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Audio"}),i.jsx("div",{style:{fontWeight:"700",color:"#22d3ee",fontSize:"1.1rem"},children:Ni.audio?"âœ“ Ready":"â€”"})]}),i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Visual"}),i.jsx("div",{style:{fontWeight:"700",color:"#f472b6",fontSize:"1.1rem"},children:Ni.image?"âœ“ Ready":"â€”"})]}),i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Video"}),i.jsx("div",{style:{fontWeight:"700",color:"#fbbf24",fontSize:"1.1rem"},children:Ni.video?"âœ“ Ready":"â€”"})]})]})}),i.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>ni(!1),style:{flex:1,minWidth:"120px",padding:"14px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",fontWeight:"600",cursor:"pointer",fontSize:"0.95rem"},children:"Close Preview"}),i.jsxs("button",{onClick:()=>{ni(!1),Pe(!0)},style:{flex:1,minWidth:"140px",padding:"14px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",cursor:"pointer",fontSize:"0.95rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[i.jsx(N,{size:18}),"Save Project"]}),i.jsx("button",{onClick:()=>{ni(!1),it()},disabled:Xe||!Object.values(Mi).some(Boolean),style:{flex:1,minWidth:"140px",padding:"14px",borderRadius:"12px",background:Xe||!Object.values(Mi).some(Boolean)?"rgba(34, 197, 94, 0.2)":"rgba(34, 197, 94, 0.5)",border:"1px solid rgba(34, 197, 94, 0.6)",color:"#22c55e",fontWeight:"600",cursor:Xe||!Object.values(Mi).some(Boolean)?"not-allowed":"pointer",fontSize:"0.95rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",opacity:Object.values(Mi).some(Boolean)?1:.5},children:Xe?i.jsxs(i.Fragment,{children:[i.jsx(R,{size:16,className:"spin"}),"Creating..."]}):i.jsxs(i.Fragment,{children:[i.jsx(S,{size:16}),"Final Mix"]})})]})]})}),i.jsx("style",{children:"\n        .loading-dots {\n          display: flex;\n          gap: 4px;\n        }\n        .loading-dots span {\n          width: 8px;\n          height: 8px;\n          border-radius: 50%;\n          animation: bounce 1.4s infinite ease-in-out both;\n        }\n        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }\n        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }\n        .loading-dots span:nth-child(3) { animation-delay: 0s; }\n        \n        @keyframes bounce {\n          0%, 80%, 100% { transform: scale(0); opacity: 0.5; }\n          40% { transform: scale(1); opacity: 1; }\n        }\n        \n        .spin {\n          animation: spin 1s linear infinite;\n        }\n        \n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        \n        .animate-fadeIn {\n          animation: fadeIn 0.3s ease;\n        }\n        \n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n      "})]}):null}export{_ as default};
