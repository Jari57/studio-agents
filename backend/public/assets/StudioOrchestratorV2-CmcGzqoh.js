const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PreviewModal-BtThApfS.js","assets/react-vendor-IsfVT3T0.js","assets/vendor-hWrmgIvi.js","assets/StudioView-k7pXI3Ar.js","assets/index-B42Z0gsv.js","assets/icons-MMUluotK.js","assets/index-Df8LEOwg.css","assets/firebase-6G-aKvFP.js","assets/firebase-BSr-wbnk.js"])))=>i.map(i=>d[i]);
import{A as e,B as i,_ as t}from"./index-B42Z0gsv.js";import{r,j as o,z as n,R as a}from"./react-vendor-IsfVT3T0.js";import{d as s,a as l}from"./firebase-6G-aKvFP.js";import{f as d,u as c,v as p,w as g,x,y as u,g as m,z as y,A as h,B as b}from"./firebase-BSr-wbnk.js";import{f,a as v,b as j}from"./StudioView-k7pXI3Ar.js";import{Z as w,X as S,aH as k,_ as z,x as C,S as I,r as R,M as D,ae as $,U as A,Q as T,$ as W,w as B,a5 as U,aw as E,d as P,p as V,ad as O,a7 as M,J as N,ab as L,ac as F,N as H,a6 as G,am as Y,aI as _,aa as J,h as q,aJ as K,m as Q}from"./icons-MMUluotK.js";import"./vendor-hWrmgIvi.js";const X=a.lazy(()=>t(()=>import("./PreviewModal-BtThApfS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Z=e=>{if(!e)return{intro:"",content:""};if("string"!=typeof e)return{intro:"",content:JSON.stringify(e,null,2)};const i=[/\[Verse/i,/\[Chorus/i,/\[Hook/i,/\[Bridge/i,/\[Intro/i,/\[Lyrics/i,/\[Style/i,/\[Hard/i,/\[Soft/i,/\[Fast/i,/\[Slow/i,/\(Verse/i,/\(Chorus/i,/Verse \d+:/i,/Chorus:/i,/Hook:/i,/^\s*Lyrics:\s*$/im,/Visual:/i,/Concept:/i,/Description:/i,/Beat Description:/i,/BPM:/i,/Storyboard:/i,/^\[[A-Z]/];let t=-1;for(const o of i){const i=e.match(o);i&&(-1===t||i.index<t)&&(t=i.index)}if(-1!==t)return{intro:e.substring(0,t).trim(),content:e.substring(t).trim()};const r=[/^Sure! Here (is|are) some (lyrics|content|a song).*:/i,/^Here (is|are) (the|your) (lyrics|song).*:/i,/^Okay, here's a concept.*:/i];for(const o of r)if(o.test(e)){const i=e.match(o);return{intro:i[0].trim(),content:e.substring(i[0].length).trim()}}if(e.includes("Summary:")){const i=e.split("Summary:");return{intro:i[0].trim(),content:("Summary: "+i[1]).trim()}}return{intro:"",content:e}},ee=({height:e="14px",width:i="100%",marginBottom:t="8px",opacity:r=.1})=>o.jsx("div",{style:{height:e,width:i,marginBottom:t,borderRadius:"4px",background:`linear-gradient(90deg, rgba(255,255,255,${r}) 25%, rgba(255,255,255,${2*r}) 50%, rgba(255,255,255,${r}) 75%)`,backgroundSize:"200% 100%",animation:"shimmer 2s infinite linear"}});function ie({slot:i,agentId:t,icon:s,title:l,subtitle:d,color:c,output:p,isLoading:g,mediaType:x=null,mediaUrl:u=null,onGenerateMedia:m=null,isGeneratingMedia:y=!1,onRegenerate:h=null,onEdit:b=null,onDelete:k=null,onDownload:z=null,onSpeak:I=null,isSpeaking:A=!1,onMaximize:B=null,onUploadDna:U=null,onClearDna:E=null,dnaUrl:P=null,isUploadingDna:N=!1}){const[G,q]=r.useState(!1),[K,Q]=r.useState(!1),[ie,te]=r.useState(p||""),[re,oe]=r.useState(!1),[ne,ae]=r.useState(!1),{intro:se,content:le}=Z(p),de=ne?se:le,[ce,pe]=r.useState("undefined"!=typeof window&&window.innerWidth<768);r.useEffect(()=>{const e=()=>pe(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const ge=r.useRef(p);r.useEffect(()=>{ge.current!==p&&(ge.current=p,te(p||""))},[p]);const xe=e.find(e=>e.id===t);return o.jsxs("div",{className:"generator-card-unified",style:{minHeight:ce?"auto":"380px",padding:0,touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[o.jsx("div",{style:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:`radial-gradient(circle at center, ${c}08 0%, transparent 50%)`,pointerEvents:"none"}}),o.jsxs("div",{className:"generator-card-header",style:{padding:ce?"12px":"1.25rem",display:"flex",alignItems:"center",gap:ce?"10px":"12px",position:"relative",zIndex:1},children:[o.jsx("div",{className:"generator-icon-box",children:a.createElement(s,{size:ce?20:24})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("h3",{style:{margin:0,fontSize:ce?"0.95rem":"1.125rem",fontWeight:"700",color:"white",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l}),o.jsxs("p",{style:{margin:"2px 0 0",fontSize:"0.75rem",color:"var(--text-secondary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"6px"},children:[xe?.name||d,xe?.isBeta&&o.jsx("span",{style:{fontSize:"0.6rem",padding:"1px 5px",background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b",borderRadius:"4px",border:"1px solid rgba(245, 158, 11, 0.2)",fontWeight:"800",letterSpacing:"0.05em"},children:"BETA"})]})]}),U&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx("input",{type:"file",id:`dna-upload-${i}`,accept:"audio"===i?"audio/*":"lyrics"===i?".txt,.doc,.docx,.pdf":"image/*",onChange:U,style:{display:"none"}}),o.jsxs("button",{onClick:()=>document.getElementById(`dna-upload-${i}`).click(),disabled:N,title:`${"video"===i?"Image":i.charAt(0).toUpperCase()+i.slice(1)} DNA (Reference)`,style:{padding:"8px",borderRadius:"8px",background:P?`${c}20`:"rgba(255,255,255,0.05)",border:"1px solid "+(P?c+"80":"rgba(255,255,255,0.1)"),color:P?c:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s",fontSize:"0.7rem",fontWeight:"600"},children:[N?o.jsx(C,{size:14,className:"spin"}):o.jsx(w,{size:14}),P&&!ce&&"DNAâœ“"]}),P&&o.jsx("button",{onClick:e=>{e.stopPropagation(),E&&E()},style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer",padding:"4px"},children:o.jsx(S,{size:12})})]}),(g||y)&&o.jsxs("div",{style:{padding:"6px 12px",borderRadius:"20px",background:`${c}20`,display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx(C,{size:14,color:c,className:"spin"}),o.jsx("span",{style:{fontSize:"0.7rem",color:c,fontWeight:"600"},children:g?"Generating...":"Creating Media..."})]})]}),o.jsxs("div",{style:{flex:1,padding:ce?"10px 12px":"16px 20px",display:"flex",flexDirection:"column",gap:ce?"8px":"12px",position:"relative",zIndex:1},children:[!g&&p?o.jsx(o.Fragment,{children:K?o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsx("textarea",{value:ie,onChange:e=>te(e.target.value),style:{flex:1,padding:ce?"8px":"12px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:`1px solid ${c}40`,color:"white",fontSize:ce?"0.8rem":"0.9rem",lineHeight:"1.5",resize:"none",outline:"none",minHeight:"120px"},autoFocus:!0}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsx("button",{onClick:()=>Q(!1),style:{flex:1,padding:"8px",borderRadius:"8px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer",fontSize:"0.8rem"},children:"Cancel"}),o.jsx("button",{onClick:()=>{b&&b(ie),Q(!1)},style:{flex:1,padding:"8px",borderRadius:"8px",background:c,border:"none",color:"white",cursor:"pointer",fontWeight:"600",fontSize:"0.8rem"},children:"Save"})]})]}):o.jsxs("div",{onClick:()=>oe(!re),className:"lyrics-stanza-view",style:{background:"rgba(0,0,0,0.3)",borderRadius:ce?"8px":"12px",padding:ce?"10px":"16px",flex:1,overflow:"auto",cursor:"pointer",maxHeight:re?ce?"300px":"400px":ce?"150px":"280px",transition:"max-height 0.3s ease",position:"relative"},children:[se&&o.jsxs("button",{onClick:e=>{e.stopPropagation(),ae(!ne)},style:{position:"absolute",top:"8px",right:"8px",background:ne?c:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",padding:"4px 8px",fontSize:"0.65rem",fontWeight:"700",color:"white",zIndex:2,display:"flex",alignItems:"center",gap:"4px",boxShadow:ne?`0 2px 8px ${c}44`:"none"},children:[ne?o.jsx(V,{size:10}):o.jsx(R,{size:10}),ne?"SHOW LYRICS":"SHOW PROMPT"]}),o.jsx("p",{style:{fontSize:ce?"0.85rem":"1rem",lineHeight:ce?"1.5":"1.8",color:"rgba(255,255,255,0.95)",margin:0,whiteSpace:"pre-wrap",fontFamily:"'Georgia', 'Times New Roman', serif",letterSpacing:"0.01em"},children:de?.split(/\n\n+/).map((e,i)=>o.jsx("span",{style:{display:"block",marginBottom:i<de.split(/\n\n+/).length-1?"1em":0},children:e},i))})]})}):g?o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"12px",padding:"4px"},children:[o.jsx(ee,{width:"40%",height:"20px",marginBottom:"12px",opacity:.15}),o.jsx(ee,{width:"100%",height:"14px"}),o.jsx(ee,{width:"90%",height:"14px"}),o.jsx(ee,{width:"95%",height:"14px"}),o.jsx(ee,{width:"70%",height:"14px",marginBottom:"20px"}),o.jsx(ee,{width:"100%",height:"14px"}),o.jsx(ee,{width:"85%",height:"14px"}),o.jsx(ee,{width:"40%",height:"14px"}),o.jsxs("div",{style:{marginTop:"auto",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"12px",background:"rgba(255,255,255,0.02)",borderRadius:"8px"},children:[o.jsx(C,{size:16,className:"spin",color:c}),o.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:"500"},children:xe?.name?`${xe.name} is writing...`:"AI is thinking..."})]})]}):o.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"8px",color:"var(--text-secondary)",textAlign:"center",padding:"20px"},children:[a.createElement(s,{size:32,style:{opacity:.3}}),o.jsx("span",{style:{fontSize:"0.85rem",opacity:.5},children:'Click "Generate All" to create content'})]}),p&&x&&o.jsx("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"12px",border:`1px solid ${c}22`},children:u?o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:o.jsxs("div",{onClick:()=>q(!0),style:{cursor:"pointer",position:"relative",borderRadius:"8px",overflow:"hidden"},children:["audio"===x&&u&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"8px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:`linear-gradient(135deg, ${c}, ${c}88)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 12px ${c}44`},children:o.jsx(D,{size:18,color:"white"})}),o.jsx("audio",{src:f(u),controls:!0,style:{flex:1,height:"32px"},onPlay:e=>{document.querySelectorAll("audio, video").forEach(i=>{i!==e.target&&i.pause()})}})]}),"image"===x&&u&&o.jsxs("div",{style:{position:"relative"},children:[o.jsx("img",{src:v(u),alt:"Generated",style:{width:"100%",maxHeight:"120px",objectFit:"cover",borderRadius:"8px"},onError:e=>{e.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="120" viewBox="0 0 200 120"%3E%3Crect fill="%231a1a2e" width="200" height="120"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23666" font-size="12" font-family="sans-serif"%3EImage unavailable%3C/text%3E%3C/svg%3E'}}),o.jsx("div",{className:"image-hover-overlay",style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,borderRadius:"8px",pointerEvents:"none"},children:o.jsx(M,{size:24,color:"white"})})]}),"video"===x&&u&&o.jsx("video",{src:j(u),style:{width:"100%",maxHeight:"120px",objectFit:"cover",borderRadius:"8px"},controls:!0})]})}):y?o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsx(ee,{height:"image"===x||"video"===x?"120px":"44px",width:"100%",opacity:.2}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px"},children:[o.jsx(C,{size:14,className:"spin",color:c}),o.jsx("span",{style:{fontSize:"0.75rem",color:c,fontWeight:"600"},children:"lyrics"===i?"Cloning vocals...":`Synthesizing ${x}...`})]})]}):m?o.jsxs("button",{onClick:m,disabled:y,style:{width:"100%",padding:"12px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",border:`1px dashed ${c}50`,color:c,fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s"},children:["audio"===x&&o.jsx(D,{size:16}),"image"===x&&o.jsx(T,{size:16}),"video"===x&&o.jsx(W,{size:16}),"lyrics"===i?"Create AI Vocals":"audio"===i?"Synthesize AI Beat":`Generate ${x.charAt(0).toUpperCase()+x.slice(1)}`]}):null})]}),p&&!K&&o.jsxs("div",{style:{padding:ce?"8px 10px 10px":"12px 20px 16px",borderTop:"1px solid rgba(255,255,255,0.05)",display:"flex",gap:ce?"6px":"8px",flexWrap:"wrap",position:"relative",zIndex:1,touchAction:"manipulation"},children:[o.jsxs("button",{onClick:I,title:A?"Stop":"lyrics"===i&&u?"Play AI Vocals":"Text to Speech",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:A?`${c}30`:"rgba(255,255,255,0.05)",border:`1px solid ${A?c:"rgba(255,255,255,0.1)"}`,color:A?c:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[A?o.jsx(_,{size:14}):o.jsx(L,{size:14}),!ce&&(A?"Stop":"lyrics"===i&&u?"Hear Vocals":"TTS")]}),o.jsxs("button",{onClick:()=>{if(p){const e="lyrics"!==i||ne?p:le;navigator.clipboard.writeText(e),n.success("lyrics"!==i||ne?"Copied to clipboard":"Lyrics copied")}},title:"Copy to Clipboard",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[o.jsx(F,{size:14}),!ce&&"Copy"]}),o.jsxs("button",{onClick:()=>Q(!0),title:"Edit Output",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[o.jsx(J,{size:14}),!ce&&"Edit"]}),(u||p&&!x)&&o.jsxs("button",{onClick:()=>q(!0),title:"Preview",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:`${c}20`,border:`1px solid ${c}40`,color:c,cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"600",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[o.jsx(M,{size:14}),!ce&&"Preview"]}),h&&o.jsxs("button",{onClick:h,title:"Regenerate",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[o.jsx($,{size:14}),!ce&&"Redo"]}),!ce&&o.jsx("div",{style:{flex:1}}),p&&B&&o.jsx("button",{onClick:B,title:"Expand to Fullscreen",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:o.jsx(Y,{size:14})}),(p||u)&&o.jsx("button",{onClick:z,title:"Download",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(34, 197, 94, 0.15)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#22c55e",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"600",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:o.jsx(H,{size:14})}),k&&o.jsx("button",{onClick:k,title:"Delete",style:{padding:ce?"8px 10px":"8px 12px",borderRadius:"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:ce?"0.7rem":"0.75rem",fontWeight:"500",minHeight:ce?"36px":"auto",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:o.jsx(O,{size:14})})]}),o.jsx(r.Suspense,{fallback:null,children:o.jsx(X,{isOpen:G,onClose:()=>q(!1),mediaUrl:u,mediaType:x||"text",title:l,textContent:x?null:p})}),o.jsx("style",{children:"\n        /* Desktop-only hover effects */\n        @media (hover: hover) and (pointer: fine) {\n          .generator-card:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 10px 40px rgba(0,0,0,0.3);\n          }\n          .image-hover-overlay {\n            transition: opacity 0.2s ease;\n          }\n          .generator-card:hover .image-hover-overlay {\n            opacity: 1 !important;\n          }\n        }\n        /* Mobile touch optimization */\n        @media (hover: none) {\n          .generator-card {\n            transform: none !important;\n          }\n          .generator-card:active {\n            opacity: 0.9;\n          }\n        }\n      "})]})}function te({outputs:e,mediaUrls:i,songIdea:t,finalMixPreview:r,creatingFinalMix:a,musicVideoUrl:s,generatingMusicVideo:l,handleGenerateProfessionalMusicVideo:d,handleCreateFinalMix:c,handleCreateProject:p,setShowPreviewModal:g,visualType:x,setVisualType:u,isMobile:m,orchestratorBpm:y=120}){const h=Object.values(e).filter(Boolean).length,b=4===h,f=h>0,v=h/4*100,j=!!i.audio,S=!!i.vocals||!!e.lyrics,k=!!i.video,z=!!i.image,C=j&&(k||S||z),I=!!s;return o.jsxs("div",{style:{background:b?"linear-gradient(135deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.98))":"rgba(15, 23, 42, 0.4)",borderRadius:"24px",padding:m?"20px":"28px",border:"1px solid rgba(255,255,255,0.1)",marginTop:"32px",position:"relative",overflow:"hidden",boxShadow:b?"0 10px 40px rgba(0,0,0,0.4), 0 0 0 1px rgba(79, 70, 229, 0.3)":"none",transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:[b&&o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #4f46e5, #9333ea, #ec4899)",boxShadow:"0 0 15px rgba(79, 70, 229, 0.5)"}}),o.jsxs("div",{style:{display:"flex",flexDirection:m?"column":"row",justifyContent:"space-between",alignItems:m?"stretch":"center",gap:"24px",position:"relative",zIndex:1},children:[o.jsxs("div",{style:{flex:1},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:b?"rgba(79, 70, 229, 0.2)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",color:b?"#818cf8":"rgba(255,255,255,0.3)",border:"1px solid "+(b?"rgba(79, 70, 229, 0.4)":"rgba(255,255,255,0.1)")},children:b?o.jsx(w,{size:20}):o.jsx(q,{size:20})}),o.jsxs("div",{children:[o.jsxs("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700",color:b?"white":"rgba(255,255,255,0.5)",display:"flex",alignItems:"center",gap:"8px"},children:[b?"Production Complete":"Production Status",b&&o.jsx(K,{size:18,color:"#22c55e"})]}),o.jsx("p",{style:{margin:"4px 0 0",fontSize:"0.85rem",color:"rgba(255,255,255,0.4)"},children:b?"All assets are master-ready":`${h}/4 assets finalized â€¢ ${4-h} remaining`})]})]}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:["lyrics","audio","visual","video"].map(t=>{const r=t.charAt(0).toUpperCase()+t.slice(1),n=!!e[t],a=!!i["lyrics"===t?"vocals":t];return o.jsxs("div",{style:{padding:"6px 12px",borderRadius:"100px",fontSize:"0.75rem",fontWeight:"600",background:n?"rgba(34, 197, 94, 0.1)":"rgba(255,255,255,0.03)",color:n?"#4ade80":"rgba(255,255,255,0.2)",border:"1px solid "+(n?"rgba(34, 197, 94, 0.2)":"rgba(255,255,255,0.05)"),display:"flex",alignItems:"center",gap:"6px"},children:[n?"â—":"â—‹"," ",r,a&&o.jsx("span",{title:"Media Created",children:"ðŸ’Ž"})]},t)})}),o.jsxs("div",{style:{marginTop:"24px",background:"linear-gradient(135deg, rgba(0,0,0,0.5), rgba(30,30,40,0.5))",borderRadius:"16px",padding:"20px",border:"2px solid rgba(34, 211, 238, 0.3)",boxShadow:"0 8px 32px rgba(34, 211, 238, 0.1)",display:"block"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[o.jsxs("div",{children:[o.jsx("span",{style:{fontSize:"0.85rem",color:"#22d3ee",fontWeight:"900",textTransform:"uppercase",letterSpacing:"0.1em"},children:"ðŸŽšï¸ Production Timeline"}),o.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",marginTop:"4px"},children:"Billboard-Quality Multi-Track Sync"})]}),o.jsxs("span",{style:{fontSize:"0.75rem",color:"#818cf8",fontWeight:"700",background:"rgba(129, 140, 248, 0.1)",padding:"6px 12px",borderRadius:"8px"},children:[y," BPM â€¢ STEREO"]})]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[{label:"BEAT",type:"audio",color:"#22d3ee"},{label:"VOCALS",type:"lyrics",color:"#a78bfa"},{label:"VISUALS",type:"visual",color:"#fb923c"},{label:"IMG TO VIDEO",type:"video",color:"#f87171"}].map(t=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"70px",fontSize:"0.65rem",fontWeight:"800",color:e[t.type]?t.color:"rgba(255,255,255,0.2)",letterSpacing:"0.05em"},children:t.label}),o.jsx("div",{style:{flex:1,height:"24px",background:"rgba(255,255,255,0.03)",borderRadius:"4px",position:"relative",overflow:"hidden",border:"1px solid rgba(255,255,255,0.05)"},children:e[t.type]&&o.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:i["lyrics"===t.type?"vocals":"visual"===t.type?"image":t.type]?"100%":"30%",background:`linear-gradient(90deg, ${t.color}40, ${t.color}80)`,borderRight:`2px solid ${t.color}`,transition:"width 1s ease-in-out"},children:("audio"===t.type||"lyrics"===t.type)&&o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"2px",height:"100%",paddingLeft:"8px",opacity:.5},children:[...Array(20)].map((e,i)=>o.jsx("div",{style:{width:"2px",height:80*Math.random()+"%",background:t.color,borderRadius:"2px"}},i))})})}),o.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",background:e[t.type]?"#22c55e":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center"},children:e[t.type]&&o.jsx(K,{size:10,color:"white"})})]},t.label))})]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:m?"column":"row",gap:"12px",alignItems:"stretch"},children:[C&&!I&&o.jsxs("button",{onClick:d,disabled:l,style:{padding:"14px 24px",borderRadius:"16px",background:"rgba(236, 72, 153, 0.1)",border:"1px solid rgba(236, 72, 153, 0.3)",color:"#f472b6",fontWeight:"600",fontSize:"0.9rem",cursor:l?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[l?o.jsx($,{size:18,className:"spin"}):s?o.jsx(w,{size:18,fill:"#22c55e"}):o.jsx(W,{size:18}),l?"Syncing...":s?"Image to Video Sync âœ“":"Image to Video Sync"]}),o.jsx("button",{onClick:()=>{b?g(!0):n.info("Finish all generators to enable Master Preview")},style:{padding:"14px 32px",borderRadius:"16px",background:b?"linear-gradient(135deg, #4f46e5, #7c3aed)":"rgba(255,255,255,0.05)",border:b?"none":"1px solid rgba(255,255,255,0.1)",color:b?"white":"rgba(255,255,255,0.3)",fontWeight:"700",fontSize:"1rem",cursor:b?"pointer":"default",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",boxShadow:b?"0 8px 25px rgba(79, 70, 229, 0.4)":"none",transition:"all 0.3s ease",minWidth:m?"100%":"220px"},children:b?o.jsxs(o.Fragment,{children:[o.jsx(M,{size:20}),"Master & Preview Mix"]}):o.jsxs(o.Fragment,{children:[o.jsx(Q,{size:18}),"Master Preview Locked"]})}),f&&o.jsxs("button",{onClick:p,style:{padding:"14px 24px",borderRadius:"16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontWeight:"600",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:b?1:.7},children:[o.jsx(G,{size:18}),!m&&"Publish to Hub"]})]})]}),!b&&o.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"4px",background:"rgba(255,255,255,0.05)"},children:o.jsx("div",{style:{width:`${v}%`,height:"100%",background:"linear-gradient(90deg, #3b82f6, #6366f1)",transition:"width 0.8s cubic-bezier(0.16, 1, 0.3, 1)"}})})]})}function re({isOpen:t,onClose:a,onCreateProject:_,onSaveToProject:J,authToken:q=null,existingProject:K=null,userPlan:Q="Free"}){const[X,ee]=r.useState("undefined"!=typeof window&&window.innerWidth<768),[re,oe]=r.useState(K?.name||""),[ne,ae]=r.useState(K?.language||"English"),[se,le]=r.useState(K?.style||"Modern Hip-Hop"),[de,ce]=r.useState(K?.duration||90),[pe,ge]=r.useState(K?.musicalBars||16),[xe,ue]=r.useState(K?.useBars??!0),[me,ye]=r.useState(K?.model||"Gemini 2.0 Flash"),[he,be]=r.useState(K?.musicEngine||"music-gpt"),[fe,ve]=r.useState(K?.mood||"Energetic"),[je,we]=r.useState(K?.structure||"Full Song"),[Se,ke]=r.useState(!0),[ze,Ce]=r.useState(-1),[Ie,Re]=r.useState("Full Mix"),[De,$e]=r.useState(K?.bpm||K?.settings?.bpm||120),[Ae,Te]=r.useState({lyrics:"ghost",audio:"beat",visual:"album",video:"video-creator"}),[We,Be]=r.useState(!1),[Ue,Ee]=r.useState({lyrics:null,audio:null,visual:null,video:null}),[Pe,Ve]=r.useState({audio:null,image:null,video:null,vocals:null,lyricsVocal:null}),[Oe,Me]=r.useState({audio:!1,image:!1,video:!1,vocals:!1}),[Ne,Le]=r.useState(null),[Fe,He]=r.useState(""),[Ge,Ye]=r.useState(!1),[_e,Je]=r.useState(!1),[qe,Ke]=r.useState("rapper"),[Qe,Xe]=r.useState("premium"),[Ze,ei]=r.useState("music"),[ii,ti]=r.useState("aggressive"),[ri,oi]=r.useState("hip-hop"),[ni,ai]=r.useState(!1),[si,li]=r.useState(null),[di,ci]=r.useState(!1),[pi,gi]=r.useState(null),[xi,ui]=r.useState(!1),[mi,yi]=r.useState(null),[hi,bi]=r.useState(!1),[fi,vi]=r.useState(!1),[ji,wi]=r.useState(!1),[Si,ki]=r.useState(!1),[zi,Ci]=r.useState(!1),[Ii,Ri]=r.useState(!1),[Di,$i]=r.useState("image"),[Ai,Ti]=r.useState(null),[Wi,Bi]=r.useState(localStorage.getItem("studio_elevenlabs_voice_id")||""),[Ui,Ei]=r.useState(!1),[Pi,Vi]=r.useState([]),[Oi,Mi]=r.useState(!1),[Ni,Li]=r.useState([]),[Fi,Hi]=r.useState(!1),[Gi,Yi]=r.useState(null),[_i,Ji]=r.useState(null),[qi,Ki]=r.useState(null),[Qi,Xi]=r.useState(null),[Zi,et]=r.useState([]),[it,tt]=r.useState(""),[rt,ot]=r.useState(""),[nt,at]=r.useState({visual:!1,audio:!1,video:!1,lyrics:!1}),[st,lt]=r.useState(!1),dt=r.useRef(Ue),ct=r.useRef(null),pt=r.useRef(null),gt=Ue||{lyrics:null,audio:null,visual:null,video:null},xt=Pe||{audio:null,image:null,video:null};r.useEffect(()=>{const e=()=>ee(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),r.useEffect(()=>{dt.current=Ue},[Ue]),r.useEffect(()=>{t&&(async()=>{if(l.currentUser){Mi(!0);try{const e=g(x(s,"users",l.currentUser?.uid,"voices")),i=(await u(e)).docs.map(e=>({id:e.id,...e.data()}));Vi(i)}catch(e){}finally{Mi(!1)}}})()},[t]),r.useEffect(()=>{t&&(async()=>{Hi(!0);try{const e=await fetch(`${i}/api/v2/voices`);if(e.ok){const i=await e.json();Li(i)}}catch(e){}finally{Hi(!1)}})()},[t]),r.useEffect(()=>{(async()=>{if(l.currentUser&&t)try{const e=d(s,"users",l.currentUser?.uid),i=await m(e);if(i.exists()){const e=i.data();e.visualDnaUrl&&Yi(e.visualDnaUrl),e.audioDnaUrl&&Ji(e.audioDnaUrl),e.videoDnaUrl&&Ki(e.videoDnaUrl),e.lyricsDnaUrl&&Xi(e.lyricsDnaUrl),e.voiceSampleUrl&&Ti(e.voiceSampleUrl),e.dnaArtifacts&&et(e.dnaArtifacts)}}catch(e){}})()},[t]),r.useEffect(()=>(document.body.style.overflow=t?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[t]),r.useEffect(()=>{if(xe){const e=Math.round(4*pe*60/De);ce(e)}},[pe,De,xe]),r.useEffect(()=>{xe||ce("Full Song"===je?90:"Radio Edit"===je?150:"Extended"===je?180:"Loop"===je?30:15)},[je,xe]);const ut=[{key:"lyrics",title:"Ghostwriter",subtitle:"Lyrics & Hook",icon:I,color:"#8b5cf6",mediaType:"audio"},{key:"audio",title:"Beat Lab",subtitle:"Music Production",icon:w,color:"#06b6d4",mediaType:"audio"},{key:"visual",title:"Album Artist",subtitle:"Cover Identity",icon:T,color:"#ec4899",mediaType:"image"},{key:"video",title:"Video Creator",subtitle:"Motion & Sync",icon:W,color:"#f59e0b",mediaType:"video"}],mt=(e,i)=>{let t=e;if("lyrics"===i||"content"===i){const{content:i}=Z(e);i&&(t=i)}if(Ne===i)return window.speechSynthesis.cancel(),pt.current&&(pt.current.pause(),pt.current.currentTime=0),void Le(null);if("lyrics"===i&&Pe.vocals)try{pt.current&&pt.current.pause(),window.speechSynthesis.cancel();const e=document.createElement("audio");return e.src=f(Pe.vocals),pt.current=e,e.play().catch(e=>{yt(t,i)}),e.onended=()=>Le(null),void Le(i)}catch(r){}yt(t,i)},yt=(e,i)=>{try{if(window.speechSynthesis.cancel(),"undefined"==typeof SpeechSynthesisUtterance)return;const t=new SpeechSynthesisUtterance(e),r=window.speechSynthesis.getVoices();if("rapper"===qe||"rapper-female"===qe){t.rate="fast"===ii?1.3:"chill"===ii?.85:1,t.pitch="rapper-female"===qe?1.2:.9;const e=r.find(e=>"rapper-female"===qe?e.name.toLowerCase().includes("female")||e.name.toLowerCase().includes("zira")||e.name.toLowerCase().includes("samantha"):e.name.toLowerCase().includes("male")||e.name.toLowerCase().includes("david")||e.name.toLowerCase().includes("alex"));e&&(t.voice=e)}else if("singer"===qe||"singer-female"===qe){t.rate=.85,t.pitch="singer-female"===qe?1.3:1;const e=r.find(e=>"singer-female"===qe?e.name.toLowerCase().includes("female")||e.name.toLowerCase().includes("zira"):e.name.toLowerCase().includes("male")||e.name.toLowerCase().includes("david"));e&&(t.voice=e)}else if("narrator"===qe){t.rate=.9,t.pitch=.8;const e=r.find(e=>e.name.toLowerCase().includes("david")||e.name.toLowerCase().includes("male"));e&&(t.voice=e)}else t.rate=.9;t.onend=()=>Le(null),t.onerror=()=>Le(null),window.speechSynthesis.speak(t),Le(i)}catch(t){Le(null)}},ht=r.useCallback(async()=>{const e={"Content-Type":"application/json"};return q&&(e.Authorization=`Bearer ${q}`),e},[q]),bt=async()=>{if(We)return;if(!re.trim())return void n.error("Please enter a song idea");const t=Object.entries(Ae).filter(([,e])=>e);if(0!==t.length){Be(!0),n.loading("Generating content...",{id:"gen-all"});try{const r=await ht(),o="Gemini 2.0 Flash"===me?"gemini-2.0-flash":"Gemini 2.0 Pro (Exp)"===me?"gemini-2.0-flash-exp":"Gemini 1.5 Pro"===me?"gemini-1.5-pro":"gemini-2.0-flash",a=async(t,a,s="")=>{const l=e.find(e=>e.id===a);if(!l)return null;const d=ut.find(e=>e.key===t),c=`You are ${l.name}, an elite Billboard-standard ${l.category} specialist. \n        Your mission is to create a track that will dominate the Top 100 charts. \n        Create righteous quality content for a ${se} song about: "${re}" in ${ne}.\n        The focus is on professional excellence that exceeds human artist capabilities.\n        Output Format: ${Ze||"music"} (Ensure the style matches ${Ze}).\n        ${s?`HERE ARE THE LYRICS FOR THE SONG - USE THEM TO INSPIRE THE VIBE: "${String(s).substring(0,1e3)}"`:""}\n        ${"lyrics"===t?"Write ONLY the lyrics (verses, hooks, chorus) with clear labels like [Verse 1], [Chorus], [Bridge]. Use high-impact, chart-topping wordplay. ALSO INCLUDE precise Suno-style vocal/style tags in brackets like [Hard Hitting Rap] or [Soulful Vocals] to guide the performance. Do not include any intro/preamble.":""}\n        ${"audio"===t?`Briefly describe a high-fidelity Billboard-ready beat/instrumental concept (${xe?pe+" bars":de+" seconds"}) with BPM: ${De}. Use evocative genre descriptors. Your goal is a sonic masterpiece. Keep it under 60 words for maximum AI compatibility.`:""}\n        ${"visual"===t?"Describe a striking, iconic album cover identity in detail for high-resolution image generation.":""}\n        ${"video"===t?"Write a cinematic storyboard with precise scene descriptions for a professional music video or motion visual.":""}`;try{const e=await fetch(`${i}/api/generate`,{method:"POST",headers:r,body:JSON.stringify({prompt:`Create ${d.title.toLowerCase()} content for: "${re}"`,systemInstruction:c,model:o,duration:de,language:ne,referenceUrl:"lyrics"===t?Qi:"audio"===t?_i:"visual"===t?Gi:"video"===t?qi:null})});if(e.ok){const i=await e.json();return Ee(e=>{const r={...e,[t]:i.output};return dt.current=r,r}),"audio"===t?setTimeout(()=>vt(i.output),500):"lyrics"===t?setTimeout(()=>jt(i.output),800):"visual"===t?setTimeout(()=>kt(i.output),1100):"video"===t&&setTimeout(()=>Ct(i.output),1400),i.output}await e.text();return n.error(`Agent ${l.name} failed: ${e.status}`,{icon:"âŒ"}),null}catch(p){return n.error(`Connection Error: ${t} generation failed.`,{icon:"ðŸ“¡"}),null}},s=t.find(([e])=>"lyrics"===e);let l="";if(s)l=await a(s[0],s[1]);else if(K?.assets){const e=K.assets.find(e=>"lyrics"===e.type||e.id?.includes("lyrics")||e.agent?.toLowerCase().includes("ghost"));e&&(l=e.content||e.snippet||"")}const d=t.filter(([e])=>"lyrics"!==e);await Promise.all(d.map(([e,i])=>a(e,i,l))),n.dismiss("gen-all"),n.success("Generation complete!")}catch(r){n.error(o.jsxs("div",{children:[o.jsx("strong",{children:"Generation failed"}),o.jsx("p",{style:{fontSize:"12px",marginTop:"4px"},children:r.message||"Check your connection and try again"})]}),{duration:5e3})}finally{Be(!1)}}else n.error("Please select at least one agent")},ft=async t=>{if(We)return;if(!Ae[t])return;const r=e.find(e=>e.id===Ae[t]);if(r){Be(!0),Ee(e=>({...e,[t]:null}));try{const e=await ht(),o=ut.find(e=>e.key===t),a="Gemini 2.0 Flash"===me?"gemini-2.0-flash":"Gemini 2.0 Pro (Exp)"===me?"gemini-2.0-flash-exp":"Gemini 1.5 Pro"===me?"gemini-1.5-pro":"gemini-2.0-flash",s=await fetch(`${i}/api/generate`,{method:"POST",headers:e,body:JSON.stringify({prompt:`Create fresh ${o.title.toLowerCase()} content for: "${re}"`,systemInstruction:`You are ${r.name}. Create NEW and DIFFERENT content for a ${se} song about: "${re}". Be creative and fresh.\n          ${"lyrics"!==t&&Ue.lyrics?`HERE ARE THE CURRENT LYRICS - USE THEM FOR CONTEXT: "${Ue.lyrics.substring(0,500)}"`:""}\n          ${"lyrics"===t?"Write ONLY the lyrics (verses, hooks, chorus) with clear labels like [Verse] or [Chorus]. No intro fluff.":""}\n          ${"audio"===t?`Briefly describe a high-quality beat/instrumental concept (${xe?pe+" bars":de+" seconds"}) with BPM: ${De}. Focus on mood, instrumentation, and energy. Keep it under 80 words for an AI music generator.`:""}`,model:a,duration:de,language:ne})});let l;if(!s.headers.get("content-type")?.includes("application/json"))throw new Error(`Invalid server response (${s.status})`);l=await s.json(),s.ok?(Ee(e=>({...e,[t]:l.output})),n.success(`${o.title} regenerated!`)):n.error(l.error||`Failed to regenerate ${o.title}`)}catch{n.error("Regeneration failed")}finally{Be(!1)}}},vt=async(e=null)=>{if(Oe.audio)return;const t=("string"==typeof e?e:null)||dt.current.audio||Ue.audio;if(!t)return void n.error("Generate Beat DNA first");Me(e=>({...e,audio:!0}));const r=de>120?"3 minutes":de>60?"2 minutes":"60 seconds";n.loading(`Synthesizing AI beat (${r})...`,{id:"gen-audio"});try{const e=await ht(),{content:r}=Z(t),a=r||t,s=null,l=await fetch(`${i}/api/generate-audio`,{method:"POST",headers:e,body:JSON.stringify({prompt:"string"==typeof a?a.substring(0,1e3):"Professional music production",genre:se||"hip-hop",mood:fe.toLowerCase()||"energetic",bpm:parseInt(De)||90,durationSeconds:parseInt(de)||("Full Song"===je?90:"Radio Edit"===je?150:"Extended"===je?180:"Loop"===je?15:30),referenceAudio:s?.audioUrl||_i,engine:he||"music-gpt",quality:"premium",outputFormat:Ze,highMusicality:Se,seed:ze,stem:Ie})});let d;const c=l.headers.get("content-type");if(!c||!c.includes("application/json")){await l.text();throw new Error(`Invalid audio response (${l.status})`)}if(d=await l.json(),l.ok){const e=d.audioUrl||d.output;if(e){if(Ve(i=>({...i,audio:e})),Ee(e=>({...e,audio:e.audio||`Professional ${se} beat generated at ${De} BPM`})),K&&(J||_)){const i=J||_,t=(K.assets||[]).filter(e=>"audio"===e.type).length,r=t>0?` (Take ${t+1})`:"",o={id:`audio-${Date.now()}`,title:`Beat Lab Production${r}`,type:"audio",agent:"Beat Lab",content:a.substring(0,500),audioUrl:e,mimeType:d.mimeType||"audio/mpeg",version:t+1,settings:{genre:se,mood:fe,bpm:De,engine:he,referencedAudioId:s?.id},createdAt:(new Date).toISOString()};i({...K,assets:[o,...K.assets||[]],updatedAt:(new Date).toISOString()})}n.success("AI beat generated!",{id:"gen-audio"})}else n.error("No audio returned from server",{id:"gen-audio"})}else{const e=d||{};e.isSystemCreditIssue||503===l.status?n.error(o.jsxs("div",{style:{padding:"4px"},children:[o.jsxs("div",{style:{fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(w,{size:14,color:"#fbbf24",fill:"#fbbf24"}),"System Maintenance"]}),o.jsx("p",{style:{fontSize:"12px",marginTop:"4px",opacity:.9},children:"The AI engine is currently being refilled with credits. Your personal balance was not affected."})]}),{id:"gen-audio",duration:8e3,style:{borderLeft:"4px solid #fbbf24"}}):e.isUserCreditIssue||403===l.status?n.error(o.jsxs("div",{style:{padding:"4px"},children:[o.jsx("div",{style:{fontWeight:"bold"},children:"Insufficient Credits"}),o.jsx("p",{style:{fontSize:"12px",marginTop:"4px"},children:"You have run out of generation credits. Please buy more to continue creating."})]}),{id:"gen-audio",duration:6e3}):n.error(e.details||e.error||`Audio generation failed (${l.status})`,{id:"gen-audio"})}}catch(a){n.error(`Generation failed: ${a.message}`,{id:"gen-audio"})}finally{Me(e=>({...e,audio:!1}))}},jt=async(e=null)=>{if(Oe.vocals)return;const t=("string"==typeof e?e:null)||dt.current.lyrics||Ue.lyrics;if(t){ai(!0),Me(e=>({...e,vocals:!0})),n.loading("Generating AI Vocals (up to 2 mins)...",{id:"gen-vocals"});try{const e=await ht(),{content:r}=Z(t),o=r||t,a={rapper:"rapper-male-1","rapper-female":"rapper-female-1",singer:"singer-male","singer-female":"singer-female",narrator:"narrator",whisper:"whisper",spoken:"spoken"}[qe]||"rapper-male-1",s=null,l=await fetch(`${i}/api/generate-speech`,{method:"POST",headers:e,body:JSON.stringify({prompt:o.substring(0,1500),voice:a,style:qe,rapStyle:ii,genre:ri,language:ne||"English",duration:de||30,quality:Qe,outputFormat:Ze,speakerUrl:"cloned"===qe?Ai:s?.audioUrl||null,elevenLabsVoiceId:"premium"===Qe||"cloned"===qe?Wi:null,backingTrackUrl:Pe.audio})});let d;const c=l.headers.get("content-type");if(!c||!c.includes("application/json"))throw new Error(`Invalid vocal response (${l.status})`);if(d=await l.json(),l.ok&&d.audioUrl){if(Ve(e=>({...e,vocals:d.audioUrl,lyricsVocal:d.audioUrl})),Ee(e=>({...e,vocals:e.vocals||`AI Vocal Performance generated for "${re||"song"}"`})),K&&(J||_)){const e=J||_,i=(K.assets||[]).filter(e=>"vocal"===e.type).length,t=i>0?` (Take ${i+1})`:"",r={id:`vocal-${Date.now()}`,title:`Vocal Performance${t}`,type:"vocal",agent:"Ghostwriter",content:o.substring(0,500),audioUrl:d.audioUrl,mimeType:d.mimeType||"audio/wav",version:i+1,settings:{voice:a,style:qe,quality:Qe,referencedAudioId:s?.id},createdAt:(new Date).toISOString()};e({...K,assets:[r,...K.assets||[]],updatedAt:(new Date).toISOString()})}n.success("AI Vocals generated!",{id:"gen-vocals"})}else{const e=d||{};n.error(e.details||e.error||"Vocal generation failed",{id:"gen-vocals"})}}catch(r){n.error("Vocal generation failed",{id:"gen-vocals"})}finally{ai(!1),Me(e=>({...e,vocals:!1}))}}else n.error("Generate Lyrics & Hook DNA first")},wt=async(e,t)=>{if(nt[e])return;const r=t.target.files[0];if(!r)return;if(r.size>10485760)return void n.error("File too large (max 10MB)");at(i=>({...i,[e]:!0}));const o=n.loading(`Uploading ${e} DNA...`,{id:`upload-dna-${e}`});try{const t=await ht(),a=new FileReader;a.readAsDataURL(r),a.onload=async()=>{try{const g=a.result,x=await fetch(`${i}/api/upload-asset`,{method:"POST",headers:t,body:JSON.stringify({data:g,fileName:`${e}-dna-${Date.now()}-${r.name.replace(/\s+/g,"-")}`,mimeType:r.type,assetType:"visual"===e||"video"===e?"image":"audio"===e?"audio":"document"})}),u=await x.json();if(!x.ok||!u.url)throw new Error(u.error||"Upload failed");{const i=u.url;if("visual"===e&&Yi(i),"audio"===e&&Ji(i),"video"===e&&Ki(i),"lyrics"===e&&Xi(i),l.currentUser?.uid)try{const t=d(s,"users",l.currentUser?.uid),o={id:`dna-${Date.now()}`,type:e,url:i,name:r.name,timestamp:Date.now()};await c(t,{[`${e}DnaUrl`]:i,dnaArtifacts:b(o),lastDnaUpdate:Date.now()}),et(e=>[o,...e||[]])}catch(p){}n.success(`${"video"===e?"Image":e.charAt(0).toUpperCase()+e.slice(1)} DNA attached!`,{id:o})}}catch(g){n.error(`Failed to upload ${e} DNA`,{id:o})}finally{at(i=>({...i,[e]:!1}))}},a.onerror=()=>{n.error("Failed to read file"),at(i=>({...i,[e]:!1}))}}catch(a){n.error("Upload failed",{id:o}),at(i=>({...i,[e]:!1}))}},St=e=>new Promise((i,t)=>{try{const r=document.createElement("video");r.crossOrigin="anonymous",r.muted=!0,r.onloadeddata=()=>{r.currentTime=Math.min(1,.1*r.duration)},r.onseeked=()=>{try{const e=document.createElement("canvas");e.width=r.videoWidth||640,e.height=r.videoHeight||360;e.getContext("2d").drawImage(r,0,0,e.width,e.height);const t=e.toDataURL("image/jpeg",.9);r.remove(),i(t)}catch(e){t(e)}},r.onerror=()=>{t(new Error("Video load failed"))},r.src=e,r.load(),setTimeout(()=>{r.remove(),t(new Error("Frame extraction timeout"))},1e4)}catch(r){t(r)}}),kt=async(e=null)=>{if(Oe.image)return;const t=("string"==typeof e?e:null)||dt.current.visual||Ue.visual;if(t){Me(e=>({...e,image:!0})),n.loading("Generating image (~10 seconds)...",{id:"gen-image"});try{const e=await ht(),{content:r}=Z(t),o=r||t,a=await fetch(`${i}/api/generate-image`,{method:"POST",headers:e,body:JSON.stringify({prompt:`Iconic Billboard-standard album cover art, hyper-detailed, professional photography or elite digital art, righteous quality, award-winning composition: ${o.substring(0,800)}`,referenceImage:Gi})});let s;if(!a.headers.get("content-type")?.includes("application/json"))throw new Error(`Invalid image response (${a.status})`);if(s=await a.json(),a.ok){let e=null;if(s.output?e=s.output:s.images&&s.images.length>0?e=s.images[0]:s.imageData&&(e=s.imageData),e){if(Ve(i=>({...i,image:e})),n.success("Image created!",{id:"gen-image"}),K){const i={id:`img-${Date.now()}`,type:"image",url:e,name:`Album Art - ${(new Date).toLocaleTimeString()}`,createdAt:(new Date).toISOString()},t=[...K.assets||[],i];J({...K,assets:t,updatedAt:(new Date).toISOString()})}}else await zt()}else{await a.text();await zt()}}catch(r){await zt()}finally{Me(e=>({...e,image:!1}))}}else n.error("Generate Visual DNA first")},zt=async()=>{const e=Pe.video||mi;if(e){n.loading("Extracting frame from video...",{id:"gen-image"});try{const t=await ht(),r=await fetch(`${i}/api/extract-video-frame`,{method:"POST",headers:t,body:JSON.stringify({videoUrl:e,timestamp:1})});if(r.ok){const i=await r.json();if(i.extractClientSide){const i=await St(e);if(Ve(e=>({...e,image:i})),n.success("Frame extracted from video!",{id:"gen-image"}),K){const e={id:`img-${Date.now()}`,type:"image",url:i,name:`Video Frame Cover - ${(new Date).toLocaleTimeString()}`,createdAt:(new Date).toISOString()},t=[...K.assets||[],e];J({...K,assets:t,updatedAt:(new Date).toISOString()})}return}if(i.output||i.imageData){const e=i.output||`data:${i.mimeType||"image/jpeg"};base64,${i.imageData}`;if(Ve(i=>({...i,image:e})),n.success("Frame extracted from video!",{id:"gen-image"}),K){const i={id:`img-${Date.now()}`,type:"image",url:e,name:`Video Frame Cover - ${(new Date).toLocaleTimeString()}`,createdAt:(new Date).toISOString()},t=[...K.assets||[],i];J({...K,assets:t,updatedAt:(new Date).toISOString()})}return}}const o=await St(e);Ve(e=>({...e,image:o})),n.success("Frame extracted from video!",{id:"gen-image"})}catch(t){n.error("Could not extract frame from video",{id:"gen-image"})}}else n.error("No image or video available",{id:"gen-image"})},Ct=async(e=null)=>{if(Oe.video)return;const t=("string"==typeof e?e:null)||dt.current.video||Ue.video;if(t){Me(e=>({...e,video:!0})),n.loading("Generating video (this takes ~2 min)...",{id:"gen-video"});try{const e=await ht(),{content:a}=Z(t),s=a||t,l=await fetch(`${i}/api/generate-video`,{method:"POST",headers:e,body:JSON.stringify({prompt:`Elite cinematic music video visual, professional motion design, high-fidelity righteous quality, award-winning storyboard: ${s.substring(0,700)}`,referenceImage:Gi||qi,referenceVideo:qi,visualId:rt,duration:de,audioDuration:de,audioUrl:Pe.audio,vocalUrl:Pe.vocals||Pe.lyricsVocal})});if(l.ok){const e=await l.json();if("image"===e.type||e.mimeType&&e.mimeType.startsWith("image/")){const i=e.output||e.imageUrl;if(i&&"string"==typeof i){const t=i.startsWith("data:")||i.startsWith("http")?i:`data:${e.mimeType||"image/png"};base64,${i}`;Ve(e=>({...e,image:t})),n.success("Cover image generated! (Video generation unavailable)",{id:"gen-video",duration:5e3})}else n.error("Video generation unavailable",{id:"gen-video"})}else{const i=e.videoUrl||e.output||e.video;if(i&&"string"==typeof i&&(i.startsWith("http")||i.startsWith("blob:"))){if(Ve(e=>({...e,video:i})),n.success(e.isDemo?"Demo video loaded!":"Video created!",{id:"gen-video"}),K){const e={id:`vid-${Date.now()}`,type:"video",url:i,name:`Music Video - ${(new Date).toLocaleTimeString()}`,createdAt:(new Date).toISOString()},t=[...K.assets||[],e];J({...K,assets:t,updatedAt:(new Date).toISOString()})}if(!Pe.image){n.loading("Extracting cover frame...",{id:"extract-frame"});try{const e=await St(i);Ve(i=>({...i,image:e})),n.success("Cover image extracted!",{id:"extract-frame"})}catch(r){n.dismiss("extract-frame")}}}else n.error(e.message||"Video generation unavailable",{id:"gen-video"})}}else{const e=await l.json().catch(()=>({}));503===l.status&&e.setup?n.error(o.jsxs("div",{children:[o.jsx("strong",{children:"Video API Not Ready"}),o.jsx("p",{style:{fontSize:"12px",marginTop:"4px"},children:e.details})]}),{id:"gen-video",duration:8e3}):n.error(e.details||e.error||"Video generation failed",{id:"gen-video"})}}catch(a){n.error("Video generation failed",{id:"gen-video"})}finally{Me(e=>({...e,video:!1}))}}else n.error("Generate Music Video DNA first")},It=async()=>{if(di)return;if(Object.entries(Ae).filter(([,e])=>null!==e).map(([e])=>e).some(e=>Ue[e])){ci(!0),n.loading("Creating final mix (~15 seconds)...",{id:"final-mix"});try{const i={id:`mix-${Date.now()}`,title:`${re} - Complete Mix`,description:`Full production of "${re}" with lyrics, beat, visual, and video`,created:(new Date).toISOString(),components:{lyrics:{content:Ue.lyrics,agent:e.find(e=>e.id===Ae.lyrics)?.name||"Ghostwriter",vocalUrl:Pe.lyricsVocal||null},audio:{content:Ue.audio,agent:e.find(e=>e.id===Ae.audio)?.name||"Beat Maker",audioUrl:Pe.audio||null},visual:{content:Ue.visual,agent:e.find(e=>e.id===Ae.visual)?.name||"Designer",imageUrl:Pe.image||null},video:{content:Ue.video,agent:e.find(e=>e.id===Ae.video)?.name||"Video Creator",videoUrl:mi||Pe.video||null,musicVideoUrl:mi||null,isSynced:!!mi}},settings:{language:ne,style:se,model:me,bpm:De,musicVideoUrl:mi||null}};gi(i),n.success("Final mix ready!",{id:"final-mix"})}catch(i){n.error("Failed to create final mix",{id:"final-mix"})}finally{ci(!1)}}else n.error("Generate at least one output first")},Rt=e=>{const i=Ue[e];if(!i)return;const t=ut.find(i=>i.key===e),r="string"==typeof i?i:JSON.stringify(i,null,2),o=new Blob([r],{type:"text/plain"}),n=URL.createObjectURL(o),a=document.createElement("a");a.href=n,a.download=`${re||"output"}-${t?.title||e}.txt`,a.click(),URL.revokeObjectURL(n);const s={audio:Pe.audio,visual:Pe.image,video:Pe.video,lyrics:Pe.vocals}[e];if(s){let i=s;"visual"===e&&(i=v(s)),"audio"===e&&(i=f(s)),"video"===e&&(i=j(s)),"lyrics"===e&&(i=f(s));const t=document.createElement("a");t.href=i,t.download=`${re||"media"}-${e}`,t.click()}},Dt=e=>{Ee(i=>({...i,[e]:null})),dt.current[e]=null,"audio"===e&&Ve(e=>({...e,audio:null})),"visual"===e&&Ve(e=>({...e,image:null})),"video"===e&&Ve(e=>({...e,video:null})),"lyrics"===e&&Ve(e=>({...e,vocals:null})),n.success("Deleted")},$t=(e,i)=>{Ee(t=>({...t,[e]:i})),dt.current[e]=i,n.success("Saved")},At=()=>{const i=Object.values(Ue).some(e=>null!==e),t=Object.values(Pe).some(e=>null!==e);if(!i&&!t)return void n.error("No content to save! Generate some content first.");const r=[];if(ut.forEach(i=>{const t=Ue[i.key];if(t){const o=e.find(e=>e.id===Ae[i.key]);let n="string"==typeof t?t:JSON.stringify(t);if("lyrics"===i.key){const{content:e}=Z(n);e&&(n=e)}const a={id:`${i.key}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:i.title,type:i.key,agent:o?.name||i.subtitle,content:n,snippet:n.substring(0,100),audioUrl:"audio"===i.key?Pe.audio||null:"lyrics"===i.key&&Pe.vocals||null,imageUrl:"visual"===i.key&&v(Pe.image)||null,videoUrl:"video"===i.key&&Pe.video||null,date:(new Date).toLocaleDateString(),createdAt:(new Date).toISOString(),color:`agent-${(i.color||"").replace("#","")}`};r.push(a)}}),mi){const e={id:`mvideo-${Date.now()}`,title:"Professional Music Video",type:"video",agent:"Orchestrator Sync",content:`Professional synced production for "${re}"`,videoUrl:j(mi),date:(new Date).toLocaleDateString(),createdAt:(new Date).toISOString(),isPremium:!0,color:"agent-ec4899"};r.push(e)}if(pi){const e={id:`fmix-${Date.now()}`,title:"Full Production Master",type:"pro",agent:"Studio Orchestrator",content:"string"==typeof pi?pi:JSON.stringify(pi),audioUrl:f(Pe.audio),videoUrl:j(mi||Pe.video),imageUrl:v(Pe.image),date:(new Date).toLocaleDateString(),createdAt:(new Date).toISOString(),color:"agent-4f46e5"};r.push(e)}const o={id:K?.id||String(Date.now()),name:Fe||re||K?.name||"Untitled Project",description:`Created with Studio Orchestrator: "${re}"`,category:K?.category||"Music",language:ne,style:se,model:me,bpm:De,structure:je,duration:de,musicalBars:pe,useBars:xe,date:K?.date||(new Date).toLocaleDateString(),createdAt:K?.createdAt||(new Date).toISOString(),updatedAt:(new Date).toISOString(),agents:Object.values(Ae).filter(Boolean).map(i=>{const t=e.find(e=>e.id===i);return t?.name||i}),assets:[...K?.assets||[],...r],coverImage:v(Pe.image)||K?.coverImage||null},a=!!K?.id?J||_:_||J;if(a)try{return a(o),n.success(`Saved ${o.assets.length} assets to "${o.name}"!`),Ri(!0),Ye(!1),void wi(!0)}catch(s){n.error("Save failed - callback error")}else n.error("Save failed - no backend connection");Ye(!1)};return t?o.jsxs("div",{className:"studio-orchestrator-overlay animate-fadeIn",style:{position:"fixed",top:0,left:0,right:0,height:"100dvh",background:"linear-gradient(180deg, rgba(0,0,0,0.98) 0%, rgba(10,10,20,0.98) 100%)",zIndex:1e4,display:"flex",flexDirection:"column",overflow:"hidden"},children:[o.jsxs("div",{style:{padding:X?"12px 16px":"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.5)",backdropFilter:"blur(10px)",position:"sticky",top:0,zIndex:10},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:X?"40px":"48px",height:X?"40px":"48px",borderRadius:"14px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.3)"},children:o.jsx(w,{size:X?22:26,color:"white"})}),o.jsxs("div",{children:[o.jsxs("h2",{style:{margin:0,fontSize:X?"1.1rem":"1.4rem",fontWeight:"700"},children:["Studio Orchestrator ",o.jsx("span",{style:{color:"var(--color-purple)",fontSize:"0.6em",border:"1px solid var(--color-purple)",padding:"1px 4px",borderRadius:"4px",marginLeft:"6px"},children:"V3.5"})]}),o.jsx("p",{style:{margin:0,fontSize:X?"0.75rem":"0.8rem",color:"var(--text-secondary)"},children:"4 AI Generators â€¢ One Unified Pipeline"})]})]}),o.jsx("button",{onClick:()=>{!Object.values(gt).some(Boolean)&&!Object.values(xt).some(Boolean)||Ii?a?.():Ci(!0)},style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"12px",width:X?"38px":"44px",height:X?"38px":"44px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},children:o.jsx(S,{size:20,color:"white"})})]}),o.jsxs("div",{className:"orchestrator-scroll-container",style:{flex:1,padding:X?"12px 10px":"16px",maxWidth:"1200px",margin:"0 auto",width:"100%",overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch"},children:[o.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:X?"10px":"16px",marginBottom:X?"12px":"20px",border:"1px solid rgba(255,255,255,0.06)"},children:[o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:X?"8px":"12px",marginBottom:X?"12px":"16px"},children:[o.jsx("textarea",{value:re,onChange:e=>oe(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),bt())},placeholder:"Describe your song idea, vibe, or concept...",rows:X?3:2,style:{width:"100%",padding:X?"10px 12px":"16px 20px",borderRadius:"12px",background:"rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.15)",color:"white",fontSize:X?"0.9rem":"1rem",outline:"none",minHeight:X?"100px":"56px",resize:"none",fontFamily:"inherit",lineHeight:"1.5"}}),o.jsxs("div",{style:{display:"flex",gap:"10px"},children:[o.jsx("button",{onClick:_e?()=>{ct.current&&ct.current.stop(),Je(!1)}:()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const i=window.SpeechRecognition||window.webkitSpeechRecognition;if(!i||"function"!=typeof i)return void n.error("Voice recognition not supported");try{ct.current=new i,ct.current.continuous=!1,ct.current.interimResults=!0,ct.current.onresult=e=>{const i=Array.from(e.results).map(e=>e[0].transcript).join("");oe(i)},ct.current.onend=()=>Je(!1),ct.current.onerror=e=>{Je(!1)},ct.current.start(),Je(!0),n.success("Listening...")}catch(e){n.error("Voice input failed")}}else n.error("Speech recognition not supported")},style:{padding:"14px 16px",borderRadius:"12px",background:_e?"rgba(239, 68, 68, 0.2)":"rgba(255,255,255,0.05)",border:"1px solid "+(_e?"#ef4444":"rgba(255,255,255,0.15)"),color:_e?"#ef4444":"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"52px",minHeight:"52px"},title:_e?"Stop Listening":"Voice Input",children:_e?o.jsx(k,{size:22}):o.jsx(z,{size:22})}),o.jsx("button",{onClick:bt,disabled:We||!re.trim()||0===Object.values(Ae).filter(Boolean).length,style:{flex:1,padding:"14px 24px",borderRadius:"12px",background:We?"rgba(139, 92, 246, 0.3)":"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",fontSize:"1rem",cursor:We||!re.trim()||0===Object.values(Ae).filter(Boolean).length?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",opacity:re.trim()&&0!==Object.values(Ae).filter(Boolean).length?1:.5,boxShadow:We?"none":"0 4px 20px rgba(139, 92, 246, 0.4)",minHeight:"52px"},children:We?o.jsxs(o.Fragment,{children:[o.jsx(C,{size:20,className:"spin"}),"Generating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(I,{size:20}),"Generate ",4===Object.values(Ae).filter(Boolean).length?"All":`${Object.values(Ae).filter(Boolean).length} Output${1!==Object.values(Ae).filter(Boolean).length?"s":""}`]})})]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center",paddingBottom:"4px"},children:[o.jsxs("button",{onClick:()=>ki(!Si),style:{padding:"8px 14px",borderRadius:"10px",background:Si?"rgba(139, 92, 246, 0.2)":"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:Si?"#a855f7":"var(--text-secondary)",fontSize:"0.8rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",minHeight:"40px",whiteSpace:"nowrap"},children:[o.jsx(R,{size:14}),Si?"Hide Ideas":"Need Ideas?"]}),Si&&["Summer love in Brooklyn","Trap anthem about success","Lo-fi study beats","Emotional R&B ballad"].map((e,i)=>o.jsx("button",{onClick:()=>{oe(e),ki(!1)},style:{padding:"10px 16px",borderRadius:"20px",background:"rgba(139, 92, 246, 0.15)",border:"1px solid rgba(139, 92, 246, 0.3)",color:"rgba(255,255,255,0.8)",fontSize:"0.85rem",cursor:"pointer",whiteSpace:"nowrap",minHeight:"40px"},children:e},i))]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"10px",marginBottom:"20px"},children:[[{label:"Language",value:ne,setter:ae,options:["English","Spanish","French","German","Japanese","Korean","Portuguese"]},{label:"Genre",value:se,setter:le,options:["Modern Hip-Hop","90s Boom Bap","Trap","R&B / Soul","Pop","Rock","Electronic","Lo-Fi"]},{label:"Project BPM",value:De,setter:$e,options:[70,80,90,100,110,120,130,140,150,160]},{label:"Timing Mode",value:xe?"Bars":"Seconds",setter:e=>ue("Bars"===e),options:["Bars","Seconds"]},{label:"Musical Bars",value:pe,setter:ge,options:[4,8,16,32,64],hidden:!xe},{label:"Target Duration",value:de,setter:ce,options:[15,30,60,90,120,180,240,300],hidden:xe},{label:"Structure",value:je,setter:we,options:["Full Song","Radio Edit","Extended","Loop","Intro","Verse","Chorus","Outro"]},{label:"AI Model",value:me,setter:ye,options:["Gemini 2.0 Flash","Gemini 2.0 Pro (Exp)","Gemini 1.5 Pro"]},{label:"Mood",value:fe,setter:ve,options:["Chill","Energetic","Dark","Happy","Epic","Mysterious","Dreamy"]},{label:"Music Engine",value:he,setter:be,options:["Beat Lab (MusicGen)","Mureaka","Riffusion (Visual)","Stability Pro","Uberduck","Auto-Selection"]},{label:"Stem Mode",value:Ie,setter:Re,options:["Full Mix","Drums Only","No Drums","Melody Only","Bass Only"]}].filter(e=>!e.hidden).map(e=>o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"6px",textTransform:"uppercase",fontWeight:"600",letterSpacing:"0.05em"},children:e.label}),o.jsx("select",{value:"Music Engine"===e.label?"music-gpt"===he?"Beat Lab (MusicGen)":"mureka"===he?"Mureaka":"riffusion"===he?"Riffusion (Visual)":"stability"===he?"Stability Pro":"uberduck"===he?"Uberduck":"Auto-Selection":e.value,onChange:i=>{const t=i.target.value;"Music Engine"===e.label?be("Beat Lab (MusicGen)"===t?"music-gpt":"Mureaka"===t?"mureka":"Riffusion (Visual)"===t?"riffusion":"Stability Pro"===t?"stability":"Uberduck"===t?"uberduck":"auto"):["Musical Bars","Project BPM","Target Duration"].includes(e.label)?e.setter(parseInt(t)):e.setter(t)},style:{width:"100%",padding:"12px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none",minHeight:"48px",WebkitAppearance:"none",appearance:"none",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23888' d='M6 8L1 3h10z'/%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:e.options.map(e=>o.jsx("option",{value:e,style:{background:"#1a1a1a"},children:e},e))})]},e.label)),o.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[o.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"6px",textTransform:"uppercase",fontWeight:"600"},children:"High Musicality (Udio)"}),o.jsxs("button",{onClick:()=>ke(!Se),style:{height:"48px",borderRadius:"10px",background:Se?"rgba(139, 92, 246, 0.2)":"rgba(0,0,0,0.4)",border:"1px solid "+(Se?"#8b5cf6":"rgba(255,255,255,0.1)"),color:Se?"#a78bfa":"var(--text-secondary)",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},children:[o.jsx(D,{size:14}),Se?"Enabled":"Disabled"]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[o.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"6px",textTransform:"uppercase",fontWeight:"600"},children:"Generation Seed"}),o.jsxs("div",{style:{display:"flex",gap:"4px"},children:[o.jsx("input",{type:"number",value:ze,onChange:e=>Ce(parseInt(e.target.value)),style:{flex:1,height:"48px",padding:"0 12px",borderRadius:"10px 0 0 10px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.8rem",outline:"none"},placeholder:"Random"}),o.jsx("button",{onClick:()=>Ce(Math.floor(1e6*Math.random())),style:{padding:"0 12px",borderRadius:"0 10px 10px 0",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderLeft:"none",color:"var(--text-secondary)",cursor:"pointer"},title:"Randomize Seed",children:o.jsx($,{size:14})})]})]})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:X?"16px":"20px",border:"1px solid rgba(255,255,255,0.06)",marginBottom:"24px"},children:[o.jsx("div",{style:{display:"flex",alignItems:X?"flex-start":"center",justifyContent:"space-between",gap:"8px",marginBottom:"16px",flexWrap:"wrap",flexDirection:X?"column":"row"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(A,{size:X?14:16,color:"var(--text-secondary)"}),o.jsx("span",{style:{fontSize:X?"0.75rem":"0.8rem",color:"var(--text-secondary)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Choose Your Generators"}),o.jsxs("span",{style:{padding:"2px 8px",borderRadius:"10px",background:"rgba(139, 92, 246, 0.3)",color:"#a78bfa",fontSize:"0.7rem",fontWeight:"600"},children:[Object.values(Ae).filter(Boolean).length," / 4 active"]})]})}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px"},children:ut.map(i=>o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"6px"},children:[o.jsx("label",{style:{fontSize:"0.7rem",color:i.color,fontWeight:"500"},children:i.title}),Ae[i.key]&&o.jsx("div",{title:`${e.find(e=>e.id===Ae[i.key])?.name} Capabilities:\nâ€¢ ${e.find(e=>e.id===Ae[i.key])?.capabilities?.join("\nâ€¢ ")}`,style:{color:"rgba(255,255,255,0.3)",cursor:"help"},children:o.jsx(B,{size:12})})]}),o.jsxs("select",{value:Ae[i.key]||"",onChange:e=>Te(t=>({...t,[i.key]:e.target.value||null})),style:{width:"100%",padding:"10px 12px",borderRadius:"10px",background:Ae[i.key]?"rgba(0,0,0,0.4)":"rgba(0,0,0,0.2)",border:"1px solid "+(Ae[i.key]?i.color+"60":"rgba(255,255,255,0.1)"),color:Ae[i.key]?"white":"var(--text-muted)",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:[o.jsx("option",{value:"",style:{background:"#1a1a1a"},children:"â€” None â€”"}),e.filter(e=>"Pro"===Q||("Monthly"===Q?"free"===e.tier||"monthly"===e.tier:"free"===e.tier)).filter(e=>"lyrics"===i.key?"Music Creation"===e.category||"Pro Performer"===e.category||"ghost"===e.id||"vocal-arch"===e.id:"audio"===i.key?"Pro Producer"===e.category||"Music Creation"===e.category||"beat"===e.id||"beat-arch"===e.id:"visual"===i.key?"Visual Identity"===e.category||"album"===e.id:"video"!==i.key||("Visual Identity"===e.category||"video-creator"===e.id)).map(e=>o.jsxs("option",{value:e.id,style:{background:"#1a1a1a"},disabled:e.comingSoon,children:[e.name," ",e.comingSoon?"(Coming Soon)":e.isBeta?"(Beta)":""]},e.id))]})]},i.key))})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:X?"12px":"16px",marginBottom:"24px",border:"1px solid rgba(168, 85, 247, 0.15)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:st?"16px":"0"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(U,{size:18,color:"#a855f7"}),o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"white"},children:"Studio DNA Vault"}),!st&&o.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"rgba(255,255,255,0.4)"},children:Gi||_i||Qi||qi?"Persistent references active":"No reference files attached"})]})]}),o.jsxs("button",{onClick:()=>lt(!st),style:{padding:"6px 12px",background:"rgba(168, 85, 247, 0.15)",border:"1px solid rgba(168, 85, 247, 0.3)",borderRadius:"8px",fontSize:"0.8rem",color:"#a855f7",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[st?"Close Vault":"Manage DNA",st?o.jsx(E,{size:14}):o.jsx(P,{size:14})]})]}),st&&o.jsxs("div",{style:{marginTop:"16px",animation:"fadeIn 0.3s ease"},children:[o.jsx("div",{style:{padding:"16px",background:"rgba(168, 85, 247, 0.05)",borderRadius:"12px",border:"1px solid rgba(168, 85, 247, 0.15)",marginBottom:"20px"},children:o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[o.jsx(B,{size:20,color:"#a855f7",style:{marginTop:"2px"}}),o.jsxs("div",{children:[o.jsx("h4",{style:{margin:"0 0 6px 0",fontSize:"0.95rem",color:"#a855f7",fontWeight:"bold",fontFamily:"Georgia, serif"},children:"What is DNA?"}),o.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"rgba(255,255,255,0.7)",lineHeight:"1.5",fontFamily:"Georgia, serif"},children:'DNA (Digital Narrative Artifacts) allows you to "seed" the AI with specific creative references. By uploading visual moodboards, audio references, or lyrical contexts, the agents can better understand and mirror your unique artistic direction. Select an artifact below to set it as the active DNA reference for your creative session.'})]})]})}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:X?"1fr":"repeat(2, 1fr)",gap:"10px",marginBottom:"20px"},children:[o.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(T,{size:18,color:"#ec4899"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Visual DNA"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Gi?"Reference Active":"No Image"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Gi&&o.jsx("button",{onClick:()=>Yi(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:o.jsx(S,{size:14})}),o.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[o.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:e=>wt("visual",e)}),nt.visual?o.jsx(C,{size:12,className:"spin"}):"Upload"]})]})]}),o.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(D,{size:18,color:"#06b6d4"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Audio DNA"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:_i?"Ref Active":"No Beat"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"6px"},children:[_i&&o.jsx("button",{onClick:()=>Ji(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:o.jsx(S,{size:14})}),o.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[o.jsx("input",{type:"file",accept:"audio/*",style:{display:"none"},onChange:e=>wt("audio",e)}),nt.audio?o.jsx(C,{size:12,className:"spin"}):"Upload"]})]})]}),o.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(V,{size:18,color:"#a855f7"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Lyrics DNA"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Qi?"Text Ready":"No Context"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Qi&&o.jsx("button",{onClick:()=>Xi(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:o.jsx(S,{size:14})}),o.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[o.jsx("input",{type:"file",style:{display:"none"},onChange:e=>wt("lyrics",e)}),nt.lyrics?o.jsx(C,{size:12,className:"spin"}):"Upload"]})]})]}),o.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(W,{size:18,color:"#f59e0b"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Seed DNA"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:qi?"Profile Active":"No Seed"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"6px"},children:[qi&&o.jsx("button",{onClick:()=>Ki(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:o.jsx(S,{size:14})}),o.jsxs("label",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"0.75rem",cursor:"pointer",color:"white"},children:[o.jsx("input",{type:"file",style:{display:"none"},onChange:e=>wt("video",e)}),nt.video?o.jsx(C,{size:12,className:"spin"}):"Upload"]})]})]})]}),Zi&&Zi.length>0&&o.jsxs("div",{style:{marginTop:"12px",padding:"16px",background:"rgba(255,255,255,0.02)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)"},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"0.75rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:"600"},children:"Stored Vault Artifacts"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"240px",overflowY:"auto",paddingRight:"4px"},children:Zi.slice().reverse().map(e=>o.jsxs("div",{style:{padding:"10px 12px",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.03)",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",minWidth:0},children:[o.jsxs("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:["visual"===e.type&&o.jsx(T,{size:16,color:"#ec4899"}),"audio"===e.type&&o.jsx(D,{size:16,color:"#06b6d4"}),"lyrics"===e.type&&o.jsx(V,{size:16,color:"#a855f7"}),"video"===e.type&&o.jsx(W,{size:16,color:"#f59e0b"})]}),o.jsxs("div",{style:{minWidth:0},children:[o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.name}),o.jsxs("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.3)"},children:[e.type.charAt(0).toUpperCase()+e.type.slice(1)," â€¢ ",new Date(e.timestamp).toLocaleDateString()]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[o.jsx("button",{onClick:()=>{"visual"===e.type&&Yi(e.url),"audio"===e.type&&Ji(e.url),"video"===e.type&&Ki(e.url),"lyrics"===e.type&&Xi(e.url),n.success(`${e.type.charAt(0).toUpperCase()+e.type.slice(1)} activated!`)},style:{padding:"5px 10px",background:"rgba(168, 85, 247, 0.15)",border:"1px solid rgba(168, 85, 247, 0.3)",borderRadius:"6px",color:"#a855f7",fontSize:"0.7rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:"Activate"}),o.jsx("button",{onClick:async()=>{if(window.confirm("Remove this DNA artifact?"))try{const i=Zi.filter(i=>i.id!==e.id);et(i);const t=d(s,"users",l.currentUser?.uid);await c(t,{dnaArtifacts:i}),n.success("Artifact removed")}catch(i){}},style:{background:"none",border:"none",color:"rgba(255,255,255,0.2)",cursor:"pointer",padding:"4px"},children:o.jsx(O,{size:14})})]})]},e.id))})]}),o.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",border:it?"1px solid #06b6d4":"1px solid rgba(255,255,255,0.05)",gridColumn:X?"span 1":"span 2"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(Hash,{size:16,color:"#06b6d4"}),o.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase"},children:"Project Audio ID Reference"})]}),it&&o.jsx("button",{onClick:()=>tt(""),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:o.jsx(S,{size:14})})]}),o.jsx("input",{type:"text",placeholder:"Link an existing Audio ID (e.g. project_vocal_01)...",value:it,onChange:e=>tt(e.target.value),style:{width:"100%",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",padding:"8px 12px",fontSize:"0.8rem",color:"white",outline:"none",fontFamily:"monospace"}})]}),o.jsxs("div",{style:{gridColumn:X?"auto":"1 / span 2",padding:"12px 16px",background:"linear-gradient(90deg, rgba(168, 85, 247, 0.1) 0%, rgba(236, 72, 153, 0.1) 100%)",borderRadius:"12px",border:"1px solid rgba(168, 85, 247, 0.2)",display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"4px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"premium"===Qe?"rgba(168, 85, 247, 0.2)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",color:"premium"===Qe?"#a855f7":"rgba(255,255,255,0.4)"},children:o.jsx(w,{size:18,fill:"premium"===Qe?"#a855f7":"none"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"700",letterSpacing:"0.02em"},children:"ELEVENLABS PREMIUM ENGINE"}),o.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.5)"},children:"premium"===Qe?"Using HD neural voices & cloned mastery":"Using standard generation engines"})]})]}),o.jsx("button",{onClick:()=>Xe("premium"===Qe?"standard":"premium"),style:{padding:"6px 12px",borderRadius:"20px",background:"premium"===Qe?"#a855f7":"rgba(255,255,255,0.1)",border:"none",color:"white",fontSize:"0.7rem",fontWeight:"800",cursor:"pointer",boxShadow:"premium"===Qe?"0 0 15px rgba(168, 85, 247, 0.4)":"none",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},children:"premium"===Qe?"ACTIVATED":"ACTIVATE"})]})]}),!st&&(Gi||_i||Qi||qi)&&o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"10px"},children:[Gi&&o.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(236, 72, 153, 0.1)",color:"#ec4899",borderRadius:"6px",border:"1px solid rgba(236, 72, 153, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(T,{size:10})," Visual DNA"]}),_i&&o.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(6, 182, 212, 0.1)",color:"#06b6d4",borderRadius:"6px",border:"1px solid rgba(6, 182, 212, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(D,{size:10})," Audio DNA"]}),Qi&&o.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(168, 85, 247, 0.1)",color:"#a855f7",borderRadius:"6px",border:"1px solid rgba(168, 85, 247, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(V,{size:10})," Lyrics DNA"]}),qi&&o.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b",borderRadius:"6px",border:"1px solid rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(W,{size:10})," Seed DNA"]})]})]}),o.jsx("div",{style:{padding:"8px",background:Ue.lyrics?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",borderRadius:"8px",marginBottom:"12px",fontSize:"0.75rem",color:Ue.lyrics?"#10b981":"#ef4444"},children:Ue.lyrics?"âœ… Lyrics ready - Create Vocal button should appear below":"âš ï¸ No lyrics yet - Click Generate above first"}),Ue.lyrics&&o.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(139, 92, 246, 0.05) 100%)",borderRadius:"16px",padding:"24px",border:"1px solid rgba(139, 92, 246, 0.4)",marginBottom:"24px"},children:[o.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:o.jsxs("div",{children:[o.jsx("h4",{style:{margin:"0 0 6px",fontSize:"1rem",fontWeight:"700",color:"#8b5cf6"},children:"ðŸŽ¤ Ghostwriter Vocal Performance"}),o.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Generate audio of the lyrics being recited or sung by different voice types"})]})}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[o.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"#8b5cf6",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px"},children:"ðŸ“ Lyrics Text"}),o.jsx("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"12px",maxHeight:"150px",overflowY:"auto",fontSize:"0.9rem",lineHeight:"1.6",color:"rgba(255,255,255,0.85)",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"'Georgia', 'Times New Roman', serif"},children:Ue.lyrics})]}),o.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(139, 92, 246, 0.3)",display:"flex",flexDirection:"column"},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"#8b5cf6",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px"},children:"ðŸŽµ Vocal Audio"}),Pe.lyricsVocal?o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",flex:1},children:[o.jsx("audio",{src:f(Pe.lyricsVocal),controls:!0,style:{width:"100%",height:"38px",borderRadius:"8px"}}),o.jsxs("button",{onClick:()=>{const e=document.createElement("div");e.innerHTML=`\n                          <div style="\n                            position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n                            background: rgba(0,0,0,0.9); z-index: 9999;\n                            display: flex; align-items: center; justify-content: center;\n                            padding: 20px;\n                          " onclick="if(event.target === this) this.remove();">\n                            <div style="\n                              background: rgba(0,0,0,0.8); border-radius: 20px;\n                              padding: 24px; max-width: 500px; width: 100%;\n                              border: 1px solid rgba(139, 92, 246, 0.4);\n                            " onclick="event.stopPropagation();">\n                              <div style="\n                                font-weight: 700; margin-bottom: 16px; color: #8b5cf6;\n                              ">\n                                ðŸŽ§ Vocal Audio Player\n                              </div>\n                              <audio \n                                src="${Pe.lyricsVocal}"\n                                controls\n                                autoplay\n                                style="width: 100%; height: 50px; border-radius: 10px;"\n                              />\n                              <div style="\n                                margin-top: 16px; font-size: 0.85rem;\n                                color: var(--text-secondary);\n                              ">\n                                Voice Style: <strong>${qe}</strong>\n                              </div>\n                            </div>\n                          </div>\n                        `,document.body.appendChild(e),e.onclick=i=>i.target===e&&e.remove()},style:{padding:"10px 16px",borderRadius:"8px",background:"rgba(139, 92, 246, 0.3)",border:"1px solid rgba(139, 92, 246, 0.5)",color:"#8b5cf6",fontWeight:"600",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[o.jsx(M,{size:14}),"Fullscreen"]})]}):o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"80px",color:"var(--text-secondary)",fontSize:"0.85rem",textAlign:"center"},children:'No audio yet â€¢ Click "Create Vocal" below'})]})]}),o.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[o.jsxs("select",{value:"cloned"===qe&&Ai?Pi.find(e=>e.url===Ai)?`saved-${Pi.find(e=>e.url===Ai).id}`:"cloned":qe,onChange:e=>{const i=e.target.value;if(i.startsWith("saved-")){const e=i.replace("saved-",""),t=Pi.find(i=>i.id===e);t&&(Ti(t.url),Ke("cloned"))}else Ke(i)},style:{padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(139, 92, 246, 0.5)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:[o.jsxs("optgroup",{label:"ðŸ”¥ AI Rappers (Suno/Bark)",children:[o.jsx("option",{value:"rapper",children:"ðŸŽ¤ Male Rapper"}),o.jsx("option",{value:"rapper-female",children:"ðŸ’œ Female Rapper"})]}),o.jsxs("optgroup",{label:"ðŸŽµ AI Singers",children:[o.jsx("option",{value:"singer",children:"ðŸŽ¤ Male Singer (R&B/Soul)"}),o.jsx("option",{value:"singer-female",children:"ðŸ’« Female Singer (Pop/R&B)"})]}),o.jsxs("optgroup",{label:"ðŸ—£ï¸ Narration",children:[o.jsx("option",{value:"narrator",children:"ðŸ“¢ Narrator (Deep Voice)"}),o.jsx("option",{value:"spoken",children:"ðŸ’¬ Spoken Word"})]}),o.jsxs("optgroup",{label:"ðŸ§¬ Voice Cloning",children:[o.jsxs("option",{value:"cloned",disabled:!Ai,children:["âœ¨ Cloned Voice ",!Ai&&"(Upload sample first)"]}),Pi.length>0&&o.jsx("optgroup",{label:"ðŸ—„ï¸ Saved Voices",children:Pi.map(e=>o.jsxs("option",{value:`saved-${e.id}`,children:["ðŸ‘¤ ",e.name||"Unnamed Voice"]},e.id))})]})]}),o.jsxs("select",{value:Ze,onChange:e=>ei(e.target.value),style:{padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid #fbbf24",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},title:"Select Righteous Quality Output Format",children:[o.jsx("option",{value:"music",children:"ðŸŽµ Billboard Music Mix"}),o.jsx("option",{value:"social",children:"ðŸ“± Social Media Ready"}),o.jsx("option",{value:"podcast",children:"ðŸŽ™ï¸ Broadcast Podcast"}),o.jsx("option",{value:"tv",children:"ðŸ“º TV/Commercial Ready"})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("input",{type:"file",id:"voice-sample-upload",accept:"audio/*",onChange:async e=>{const t=e.target.files[0];if(t)if(t.size>10485760)n.error("File too large (max 10MB)");else{Ei(!0),n.loading("Uploading voice sample...",{id:"voice-upload"});try{const e=await ht(),r=new FileReader;r.readAsDataURL(t),r.onload=async()=>{try{const a=r.result,p=await fetch(`${i}/api/upload-asset`,{method:"POST",headers:e,body:JSON.stringify({data:a,fileName:`voice-sample-${Date.now()}-${t.name.replace(/\s+/g,"-")}`,mimeType:t.type||"audio/wav",assetType:"audio"})}),g=await p.json();if(!p.ok||!g.url)throw new Error(g.error||"Upload failed");if(Ti(g.url),Ke("cloned"),n.success('Voice sample uploaded! Model set to "Cloned Voice"',{id:"voice-upload"}),l.currentUser)try{const e=d(s,"users",l.currentUser?.uid);await c(e,{voiceSampleUrl:g.url,lastVoiceUpdate:Date.now()});const i={url:g.url,name:t.name.replace(/\.[^/.]+$/,""),createdAt:y(),type:"cloned"},r=await h(x(s,"users",l.currentUser?.uid,"voices"),i);Vi(e=>[{id:r.id,...i},...e]),n.success("Voice saved to library")}catch(o){}}catch(a){n.error("Failed to upload sample",{id:"voice-upload"})}finally{Ei(!1)}},r.onerror=()=>{n.error("Failed to read file"),Ei(!1)}}catch(r){n.error("Upload failed",{id:"voice-upload"}),Ei(!1)}}},style:{display:"none"}}),o.jsxs("button",{onClick:()=>document.getElementById("voice-sample-upload").click(),disabled:Ui,style:{padding:"10px 14px",borderRadius:"10px",background:Ai?"rgba(34, 197, 94, 0.1)":"rgba(255, 255, 255, 0.05)",border:Ai?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",color:Ai?"#22c55e":"white",fontSize:"0.85rem",cursor:"pointer",flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",transition:"all 0.2s"},children:[Ui?o.jsx(C,{size:16,className:"spin"}):o.jsx(z,{size:16}),Ai?"Voice Sample Attached âœ“":"Upload Voice Sample"]}),Ai&&o.jsx("button",{onClick:()=>{Ti(null),"cloned"===qe&&Ke("rapper")},style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"10px",color:"#ef4444",cursor:"pointer",padding:"10px"},title:"Remove sample",children:o.jsx(S,{size:16})})]}),("premium"===Qe||"cloned"===qe||qe.startsWith("saved-"))&&o.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",gap:"8px"},children:[Ni.length>0?o.jsxs("select",{value:Wi,onChange:e=>{Bi(e.target.value),localStorage.setItem("studio_elevenlabs_voice_id",e.target.value)},style:{width:"100%",padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:Wi?"1px solid #fbbf24":"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.85rem",outline:"none",cursor:"pointer"},children:[o.jsx("option",{value:"",children:"Select ElevenLabs Voice (Premium)"}),o.jsx("optgroup",{label:"Professional Models",children:Ni.map(e=>o.jsxs("option",{value:e.voice_id,children:[e.name," (",e.labels?.accent||e.labels?.gender||"Pro",")"]},e.voice_id))})]}):o.jsx("input",{type:"text",placeholder:"ElevenLabs Voice ID (Optional for Premium)",value:Wi,onChange:e=>{Bi(e.target.value),localStorage.setItem("studio_elevenlabs_voice_id",e.target.value)},style:{width:"100%",padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:Wi?"1px solid #fbbf24":"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.8rem",outline:"none"}}),Wi&&o.jsxs("div",{style:{position:"absolute",right:Ni.length>0?"30px":"10px",top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center",gap:"4px",pointerEvents:"none"},children:[o.jsx(w,{size:10,color:"#fbbf24",fill:"#fbbf24"}),o.jsx("span",{style:{fontSize:"0.65rem",color:"#fbbf24",fontWeight:"bold"},children:"PREMIUM"})]})]})]}),Pi.length>0&&o.jsxs("div",{style:{marginTop:"8px",background:"rgba(255,255,255,0.02)",borderRadius:"8px",padding:"10px"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",marginBottom:"6px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"My Voice Library"}),o.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Pi.map(e=>o.jsxs("div",{onClick:()=>{Ti(e.url),Ke("cloned"),n.success(`Voice "${e.name}" loaded`)},style:{background:Ai===e.url?"rgba(139, 92, 246, 0.2)":"rgba(255,255,255,0.05)",border:Ai===e.url?"1px solid #8b5cf6":"1px solid rgba(255,255,255,0.1)",borderRadius:"16px",padding:"4px 10px",fontSize:"0.75rem",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[o.jsx(N,{size:10}),e.name||"Voice",o.jsx(S,{size:12,onClick:async i=>{if(i.stopPropagation(),window.confirm("Delete this voice from your library?"))try{await p(d(s,"users",l.currentUser?.uid,"voices",e.id)),Vi(i=>i.filter(i=>i.id!==e.id)),Ai===e.url&&(Ti(null),Ke("rapper")),n.success("Voice deleted")}catch(t){n.error("Failed to delete voice")}},onMouseEnter:e=>e.currentTarget.style.color="#ef4444",onMouseLeave:e=>e.currentTarget.style.color="inherit",style:{marginLeft:"4px",opacity:.5,cursor:"pointer"}})]},e.id))})]}),("rapper"===qe||"rapper-female"===qe)&&o.jsx("select",{value:ii,onChange:e=>ti(e.target.value),style:{padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(236, 72, 153, 0.5)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:o.jsxs("optgroup",{label:"ðŸ”¥ Rap Flow",children:[o.jsx("option",{value:"aggressive",children:"ðŸ’¥ Aggressive"}),o.jsx("option",{value:"melodic",children:"ðŸŽµ Melodic"}),o.jsx("option",{value:"trap",children:"ðŸ”¥ Trap (Triplets)"}),o.jsx("option",{value:"drill",children:"ðŸ‡¬ðŸ‡§ Drill (UK)"}),o.jsx("option",{value:"boom-bap",children:"ðŸ“» Boom-Bap"}),o.jsx("option",{value:"fast",children:"âš¡ Fast Flow"}),o.jsx("option",{value:"chill",children:"ðŸ˜Ž Chill"}),o.jsx("option",{value:"hype",children:"ðŸ”Š Hype"})]})}),("singer"===qe||"singer-female"===qe)&&o.jsx("select",{value:ri,onChange:e=>oi(e.target.value),style:{padding:"10px 14px",borderRadius:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(139, 92, 246, 0.5)",color:"white",fontSize:"0.85rem",cursor:"pointer",outline:"none"},children:o.jsxs("optgroup",{label:"ðŸŽ¶ Genre",children:[o.jsx("option",{value:"r&b",children:"ðŸ’œ R&B / Soul"}),o.jsx("option",{value:"pop",children:"ðŸŒŸ Pop"}),o.jsx("option",{value:"hip-hop",children:"ðŸ”¥ Hip-Hop"}),o.jsx("option",{value:"soul",children:"ðŸŽ· Gospel/Soul"})]})}),o.jsx("button",{onClick:()=>{jt()},disabled:ni,style:{padding:"10px 20px",borderRadius:"10px",background:ni?"rgba(139, 92, 246, 0.3)":"rgba(139, 92, 246, 0.5)",border:"1px solid rgba(139, 92, 246, 0.6)",color:"#8b5cf6",fontWeight:"600",fontSize:"0.9rem",cursor:ni?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:ni?.7:1},children:ni?o.jsxs(o.Fragment,{children:[o.jsx(C,{size:16,className:"spin"}),"Creating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(L,{size:16}),"Create Vocal"]})}),o.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(Ue.lyrics),n.success("Lyrics copied!")},style:{padding:"10px 16px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-secondary)",fontWeight:"500",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx(F,{size:14}),"Copy Lyrics"]}),Pe.lyricsVocal&&Pe.lyricsVocal.startsWith("data:audio")&&o.jsxs("button",{onClick:()=>{const e=document.createElement("a");e.href=Pe.lyricsVocal;const i=Pe.lyricsVocal.includes("audio/wav")?"wav":"mp3";e.download=`${re||"lyrics"}-${qe}.${i}`,e.click()},style:{padding:"10px 16px",borderRadius:"10px",background:"rgba(34, 197, 94, 0.15)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#22c55e",fontWeight:"600",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx(H,{size:14}),"Download Audio"]})]})]}),o.jsx("div",{className:"generator-grid-unified",style:{gap:X?"0.75rem":"1rem",touchAction:"pan-y"},children:ut.map(i=>o.jsx(ie,{slot:i.key,agentId:Ae[i.key],icon:i.icon,title:Ae[i.key]?e.find(e=>e.id===Ae[i.key])?.name:i.title,subtitle:i.subtitle,color:i.color,output:Ue[i.key],isLoading:We&&Ae[i.key],mediaType:i.mediaType,mediaUrl:"audio"===i.key?Pe.audio:"lyrics"===i.key?Pe.vocals||Pe.lyricsVocal:"visual"===i.key?Pe.image:"video"===i.key?Pe.video:null,onGenerateMedia:"audio"===i.key?vt:"lyrics"===i.key?jt:"visual"===i.key?kt:"video"===i.key?Ct:null,isGeneratingMedia:"audio"===i.key?Oe.audio:"lyrics"===i.key?Oe.vocals:"visual"===i.key?Oe.image:"video"===i.key&&Oe.video,onRegenerate:()=>ft(i.key),onEdit:e=>$t(i.key,e),onDelete:()=>Dt(i.key),onDownload:()=>Rt(i.key),onSpeak:()=>mt(Ue[i.key],i.key),isSpeaking:Ne===i.key,onMaximize:()=>li(i.key),onUploadDna:"visual"===i.key?e=>wt("visual",e):"audio"===i.key?e=>wt("audio",e):"video"===i.key?e=>wt("video",e):"lyrics"===i.key?e=>wt("lyrics",e):null,dnaUrl:"visual"===i.key?Gi:"audio"===i.key?_i:"video"===i.key?qi:"lyrics"===i.key?Qi:null,isUploadingDna:nt[i.key],onClearDna:()=>{"visual"===i.key&&Yi(null),"audio"===i.key&&Ji(null),"video"===i.key&&Ki(null),"lyrics"===i.key&&Xi(null)}},i.key))}),o.jsx(te,{outputs:Ue,mediaUrls:Pe,songIdea:re,finalMixPreview:pi,creatingFinalMix:di,musicVideoUrl:mi,generatingMusicVideo:xi,handleGenerateProfessionalMusicVideo:async()=>{if(!xi)if(Pe.audio&&(Ue.video||Pe.image)){ui(!0),n.loading("ðŸŽ¬ Syncing audio with video beats (~2-3 min)...",{id:"prof-video"});try{const e=await ht(),t=e.Authorization?"/api/generate-synced-video":"/api/generate-synced-video-test",r=await fetch(`${i}${t}`,{method:"POST",headers:{"Content-Type":"application/json",...e},body:JSON.stringify({audioUrl:Pe.audio,videoPrompt:Ue.video||`A high-fidelity cinematic music video for a ${se} song`,imageUrl:Pe.image,videoUrl:Pe.video,songTitle:re||"Untitled",style:se||"cinematic",duration:"Extended"===je?180:"Radio Edit"===je?150:"Full Song"===je?90:60})}),o=await r.json();r.ok?o.videoUrl?(yi(o.videoUrl),pi&&gi(e=>({...e,musicVideoUrl:o.videoUrl,musicVideoGenerated:!0,bpm:o.bpm,beatCount:o.beats})),n.success(`ðŸŽ¬ Image to video created! (${o.duration}s, ${o.bpm} BPM)`,{id:"prof-video"})):o.jobId&&n.success(`ðŸŽ¬ Video queued for processing (Job: ${o.jobId.substring(0,8)}...)`,{id:"prof-video"}):503===r.status?n.error("âŒ Video API not configured",{id:"prof-video"}):n.error(`âŒ ${o.error||"Video sync failed"}`,{id:"prof-video"})}catch(e){n.error("âŒ Image to video generation failed",{id:"prof-video"})}finally{ui(!1)}}else n.error("Need beat audio and video concept to sync")},handleCreateFinalMix:It,handleCreateProject:At,setShowPreviewModal:bi,visualType:Di,setVisualType:$i,isMobile:X,orchestratorBpm:De})]}),si&&ut.find(e=>e.key===si)&&o.jsx("div",{style:{position:"fixed",inset:0,background:"linear-gradient(180deg, rgba(0,0,0,0.98) 0%, rgba(10,10,20,0.98) 100%)",display:"flex",alignItems:X?"flex-start":"center",justifyContent:"center",zIndex:2500,padding:X?"10px":"20px",overflowY:"auto"},onClick:()=>li(null),children:o.jsxs("div",{style:{background:"rgba(10, 10, 20, 0.95)",borderRadius:X?"16px":"24px",border:"1px solid rgba(255,255,255,0.1)",width:"100%",maxWidth:"800px",maxHeight:X?"95vh":"90vh",overflow:"auto",display:"flex",flexDirection:"column",marginTop:X?"10px":"0"},onClick:e=>e.stopPropagation(),children:[o.jsxs("div",{style:{padding:X?"12px 16px":"16px 24px",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(10px)",zIndex:10},children:[o.jsx("h3",{style:{margin:0,fontSize:X?"1rem":"1.2rem",fontWeight:"700"},children:ut.find(e=>e.key===si)?.title}),o.jsxs("button",{onClick:()=>li(null),style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"10px",padding:X?"6px 10px":"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",color:"#ef4444",fontWeight:"600",fontSize:X?"0.8rem":"0.9rem",transition:"all 0.2s",minWidth:"36px",minHeight:"36px"},children:[o.jsx(S,{size:16}),!X&&"Close"]})]}),o.jsx("div",{style:{padding:X?"12px":"24px",flex:1,overflowY:"auto"},children:(()=>{const e=ut.find(e=>e.key===si);return o.jsx(ie,{slot:e.key,agentId:Ae[e.key],icon:e.icon,title:e.title,subtitle:e.subtitle,color:e.color,output:Ue[e.key],isLoading:We&&Ae[e.key],mediaType:e.mediaType,mediaUrl:"audio"===e.key?Pe.audio:"lyrics"===e.key?Pe.vocals:"visual"===e.key?Pe.image:"video"===e.key?Pe.video:null,onGenerateMedia:"audio"===e.key?vt:"lyrics"===e.key?jt:"visual"===e.key?kt:"video"===e.key?Ct:null,isGeneratingMedia:"audio"===e.key?Oe.audio:"lyrics"===e.key?Oe.vocals:"visual"===e.key?Oe.image:"video"===e.key&&Oe.video,onRegenerate:()=>ft(e.key),onEdit:i=>$t(e.key,i),onDelete:()=>Dt(e.key),onDownload:()=>Rt(e.key),onSpeak:()=>mt(Ue[e.key],e.key),isSpeaking:Ne===e.key,onUploadDna:"visual"===e.key?e=>wt("visual",e):"audio"===e.key?e=>wt("audio",e):"video"===e.key?e=>wt("video",e):"lyrics"===e.key?e=>wt("lyrics",e):null,dnaUrl:"visual"===e.key?Gi:"audio"===e.key?_i:"video"===e.key?qi:"lyrics"===e.key?Qi:null,isUploadingDna:nt[e.key],onClearDna:()=>{"visual"===e.key&&Yi(null),"audio"===e.key&&Ji(null),"video"===e.key&&Ki(null),"lyrics"===e.key&&Xi(null)}},`max-${e.key}`)})()}),o.jsx("div",{style:{padding:X?"12px":"16px 24px",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"center",background:"rgba(0,0,0,0.3)"},children:o.jsxs("button",{onClick:()=>li(null),style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(220, 38, 38, 0.2))",border:"1px solid rgba(239, 68, 68, 0.5)",borderRadius:"12px",padding:X?"10px 20px":"14px 32px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer",color:"#ef4444",fontWeight:"700",fontSize:X?"0.9rem":"1rem",transition:"all 0.2s",boxShadow:"0 4px 20px rgba(239, 68, 68, 0.2)"},children:[o.jsx(S,{size:20}),X?"Close":"Close Preview"]})})]})}),Object.values(Ue).some(Boolean)&&o.jsxs("div",{style:{padding:"16px 24px",background:"rgba(0,0,0,0.8)",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",bottom:0,backdropFilter:"blur(10px)"},children:[o.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:[Object.values(Ue).filter(Boolean).length,"/4 generators complete â€¢",Object.values(Pe).filter(Boolean).length," media assets"]}),o.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o.jsxs("button",{onClick:()=>{const e={project:re,timestamp:(new Date).toISOString(),outputs:Ue,settings:{language:ne,style:se,model:me}},i=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(i),r=document.createElement("a");r.href=t,r.download=`${re||"project"}-export.json`,r.click(),URL.revokeObjectURL(t),n.success("Exported!")},style:{padding:"12px 20px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(H,{size:16}),"Export"]}),o.jsxs("button",{onClick:()=>Ye(!0),style:{padding:"12px 28px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",fontSize:"1rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.4)"},children:[o.jsx(G,{size:18}),"Save to Project"]})]})]}),Ge&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3},onClick:()=>Ye(!1),children:o.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:"24px",padding:"28px",maxWidth:"420px",width:"90%",border:"1px solid rgba(255,255,255,0.1)"},onClick:e=>e.stopPropagation(),children:[o.jsx("h3",{style:{margin:"0 0 20px",fontSize:"1.3rem",fontWeight:"700"},children:"Save to Project"}),o.jsx("input",{type:"text",value:Fe,onChange:e=>He(e.target.value),placeholder:re||"Project name...",style:{width:"100%",padding:"14px 18px",borderRadius:"12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"1rem",marginBottom:"20px",outline:"none"}}),o.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o.jsx("button",{onClick:()=>Ye(!1),className:"btn-pill glass",style:{flex:1,padding:"14px"},children:"Cancel"}),o.jsx("button",{onClick:At,className:"btn-pill primary",style:{flex:1,padding:"14px",fontWeight:"700"},children:"Save Project"})]})]})}),ji&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001,padding:"20px"},children:o.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",borderRadius:"20px",padding:"32px",border:"1px solid rgba(34, 197, 94, 0.4)",maxWidth:"450px",width:"100%",textAlign:"center",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[o.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"rgba(34, 197, 94, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:o.jsx(G,{size:32,color:"#22c55e"})}),o.jsx("h2",{style:{margin:"0 0 12px",fontSize:"1.4rem",fontWeight:"700",color:"white"},children:"Project Saved! ðŸŽ‰"}),o.jsxs("p",{style:{margin:"0 0 24px",color:"rgba(255,255,255,0.7)",fontSize:"0.95rem",lineHeight:"1.5"},children:['Your project "',Fe||re||"Untitled",'" has been saved with ',Object.values(Ue).filter(Boolean).length," assets."]}),o.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"12px",marginBottom:"24px",textAlign:"left"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.4)",fontWeight:"700",textTransform:"uppercase",marginBottom:"10px"},children:"Generated Content"}),Object.entries(Ue).filter(([e,i])=>null!==i).map(([e,i])=>{const t=ut.find(i=>i.key===e);return o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px",fontSize:"0.85rem",color:"rgba(255,255,255,0.8)"},children:[o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:t?.color||"#8b5cf6"}}),t?.title||e]},e)})]}),o.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o.jsx("button",{onClick:()=>{wi(!1),a?.()},className:"btn-pill glass",style:{flex:1,padding:"14px",fontWeight:"600"},children:"Go to Hub"}),o.jsxs("button",{onClick:()=>{wi(!1),bi(!0)},className:"btn-pill primary",style:{flex:1,padding:"14px",fontWeight:"700",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[o.jsx(M,{size:18}),"Preview"]})]})]})}),zi&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002,padding:"20px"},children:o.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",borderRadius:"20px",padding:"32px",border:"1px solid rgba(245, 158, 11, 0.4)",maxWidth:"450px",width:"100%",textAlign:"center",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[o.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:o.jsx(G,{size:32,color:"#f59e0b"})}),o.jsx("h2",{style:{margin:"0 0 12px",fontSize:"1.4rem",fontWeight:"700",color:"white"},children:"Save Your Work?"}),o.jsxs("p",{style:{margin:"0 0 24px",color:"rgba(255,255,255,0.7)",fontSize:"0.95rem",lineHeight:"1.5"},children:["You have ",Object.values(gt).filter(Boolean).length+Object.values(xt).filter(Boolean).length," unsaved creations. Would you like to save before leaving?"]}),o.jsxs("div",{style:{display:"flex",gap:"12px",flexDirection:"column"},children:[o.jsxs("button",{onClick:()=>{Ci(!1),Ye(!0)},className:"btn-pill primary",style:{width:"100%",padding:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[o.jsx(G,{size:18}),"Save Project"]}),o.jsxs("div",{style:{display:"flex",gap:"12px",flexDirection:X?"column-reverse":"row"},children:[o.jsx("button",{onClick:()=>{Ci(!1)},className:"btn-pill glass",style:{flex:1,padding:"12px"},children:"Cancel"}),o.jsx("button",{onClick:()=>{Ci(!1),a?.()},className:"btn-pill secondary",style:{flex:1,padding:"12px"},children:"Discard & Exit"})]})]})]})}),hi&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:fi?"0":"20px"},onClick:e=>{e.target===e.currentTarget&&bi(!1)},children:o.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",borderRadius:fi?"0":"20px",padding:fi||X?"16px":"24px",border:fi?"none":"1px solid rgba(148, 163, 184, 0.2)",width:"100%",maxWidth:fi?"100%":"900px",height:fi?"100%":"auto",maxHeight:fi?"100%":"90vh",overflowY:"auto",position:"relative",boxShadow:fi?"none":"0 25px 80px rgba(0,0,0,0.5)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",position:"sticky",top:0,background:fi?"rgba(15, 23, 42, 0.95)":"transparent",padding:fi?"8px 0 16px":"0",zIndex:5},children:[o.jsxs("h2",{style:{margin:0,fontSize:fi?"1.75rem":"1.5rem",fontWeight:"700",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx(M,{size:fi?28:24,color:"#8b5cf6"}),"Preview All Creations"]}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsxs("button",{onClick:()=>vi(!fi),style:{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"10px",padding:"10px",cursor:"pointer",color:"white",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.85rem"},title:fi?"Minimize":"Maximize",children:[o.jsx(Y,{size:18}),fi?"Minimize":"Maximize"]}),o.jsx("button",{onClick:()=>bi(!1),style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"10px",padding:"10px",cursor:"pointer",color:"#ef4444"},children:o.jsx(S,{size:20})})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:X?"1fr":"repeat(2, 1fr)",gap:X?"16px":fi?"32px":"24px",marginBottom:"24px"},children:[o.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",borderRadius:"16px",padding:X?"12px":"16px",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[o.jsxs("h3",{style:{margin:0,color:"#a78bfa",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(V,{size:18}),"Lyrics"]}),o.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:gt.lyrics?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:gt.lyrics?"#22c55e":"rgba(255,255,255,0.5)"},children:gt.lyrics?"âœ“ Ready":"Pending"})]}),o.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"16px",minHeight:fi?"300px":"180px",maxHeight:fi?"400px":"200px",overflowY:"auto",fontSize:"1rem",lineHeight:"1.7",color:gt.lyrics?"rgba(255,255,255,0.9)":"rgba(255,255,255,0.4)",whiteSpace:"pre-wrap",wordBreak:"break-word",fontStyle:gt.lyrics?"normal":"italic",fontFamily:"'Georgia', 'Times New Roman', serif"},children:gt.lyrics||"No lyrics generated yet. Use the Lyrics generator to create lyrics."})]}),o.jsxs("div",{style:{background:"rgba(6, 182, 212, 0.1)",borderRadius:"16px",padding:X?"12px":"16px",border:"1px solid rgba(6, 182, 212, 0.3)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[o.jsxs("h3",{style:{margin:0,color:"#22d3ee",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(D,{size:18}),"Beat Audio"]}),o.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:xt.audio?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:xt.audio?"#22c55e":"rgba(255,255,255,0.5)"},children:xt.audio?"âœ“ Ready":"Pending"})]}),o.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"16px",minHeight:"100px"},children:xt.audio?o.jsxs(o.Fragment,{children:[o.jsx("audio",{controls:!0,style:{width:"100%",marginBottom:"12px"},src:f(xt.audio),onError:e=>{}}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx(L,{size:14}),"Audio ready to play"]})]}):o.jsx("div",{style:{textAlign:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem",padding:"24px",fontStyle:"italic"},children:"No audio generated yet. Generate a beat to preview audio."})})]}),o.jsxs("div",{style:{background:"rgba(236, 72, 153, 0.1)",borderRadius:"16px",padding:X?"12px":"16px",border:"1px solid rgba(236, 72, 153, 0.3)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[o.jsxs("h3",{style:{margin:0,color:"#f472b6",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(T,{size:18}),"Cover Visual"]}),o.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:xt.image?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:xt.image?"#22c55e":"rgba(255,255,255,0.5)"},children:xt.image?"âœ“ Ready":"Pending"})]}),o.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"8px",aspectRatio:"1",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:xt.image?o.jsx("img",{src:v(xt.image),alt:"Cover Art",style:{width:"100%",height:"100%",borderRadius:"8px",objectFit:"cover"},onError:e=>{e.target.style.display="none"}}):o.jsx("div",{style:{textAlign:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem",fontStyle:"italic"},children:"No image generated yet"})})]}),o.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",borderRadius:"16px",padding:X?"12px":"16px",border:mi?"1px solid rgba(34, 197, 94, 0.5)":"1px solid rgba(245, 158, 11, 0.3)",boxShadow:mi?"0 0 15px rgba(34, 197, 94, 0.2)":"none"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[o.jsxs("h3",{style:{margin:0,color:mi?"#22c55e":"#fbbf24",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[mi?o.jsx(w,{size:18}):o.jsx(W,{size:18}),mi?"Professional Sync":"Concept Video"]}),o.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",background:mi||xt.video?"rgba(34, 197, 94, 0.2)":"rgba(100,100,100,0.2)",color:mi||xt.video?"#22c55e":"rgba(255,255,255,0.5)"},children:mi?"âœ“ Synced":xt.video?"âœ“ Concept":"Pending"})]}),o.jsx("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:"12px",padding:"8px",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:mi||xt.video?o.jsx("video",{src:j(mi||xt.video),controls:!0,style:{width:"100%",height:"100%",borderRadius:"8px",objectFit:"contain",backgroundColor:"#000"},onError:e=>{}}):o.jsx("div",{style:{textAlign:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem",fontStyle:"italic"},children:"No video generated yet"})})]})]}),o.jsx("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(148, 163, 184, 0.2)",marginBottom:"20px"},children:o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",fontSize:"0.9rem"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Lyrics"}),o.jsx("div",{style:{fontWeight:"700",color:"#a78bfa",fontSize:"1.1rem"},children:gt.lyrics?`${gt.lyrics.length} chars`:"â€”"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Audio"}),o.jsx("div",{style:{fontWeight:"700",color:"#22d3ee",fontSize:"1.1rem"},children:xt.audio?"âœ“ Ready":"â€”"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Visual"}),o.jsx("div",{style:{fontWeight:"700",color:"#f472b6",fontSize:"1.1rem"},children:xt.image?"âœ“ Ready":"â€”"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontSize:"0.8rem"},children:"Video"}),o.jsx("div",{style:{fontWeight:"700",color:"#fbbf24",fontSize:"1.1rem"},children:xt.video?"âœ“ Ready":"â€”"})]})]})}),o.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>bi(!1),style:{flex:1,minWidth:"120px",padding:"14px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",fontWeight:"600",cursor:"pointer",fontSize:"0.95rem"},children:"Close Preview"}),o.jsxs("button",{onClick:()=>{bi(!1),Ye(!0)},style:{flex:1,minWidth:"140px",padding:"14px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",border:"none",color:"white",fontWeight:"700",cursor:"pointer",fontSize:"0.95rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[o.jsx(G,{size:18}),"Save Project"]}),o.jsx("button",{onClick:()=>{bi(!1),It()},disabled:di||!Object.values(gt).some(Boolean),style:{flex:1,minWidth:"140px",padding:"14px",borderRadius:"12px",background:di||!Object.values(gt).some(Boolean)?"rgba(34, 197, 94, 0.2)":"rgba(34, 197, 94, 0.5)",border:"1px solid rgba(34, 197, 94, 0.6)",color:"#22c55e",fontWeight:"600",cursor:di||!Object.values(gt).some(Boolean)?"not-allowed":"pointer",fontSize:"0.95rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",opacity:Object.values(gt).some(Boolean)?1:.5},children:di?o.jsxs(o.Fragment,{children:[o.jsx(C,{size:16,className:"spin"}),"Creating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(w,{size:16}),"Final Mix"]})})]})]})}),o.jsx("style",{children:"\n        .loading-dots {\n          display: flex;\n          gap: 4px;\n        }\n        .loading-dots span {\n          width: 8px;\n          height: 8px;\n          border-radius: 50%;\n          animation: bounce 1.4s infinite ease-in-out both;\n        }\n        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }\n        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }\n        .loading-dots span:nth-child(3) { animation-delay: 0s; }\n        \n        @keyframes bounce {\n          0%, 80%, 100% { transform: scale(0); opacity: 0.5; }\n          40% { transform: scale(1); opacity: 1; }\n        }\n        \n        .spin {\n          animation: spin 1s linear infinite;\n        }\n        \n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        \n        .animate-fadeIn {\n          animation: fadeIn 0.3s ease;\n        }\n        \n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n      "})]}):null}export{re as default};
