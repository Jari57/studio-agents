const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CanvasView-CcOEcjTU.js","assets/react-vendor-03wl4UEb.js","assets/vendor-DPgDnBIk.js","assets/icons-DT0eBrXO.js","assets/DashboardView-DcRIo1kI.js","assets/index-CGfkPFTm.js","assets/constants-hRVrvfLk.js","assets/index-BQbz1uWo.css","assets/firebase-DgNc3hGb.js","assets/firebase-C6j5ZoHL.js","assets/StudioOrchestratorV2-Cengt5_T.js","assets/QuickWorkflow-BzjLXf04.js","assets/ProjectHubV3-B4kx7YcU.js","assets/project-templates-Dhj7c41b.js","assets/NewsHub-CH4P9yYh.js","assets/AdminAnalytics-uO0FPUrt.js"])))=>i.map(i=>d[i]);
import{t as e,A as t,_ as r}from"./index-CGfkPFTm.js";import{r as i,z as a,j as o,R as s}from"./react-vendor-03wl4UEb.js";import{p as n}from"./vendor-DPgDnBIk.js";import{a as l,d,u as c,b as p}from"./firebase-DgNc3hGb.js";import{A as u,B as g,g as x}from"./constants-hRVrvfLk.js";import{S as m,r as h,h as y,s as b,F as f,t as v,B as j,G as w,u as S,v as k,w as z,x as C,y as I,z as N,D as A,X as T,C as R,M as U,I as P,J as $,K as B,N as E,P as _,V as D,O as W,Q as M,W as O,Y as L,_ as V,$ as F,a0 as H,a1 as G,a2 as q,a3 as J,a4 as Y,a5 as K,Z as Q,a6 as X,a7 as Z,a8 as ee,a9 as te,aa as re,c as ie,m as ae,e as oe,ab as se,ac as ne,ad as le,ae as de,af as ce,j as pe,ag as ue,R as ge,ah as xe,ai as me,q as he,p as ye,U as be,aj as fe,g as ve,ak as je,al as we,a as Se,am as ke,l as ze,an as Ce,T as Ie,ao as Ne,ap as Ae,aq as Te,ar as Re,A as Ue,d as Pe,L as $e,as as Be,at as Ee,au as _e,av as De,aw as We,ax as Me,ay as Oe}from"./icons-DT0eBrXO.js";import{b as Le,e as Ve,f as Fe,u as He,o as Ge,g as qe,h as Je,G as Ye,s as Ke,O as Qe,c as Xe,a as Ze,d as et}from"./firebase-C6j5ZoHL.js";let tt=!1;const rt="pitch";function it(){tt=!0,localStorage.setItem("demoMode","true")}function at(){return tt?(tt=!1,localStorage.removeItem("demoMode")):it(),tt}function ot(){return tt}new URLSearchParams(window.location.search).get("demo")===rt&&(tt=!0,localStorage.setItem("demoMode","true")),"true"===localStorage.getItem("demoMode")&&(tt=!0);const st={ghostwriter:"**Verse 1:**\nI came up from the basement, now I'm touching ceilings\nEvery scar on my heart, turned into healing\nThey said I wouldn't make it, look at me now\nStack my paper to the sky, take a bow\n\n**Hook:**\nStarted from the bottom, now we at the top\nDreams in my pocket, never gonna stop\nEvery door they closed, I kicked it down\nKing of my city, wear that crown\n\n**Verse 2:**\nMidnight sessions, pouring out my soul\nEvery word I write is making me whole\nThey tried to dim my light, but I shine brighter\nEvery struggle made me a fighter\n\n---\n*Generated in Demo Mode - Connect API for personalized lyrics*","release-strategist":"## Release Strategy Analysis\n\n**Commercial Viability: 8.5/10**\nYour track has strong commercial potential with its melodic hook and contemporary production.\n\n**Key Strengths:**\n- Catchy melodic structure that supports playlist placement\n- Production quality meets industry standards\n- Target demographic alignment: 18-34 urban/suburban\n\n**Recommended Release Strategy:**\n1. **Pre-save Campaign** (2 weeks before) - Build anticipation with teaser content\n2. **Playlist Pitching** - Target RapCaviar, Most Necessary, and genre-specific playlists\n3. **Content Rollout** - 3 TikTok clips, 2 Instagram Reels, 1 YouTube Short\n\n**Optimal Release Day:** Friday (maximizes first-week streaming)\n\n---\n*Generated in Demo Mode - Connect API for real analysis*","sample-hunter":'## Sample Recommendations\n\nBased on your vibe, here are hidden gems from the crates:\n\n**1. "Distant Dreams" - The Soul Searchers (1974)**\n- BPM: 92 | Key: Am\n- Flip potential: That string section at 1:45 is untouched\n- Clearance: Medium difficulty (independent label)\n\n**2. "Morning Light" - Sunrise Orchestra (1978)**\n- BPM: 88 | Key: Dm  \n- Flip potential: Piano loop at intro, drum break at 2:30\n- Clearance: Easy (public domain in most territories)\n\n**3. "Urban Poetry" - City Jazz Ensemble (1982)**\n- BPM: 95 | Key: Gm\n- Flip potential: Bass line throughout, horn stabs at chorus\n- Clearance: Contact rights holder directly\n\n---\n*Generated in Demo Mode - Connect API for real sample discovery*',"visual-director":'## Music Video Treatment\n\n**Concept: "Rise & Reign"**\n\n**Visual Theme:** Contrast between struggle and success, using split-screen storytelling\n\n**Key Scenes:**\n1. **Opening (0:00-0:15):** Artist in dimly lit room, writing lyrics by candlelight\n2. **Verse 1 (0:15-0:45):** Flashback montage - humble beginnings, rejection letters burning\n3. **Hook (0:45-1:15):** Transition to sold-out venue, crowd going crazy\n4. **Verse 2 (1:15-1:45):** Behind-the-scenes studio footage, team celebration\n5. **Outro (1:45-2:00):** Artist on rooftop at sunrise, city below\n\n**Color Palette:** Deep blues and blacks for past, gold and white for present\n\n**Estimated Budget:** $15,000 - $25,000\n\n---\n*Generated in Demo Mode - Connect API for full creative treatment*',"brand-architect":"## Brand Identity Blueprint\n\n**Artist Archetype:** The Visionary Pioneer\n\n**Core Brand Pillars:**\n1. **Authenticity** - Raw, unfiltered storytelling\n2. **Innovation** - Pushing sonic boundaries\n3. **Community** - Elevating the culture\n\n**Visual Identity:**\n- Primary Colors: Deep purple (#6B21A8), Gold (#F59E0B)\n- Typography: Bold sans-serif for headlines, clean serif for body\n- Logo Concept: Abstract crown merging with sound wave\n\n**Voice & Tone:**\n- Confident but not arrogant\n- Inspirational without being preachy\n- Street-smart with intellectual depth\n\n**Content Themes:**\n- Studio sessions & process\n- Community spotlights\n- Personal growth journey\n\n---\n*Generated in Demo Mode - Connect API for full brand strategy*","tour-architect":'## Tour Routing Proposal\n\n**Tour Name:** "The Ascension Tour"\n\n**Phase 1: Regional Circuit (8 dates)**\n- Week 1: Atlanta â†’ Charlotte â†’ Raleigh\n- Week 2: DC â†’ Philly â†’ NYC\n- Week 3: Boston â†’ Brooklyn\n\n**Venue Recommendations:**\n- 500-800 cap rooms for intimate energy\n- Focus on venues with strong local press relationships\n- Priority: Rooms with quality sound systems\n\n**Budget Estimate:**\n- Venue costs: $2,500/night avg\n- Travel: $1,200/week\n- Crew (2 people): $3,000/week\n- Merch investment: $5,000 upfront\n\n**Projected Revenue:**\n- Ticket sales (70% capacity): $28,000\n- Merch: $8,000\n- Net profit potential: $12,000-$15,000\n\n---\n*Generated in Demo Mode - Connect API for real tour planning*',default:"## AI Response\n\nThank you for your input! Here's a thoughtful response based on your request:\n\n**Key Insights:**\n- Your concept shows strong creative potential\n- There are several strategic angles to explore\n- The market conditions favor this type of content\n\n**Recommendations:**\n1. Focus on authenticity and unique voice\n2. Build consistent content around your core message  \n3. Engage your community early and often\n4. Measure results and iterate quickly\n\n**Next Steps:**\n- Refine your core concept\n- Test with a small audience\n- Scale what works\n\n---\n*Generated in Demo Mode - Connect API for personalized AI assistance*"};const nt={container:{position:"fixed",bottom:"20px",right:"20px",padding:"12px 20px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"#000",borderRadius:"8px",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px",zIndex:9999,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",cursor:"pointer"},icon:"ðŸŽ­",text:"Demo Mode Active"},lt=e=>e?"object"==typeof e?e.url?e.url:e.b64_json?`data:image/png;base64,${e.b64_json}`:Array.isArray(e)&&e[0]?"string"==typeof e[0]?e[0]:e[0].url||null:null:"string"!=typeof e?null:e.startsWith("http")||e.startsWith("data:")||e.startsWith("blob:")||e.startsWith("/api/")?e:e.length>500?`data:image/png;base64,${e}`:e:null,dt=e=>{if(!e)return"";if("string"==typeof e){if(e.startsWith("blob:"))return e;if(e.startsWith("http")||e.startsWith("/api/"))return e;if(e.startsWith("data:")){if(e.length<1e5)return e;try{const t=e.split(",");if(2!==t.length)return e;const r=t[0].match(/:(.*?);/);if(!r)return e;const i=r[1],a=t[1];if(!a||a.length<100)return e;const o=atob(a);let s=o.length;const n=new Uint8Array(s);for(;s--;)n[s]=o.charCodeAt(s);const l=new Blob([n],{type:i});if(0===l.size)return e;return URL.createObjectURL(l)}catch(t){return e}}return e.length>100?dt(`data:audio/mpeg;base64,${e}`):e}if("object"==typeof e){if(e.url)return dt(e.url);if(e.audio)return dt(e.audio);if(e.audioUrl)return dt(e.audioUrl);if(Array.isArray(e)&&e[0]){const t=e[0];return dt("string"==typeof t?t:t.url||t.audio||t.audioUrl||"")}}return""},ct=e=>{if(!e)return"";if("string"==typeof e){if(e.startsWith("blob:")||e.startsWith("http")||e.startsWith("/api/"))return e;if(e.startsWith("data:"))try{const t=e.split(",");if(2!==t.length)return e;const r=t[0].match(/:(.*?);/);if(!r)return e;const i=r[1],a=atob(t[1]);let o=a.length;const s=new Uint8Array(o);for(;o--;)s[o]=a.charCodeAt(o);const n=new Blob([s],{type:i});return URL.createObjectURL(n)}catch(t){return e}return e}if("object"==typeof e){if(e.url)return e.url;if(e.video)return e.video;if(Array.isArray(e)&&e[0])return"string"==typeof e[0]?e[0]:e[0].url||e[0].video||""}return""},pt=s.lazy(()=>r(()=>import("./CanvasView-CcOEcjTU.js"),__vite__mapDeps([0,1,2,3]))),ut=s.lazy(()=>r(()=>import("./DashboardView-DcRIo1kI.js"),__vite__mapDeps([4,5,1,2,6,3,7,8,9]))),gt=s.lazy(()=>r(()=>import("./StudioOrchestratorV2-Cengt5_T.js"),__vite__mapDeps([10,5,1,2,6,3,7,8,9]))),xt=s.lazy(()=>r(()=>import("./QuickWorkflow-BzjLXf04.js"),__vite__mapDeps([11,1,2,6,3,8,9]))),mt=s.lazy(()=>r(()=>import("./ProjectHubV3-B4kx7YcU.js"),__vite__mapDeps([12,1,2,13,3,5,6,7,8,9]))),ht=s.lazy(()=>r(()=>import("./NewsHub-CH4P9yYh.js"),__vite__mapDeps([14,1,2,3])));s.lazy(()=>r(()=>import("./AdminAnalytics-uO0FPUrt.js"),__vite__mapDeps([15,1,2,3])));const yt=[{key:"idea",label:"IDEA",icon:m,color:"#a855f7",colorRgb:"168,85,247",assetTypes:[]},{key:"lyrics",label:"LYRICS",icon:oe,color:"#10b981",colorRgb:"16,185,129",assetTypes:["lyrics","text"]},{key:"beat",label:"BEAT",icon:U,color:"#a855f7",colorRgb:"168,85,247",assetTypes:["audio"]},{key:"vocals",label:"VOCALS",icon:F,color:"#ec4899",colorRgb:"236,72,153",assetTypes:["vocal"]},{key:"artwork",label:"ARTWORK",icon:B,color:"#f97316",colorRgb:"249,115,22",assetTypes:["image","visual"]},{key:"video",label:"VIDEO",icon:H,color:"#06b6d4",colorRgb:"6,182,212",assetTypes:["video"]},{key:"master",label:"MASTER",icon:xe,color:"#f59e0b",colorRgb:"245,158,11",assetTypes:["pro"]}],bt=({children:e,asset:t,fallback:r=null})=>{try{return t&&"object"==typeof t?e:r||o.jsx("div",{style:{padding:"12px",background:"rgba(239,68,68,0.1)",borderRadius:"8px",color:"rgba(239,68,68,0.8)",fontSize:"0.8rem"},children:"Invalid asset data"})}catch(i){return r||o.jsx("div",{style:{padding:"12px",background:"rgba(239,68,68,0.1)",borderRadius:"8px",color:"rgba(239,68,68,0.8)",fontSize:"0.8rem"},children:"Failed to render asset"})}},ft=e=>e&&"object"==typeof e?{...e,id:e.id||`proj_${crypto.randomUUID()}`,title:"string"==typeof e.title?e.title:"Untitled Project",assets:Array.isArray(e.assets)?e.assets.filter(e=>e&&"object"==typeof e):[],agents:Array.isArray(e.agents)?e.agents:[],tags:Array.isArray(e.tags)?e.tags:[],createdAt:e.createdAt||(new Date).toISOString()}:null;class vt extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?o.jsxs("div",{style:{padding:"24px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"12px"},children:"âš "}),o.jsxs("h3",{style:{margin:"0 0 8px",color:"var(--text-primary)"},children:[this.props.name||"Section"," temporarily unavailable"]}),o.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"16px"},children:"This section encountered an issue. Click below to reload it."}),o.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid var(--border-color)",background:"var(--bg-secondary)",color:"var(--text-primary)",cursor:"pointer"},children:"Try Again"})]}):this.props.children}}const jt=()=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"40px",color:"var(--text-secondary)"},children:[o.jsx("div",{style:{width:"24px",height:"24px",border:"2px solid rgba(168,85,247,0.2)",borderTopColor:"#a855f7",borderRadius:"50%",animation:"spin 1s linear infinite",marginRight:"12px"}}),"Loading..."]}),wt=[{id:"welcome",title:"Welcome to The Studio",content:"16 AI agents ready to help you write, produce, and grow your music career.",detail:"Pick an agent to start. That's it."}],St=[{id:"pro",label:"Pro Studio",icon:xe,desc:"Full production suite",color:"var(--color-purple)"},{id:"vybing",label:"Vybing",icon:U,desc:"Quick beat ideas",color:"var(--color-cyan)"},{id:"mixtapes",label:"Mixtapes",icon:W,desc:"Curated playlists",color:"var(--color-orange)"},{id:"video",label:"Video",icon:H,desc:"Visual content",color:"var(--color-pink)"},{id:"scores",label:"Scores",icon:L,desc:"Cinematic composition",color:"var(--color-emerald)"},{id:"moves",label:"Moves",icon:q,desc:"Dance & Choreo",color:"var(--color-yellow)"},{id:"music_videos",label:"Music Videos",icon:me,desc:"Full production clips",color:"var(--color-red)"},{id:"social",label:"Social Brand",icon:$,desc:"Grow your audience",color:"var(--color-blue)"}],kt={text:1,lyrics:1,generate:1,vocal:2,speech:2,voice:2,beat:5,audio:5,music:5,image:3,video:15,"video-synced":20,orchestrate:8,translate:1,mix:10,master:15,default:1},zt=[{command:"open [agent]",description:"Launch an agent",example:'"Open Ghostwriter"',category:"Navigation"},{command:"go to [section]",description:"Navigate to dashboard, hub, news, agents",example:'"Go to hub"',category:"Navigation"},{command:"generate",description:"Start generation with current prompt",example:'"Generate"',category:"Actions"},{command:"clear",description:"Clear the prompt",example:'"Clear prompt"',category:"Actions"},{command:"read back",description:"Read the prompt aloud",example:'"Read back"',category:"Actions"},{command:"reference [type] DNA",description:"Upload visual/audio/lyrics DNA",example:'"Reference visual DNA"',category:"Creation"},{command:"set genre to [genre]",description:"Change musical genre",example:'"Set genre to Country"',category:"Settings"},{command:"set duration to [time]",description:"Change generation length",example:'"Set duration to 1 minute"',category:"Settings"},{command:"switch theme",description:"Toggle dark/light mode",example:'"Switch theme"',category:"Settings"},{command:"stop",description:"Stop listening",example:'"Stop listening"',category:"Voice"}],Ct=[{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",provider:"Google",description:"Fastest responses, great for quick tasks",tier:"free",speed:"(zap)(zap)(zap)",quality:"â˜…â˜…â˜…â˜†"},{id:"gemini-2.0-flash-lite",name:"Gemini 2.0 Flash-Lite",provider:"Google",description:"Ultra-fast, cost-effective",tier:"free",speed:"(zap)(zap)(zap)(zap)",quality:"â˜…â˜…â˜†â˜†"},{id:"gemini-1.5-pro",name:"Gemini 1.5 Pro",provider:"Google",description:"Best quality for complex prompts",tier:"pro",speed:"(zap)(zap)",quality:"â˜…â˜…â˜…â˜…"},{id:"gemini-1.5-flash",name:"Gemini 1.5 Flash",provider:"Google",description:"Balanced speed and quality",tier:"free",speed:"(zap)(zap)(zap)",quality:"â˜…â˜…â˜…â˜†"},{id:"gemini-1.5-flash-8b",name:"Gemini 1.5 Flash-8B",provider:"Google",description:"Lightweight, efficient",tier:"free",speed:"(zap)(zap)(zap)(zap)",quality:"â˜…â˜…â˜†â˜†"},{id:"gemini-2.5-pro-preview",name:"Gemini 2.5 Pro (Preview)",provider:"Google",description:"Latest capabilities, experimental",tier:"pro",speed:"(zap)(zap)",quality:"â˜…â˜…â˜…â˜…â˜…"},{id:"gemini-2.5-flash-preview",name:"Gemini 2.5 Flash (Preview)",provider:"Google",description:"Next-gen speed + quality",tier:"pro",speed:"(zap)(zap)(zap)",quality:"â˜…â˜…â˜…â˜…"},{id:"claude-3-5-sonnet",name:"Claude 3.5 Sonnet",provider:"Anthropic",description:"Excellent for creative writing",tier:"pro",speed:"(zap)(zap)",quality:"â˜…â˜…â˜…â˜…â˜…"},{id:"claude-3-5-haiku",name:"Claude 3.5 Haiku",provider:"Anthropic",description:"Fast and capable",tier:"pro",speed:"(zap)(zap)(zap)",quality:"â˜…â˜…â˜…â˜…"},{id:"gpt-4o",name:"GPT-4o",provider:"OpenAI",description:"Multimodal powerhouse",tier:"pro",speed:"(zap)(zap)",quality:"â˜…â˜…â˜…â˜…â˜…"},{id:"gpt-4o-mini",name:"GPT-4o Mini",provider:"OpenAI",description:"Affordable GPT-4 class",tier:"pro",speed:"(zap)(zap)(zap)",quality:"â˜…â˜…â˜…â˜…"},{id:"gpt-4-turbo",name:"GPT-4 Turbo",provider:"OpenAI",description:"High capability, larger context",tier:"pro",speed:"(zap)(zap)",quality:"â˜…â˜…â˜…â˜…â˜…"},{id:"llama-3.3-70b",name:"Llama 3.3 70B",provider:"Meta",description:"Open-source powerhouse",tier:"pro",speed:"(zap)(zap)",quality:"â˜…â˜…â˜…â˜…"},{id:"llama-3.2-90b-vision",name:"Llama 3.2 90B Vision",provider:"Meta",description:"Multimodal open model",tier:"pro",speed:"(zap)",quality:"â˜…â˜…â˜…â˜…"},{id:"mistral-large",name:"Mistral Large",provider:"Mistral",description:"European excellence",tier:"pro",speed:"(zap)(zap)",quality:"â˜…â˜…â˜…â˜…"},{id:"codestral",name:"Codestral",provider:"Mistral",description:"Optimized for code generation",tier:"pro",speed:"(zap)(zap)(zap)",quality:"â˜…â˜…â˜…â˜…"},{id:"deepseek-v3",name:"DeepSeek V3",provider:"DeepSeek",description:"Cost-effective reasoning",tier:"free",speed:"(zap)(zap)(zap)",quality:"â˜…â˜…â˜…â˜…"},{id:"qwen-2.5-72b",name:"Qwen 2.5 72B",provider:"Alibaba",description:"Multilingual excellence",tier:"pro",speed:"(zap)(zap)",quality:"â˜…â˜…â˜…â˜…"}],It=[{icon:j,title:"Getting Started",desc:"Learn the basics of the Studio Agents workflow.",details:'To get started, select an agent from the "Agents" tab. Each agent specializes in a different part of the music creation process. For example, Ghostwriter can help you write lyrics, while Beat Lab can generate drum patterns. Once you\'ve selected an agent, enter a prompt describing what you want to create. You can then save your creation as a new project, which will appear in your Project Hub for later recall.'},{icon:Q,title:"Agent Mastery",desc:"Deep dives into each agent's unique capabilities.",details:'Mastering our agents requires understanding their specific strengths. Ghostwriter responds best to emotional cues and genre-specific keywords. Album Artist can interpret complex visual metaphors. Trend Hunter scans real-time social data to give you a competitive edge. Experiment with different "Intensity" settings to see how the AI\'s creativity shifts from subtle to experimental.'},{icon:R,title:"Video Tutorials",desc:"Watch step-by-step guides on making hits.",details:'Our video library includes tutorials on: "Writing Your First Hit with Ghostwriter", "Advanced Beat Making with Beat Lab", and "Strategic Rollouts with Release Manager". Each video is under 5 minutes and designed to get you creating immediately. Pro members get access to exclusive masterclasses from industry-leading producers who use Studio Agents in their daily workflow.'},{icon:v,title:"Community Tips",desc:"See how other creators are using the studio.",details:'Join our Discord community and check out the "Activity Wall" to share prompts, collaborate with other creators, and get feedback on your AI-assisted tracks. Many users have found success by combining outputs from multiple agents - for example, using Ghostwriter for lyrics and then feeding those lyrics into a vocal synth. The possibilities are endless when you collaborate with the community.'}],Nt=[{keywords:["download","save","export","phone","photos"],issue:"Cannot download or save to device",solution:'Ensure you have granted storage permissions to your browser. On mobile, long-press the image or use the "Save to Files" option in the share menu. If using cloud storage, verify your Google Drive or OneDrive connection is active.'},{keywords:["audio","sound","hear","play","silent"],issue:"No sound during playback",solution:"Check if your device is on silent mode. Ensure the volume slider in the Media Player is turned up. Some browsers block auto-play audio; try clicking the play button manually."},{keywords:["slow","stuck","loading","generate","wait"],issue:"Generation is taking too long",solution:"High-quality models like Imagen 3 and Veo can take up to 30 seconds. Check your internet connection. If the progress bar is stuck, try refreshing the page; your project will be saved in the Project Hub."},{keywords:["login","account","pro","subscription","access"],issue:"Cannot access Pro agents",solution:"Pro agents require an active Studio Pro subscription. Ensure you are logged in with the correct account. If you just subscribed, try logging out and back in to refresh your status."},{keywords:["voice","mic","microphone","speak","listen","gender","male","female","accent","translate","language"],issue:"Voice controls and translation settings",solution:"Use the Mic icon for Voice-to-Text and the Speaker icon for Text-to-Voice. Click the Settings (gear) icon to change voice gender (Male/Female), region (US/UK/AU/IN), or to enable automatic translation to your preferred language."},{keywords:["privacy","data","security","safe","private"],issue:"Is my data and music private?",solution:"Yes. We use end-to-end encryption for your prompts and creations. We do not share your personal studio data with third parties or use it to train public models without your permission."},{keywords:["copyright","rights","own","legal","truth"],issue:"Do I own the AI-generated music?",solution:"You own the rights to the output you generate. However, for full copyright protection, we recommend adding human elements (vocals, live instruments) to make the work uniquely yours."},{keywords:["quality","professional","pro","industry","standard"],issue:"How to get professional quality results?",solution:"Use high-quality reference tracks, layer AI stems with live recordings, and always perform a final manual mix. Our Mastering Lab agent can help with the final industry-standard polish."},{keywords:["multi","agent","chain","workflow","project","pro"],issue:"How to use multiple agents in one project?",solution:'Pro users can "chain" agents by taking the output of one (e.g., Ghostwriter lyrics) and feeding it into another (e.g., Vocal Lab). Check "The Come Up" section for detailed Multi-Agent Workflow guides.'}],At=[{keywords:["billing","payment","card","subscription","plan","wallet","money","cost","price"],label:"Billing & Wallet",type:"mystudio",sub:"billing"},{keywords:["settings","config","preferences","dark mode","theme","language","voice"],label:"App Settings",type:"mystudio",sub:"settings"},{keywords:["profile","account","user","avatar","login","logout","email"],label:"User Profile",type:"mystudio",sub:"overview"},{keywords:["news","feed","updates","industry","trends","pulse"],label:"Industry Pulse",type:"news"},{keywords:["hub","projects","files","saved","library","creations"],label:"Project Hub",type:"hub"},{keywords:["activity","wall","community","share","feed","music","hub","trends","audio","creations"],label:"Music Hub",type:"activity"},{keywords:["agents","tools","create","make","generate"],label:"Agent Studio",type:"agents"}],Tt=[{id:"activity",icon:U,label:"Social Media Hub",desc:"Connect accounts & share content",color:"var(--color-purple)"},{id:"news",icon:w,label:"Industry Pulse",desc:"Latest music & tech news",color:"var(--color-cyan)"},{id:"whitepapers",icon:oe,label:"Whitepapers",desc:"Technical documentation",color:"var(--color-indigo)"},{id:"legal",icon:Se,label:"Legal Center",desc:"Terms & licensing",color:"var(--color-red)"},{id:"resources",icon:j,label:"Resources",desc:"Guides & tutorials",color:"var(--color-orange)"},{id:"support",icon:S,label:"Help & Support",desc:"FAQ & contact us",color:"var(--color-pink)"},{id:"marketing",icon:Pe,label:"About Us",desc:"Our mission & vision",color:"var(--color-emerald)"},{id:"profile",icon:N,label:"My Profile",desc:"Account settings",color:"var(--color-yellow)"}],Rt=e=>{if(!e||!Array.isArray(e))return e;const t=1e5;return e.map(e=>e&&"object"==typeof e&&e.assets&&Array.isArray(e.assets)?{...e,assets:e.assets.map(e=>{if(!e)return e;if("string"==typeof e&&e.length>t)return"[Media Data Pruned to Save Space]";if("object"==typeof e){const r={...e};let i=!1;return["url","data","imageData","audioData","videoData","output"].forEach(e=>{"string"==typeof r[e]&&r[e].length>t&&(r[e]="[Media Data Pruned to Save Space]",i=!0)}),i?r:e}return e})}:e)};const Ut=Object.freeze(Object.defineProperty({__proto__:null,default:function({onBack:r,startWizard:s,startOrchestrator:me,startTour:tt,initialPlan:Ut,initialTab:Pt}){(()=>{const e=i.useRef(!0),t=i.useRef(new Set);i.useEffect(()=>(e.current=!0,()=>{e.current=!1,t.current.forEach(e=>{try{e.abort()}catch(t){}}),t.current.clear()}),[]),i.useCallback(async(r,i={})=>{const a=new AbortController;t.current.add(a);try{const o=await fetch(r,{...i,signal:a.signal});return t.current.delete(a),e.current?o:null}catch(o){if(t.current.delete(a),"AbortError"===o.name)return null;throw o}},[]),i.useCallback(t=>{if(e.current)try{t()}catch(r){}},[]),i.useCallback(()=>e.current,[]),i.useCallback(()=>{t.current.forEach(e=>{try{e.abort()}catch(t){}}),t.current.clear()},[])})();const[$t,Bt]=i.useState(null),[Et,_t]=i.useState(()=>!!localStorage.getItem("studio_user_id")),[Dt,Wt]=i.useState(()=>"true"===localStorage.getItem("studio_guest_mode")),[Mt,Ot]=i.useState(!0),[Lt,Vt]=i.useState(0),[Ft,Ht]=i.useState(null),[Gt,qt]=i.useState(!1),[Jt,Yt]=i.useState(()=>{try{const e=localStorage.getItem("studio_user_profile");return e?JSON.parse(e):{stageName:"",genre:"Hip Hop / Rap",targetDemographic:"Gen Z",language:"English",bio:"",credits:500,memberSince:(new Date).getFullYear(),plan:"Free",location:"Los Angeles, CA",website:""}}catch(e){return{stageName:"",genre:"Hip Hop / Rap",bio:"",credits:500,memberSince:(new Date).getFullYear(),plan:"Free",location:"Los Angeles, CA",website:""}}}),[Kt,Qt]=i.useState(()=>{const e={instagram:!1,tiktok:!1,twitter:!1,spotify:!1,facebook:!1,youtube:!1,soundcloud:!1,threads:!1,linkedin:!1};try{const t=localStorage.getItem("studio_agents_socials");return t?{...e,...JSON.parse(t)}:e}catch(t){return e}}),[Xt,Zt]=i.useState(!1),[er,tr]=i.useState("login"),[rr,ir]=i.useState(""),[ar,or]=i.useState({}),[sr,nr]=i.useState(!1),[lr,dr]=i.useState(""),[cr,pr]=i.useState(""),[ur,gr]=i.useState(!1),[xr,mr]=i.useState(3),[hr,yr]=i.useState(()=>localStorage.getItem("studio_user_plan")||"Free"),[br,fr]=i.useState(()=>{const e=localStorage.getItem("studio_user_id")||"guest";return parseInt(localStorage.getItem(`studio_free_gens_${e}`)||"0")}),vr=["agents","mystudio","activity","news","resources","marketing","hub","whitepapers","legal","support","profile","more","project_canvas"],[jr,wr]=i.useState(()=>{const e=window.location.hash;if(e.startsWith("#/studio/")){const t=e.split("/")[2];return void 0!==u&&u&&u.some(e=>e.id===t)?"agents":vr.includes(t)?t:"mystudio"}const t=localStorage.getItem("studio_user_id")||"guest",r=localStorage.getItem(`studio_tab_${t}`);return r&&vr.includes(r)?r:"mystudio"}),[Sr,kr]=i.useState(()=>localStorage.getItem("studio_theme")||"dark"),[zr,Cr]=i.useState(window.innerWidth<=768),[Ir,Nr]=i.useState(()=>{const e=window.location.hash;if(e.startsWith("#/studio/")){const t=e.split("/")[2],r=void 0!==u&&u?u.find(e=>e.id===t):null;if(r)return r}const t=localStorage.getItem("studio_user_id")||"guest",r=localStorage.getItem(`studio_agent_${t}`);return r&&void 0!==u&&u&&u.find(e=>e.id===r)||null}),[Ar,Tr]=i.useState(null),[Rr,Ur]=i.useState(()=>{try{const e=localStorage.getItem("studio_user_id")||"guest",t=localStorage.getItem(`studio_projects_${e}`)||localStorage.getItem("studio_agents_projects");if(t){let e=JSON.parse(t);return Array.isArray(e)?e.sort((e,t)=>{const r=new Date(e.updatedAt||e.createdAt||0).getTime();return new Date(t.updatedAt||t.createdAt||0).getTime()-r}):[]}return[]}catch(e){return[]}}),[Pr,$r]=i.useState(!1),[Br,Er]=i.useState(null),[_r,Dr]=i.useState(null),[Wr,Mr]=i.useState(null),[Or,Lr]=i.useState(null),[Vr,Fr]=i.useState(null),[Hr,Gr]=i.useState(null),[qr,Jr]=i.useState(!1),[Yr,Kr]=i.useState(()=>{const e=localStorage.getItem("studio_user_id")||"guest";return localStorage.getItem("studio_cloned_elevenlabs_id")||localStorage.getItem(`studio_elevenlabs_voice_id_${e}`)||""}),[Qr,Xr]=i.useState([]),[Zr,ei]=i.useState(""),[ti,ri]=i.useState(""),[ii,ai]=i.useState({}),[oi,si]=i.useState(!1),[ni,li]=i.useState(!1),[di,ci]=i.useState(null),[pi,ui]=i.useState(null),[gi,xi]=i.useState(!1),[mi,hi]=i.useState(null),[yi,bi]=i.useState({status:"healthy",message:"All Systems Operational"}),[fi,vi]=i.useState(!1),[ji,wi]=i.useState(!1),[Si,ki]=i.useState({audio:null,vocal:null,visual:null,audioVolume:.8,vocalVolume:1,audioLoop:!0,vocalLoop:!0,audioMuted:!1,vocalMuted:!1,bpm:120,timeSignature:"4/4",key:"C Major",frameRate:30,aspectRatio:"16:9",sampleRate:48e3,bitDepth:24,syncLocked:!0,generateRealAssets:!1,renderCount:0,maxRenders:3,lastRenderTime:null,renderHistory:[]}),[zi,Ci]=i.useState([]),[Ii,Ni]=i.useState(-1),[Ai,Ti]=i.useState(!1),[Ri,Ui]=i.useState(new Set),[Pi,$i]=i.useState(!1),[Bi,Ei]=i.useState(null),[_i,Di]=i.useState(()=>{const e=localStorage.getItem("studio_user_id")||"guest";return localStorage.getItem(`studio_help_${e}`)||""}),[Wi,Mi]=i.useState(!0),[Oi,Li]=i.useState(ot()),[Vi,Fi]=i.useState(null),[Hi,Gi]=i.useState(null),[qi,Ji]=i.useState(()=>{const e=localStorage.getItem("studio_user_id")||"guest";return localStorage.getItem(`studio_prompt_${e}`)||""}),[Yi,Ki]=i.useState("lyrics"),[Qi,Xi]=i.useState(null),[Zi,ea]=i.useState(!1),[ta,ra]=i.useState(!1),[ia,aa]=i.useState({}),[oa,sa]=i.useState("idle"),[na,la]=i.useState(!1),[da,ca]=i.useState(null),[pa,ua]=i.useState(!1),[ga,xa]=i.useState(!1),[ma,ha]=i.useState(!1),[ya,ba]=i.useState(!1),[fa,va]=i.useState(!1),[ja,wa]=i.useState(()=>{const e=localStorage.getItem("studio_user_id")||"guest";return localStorage.getItem(`studio_transcript_${e}`)||""}),[Sa,ka]=i.useState(null),[za,Ca]=i.useState({gender:"male",region:"US",language:"English",style:"rapper",rapStyle:"aggressive",genre:"hip-hop",duration:30,voiceName:"rapper-male-1",speakerUrl:localStorage.getItem("studio_cloned_voice_url")||null,bpm:90}),[Ia,Na]=i.useState("hip-hop"),[Aa,Ta]=i.useState(5),[Ra,Ua]=i.useState(null),[Pa,$a]=i.useState(!1),[Ba,Ea]=i.useState(null),[_a,Da]=i.useState(!1),[Wa,Ma]=i.useState(""),[Oa,La]=i.useState(!1),[Va,Fa]=i.useState(!1),[Ha,Ga]=i.useState(null),[qa,Ja]=i.useState(!1),[Ya,Ka]=i.useState("streaming"),[Qa,Xa]=i.useState(()=>{const e=localStorage.getItem("studio_user_id")||"guest";return localStorage.getItem(`studio_dash_${e}`)||"overview"}),[Za,eo]=i.useState(()=>{try{const e=localStorage.getItem("studio_managed_agents");if(e){const t=JSON.parse(e),r=void 0!==u&&u?u:[];return t.map(e=>{const t=r.find(t=>t.name===e.name);return{...e,icon:t?t.icon:m}})}return void 0!==u&&u?u.map(e=>({...e,visible:!0})):[]}catch(e){return void 0!==u&&u?u.map(e=>({...e,visible:!0})):[]}}),[to,ro]=i.useState(()=>{try{const e=localStorage.getItem("studio_app_settings"),t={showNews:!0,publicActivity:!0,autoSave:!0,highQualityPreviews:!1,streamerMode:!1};return e?{...t,...JSON.parse(e)}:t}catch(e){return{showNews:!0,publicActivity:!0,autoSave:!0,highQualityPreviews:!1,streamerMode:!1}}}),[io,ao]=i.useState(1),[oo,so]=i.useState(!1),[no,lo]=i.useState(!0),[co,po]=i.useState([]),[uo,go]=i.useState(()=>localStorage.getItem("musicHubSection")||"connections"),[xo,mo]=i.useState(1),[ho,yo]=i.useState(!1),[bo,fo]=i.useState(!0),[vo,jo]=i.useState([]),[wo,So]=i.useState(()=>{const e=localStorage.getItem("studio_user_id")||"guest";return localStorage.getItem(`studio_news_${e}`)||""}),ko=i.useMemo(()=>{const e=Rr.length||0,t=Rr.reduce((e,t)=>e+(t.assets?.length||0),0),r=Rr.reduce((e,t)=>e+(t.assets?.filter(e=>"audio"===e.type||"vocal"===e.type)?.length||0),0);return{listeners:142*e+12*t,streams:452*r+85*e,followers:24*e+Math.floor(t/2),engagement:e>0?(4.2+(t%3==0?.3:.1)).toFixed(1)+"%":"0%",growth:e>0?`+${8+t%5}%`:"0%",streamTrend:e>0?`+${10+r%7}%`:"0%"}},[Rr]),[zo,Co]=i.useState(()=>localStorage.getItem("studio_agents_twitter_user")),[Io,No]=i.useState(()=>localStorage.getItem("studio_agents_meta_name")),[Ao,To]=i.useState(()=>{try{const e=localStorage.getItem("studio_agents_storage");return e?JSON.parse(e):{googleDrive:!1,dropbox:!1,oneDrive:!1,localDevice:!0}}catch(e){return{googleDrive:!1,dropbox:!1,oneDrive:!1,localDevice:!0}}}),[Ro,Uo]=i.useState(()=>{try{const e=localStorage.getItem("studio_agents_payments");return e?JSON.parse(e):[]}catch(e){return[]}}),[Po,$o]=i.useState(()=>{try{const e=localStorage.getItem("studio_agents_banks");return e?JSON.parse(e):[]}catch(e){return[]}}),[Bo,Eo]=i.useState([{id:1,title:"Welcome to Studio Agents",message:"Start creating your first track!",time:"Just now",read:!1},{id:2,title:"Pro Tip",message:"Try the Ghostwriter agent for lyrics.",time:"2m ago",read:!1}]),_o=i.useRef(()=>Promise.resolve()),Do=i.useRef(()=>{}),Wo=i.useRef(()=>{}),Mo=i.useRef(()=>{localStorage.clear(),window.location.href="/"}),Oo=i.useRef(null),Lo=i.useRef(null),Vo=i.useRef(new Set),Fo=i.useRef(null),Ho=i.useRef(null),Go=i.useRef(0),qo=i.useRef(null),Jo=i.useRef(null),Yo=i.useRef(null),Ko=i.useRef(null),Qo=i.useRef(null),Xo=i.useRef(null),Zo=i.useRef(null),es=i.useRef(null),ts=i.useRef(null),[rs,is]=i.useState(null);i.useEffect(()=>{const e=()=>Cr(window.innerWidth<=768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),i.useEffect(()=>{(async()=>{try{const e=await fetch(`${g}/api/v2/voices`);if(e.ok){const t=await e.json(),r=Array.isArray(t)?t:t.voices||[];if(r.length>0){const e=r.filter(e=>"professional"===e.category||"generated"===e.category||"cloned"===e.category||"premade"===e.category);Xr(e.length>0?e:r)}}}catch(e){}})()},[g]),i.useEffect(()=>{if(jr){const e=$t?.uid||localStorage.getItem("studio_user_id")||"guest";localStorage.setItem(`studio_tab_${e}`,jr)}},[jr,$t?.uid]),i.useEffect(()=>{const e=()=>{const e=window.location.hash;if(!e.startsWith("#/studio/"))return;const t=e.split("/")[2]||"resources",r=void 0!==u&&u?u.find(e=>e.id===t):null;r?("agents"!==jr&&wr("agents"),Ir?.id!==r.id&&Nr(r)):vr.includes(t)?t!==jr&&wr(t):wr("mystudio")};return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[jr,Ir]);const as=t=>{if(t!==jr){wr(t);const r=$t?.uid||localStorage.getItem("studio_user_id")||"guest";localStorage.setItem(`studio_tab_${r}`,t),window.location.hash=`#/studio/${t}`,e(`/studio/${t}`,`Studio - ${t.charAt(0).toUpperCase()+t.slice(1)}`)}},os=((e,t,r)=>{const a=i.useRef(null),o=i.useRef(null),s=i.useRef(null),n=i.useRef(null),l=i.useRef(!1);return{onTouchStart:e=>{a.current=e.targetTouches[0].clientX,o.current=e.targetTouches[0].clientY,s.current=null,n.current=null,l.current=!1},onTouchMove:e=>{s.current=e.targetTouches[0].clientX,n.current=e.targetTouches[0].clientY},onTouchEnd:()=>{if(!a.current||!s.current)return;const i=a.current-s.current,d=o.current-n.current;if(Math.abs(i)>Math.abs(d)&&Math.abs(i)>100){l.current=!0;const a=e.indexOf(t);i>0?a<e.length-1&&r(e[a+1]):a>0&&r(e[a-1])}},swiped:l}})(["agents","hub","mystudio","activity","resources"],jr,as);i.useEffect(()=>{localStorage.setItem("studio_theme",Sr)},[Sr]),i.useEffect(()=>{const e=$t?.uid||localStorage.getItem("studio_user_id")||"guest";Ir?.id?localStorage.setItem(`studio_agent_${e}`,Ir.id):localStorage.removeItem(`studio_agent_${e}`)},[Ir,$t?.uid]),i.useEffect(()=>{const e=$t?.uid||localStorage.getItem("studio_user_id")||"guest";Ar?.id&&localStorage.setItem(`studio_selected_project_${e}`,Ar.id)},[Ar,$t?.uid]),i.useEffect(()=>{const e=$t?.uid||localStorage.getItem("studio_user_id")||"guest";localStorage.setItem(`studio_news_${e}`,wo)},[wo,$t?.uid]),i.useEffect(()=>{if(!Rr||!Array.isArray(Rr))return;const e=$t?.uid||localStorage.getItem("studio_user_id")||"guest";try{const t=JSON.stringify(Rr);localStorage.setItem(`studio_projects_${e}`,t),"guest"===e?localStorage.setItem("studio_agents_projects",t):localStorage.removeItem("studio_agents_projects")}catch(t){if("QuotaExceededError"===t.name||22===t.code){const t=Rt(Rr);try{const r=JSON.stringify(t);localStorage.setItem(`studio_projects_${e}`,r),"guest"===e&&localStorage.setItem("studio_agents_projects",r)}catch(r){try{const t=Rt(Rr.slice(0,5));localStorage.setItem(`studio_projects_${e}`,JSON.stringify(t))}catch(i){}}}}},[Rr,$t?.uid]),i.useEffect(()=>{const e=localStorage.getItem("studio_last_isolated_uid"),t=$t?.uid||"guest";if(e&&e!==t&&"guest"!==t){const e=localStorage.getItem(`studio_projects_${t}`);if(e)try{Ur(JSON.parse(e))}catch(r){}So(""),Di(""),Ji(""),wa(""),Nr(null),Tr(null),Er(null),Dr(null),Mr(null),Lr(null),Fr(null)}localStorage.setItem("studio_last_isolated_uid",t)},[$t?.uid]);const[ss,ns]=i.useState(!1),[ls,ds]=i.useState(null),cs=i.useRef(!1);async function ps(e,t,r={}){Date.now();if(!e||!t||!t.id)return!1;try{let r=null;if(t.assets&&Array.isArray(t.assets))for(let o=0;o<t.assets.length;o++){const s=t.assets[o];if(!s)continue;const n=[{key:"imageUrl",folder:"images",mime:"image/png"},{key:"audioUrl",folder:"audio",mime:"audio/mpeg"},{key:"videoUrl",folder:"video",mime:"video/mp4"},{key:"vocalUrl",folder:"vocal",mime:"audio/wav"}];let l=!1,d=null;for(const t of n){const r=s[t.key];if("string"==typeof r&&(r.startsWith("data:")||r.startsWith("blob:")))try{d||(d={...s});const i=r.startsWith("data:")?await c(r,e,t.folder,t.mime):await(async()=>{const i=await fetch(r).then(e=>e.blob());return p(i,e,t.folder,`${Date.now()}.${t.mime.split("/")[1]}`)})();d[t.key]=i.url,d[t.key+"StoragePath"]=i.path,l=!0}catch(i){a.error(`Media upload failed for ${t.key}. Asset saved locally only.`)}}l&&(r||(r=[...t.assets]),r[o]=d)}const n=r?{...t,assets:r}:t;r&&(Ur(e=>Array.isArray(e)?e.map(e=>e.id===t.id?n:e):e),Ar?.id===t.id&&Tr(n));const d={};for(const[e,t]of Object.entries(n))if(null!=t&&"function"!=typeof t)if("assets"===e&&Array.isArray(t))d.assets=t.map(e=>{if(!e||"object"!=typeof e)return e;const t={};for(const[i,a]of Object.entries(e))if(void 0!==a&&"function"!=typeof a)try{const e=JSON.stringify(a);e&&(t[i]=JSON.parse(e))}catch(r){}return t}).filter(Boolean);else try{const r=JSON.stringify(t);r&&(d[e]=JSON.parse(r))}catch(o){}let u=null;if(l?.currentUser)try{u=await l.currentUser.getIdToken(!0)}catch(s){}if(!u)return!1;const x=await fetch(`${g}/api/projects/${encodeURIComponent(String(t.id))}`,{method:"PUT",headers:{"Content-Type":"application/json",...u?{Authorization:`Bearer ${u}`}:{}},body:JSON.stringify({userId:e,project:{...d,id:String(t.id),updatedAt:(new Date).toISOString(),syncedAt:(new Date).toISOString()},lastUpdatedAt:t.syncedAt||t.updatedAt||null})});if(!x.ok){const r=await x.json().catch(()=>({}));if(409===x.status){const r=await fetch(`${g}/api/projects/${encodeURIComponent(String(t.id))}`,{method:"PUT",headers:{"Content-Type":"application/json",...u?{Authorization:`Bearer ${u}`}:{}},body:JSON.stringify({userId:e,project:{...d,id:String(t.id),updatedAt:(new Date).toISOString(),syncedAt:(new Date).toISOString()}})});if(!r.ok){const e=await r.json().catch(()=>({}));throw new Error(e.error||`HTTP ${r.status}`)}await r.json();return!0}throw new Error(r.error||`HTTP ${x.status}`)}await x.json();return Fo.current&&(clearTimeout(Fo.current),Fo.current=null),!0}catch(n){return r.silent||a.error(`Save failed: ${n.message||"Network error"}`),!1}}async function us(e,t){if(e&&Array.isArray(t)&&0!==t.length){ns(!0);try{let i=0;for(const a of t)if(a&&a.id)try{await ps(e,a,{silent:!0})&&i++}catch(r){}i>0?ds(new Date):t.length>0&&l?.currentUser&&a.error(`Sync failed for ${t.length} project(s) -check your connection`)}catch(i){a.error("Cloud sync failed. Projects saved locally.")}finally{ns(!1)}}}async function gs(e,t,r){Date.now();if(!e)return[];try{let a=r||null;if(!a){const e=t||l?.currentUser;if(e)try{a=await e.getIdToken()}catch(i){}}const o=await fetch(`${g}/api/projects?userId=${encodeURIComponent(e)}`,{method:"GET",headers:{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}}});if(!o.ok){const e=await o.json().catch(()=>({}));throw new Error(e.error||`HTTP ${o.status}`)}const s=await o.json();return(s.projects||[]).filter(e=>e&&"object"==typeof e).map(e=>({...e,id:e.id||crypto.randomUUID(),createdAt:e.createdAt||(new Date).toISOString(),updatedAt:e.updatedAt||(new Date).toISOString(),assets:Array.isArray(e.assets)?e.assets.filter(Boolean):[],agents:Array.isArray(e.agents)?e.agents.filter(Boolean):[]}))}catch(o){return a.error("Could not load projects from cloud. Using local data."),null}}i.useEffect(()=>{if($t?.uid&&0!==Rr.length&&l?.currentUser){if(!cs.current)return Fo.current&&clearTimeout(Fo.current),Fo.current=setTimeout(()=>{us($t?.uid,Rr)},3e3),()=>{Fo.current&&clearTimeout(Fo.current)};cs.current=!1}},[Rr,$t?.uid,l?.currentUser]),i.useEffect(()=>{const e=()=>{if($t?.uid&&Rr.length>0){try{localStorage.setItem(`studio_projects_${$t.uid}`,JSON.stringify(Rr))}catch(e){}Fo.current&&(clearTimeout(Fo.current),Fo.current=null);try{const e=JSON.stringify({userId:$t.uid,projects:Rr.slice(0,20)});navigator.sendBeacon(`${g}/api/projects/sync`,e)}catch(e){}}};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[Rr,$t?.uid]);const xs=e=>{let t;t="function"==typeof e?e(Si):e;const r=zi.slice(0,Ii+1);r.push(t),Ci(r),Ni(r.length-1),ki(t)};i.useEffect(()=>{const e=Xo.current,t=Zo.current;e&&(e.volume=Si.audioMuted?0:Si.audioVolume??.8,e.loop=!1!==Si.audioLoop),t&&(t.volume=Si.vocalMuted?0:Si.vocalVolume??1,t.loop=!1!==Si.vocalLoop)},[Si.audioVolume,Si.vocalVolume,Si.audioMuted,Si.vocalMuted,Si.audioLoop,Si.vocalLoop]),i.useEffect(()=>{const e=Xo.current,t=Zo.current,r=es.current;if(ts.current&&(clearInterval(ts.current),ts.current=null),!Ai)return e&&e.pause(),t&&t.pause(),void(r&&r.pause());e&&e.play().catch(e=>{});const i=()=>{if(!t||!e)return;const r=Si.visualOffset||0,i=Math.max(0,e.currentTime-r);Math.abs(t.currentTime-i)>.15&&(t.currentTime=i),t.play().catch(e=>{})};return e&&t?e.readyState>=2?i():e.addEventListener("canplay",i,{once:!0}):t&&t.play().catch(e=>{}),r&&r.play().catch(e=>{}),e&&t&&(ts.current=setInterval(()=>{if(!Xo.current||!Zo.current)return;const e=Xo.current,t=Zo.current;if(e.paused||t.paused)return;const r=Si.visualOffset||0,i=Math.max(0,e.currentTime-r);Math.abs(t.currentTime-i)>.2&&(t.currentTime=i)},500)),()=>{ts.current&&(clearInterval(ts.current),ts.current=null)}},[Ai,Si.audio?.audioUrl,Si.vocal?.audioUrl,Si.visual?.videoUrl,Si.visualOffset]),i.useEffect(()=>{if(!ji)return;const e=Array.isArray(Ar?.assets)?Ar.assets.filter(Boolean):[];ki(t=>{const r={...t};if(!rs||t.audio&&t.audio.audioUrl===rs.audioUrl){if(!rs&&!t.audio){const t=e.find(e=>e?.audioUrl&&("audio"===e?.type||e?.agent?.includes("Beat")));t&&(r.audio=t)}}else r.audio={title:rs.title,audioUrl:rs.audioUrl,bpm:rs.bpm},rs.bpm&&(r.bpm=rs.bpm);if(!t.vocal){const t=e.find(e=>"vocal"===e.type||"synthesis"===e.type||"audio"===e.type&&e.audioUrl&&e.agent?.toLowerCase().includes("vocal"));t&&(r.vocal=t)}if(!t.visual){const t=e.find(e=>e.videoUrl||e.imageUrl);t&&(r.visual=t)}return r})},[ji,Ar?.id]),i.useEffect(()=>{const e=$t?.uid||localStorage.getItem("studio_user_id")||"guest";localStorage.setItem(`studio_help_${e}`,_i)},[_i,$t?.uid]),i.useEffect(()=>{const e=$t?.uid||localStorage.getItem("studio_user_id")||"guest";localStorage.setItem(`studio_prompt_${e}`,qi)},[qi,$t?.uid]),i.useEffect(()=>{const e=$t?.uid||localStorage.getItem("studio_user_id")||"guest";localStorage.setItem(`studio_transcript_${e}`,ja)},[ja,$t?.uid]);const ms=()=>{if(void 0===u||!u)return[];const e=hr.toLowerCase();return"pro"===e||"lifetime access"===e?u:"monthly"===e?u.filter(e=>"free"===e.tier||"monthly"===e.tier):u.filter(e=>"free"===e.tier)},hs=()=>{if(void 0===u||!u)return[];if(Gt)return[];const e=hr.toLowerCase();return"pro"===e||"lifetime access"===e?[]:"monthly"===e?u.filter(e=>"pro"===e.tier):u.filter(e=>"free"!==e.tier)};i.useEffect(()=>{localStorage.setItem("studio_user_plan",hr)},[hr]);const[ys,bs]=i.useState(null),[fs,vs]=i.useState(!1),[js,ws]=i.useState(null),[Ss,ks]=i.useState(!1);i.useEffect(()=>{const e=$t?.uid||localStorage.getItem("studio_user_id")||"guest";Ar?.id?localStorage.setItem(`studio_project_id_${e}`,Ar.id):localStorage.removeItem(`studio_project_id_${e}`)},[Ar,$t?.uid]);const[zs,Cs]=i.useState(!1);i.useEffect(()=>{zs&&Ar&&(Nr(null),as("project_canvas"),Cs(!1))},[zs,Ar]);const[Is,Ns]=i.useState(!1),[As,Ts]=i.useState(0),[Rs,Us]=i.useState(null),[Ps,$s]=i.useState(null),[Bs,Es]=i.useState(null),[_s,Ds]=i.useState(!1),[Ws,Ms]=i.useState({}),Os=Ra||{},Ls=Array.isArray(Os.assets)?Os.assets.filter(Boolean):[],Vs="number"!=typeof Os.currentIndex||isNaN(Os.currentIndex)?0:Os.currentIndex,Fs=Ls.length>0?Math.max(0,Math.min(Vs,Ls.length-1)):0,Hs=e=>e?"vocal"===e.type?"vocal":e.audioUrl?"audio":e.videoUrl?"video":e.imageUrl?"image":(e.type||"text").toLowerCase():"text",Gs=e=>{if(!e)return null;const t=e.content||e.snippet||e.output||e.description||e.title;return"string"==typeof t&&t.trim().length>0?t:null};i.useEffect(()=>{if(Ra&&Ra.url&&("audio"===Ra.type||"vocal"===Ra.type)){const e=setTimeout(()=>{Ko.current&&Ko.current.play().catch(e=>{})},600);return()=>clearTimeout(e)}return()=>{Ko.current&&(Ko.current.pause(),Ko.current.src="")}},[Ra]);const qs=(e,t)=>{Ks.current&&clearTimeout(Ks.current),Gi(null),Ks.current=setTimeout(()=>{try{if(!e)return void a.error("Unable to preview: asset not found");if(Ys.current)return;Ys.current=!0;const r=Array.isArray(t)?t.filter(e=>e&&(e.id||e.audioUrl||e.videoUrl||e.imageUrl||e.content)):[];if(0===r.length)return a.error("No assets available to preview"),void(Ys.current=!1);if(e.audioUrl||e.imageUrl||e.videoUrl){const t=r.filter(e=>e?.audioUrl||e?.imageUrl||e?.videoUrl);if(0===t.length)return a.error("No media content to preview. Generate some assets first."),void(Ys.current=!1);const i=t.findIndex(t=>t?.id===e?.id),o=i>=0&&i<t.length?i:0,s=t[o];if(!s)return a.error("Media asset not found. It may have been moved or deleted."),void(Ys.current=!1);La(!0),Ua({type:s.audioUrl?"audio":s.videoUrl?"video":"image",url:dt(s.audioUrl)||ct(s.videoUrl)||lt(s.imageUrl)||null,title:s.title||"Untitled",asset:s,assets:t,currentIndex:o})}else{La(!1);const t=r.findIndex(t=>t?.id===e?.id),i=t>=0&&t<r.length?t:0;if(!r[i])return a.error("Asset not found. Try refreshing the page."),void(Ys.current=!1);Ua({type:(e.type||"text").toLowerCase(),url:null,content:e.content||e.snippet||e.output||"",title:e.title||"Untitled",asset:e,assets:r,currentIndex:i})}setTimeout(()=>{Ys.current=!1},500)}catch(r){a.error("Preview failed: asset data is missing or corrupted. Try refreshing the page."),Ys.current=!1}},100)},Js=e=>{if(!e)return;const t=!!(e.imageUrl||e.audioUrl||e.videoUrl||e.lyricsVocal);La(t),Ua(null),$a(!1),setTimeout(()=>{Gi(e)},50)},Ys=i.useRef(!1),Ks=i.useRef(null),[Qs,Xs]=i.useState(null),[Zs,en]=i.useState(""),[tn,rn]=i.useState("gemini-2.0-flash");i.useEffect(()=>{localStorage.getItem("studio_onboarding_v3")||s||Ns(!0)},[s]);const[an,on]=i.useState(!1),[sn,nn]=i.useState(!1),[ln,dn]=i.useState(1);i.useEffect(()=>{me&&vi(!0)},[me]),i.useEffect(()=>{if(!Pt)return;if(["agents","mystudio","activity","news","resources","marketing","hub","support","profile","more"].includes(Pt))return void as(Pt);const e=u?.find(e=>e.id===Pt);e&&(Nr(e),as("agents"),Ns(!1))},[Pt]),i.useEffect(()=>{const e=async()=>{try{const e=await fetch(`${g}/api/health`);if(!e.ok)throw new Error("Backend unreachable");const t=await e.json();bi({status:"healthy",message:"All Systems Operational",details:t})}catch(e){bi({status:"maintenance",message:"System Under Maintenance",details:e.message})}};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[]),i.useEffect(()=>{Ut&&Oo.current&&Oo.current(Ut)},[Ut]);const cn=e=>{Do.current&&Do.current(e)};i.useEffect(()=>{if("project_canvas"!==jr){Qo.current&&Qo.current.pause();const e=document.querySelector(".studio-monitor-panel video");e&&e.pause()}},[jr]),i.useEffect(()=>{const e=e=>{if("Space"===e.code&&Hi&&!_a){const t=e.target.tagName.toLowerCase();if("input"===t||"textarea"===t)return;e.preventDefault();const r=document.querySelector(".modal-content video")||document.querySelector(".modal-content audio");r&&(r.paused?r.play().catch(()=>{}):r.pause())}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[Hi,_a]);const[pn,un]=i.useState({name:"",category:"",description:"",language:"English",style:"Modern Hip-Hop",model:"Gemini 2.0 Flash",selectedAgents:[],socialHandle:"",socialBio:"",socialPlatform:"instagram"}),gn=i.useCallback(e=>{sa(e),Lo.current&&clearTimeout(Lo.current),"saved"!==e&&"error"!==e||(Lo.current=setTimeout(()=>{sa("idle")},3e3))},[]),xn=i.useCallback((e="light")=>{if("vibrate"in navigator)switch(e){case"light":default:navigator.vibrate(10);break;case"medium":navigator.vibrate(25);break;case"heavy":navigator.vibrate([30,10,30]);break;case"success":navigator.vibrate([10,50,20]);break;case"error":navigator.vibrate([50,30,50,30,50])}},[]),mn=i.useCallback((e,t)=>{const r=`save-asset-${t?.id||Date.now()}`;Vo.current.has(r)||(Vo.current.add(r),xn("light"),gn("saving"),Ur(i=>i.map(i=>{if(i.id===e){const e=i.assets||[];if(e.some(e=>e.id===t.id||t.audioUrl&&e.audioUrl===t.audioUrl||t.url&&e.url===t.url||t.videoUrl&&e.videoUrl===t.videoUrl||t.imageUrl&&e.imageUrl===t.imageUrl||e.content&&t.content&&e.type===t.type&&e.agent===t.agent&&e.content.substring(0,200)===t.content.substring(0,200)))return Vo.current.delete(r),gn("idle"),i;const a={...i,assets:[t,...e],progress:Math.min(100,(i.progress||0)+10),updatedAt:(new Date).toISOString()};return $t&&l?.currentUser?setTimeout(()=>{ps($t?.uid,a).then(e=>{e?(gn("saved"),xn("success")):gn("idle")}).catch(e=>{gn("error"),xn("error")}).finally(()=>{Vo.current.delete(r)})},0):(gn("saved"),xn("success"),Vo.current.delete(r)),a}return i})),a.success("Asset saved to project"))},[$t,ps,gn,xn]),hn=(e,t)=>{if(("number"==typeof xr?xr:0)<2)return a.error("Not enough credits. You need 2 credits to create a project."),void Rn(!0);const r={id:crypto.randomUUID(),name:e,category:"pro",description:`Created from ${t.agentName||t.agent||"AI Agent"}`,agents:[t.agent],workflow:"custom",date:(new Date).toLocaleDateString(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};a.success("Project created! -2 credits",{icon:"âœ¨"}),Ur(e=>e.find(e=>e.name===r.name&&e.createdAt&&Date.now()-new Date(e.createdAt).getTime()<1e4)?e:[r,...e]),Tr(r),$t&&ps($t?.uid,r).catch(e=>{})};i.useEffect(()=>{if(l){const e=Ge(l,async e=>{if(e){if(e.providerData.some(e=>"password"===e.providerId)&&!e.emailVerified)return a.error("Please verify your email to access the studio."),await Le(l),localStorage.removeItem("studio_user_id"),_t(!1),Bt(null),void Ot(!1);localStorage.setItem("studio_user_id",e.uid),Ho.current=e,Bt(e),_t(!0),Ot(!1);let s=null;try{s=await e.getIdToken(),Ht(s)}catch(t){}let n=!1;if(s)try{const e=await fetch(`${g}/api/user/admin-status`,{headers:{Authorization:`Bearer ${s}`}});if(e.ok){n=!0===(await e.json()).isAdmin}}catch(r){}if(qt(n),n&&(yr("Lifetime Access"),mr(999999),a.success("Welcome, Administrator!",{icon:"(lock)"})),d&&!n)try{const t=Fe(d,"users",e.uid),r=await qe(t);if(r.exists()){const e=r.data(),t=e.credits||0;if(mr(t),Yt(r=>({...r,credits:t,...e.profile||{}})),e.visualDnaUrl&&Er(e.visualDnaUrl),e.audioDnaUrl&&Dr(e.audioDnaUrl),e.videoDnaUrl&&Mr(e.videoDnaUrl),e.lyricsDnaUrl&&Lr(e.lyricsDnaUrl),e.voiceSampleUrl&&Fr(e.voiceSampleUrl),e.clonedVoiceId&&(Kr(e.clonedVoiceId),localStorage.setItem("studio_cloned_elevenlabs_id",e.clonedVoiceId)),e.voiceSampleUrl&&(Ca(t=>({...t,speakerUrl:e.voiceSampleUrl})),localStorage.setItem("studio_cloned_voice_url",e.voiceSampleUrl)),"active"===e.subscriptionStatus&&e.tier){const t={creator:"monthly",studio:"pro",lifetime:"lifetime"}[e.tier]||e.tier;yr(t),localStorage.setItem("studio_user_plan",t)}else if(e.plan)yr(e.plan),localStorage.setItem("studio_user_plan",e.plan);else if("active"===e.subscription?.status){const t=e.subscription.plan||"monthly";yr(t),localStorage.setItem("studio_user_plan",t)}}}catch(i){}try{let t=await gs(e.uid,e,s);if(t&&0!==t.length||s||(await new Promise(e=>setTimeout(e,2e3)),t=await gs(e.uid,e)),null===t){const r=`studio_projects_${e.uid}`,i=localStorage.getItem(r);try{t=i?JSON.parse(i):[]}catch(o){t=[]}}if(t.length>0)cs.current=!0,Ur(e=>{const r=((e,t)=>{const r=new Map,i=Array.isArray(e)?e:[],a=Array.isArray(t)?t:[];for(const o of a)o&&o.id&&r.set(o.id,o);for(const o of i)if(o&&o.id)if(r.has(o.id)){const e=r.get(o.id);new Date(o.updatedAt||o.createdAt||0).getTime()>new Date(e.updatedAt||e.createdAt||0).getTime()&&r.set(o.id,o)}else r.set(o.id,o);return Array.from(r.values()).sort((e,t)=>{const r=new Date(e.updatedAt||e.createdAt||0).getTime();return new Date(t.updatedAt||t.createdAt||0).getTime()-r})})(e,t);return r}),a.success(`Synced ${t.length} projects from cloud`);else{const t=`studio_projects_${e.uid}`,r=localStorage.getItem(t);let i=[];try{i=r?JSON.parse(r):[]}catch(o){}i.length>0&&(cs.current=!0,Ur(i),s&&us(e.uid,i))}}catch(i){}}else{Ho.current=null;const e=localStorage.getItem("studio_user_id"),t="true"===localStorage.getItem("studio_guest_mode");e&&Go.current<10?(Go.current+=1,Vt(Go.current),_t(!0),Ot(!0),3===Go.current&&a.loading("Reconnecting to your session...",{id:"auth-retry",duration:15e3}),setTimeout(()=>{!Ho.current&&Go.current>=8&&(a.dismiss("auth-retry"),"true"!==localStorage.getItem("studio_guest_mode")&&(Bt(null),Ht(null),mr(3),localStorage.removeItem("studio_user_id"),_t(!1),a.error("Session expired â€” please sign in again")),Ot(!1),Go.current=0,Vt(0))},3e3)):t?(Bt(null),Ht(null),_t(!1),Wt(!0),Ot(!1)):(Bt(null),Ht(null),mr(3),localStorage.removeItem("studio_user_id"),_t(!1),Ot(!1),Go.current=0,Vt(0))}});return()=>e()}Ot(!1)},[]),i.useEffect(()=>{const e=()=>{Zt(!0)};return window.addEventListener("openAuthModal",e),()=>window.removeEventListener("openAuthModal",e)},[]);const yn=i.useCallback(()=>{qo.current&&clearTimeout(qo.current),$t&&!Dt&&(qo.current=setTimeout(()=>{a("Session expired for security. Please sign in again.",{icon:"(key)"}),Mo.current&&Mo.current()},18e5))},[$t,Dt]);async function bn(){try{l&&await Le(l)}catch(e){}Bt(null),Ht(null),mr(3),qt(!1),yr(""),localStorage.removeItem("studio_user_id"),localStorage.removeItem("studio_user_plan"),localStorage.removeItem("studio_guest_mode"),localStorage.removeItem("studio_agents_projects"),localStorage.removeItem("studio_active_tab"),localStorage.removeItem("studio_dashboard_tab"),localStorage.removeItem("studio_selected_agent_id"),localStorage.removeItem("studio_news_search"),localStorage.removeItem("studio_help_search"),localStorage.removeItem("studio_preview_prompt"),localStorage.removeItem("studio_voice_transcript"),localStorage.removeItem("studio_selected_project_id"),u&&Array.isArray(u)&&u.forEach(e=>{localStorage.removeItem(`studio_workflow_prompt_${e.id}`),localStorage.removeItem(`studio_workflow_output_${e.id}`)}),sessionStorage.clear(),_t(!1),Wt(!1),dr(""),pr(""),Zt(!1),a.success("Signed out securely",{icon:""}),r?.()}i.useEffect(()=>{if(!$t)return;const e=["mousedown","keydown","scroll","touchstart"],t=()=>yn();return e.forEach(e=>{window.addEventListener(e,t,{passive:!0})}),yn(),()=>{e.forEach(e=>{window.removeEventListener(e,t)}),qo.current&&clearTimeout(qo.current)}},[$t,yn]),i.useEffect(()=>{Ho.current=$t},[$t]),i.useEffect(()=>{Mo.current=bn},[]);const fn=i.useCallback(async e=>{if(d)try{const t=Fe(d,"users",e),r=await qe(t);if(r.exists()){const e=r.data().credits||0;mr(e),Yt(t=>({...t,credits:e}))}else await Je(t,{credits:25,tier:"free",createdAt:new Date}),mr(25)}catch(t){}},[d]),vn=async(e,t)=>{if(!$t)return a.error("Please log in to purchase credits"),void Zt(!0);const r=a.loading(`Redirecting to secure checkout for ${e} credits...`);try{const t=await fetch(`${g}/api/stripe/create-credits-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseInt(e),userId:$t?.uid,userEmail:$t?.email,successUrl:window.location.origin+window.location.pathname+"#/studio?payment=success&type=credits&amount="+e,cancelUrl:window.location.origin+window.location.pathname+"#/studio?payment=cancelled"})}),i=await t.json();a.dismiss(r),i.url?window.location.href=i.url:i.error?a.error(i.error):a.error("Could not create payment session. Please try again.")}catch(i){a.dismiss(r),a.error("Payment system unavailable. Please contact support.")}};async function jn(){if(!l)return void a.error("Authentication service unavailable");gr(!0);const e=a.loading("Signing in with Google...");try{const r=new Ye,i=await Ke(l,r);Zt(!1),a.success("Welcome back!",{id:e}),t.login("google"),fn(i.user.uid).catch(e=>{}),da&&Wo.current&&Wo.current(da)}catch(r){a.dismiss(e),"auth/popup-closed-by-user"===r.code?a("Sign-in cancelled",{icon:""}):"auth/unauthorized-domain"===r.code?a.error(`Domain not authorized. Add ${window.location.hostname} in Firebase Console.`):a.error(r.message)}finally{gr(!1)}}async function wn(){if(!l)return void a.error("Authentication service unavailable");gr(!0);const e=a.loading("Signing in with Apple...");try{const r=new Qe("apple.com");r.addScope("email"),r.addScope("name");const i=await Ke(l,r);Zt(!1),a.success("Welcome!",{id:e}),t.login("apple"),fn(i.user.uid).catch(e=>{}),da&&Wo.current&&Wo.current(da)}catch(r){a.dismiss(e),"auth/popup-closed-by-user"===r.code?a("Sign-in cancelled",{icon:"ðŸ‘‹"}):"auth/unauthorized-domain"===r.code?a.error(`Domain not authorized. Add ${window.location.hostname} in Firebase Console.`):a.error("Apple sign-in failed. Please try another method.")}finally{gr(!1)}}async function Sn(e){if(e.preventDefault(),l)if(lr&&cr){if("signup"===er){const e=(e=>{const t=[];return e.length<8&&t.push("At least 8 characters"),/[A-Z]/.test(e)||t.push("One uppercase letter"),/[a-z]/.test(e)||t.push("One lowercase letter"),/[0-9]/.test(e)||t.push("One number"),t})(cr);if(e.length>0)return void a.error(`Password requires: ${e.join(", ")}`)}gr(!0);try{let e;if("signup"===er){e=await Xe(l,lr,cr);try{return await Ze(e.user),a.success("Account created! Please check your inbox and verify your email to log in.",{duration:8e3}),await Le(l),gr(!1),void tr("login")}catch(r){return a.error("Account created, but could not send verification email. Please try logging in to resend."),await Le(l),void gr(!1)}t.signUp("email")}else{if(e=await et(l,lr,cr),!e.user.emailVerified){a.error("Please verify your email address before logging in.",{duration:4e3});try{await Ze(e.user),a.success("A new verification link has been sent to your inbox.",{duration:5e3})}catch(i){}return await Le(l),void gr(!1)}a.success("Welcome back!"),t.login("email")}await fn(e.user.uid),Zt(!1),dr(""),pr(""),da&&Wo.current&&Wo.current(da)}catch(o){"auth/email-already-in-use"===o.code?a.error("Email already in use. Try logging in."):"auth/wrong-password"===o.code||"auth/user-not-found"===o.code?a.error("Invalid email or password"):"auth/weak-password"===o.code?a.error("Password should be at least 8 characters with uppercase, lowercase, and numbers"):a.error(o.message)}finally{gr(!1)}}else a.error("Please enter email and password");else a.error("Authentication service unavailable")}const kn=async()=>{if(lr){gr(!0);try{await Ve(l,lr),a.success("Password reset email sent!"),tr("login")}catch(e){a.error(e.message)}finally{gr(!1)}}else a.error("Please enter your email first")};async function zn(){xi(!0),hi(null);try{let e;if(!l?.currentUser)throw new Error("You must be logged in to access admin stats");e=await l.currentUser.getIdToken(!0);const[t,r]=await Promise.all([fetch(`${g}/api/admin/stats`,{headers:{Authorization:`Bearer ${e}`}}),fetch(`${g}/api/status/apis`)]);if(!t.ok)throw new Error("Failed to fetch platform stats");if(!r.ok)throw new Error("Failed to fetch API health status");const i=await t.json(),a=await r.json();ci(i),ui(a)}catch(e){hi(e.message)}finally{xi(!1)}}i.useEffect(()=>{const e=$t?.uid||localStorage.getItem("studio_user_id")||"guest";localStorage.setItem(`studio_dash_${e}`,Qa)},[Qa,$t?.uid]),i.useEffect(()=>{"admin"===Qa&&Gt&&zn()},[Qa,Gt]),i.useEffect(()=>{localStorage.setItem("studio_managed_agents",JSON.stringify(Za))},[Za]),i.useEffect(()=>{localStorage.setItem("studio_app_settings",JSON.stringify(to))},[to]);const Cn=e=>{eo(t=>t.map(t=>t.name===e?{...t,visible:!t.visible}:t))},In=e=>{ro(t=>({...t,[e]:!t[e]}))},[Nn,An]=i.useState(!1),[Tn,Rn]=i.useState(!1),[Un,Pn]=i.useState(null),[$n,Bn]=i.useState("card"),[En,_n]=i.useState(!1);async function Dn(e){if(!Et||!$t)return a.error("Please log in first"),void Zt(!0);const t={Creator:"creator","Studio Pro":"studio","Lifetime Access":"lifetime"}[e.name]||"creator";try{a.loading("Redirecting to checkout...");const e=await fetch(`${g}/api/stripe/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tier:t,userId:$t?.uid,userEmail:$t?.email,successUrl:window.location.origin+window.location.pathname+"#/studio?payment=success&type=subscription",cancelUrl:window.location.origin+window.location.pathname+"#/studio?payment=cancelled"})}),r=await e.json();a.dismiss(),r.url?window.location.href=r.url:r.error?a.error(r.error):a.error("Could not create checkout session")}catch(r){a.dismiss(),a.error("Payment system unavailable. Please try again later.")}}i.useEffect(()=>{localStorage.setItem("studio_agents_payments",JSON.stringify(Ro)),localStorage.setItem("studio_agents_banks",JSON.stringify(Po))},[Ro,Po]),i.useEffect(()=>{localStorage.setItem("studio_agents_socials",JSON.stringify(Kt)),localStorage.setItem("studio_agents_storage",JSON.stringify(Ao)),zo&&localStorage.setItem("studio_agents_twitter_user",zo),Io&&localStorage.setItem("studio_agents_meta_name",Io)},[Kt,zo,Io,Ao]),i.useEffect(()=>{const e=window.location.hash.split("?"),t=e.length>1?e[1]:"",r=new URLSearchParams(window.location.search||t);if("true"===r.get("twitter_connected")){const e=r.get("twitter_username");Qt(e=>({...e,twitter:!0})),Co(e);const t=window.location.pathname+window.location.hash;window.history.replaceState({},document.title,t),a.success(`Connected to X/Twitter as @${e}!`)}if("true"===r.get("meta_connected")){const e=r.get("meta_name");Qt(e=>({...e,instagram:!0,facebook:!0})),No(e);const t=window.location.pathname+window.location.hash;window.history.replaceState({},document.title,t),a.success(`Connected to Meta as ${e}!`)}const i=r.get("payment");if("success"===i){const e=r.get("type")||"subscription",t=r.get("amount");"credits"===e?(a.success(`Success! ${t||"Your"} credits have been added.`,{icon:"(money)"}),$t?.uid&&fn($t.uid)):a.success("Your subscription is now active!",{icon:"âœ¨"});const i=window.location.pathname+window.location.hash;window.history.replaceState({},document.title,i)}else if("cancelled"===i){a.error("Payment was cancelled.");const e=window.location.pathname+window.location.hash;window.history.replaceState({},document.title,e)}},[$t,fn]);const Wn=e=>{ca(e),Et?Dn(e):Zt(!0)};Oo.current=Wn,Wo.current=Dn;const[Mn,On]=i.useState(null);i.useEffect(()=>{Mn&&Ir&&"agents"===jr&&setTimeout(()=>{const e=Yo.current||document.querySelector(".studio-textarea");e&&(e.value=Mn,e.focus()),On(null)},100)},[Mn,Ir,jr]);const Ln=()=>{if(pa)return Jo.current&&Jo.current.stop(),ua(!1),void wa("");const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return void a.error("Speech recognition not supported. Try Chrome or Safari.");const t=new e;t.lang="English"===za.language?"en-US":"Spanish"===za.language?"es-ES":"French"===za.language?"fr-FR":"German"===za.language?"de-DE":"Italian"===za.language?"it-IT":"Portuguese"===za.language?"pt-PT":"Japanese"===za.language?"ja-JP":"Korean"===za.language?"ko-KR":"Chinese"===za.language?"zh-CN":"en-US",t.continuous=!0,t.interimResults=!0,t.onstart=()=>{ua(!0),a.success("(mic) Listening... Say a command or dictate your prompt",{duration:2e3})},t.onend=()=>{ua(!1),wa("")},t.onerror=e=>{ua(!1),wa(""),"aborted"!==e.error&&a.error(`Voice error: ${e.error}`)},t.onresult=e=>{let t="",r="";for(let a=e.resultIndex;a<e.results.length;a++){const i=e.results[a][0].transcript;e.results[a].isFinal?r+=i:t=i}if(t&&wa(t),!r)return;const i=r.toLowerCase().trim();if(wa(""),ka({text:r,time:(new Date).toLocaleTimeString()}),i.includes("stop listening")||i.includes("stop voice")||"stop"===i||"cancel"===i)return Jo.current&&Jo.current.stop(),ua(!1),void Vn("Voice control stopped.");if(i.includes("open")||i.includes("launch")){const e=i.replace("open","").replace("launch","").trim(),t=void 0!==u&&u?u.find(t=>t.name.toLowerCase().includes(e)):null;if(t)return Nr(t),as("agents"),a.success(` Launching ${t.name}`),void Vn(`Launching ${t.name}.`)}if(i.includes("go to")||i.includes("show me")||i.includes("navigate")){let e=!1;if(i.includes("dashboard")||i.includes("studio")||i.includes("home")?(as("mystudio"),a.success("(chart) Dashboard"),Vn("Navigating to your dashboard."),e=!0):i.includes("hub")||i.includes("projects")?(as("hub"),a.success("(folder) Project Hub"),Vn("Opening the Project Hub."),e=!0):i.includes("news")?(as("news"),a.success("(news) Industry Pulse"),Vn("Checking the latest industry pulse."),e=!0):i.includes("help")||i.includes("support")?(as("support"),a.success("(tip) Help Center"),Vn("How can I help you today?"),e=!0):(i.includes("agents")||i.includes("tools"))&&(as("agents"),a.success("(bot) Agents"),Vn("Viewing all available agents."),e=!0),e)return}if(i.includes("switch theme")||i.includes("toggle theme")||i.includes("light mode")||i.includes("dark mode")){const e="dark"===Sr?"light":"dark";return kr(e),localStorage.setItem("studio_theme",e),a.success(`(art) ${"dark"===e?"Dark":"Light"} mode`),void Vn(`Switching to ${e} mode.`)}if("generate"===i||i.includes("start generation")||i.includes("create now")||i.includes("make it")){const e=Yo.current||document.querySelector(".studio-textarea");return void(e&&e.value.trim()?(_o.current&&_o.current(),a.success("(zap) Generating..."),Vn("Starting generation.")):(a.error("Please enter a prompt first"),Vn("Please enter a prompt first.")))}if(i.includes("clear prompt")||i.includes("clear text")||i.includes("start over")||"clear"===i){const e=Yo.current||document.querySelector(".studio-textarea");if(e){e.value="";try{e.dispatchEvent(new Event("input",{bubbles:!0}))}catch(s){const t=document.createEvent("Event");t.initEvent("input",!0,!0),e.dispatchEvent(t)}a.success("(trash) Prompt cleared"),Vn("Prompt cleared.")}return}if(i.includes("read back")||i.includes("read prompt")||i.includes("what did i write")||i.includes("read it")){const e=Yo.current||document.querySelector(".studio-textarea");return void(e&&e.value.trim()?Vn(e.value):Vn("The prompt is empty."))}if(i.includes("reference")&&(i.includes("dna")||i.includes("asset"))){if(i.includes("visual")||i.includes("image"))return document.getElementById("visual-dna-input")?.click(),void Vn("Please select a visual reference image.");if(i.includes("audio")||i.includes("sound")||i.includes("music"))return document.getElementById("audio-dna-input")?.click(),void Vn("Please select an audio reference file.");if(i.includes("lyrics")||i.includes("text")||i.includes("context"))return document.getElementById("lyrics-dna-input")?.click(),void Vn("Please select a lyrics or text reference file.");if(i.includes("voice")||i.includes("clone"))return document.getElementById("voice-dna-input")?.click(),void Vn("Please select a voice sample to clone.")}if(i.includes("set genre to")||i.includes("change genre to")){const e=i.replace("set genre to","").replace("change genre to","").trim(),t=["hip-hop","trap","drill","modern hip-hop","boom bap","90s boom bap","r&b","soul","pop","rock","electronic","edm","lo-fi","lofi","afrobeat","afro-pop","amapiano","reggaeton","latin","latin trap","k-pop","j-pop","phonk","dancehall","country","jazz","classical","gospel","reggae","metal","punk","funk","disco","synthwave","indie","acoustic","bollywood","cumbia"].find(t=>e.includes(t));if(t){const e={soul:"r&b",edm:"electronic",lofi:"lo-fi","modern hip-hop":"hip-hop","boom bap":"boom-bap","90s boom bap":"boom-bap","afro-pop":"afrobeat"}[t]||t;return Ca(t=>({...t,genre:e})),a.success(`ðŸŽµ Genre set to ${e.toUpperCase()}`),void Vn(`Setting genre to ${e}.`)}}if(i.includes("set duration to")||i.includes("change duration to")){const e=i.replace("set duration to","").replace("change duration to","").trim();let t=30;return e.includes("15 seconds")?t=15:e.includes("30 seconds")?t=30:e.includes("1 minute")||e.includes("60 seconds")?t=60:e.includes("2 minute")||e.includes("120 seconds")?t=120:e.includes("3 minute")||e.includes("180 seconds")?t=180:e.includes("short")?t=15:e.includes("long")&&(t=180),Ca(e=>({...e,duration:t})),a.success(`â± Duration set to ${t}s`),void Vn(`Setting generation length to ${t} seconds.`)}if(i.includes("show commands")||i.includes("voice commands")||i.includes("what can i say")||i.includes("help commands"))return va(!0),void Vn("Here are the available voice commands.");if(i.includes("add payment")||i.includes("billing")||i.includes("manage card"))return as("mystudio"),An(!0),void Vn("Opening payment management.");const o=Yo.current||document.querySelector(".studio-textarea");if(o){const e=(o.value+" "+r).trim();o.value=e;try{o.dispatchEvent(new Event("input",{bubbles:!0}))}catch(s){const e=document.createEvent("Event");e.initEvent("input",!0,!0),o.dispatchEvent(e)}a.success(`âœ Added: "${r.substring(0,30)}${r.length>30?"...":""}"`,{duration:1500})}},Jo.current=t,t.start()};i.useEffect(()=>{if(Ir&&Ss){const e=setTimeout(()=>{Ln(),ks(!1)},500);return()=>clearTimeout(e)}},[Ir,Ss]);const Vn=e=>{if(ga&&(!e||"string"!=typeof e))return window.speechSynthesis.cancel(),void xa(!1);const t="string"==typeof e?e:Yo.current?.value||document.querySelector(".studio-textarea")?.value;if(!t)return;window.speechSynthesis.cancel();const r=e=>{const r=new SpeechSynthesisUtterance(t);let i=null;const a="English"===za.language?"en":"Spanish"===za.language?"es":"French"===za.language?"fr":"German"===za.language?"de":"Italian"===za.language?"it":"Portuguese"===za.language?"pt":"Japanese"===za.language?"ja":"Korean"===za.language?"ko":"Chinese"===za.language?"zh":"en",o=e.filter(e=>e.lang.startsWith(a));"UK"===za.region?i=o.find(e=>e.name.includes("UK")||e.name.includes("British")):"AU"===za.region?i=o.find(e=>e.name.includes("Australia")):"IN"===za.region&&(i=o.find(e=>e.name.includes("India"))),i||(i="female"===za.gender?o.find(e=>e.name.toLowerCase().includes("female")||e.name.toLowerCase().includes("samantha")||e.name.toLowerCase().includes("victoria")):o.find(e=>e.name.toLowerCase().includes("male")||e.name.toLowerCase().includes("alex")||e.name.toLowerCase().includes("daniel"))),i&&(r.voice=i),r.lang=a,r.rate=.9,r.pitch="female"===za.gender?1.1:.9,r.onstart=()=>xa(!0),r.onend=()=>xa(!1),r.onerror=e=>{xa(!1)},window.speechSynthesis.speak(r)};let i=window.speechSynthesis.getVoices();i.length>0?r(i):window.speechSynthesis.onvoiceschanged=()=>{i=window.speechSynthesis.getVoices(),r(i),window.speechSynthesis.onvoiceschanged=null}};Do.current=Vn;const Fn=async(e,t="Ghostwriter")=>{if(!e||0===e.trim().length)return void a.error("No text content to vocalize");const r=Ar;$r(!0);const i=a.loading("Creating AI vocal (~60s)...");try{const s={"Content-Type":"application/json"};if(Et&&l?.currentUser)try{const e=await l.currentUser.getIdToken();s.Authorization=`Bearer ${e}`}catch(o){}const n=e.substring(0,1500),d=await fetch(`${g}/api/generate-speech`,{method:"POST",headers:s,body:JSON.stringify({prompt:n,voice:za.voiceName||"rapper-male-1",style:za.style||"rapper",rapStyle:za.rapStyle||"aggressive",genre:za.genre||"hip-hop",language:za.language||"English",duration:za.duration||30,speakerUrl:Vr||za.speakerUrl,backingTrackUrl:_r||null,audioId:Zr||void 0,elevenLabsVoiceId:Yr,referenceSongUrl:Hr||null,quality:Yr||Vr||za.speakerUrl?"premium":"standard"})}),c=await d.json();if(c.audioUrl){if(Hi){const e={...Hi,audioUrl:c.audioUrl,mimeType:c.mimeType||"audio/wav",type:"vocal",vocalSnippet:"(mic) AI Vocal created from lyrics",projectSnapshot:r,updatedAt:(new Date).toISOString()};return Gi(e),Ir?.id&&aa(t=>({...t,[Ir.id]:e})),a.success("AI vocal added to your creation!",{id:i}),e}{const e={id:crypto.randomUUID(),title:`AI Vocal - ${t}`,agent:t,type:"vocal",audioUrl:c.audioUrl,mimeType:c.mimeType||"audio/wav",snippet:`(mic) AI Vocal: "${n.substring(0,50)}..."`,projectSnapshot:r,createdAt:(new Date).toISOString()};return Js(e),a.success("AI vocal created!",{id:i}),e}}throw c.error?new Error(c.error):new Error("No audio URL returned")}catch(s){return a.error(s.message||"Failed to create AI vocal",{id:i}),null}finally{$r(!1)}},Hn=(e,t)=>{window.confirm("Are you sure you want to remove this payment method?")&&("card"===t?Uo(t=>t.filter(t=>t.id!==e)):$o(t=>t.filter(t=>t.id!==e)),Vn("Payment method removed."))},Gn=e=>{e.preventDefault();const t=new FormData(e.target);if("card"===$n){const e=t.get("cardNumber"),r=t.get("expiry");if(e.length<12)return void a.error("Please enter a valid card number");const i={id:Un?Un.item.id:`pm_${crypto.randomUUID()}`,type:"Visa",last4:e.slice(-4),expiry:r,isDefault:!!Un&&Un.item.isDefault};Un?(Uo(e=>e.map(e=>e.id===i.id?i:e)),Vn("Card updated successfully.")):(Uo(e=>[...e,i]),Vn(`Successfully added your card ending in ${i.last4}.`))}else{const e=t.get("bankName"),r=t.get("accountNumber"),i={id:Un?Un.item.id:`ba_${crypto.randomUUID()}`,bankName:e,last4:r.slice(-4),type:"Checking"};Un?($o(e=>e.map(e=>e.id===i.id?i:e)),Vn("Bank account updated successfully.")):($o(e=>[...e,i]),Vn(`Successfully linked your ${i.bankName} account.`))}An(!1),Pn(null)},qn=async()=>{const e=Yo.current||document.querySelector(".studio-textarea");if(e&&e.value&&"English"!==za.language)try{const t=await fetch(`${g}/api/translate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e.value,targetLanguage:"English",sourceLanguage:za.language})}),r=await t.json();r.translatedText&&(e.value=r.translatedText,a.success("Prompt translated to English!"))}catch(t){}},Jn=async(e,t)=>{if(ii[e])return;const r=t.target.files?.[0];if(!r)return;if(r.size>10485760)return void a.error("File too large (max 10MB)");ai(t=>({...t,[e]:!0}));const i=a.loading(`Uploading ${e} DNA...`,{id:`upload-dna-${e}`});try{const t=$t?await $t.getIdToken():null,o={"Content-Type":"application/json"};t&&(o.Authorization=`Bearer ${t}`);const s=new FileReader;s.readAsDataURL(r),s.onload=async()=>{try{const n=s.result,l=await fetch(`${g}/api/upload-asset`,{method:"POST",headers:o,body:JSON.stringify({data:n,fileName:`${e}-dna-${Date.now()}-${r.name.replace(/\s+/g,"-")}`,mimeType:r.type,assetType:"visual"===e||"video"===e?"image":"audio"===e?"audio":"document"})}),c=await l.json();if(!l.ok||!c.url)throw new Error(c.error||"Upload failed");{const r=c.url;if("visual"===e&&Er(r),"audio"===e&&Dr(r),"video"===e&&Mr(r),"lyrics"===e&&Lr(r),a.success(`${e.charAt(0).toUpperCase()+e.slice(1)} DNA Attached!`,{id:i}),$t?.uid&&d)try{const t=Fe(d,"users",$t.uid);await He(t,{[`${e}DnaUrl`]:r,lastDnaUpdate:Date.now()})}catch(t){}}}catch(n){a.error(`Failed to upload ${e} DNA`,{id:i})}finally{ai(t=>({...t,[e]:!1}))}},s.onerror=()=>{a.error("Failed to read file"),ai(t=>({...t,[e]:!1}))}}catch(o){a.error("Upload failed",{id:i}),ai(t=>({...t,[e]:!1}))}},Yn=async e=>{if(oi)return;const t=e.target.files[0];if(!t)return;si(!0);const r=a.loading("Cloning voice via ElevenLabs IVC...",{id:"voice-upload"});try{const e=$t?await $t.getIdToken():null,i={"Content-Type":"application/json"};e&&(i.Authorization=`Bearer ${e}`);const o=new FileReader;o.readAsDataURL(t),o.onload=async()=>{try{const n=o.result,l=await fetch(`${g}/api/upload-asset`,{method:"POST",headers:i,body:JSON.stringify({data:n,fileName:`voice-cloned-${Date.now()}-${t.name.replace(/\s+/g,"-")}`,mimeType:t.type,assetType:"audio"})}),c=await l.json(),p=l.ok&&c.url?c.url:null;let u=null;try{const e=await fetch(`${g}/api/voice-clone`,{method:"POST",headers:i,body:JSON.stringify({samples:[n],voiceName:`Clone ${$t?.displayName||"Voice"} ${(new Date).toLocaleDateString()}`})}),t=await e.json();e.ok&&t.voiceId&&(u=t.voiceId)}catch(e){}if(p&&(Fr(p),Ca(e=>({...e,speakerUrl:p,style:"cloned"})),localStorage.setItem("studio_cloned_voice_url",p)),u&&(Kr(u),localStorage.setItem("studio_cloned_elevenlabs_id",u)),$t?.uid&&d)try{const e=Fe(d,"users",$t.uid),t={lastVoiceUpdate:Date.now()};p&&(t.voiceSampleUrl=p),u&&(t.clonedVoiceId=u),await He(e,t)}catch(s){}if(u)a.success("Voice cloned via ElevenLabs IVC! Premium quality ready.",{id:r});else{if(!p)throw new Error("Both IVC clone and file upload failed");a.success("Voice uploaded! Using XTTS voice matching.",{id:r})}}catch(n){a.error("Voice cloning failed: "+(n.message||"Unknown error"),{id:r})}finally{si(!1)}}}catch(i){a.error("Failed to read file"),si(!1)}};async function Kn(e=null){let r="";if(ta)return;const i=Ar,o=Ir;if(!o)return void a.error("Please select an agent first.");const s=o.id;if(o.comingSoon)return void a.error(`${o.name} is coming soon! Try Ghostwriter or Beat Maker instead.`,{icon:"(wip)"});let n="";if(e?n="string"==typeof e?e:String(e):Yo.current?.value&&(n=Yo.current.value),!n){const e=document.querySelectorAll(".studio-textarea");for(const t of e)if(t.value){n=t.value;break}}if(!n||!n.trim())return void a.error("Please enter a prompt first.");if((d=n)&&d.toLowerCase().trim()===rt&&(it(),1)){Li(!0);return document.querySelectorAll(".studio-textarea").forEach(e=>e.value=""),Yo.current&&(Yo.current.value=""),void a.success('(theater) Demo mode activated! Type "pitch" again to generate a demo response.',{duration:5e3,icon:"(video)"})}var d;const c=["album","visual-art","cover-art","art","video-art","flux"].includes(s),p=["video","video-creator","video-gen","sora","veo","kling"].includes(s),u=["beat","sample","music-gpt","beat-maker","beat-lab","beat-architect","beat-arch","drum-machine","drums","instrument","drop","film","sample-master","score-edit","drop-zone","music-architect","audio-gen","video-scorer"].includes(s),x=["vocal","vocal-arch","vocal-gen","vocal-performer","vocal-performance","vocal-lab","vocal-labs","podcast","voiceover","voice-gen","voice-cloner"].includes(s)&&"ghost"!==s,m=["master","master-lab","mastering"].includes(s);let h="text";c&&(h="image"),p&&(h="video"),u&&(h="beat"),x&&(h="vocal"),m&&(h="master"),p&&(_r||rs||Zr)&&(h="video-synced");const y=kt[h]||1;if(i?.assets){const e=i.assets.find(e=>"lyrics"===e.type||e.id?.includes("lyrics")||e.agent?.toLowerCase().includes("ghost"));e&&(r=e.content||e.snippet||"")}if(ot()){ra(!0);const e=a.loading(`${o.name} is working... (Demo Mode)`);try{const t=await async function(e="default",t=""){const r=500+1500*Math.random();await new Promise(e=>setTimeout(e,r));const i=e.toLowerCase().replace(/\s+/g,"-");return(st[i]||st.default)+(t?`\n\n> Your input: "${t.slice(0,100)}${t.length>100?"...":""}"`:"")}(o.id,n);aa(e=>({...e,[o.id]:{output:t,timestamp:Date.now(),isDemo:!0}})),as("result"),a.success("Demo response generated!",{id:e})}catch(f){a.error("Demo error: "+f.message,{id:e})}finally{ra(!1)}return}if(!((e="default")=>{if(Gt)return!0;const t=kt[e]||kt.default;if(Et){if(xr>=t)return!0;const e=(hr||"Free").toLowerCase();return("pro"===e||"lifetime access"===e)&&t<=1}return br<3})(h))return void(Et?(a.error(`Insufficient credits! ${o.name} needs ${y} credits.`),Xa("subscription"),as("mystudio")):(a.error("You've used your 3 free generations! Sign in to continue."),Zt(!0)));ra(!0);const b=a.loading(p||x||u?`${o?.name||"AI"} is performing... (Typically 1-2 mins)`:`${o?.name||"AI"} is working...`);try{Et&&$t&&!Gt?mr(e=>Math.max(0,e-y)):Et||fr(e=>{const t=e+1;return localStorage.setItem("studio_free_uses",t),t});let e=n;if("English"!==za.language){const t={"Content-Type":"application/json"};S.Authorization&&(t.Authorization=S.Authorization);const r=await fetch(`${g}/api/translate`,{method:"POST",headers:t,body:JSON.stringify({text:e,targetLanguage:"English",sourceLanguage:za.language})}),i=await r.json();i.translatedText&&(e=i.translatedText)}let d="";if(i?.assets){const e=i.assets.find(e=>"lyrics"===e.type||e.id?.includes("lyrics")||e.agent?.toLowerCase().includes("ghost"));e&&(r=e.content||e.snippet||"")}"ghost"===s||"ghost-1"===s||"lyrics"===s?d='Write ONLY the lyrics (verses, hooks, chorus). USE CLEAR LABELS like [Verse 1], [Chorus], [Bridge]. Do not include any "Here are the lyrics" text or preamble. Write high-fidelity emotional lyrics.':x?(d='Describe the vocal performance style, tone, and character in detail (e.g., "Energetic female vocal with a soulful grit and rapid-fire delivery"). Focus on professional performance qualities.',r&&(d+=` Use these lyrics as the based for the vocal performance: "${r.substring(0,500)}"`)):u?(d="Briefly describe a high-quality beat/instrumental concept. Focus on mood, tempo, instrumentation, and key instruments. Keep it under 60 words for maximum AI compatibility.",r&&(d+=` Use the vibe of these lyrics to inspire the beat: "${r.substring(0,300)}"`)):c?(d="Describe a striking album cover or concept in detail for image generation. Focus on composition, colors, and artistic style.",r&&(d+=` Incorporate themes from these lyrics: "${r.substring(0,200)}"`)):p&&(d="Write a creative image to video concept or storyboard with scene descriptions, cinematic lighting, and professional visual transitions.",r&&(d+=` Match the narrative and energy of these lyrics: "${r.substring(0,300)}"`));let h={prompt:e,systemInstruction:`You are ${o?.name||"AI Assistant"}, a professional AI agent in a high-end music studio. \n          Category: ${o?.category||"General"}. \n          Capabilities: ${(o?.capabilities||[]).join(", ")}.\n          ${o?.explanation||""}\n          ${d}`,model:tn,visualDnaUrl:Br,audioDnaUrl:_r,videoDnaUrl:Wr,lyricsDnaUrl:Or,voiceSampleUrl:Vr};const S={"Content-Type":"application/json"};if(Et&&l?.currentUser)try{const e=await l.currentUser.getIdToken();S.Authorization=`Bearer ${e}`}catch(f){}const k=`\n        USER REQUEST: "${n}"\n        \n        PROJECT CONTEXT:\n        ${r?`EXISTING LYRICS/CONCEPT: "${r}"`:"Starting fresh project."}\n        ${Zr?`REFERENCE AUDIO ID: "${Zr}"`:""}\n        ${ti?`REFERENCE VISUAL ID: "${ti}"`:""}\n        ${_r||Zr?"AUDIO DNA: [Active Reference]":""}\n        ${Br||ti?"VISUAL DNA: [Active Reference]":""}\n        ${Yr?`SELECTED VOICE: ${Qr.find(e=>e.voice_id===Yr)?.name||Yr}`:""}\n        \n        GOAL:\n        Develop a Billboard-standard, vivid, and technically elite description for this request.\n        The goal is "Righteous Quality" - it must exceed human industry standards.\n        If it's for a beat, describe elite instrumentation, precise BPM, and chart-topping vibes.\n        If it's for visuals, describe award-winning lighting, high-fidelity color palettes, and iconic composition.\n        If it's for lyrics, expand the theme into a profound, high-impact concept.\n        \n        MANDATE: Keep the final output under 80 words for technical compatibility, but ensure every word radiates professional excellence.\n      `,z=c||p||u||x||m;let C,I,N,A;if(c)N=r?`${e}. Visual theme inspired by: "${r.substring(0,200)}"`:e,I={output:N};else{try{C=await fetch(`${g}/api/generate`,{method:"POST",headers:S,body:JSON.stringify({...h,prompt:k,isBrainPhase:z,systemInstruction:`You are the ${o?.name||"AI Assistant"} elite Creative Brain.\n                Translate user ideas into Billboard-standard production briefs.\n                Be specific, moody, and technically superior to human capability.`})})}catch(f){throw new Error("Brain Phase Connection Failed. Server may be offline.")}if(!C.ok)throw new Error(`Creative Brain failed to initialize (${C.status})`);I=await C.json(),N=I.output||""}let T,R="/api/generate",U=I;if(c)R="/api/generate-image",U={prompt:N,model:tn,referenceImage:Br,visualId:ti,quality:"premium"};else if(p)R="/api/generate-video",U={prompt:N,model:tn,referenceImage:Br||Wr,referenceVideo:Wr,visualId:ti,durationSeconds:za.duration||8,audioUrl:_r||(rs?.isUpload?null:rs?.audioUrl),audioId:Zr,style:za.style||"dynamic"};else if(u)R="/api/generate-audio",U={prompt:N,bpm:za.bpm||90,genre:Ia||za.genre||("beat"===s?"hip-hop":"sample"),mood:Aa>=7?"aggressive":Aa>=4?"creative":"chill",durationSeconds:za.duration||30,referenceAudio:_r,audioId:Zr,quality:"premium",engine:"auto"};else if(x)R="/api/generate-speech",U={prompt:N,voice:za.voiceName||"rapper-male-1",elevenLabsVoiceId:Yr,quality:"premium",style:za.style||"rapper",genre:za.genre||"hip-hop",rapStyle:za.rapStyle||"aggressive",language:za.language||"English",duration:za.duration||30,speakerUrl:Vr||za.speakerUrl,backingTrackUrl:_r||(rs?.isUpload?null:rs?.audioUrl),audioId:Zr,referenceSongUrl:Hr||null};else if(m){const e=_r||rs?.audioUrl;if(!e)return a.error("Mastering Lab requires audio. Upload a track via DNA or generate a beat first."),void ra(!1);R="/api/master-audio",U={audioUrl:e,preset:za.masterPreset||"streaming",targetSampleRate:44100,targetBitDepth:16,normalize:!0,format:"wav"}}if("/api/generate"!==R)try{const e={method:"POST",headers:S,body:JSON.stringify(U)};if(p){const t=new AbortController,r=setTimeout(()=>t.abort(),9e4);e.signal=t.signal,A=await fetch(`${g}${R}`,e),clearTimeout(r)}else A=await fetch(`${g}${R}`,e)}catch(v){if("AbortError"===v.name)throw new Error("Video generation request timed out. The server may be busy â€” please try again.");throw new Error("Media generation service unreachable. Please check your connection or try again later.")}else A=C;if("/api/generate"===R)T=I;else{const e=A?.headers?.get("content-type");if(e&&e.includes("application/json"))T=await A.json();else{const e=await A.text();T={...I,_isFallback:!0,_errText:e.substring(0,100)}}}if("processing"===T.status&&T.operationId){a.loading("Video rendering in progress...",{id:b,duration:3e5});const e=60;let t=!1;for(let r=0;r<e;r++){await new Promise(e=>setTimeout(e,5e3));try{const e=await fetch(`${g}/api/video-status/${T.operationId}`,{headers:S}),r=await e.json();if("processing"===r.status)continue;if("completed"===r.status){T=r,t=!0;break}return void a.error(r.error||"Video generation failed",{id:b})}catch(j){}}if(!t)return void a.error("Video generation timed out â€” please try again",{id:b})}if(!A.ok)return void(403===A.status?T.isUserCreditIssue?(a.error(`Insufficient credits! ${o.name} needs ${T.required||"more"} credits.`,{id:b}),Xa("subscription"),as("mystudio")):a.error("Insufficient credits for media generation.",{id:b}):401===A.status?(T.requiresAuth?a.error(T.message||"You've used your free generations. Sign in to continue.",{id:b}):a.error("Please log in to use AI media generation.",{id:b}),Zt(!0)):503===A.status||504===A.status?T.isSystemCreditIssue?a.error("System maintenance: AI credits are being refreshed. Your credits were NOT charged. Try again shortly.",{id:b}):a.error("Media server is currently overloaded or out of credits. Try again in a minute.",{id:b}):a.error(`Media generation failed: ${T.error||"Server error"}`,{id:b}));let P={id:crypto.randomUUID(),title:`${o?.name||"AI"} Result`,type:o?.category||"text",agent:o?.name||"Unknown Agent",date:"Just now",color:o?.colorClass||"",snippet:N||e,projectSnapshot:i};if(T._isFallback&&T.output)P.snippet=T.output,P.isFallback=!0,P.fallbackNote="image"===T._fallbackType?"(art) Visual concept (image generation coming soon)":"(video) Video concept (video generation coming soon)";else if(c&&(T.predictions||T.images||T.output))if(T.output&&"string"==typeof T.output&&T.output.startsWith("http"))P.imageUrl=T.output,P.snippet=`(art) Generated artwork for: "${e}"`,P.type="image";else{const t=T.predictions?.[0]?.bytesBase64Encoded||T.images?.[0],r=T.mimeType||"image/png";t&&(P.imageUrl=t.startsWith("data:")?t:`data:${r};base64,${t}`,P.snippet=`(art) Generated artwork for: "${e}"`,P.type="image")}else if(p&&(T.predictions||T.video||T.output&&("video"===T.type||"image"===T.type))){if("image"===T.type&&T.output){const t=T.output,r=T.mimeType||"image/png";P.imageUrl=t.startsWith("data:")?t:`data:${r};base64,${t}`,P.snippet=`(art) Generated visual concept for: "${e}" (Video unavailable)`,P.type="image"}else if(T.output&&"string"==typeof T.output)T.output.startsWith("data:")||T.output.startsWith("http")||T.output.startsWith("/api/")?P.videoUrl=T.output:P.videoUrl=`data:video/mp4;base64,${T.output}`,P.type="video",P.snippet=`(video) Generated video for: "${e}"`;else{const t=T.predictions?.[0]||T.video;t&&(t.bytesBase64Encoded?(P.videoUrl=`data:video/mp4;base64,${t.bytesBase64Encoded}`,P.type="video"):t.videoUri&&(P.videoUrl=t.videoUri,P.type="video"),P.snippet=`(video) Generated video for: "${e}"`)}rs&&(P.audioUrl=rs.audioUrl,P.audioTitle=rs.title,P.snippet=`(video) Music Video for: "${rs.title}"`)}else if((u||x)&&(T.audioUrl||T.audio||"synthesis"===T.type||T.description||T.message)){if(T.audioUrl){if(T.audioUrl.startsWith("http")||T.audioUrl.startsWith("data:")?P.audioUrl=T.audioUrl:P.audioUrl=`data:${T.mimeType||"audio/wav"};base64,${T.audioUrl}`,P.mimeType=T.mimeType||"audio/wav",P.type=x?"vocal":"audio",T.isRealGeneration?(P.snippet=x?`(mic) AI Generated Vocals: "${e}"`:`(music) AI Generated Beat: "${e}"`,a.success(x?"Vocals generated with ElevenLabs V3.5!":"Beat generated with MusicGen AI!")):T.isSample?(P.snippet=x?"(mic) Sample Vocal (Preview)":"(music) Sample Beat (Preview)",P.billingMessage=T.message,a.info(T.message||"Using sample - configure API keys for custom generation",{duration:5e3,icon:"âš "})):P.snippet=x?`(mic) Generated vocals for: "${e}"`:`(music) Generated audio for: "${e}"`,P.isRealGeneration=T.isRealGeneration,P.isSample=T.isSample,P.bpm=T.bpm,P.genre=T.genre,"beat"===s)try{const t=await fetch(`${g}/api/generate-image`,{method:"POST",headers:S,body:JSON.stringify({prompt:`Album cover art for a ${T.genre||"hip-hop"} beat. ${e}. High quality, abstract, vibrant.`,aspectRatio:"1:1"})}),r=await t.json();(r.imageUrl||r.images?.[0])&&(P.imageUrl=r.imageUrl||r.images[0])}catch(w){}}else if(T.audio){const t=T.mimeType||"audio/wav";P.audioUrl=`data:${t};base64,${T.audio}`,P.mimeType=t,P.snippet=`(music) Generated audio for: "${e}"`,P.type=x?"vocal":"audio"}else if("synthesis"===T.type&&T.params)P.synthesisParams=T.params,P.snippet=T.description||`Beat synthesis parameters for: "${e}"`,P.bpm=T.bpm,P.genre=T.genre,P.type="synthesis";else{!(u||p||c||x)||T.audioUrl||T.videoUrl||T.imageUrl||T.audio?(P.snippet=T.description||T.message||T.output||`Audio concept for: "${e}"`,P.type="text"):(P.snippet=T.output||T.description||T.message||`Media generation failed. Idea: ${N||e}`,P.note="âš  Media generation failed - returning text concept instead.",P.type="text",P.isError=!0)}x&&rs&&(P.backingTrackUrl=rs.audioUrl,P.backingTrackTitle=rs.title,P.snippet=`(mic) Vocals synced to: "${rs.title}"`,P.type="vocal")}else if(T.output){let e=T.output;if("English"!==za.language){const t=await fetch(`${g}/api/translate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,targetLanguage:za.language,sourceLanguage:"English"})}),r=await t.json();r.translatedText&&(e=r.translatedText)}P.snippet=e}else T.description||T.message?(P.snippet=T.description||T.message,P.type="text"):T.error?(P.snippet=`Unable to generate content: ${T.error}. Please try again with a different prompt.`,P.type="text",P.isError=!0):Object.keys(T).length>0?(P.snippet=JSON.stringify(T,null,2),P.type="text"):(P.snippet="The AI returned an empty response. Please try again with a more detailed prompt.",P.type="text",P.isError=!0);Xi(null),Js(P),Ji(e),Ki("lyrics"),aa(e=>({...e,[o.id]:P})),a.success("Generation complete! Review your result.",{id:b}),t.contentGenerated(o.id,P.type||"text")}catch(S){a.error(S.message||"Generation failed. Check your connection and try again.",{id:b}),t.errorOccurred("generation_failed",S.message)}finally{ra(!1),Et&&$t?.uid&&fn($t.uid)}}_o.current=Kn;const Qn=async(e="hub",t=null)=>{if(!Hi)return;if(Zi)return;ea(!0),Da(!1);const r=a.loading("Synchronizing to cloud...",{icon:"â˜"}),i=new Promise((e,t)=>setTimeout(()=>t(new Error("Save timed out")),18e4));try{const d={...Hi,agent:Hi.agent||Ir?.name||"Unknown Agent",savedAt:(new Date).toISOString()},u=Et?localStorage.getItem("studio_user_id"):null;if(u)try{if(d.imageUrl?.startsWith("data:")||d.imageUrl?.startsWith("blob:")){const e=d.imageUrl.startsWith("data:")?await c(d.imageUrl,u,"images","image/png"):await(async()=>{const e=await fetch(d.imageUrl).then(e=>e.blob());return p(e,u,"images",`${Date.now()}.png`)})();d.imageUrl=e.url,d.imageStoragePath=e.path}if(d.audioUrl?.startsWith("data:")||d.audioUrl?.startsWith("blob:")){const e=d.audioUrl.startsWith("data:")?await c(d.audioUrl,u,"audio","audio/mp3"):await(async()=>{const e=await fetch(d.audioUrl).then(e=>e.blob());return p(e,u,"audio",`${Date.now()}.mp3`)})();d.audioUrl=e.url,d.audioStoragePath=e.path}if(d.videoUrl&&!d.videoStoragePath)try{const e=await fetch(d.videoUrl).then(e=>e.blob()),t=await p(e,u,"videos",`${Date.now()}.mp4`);d.videoUrl=t.url,d.videoStoragePath=t.path}catch(o){}}catch(s){}let x=null,m=t||Hi.projectSnapshot||Ar;if("string"==typeof t&&t.startsWith("new:")){const e=t.substring(4);x={id:crypto.randomUUID(),name:e,category:"Music Creation",assets:[d],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},Ur(e=>[x,...Array.isArray(e)?e:[]]),Tr(x),a.success(`Project "${e}" created!`)}else m?(x={...m,assets:[d,...Array.isArray(m.assets)?m.assets.filter(e=>e&&e.id!==d.id):[]],updatedAt:(new Date).toISOString()},Tr(x),Ur(e=>{const t=Array.isArray(e)?e:[];return t.some(e=>e&&e.id===x.id)?t.map(e=>e&&e.id===x.id?x:e):[x,...t]})):(x={id:crypto.randomUUID(),name:d.title||"Studio Asset",category:"Standalone",assets:[d],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},Ur(e=>[x,...Array.isArray(e)?e:[]]),Tr(x),a.success("Saved to collection"));if(Et&&u&&x){const e=await Promise.race([ps(u,x,{silent:!0}),i]);try{const e={"Content-Type":"application/json"};if(l?.currentUser){const t=await l.currentUser.getIdToken();e.Authorization=`Bearer ${t}`}fetch(`${g}/api/user/generations`,{method:"POST",headers:e,body:JSON.stringify({type:d.type,agent:d.agent,prompt:qi||d.snippet,output:d.snippet,metadata:{projectId:x.id,audioUrl:d.audioUrl}})}).catch(()=>{})}catch(n){}a.success(e?"âœ… Synced to cloud!":"Saved locally (sync pending)",{id:r})}else a.success("Saved locally",{id:r});Gi(null),as(e),d.audioUrl&&!d.audioWavUrl&&Et&&u&&Xn(d,x,u).catch(e=>{})}catch(d){a.error(`Error: ${d.message}`,{id:r})}finally{ra(!1),ea(!1)}},Xn=async(e,t,r)=>{if(!e?.audioUrl||e.audioWavUrl)return;const i=l?.currentUser?await l.currentUser.getIdToken():null;if(!i)return;const a=await fetch(`${g}/api/convert-format`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({sourceUrl:e.audioUrl,targetFormat:"wav",assetId:e.id,sourceType:"audio",quality:"cd"})});if(!a.ok)throw new Error(`Conversion request failed: ${a.status}`);const{conversionId:o}=await a.json();if(!o)throw new Error("No conversionId returned");for(let n=0;n<20;n++){await new Promise(e=>setTimeout(e,3e3));const a=await fetch(`${g}/api/convert-format/${o}`,{headers:{Authorization:`Bearer ${i}`}});if(!a.ok)continue;const n=await a.json();if("completed"===n.status&&n.convertedUrl){Ur(r=>r.map(r=>r.id!==t.id?r:{...r,assets:(r.assets||[]).map(t=>t.id!==e.id?t:{...t,audioWavUrl:n.convertedUrl,audioWavStoragePath:n.storagePath}),updatedAt:(new Date).toISOString()})),Tr(r=>r&&r.id===t.id?{...r,assets:(r.assets||[]).map(t=>t.id!==e.id?t:{...t,audioWavUrl:n.convertedUrl,audioWavStoragePath:n.storagePath}),updatedAt:(new Date).toISOString()}:r);try{const i={...t};i.assets=(i.assets||[]).map(t=>t.id===e.id?{...t,audioWavUrl:n.convertedUrl,audioWavStoragePath:n.storagePath}:t),i.updatedAt=(new Date).toISOString(),await ps(r,i,{silent:!0})}catch(s){}return}if("failed"===n.status)throw new Error(n.error||"Conversion failed")}},Zn=()=>{Wt(!0),localStorage.setItem("studio_guest_mode","true"),a.success("Welcome! Sign in anytime to save your work.",{icon:""})};async function el(e=1,t=null){if(oo||!no&&1!==e)return;const r=t||uo||"all";t&&(go(t),localStorage.setItem("musicHubSection",t)),so(!0);try{const t=await fetch(`${g}/api/music-hub?section=${r}&page=${e}&per_page=20`),i=await t.json();i.items&&i.items.length>0?(po(t=>1===e?i.items:[...t,...i.items]),ao(e),i.items.length<20||20*e>=200?lo(!1):lo(!0)):(1===e&&po([]),lo(!1))}catch(i){}finally{so(!1)}}async function tl(e=1,t="",r=!1){if(!r&&(ho||!bo&&1!==e))return{success:!1};yo(!0);try{const r=new URLSearchParams({page:e.toString(),per_page:"20"});t&&r.set("q",t);const i=await fetch(`${g}/api/news?${r}`),a=await i.json();return a.articles&&a.articles.length>0?(jo(t=>1===e?a.articles:[...t,...a.articles]),mo(e),a.articles.length<20?fo(!1):fo(!0),{success:!0,count:a.articles.length}):(1===e&&jo([]),fo(!1),{success:!0,count:0})}catch(i){return{success:!1,error:i}}finally{yo(!1)}}const[rl,il]=i.useState(null);i.useEffect(()=>{rl&&clearTimeout(rl);const e=setTimeout(async()=>{if("news"===jr&&wo.trim()){const e=a.loading(`Searching: "${wo.trim()}"...`);fo(!0);const t=await tl(1,wo.trim());t?.success?t.count>0?a.success(`Found ${t.count} results`,{id:e}):a(`No results for "${wo.trim()}"`,{id:e,icon:"(search)"}):a.error("Search failed. Check your connection and try again.",{id:e})}else"news"!==jr||wo.trim()||0!==vo.length||tl(1)},500);return il(e),()=>clearTimeout(e)},[wo]),i.useEffect(()=>{"activity"===jr&&0===co.length&&el(1),"news"===jr&&0===vo.length&&tl(1)},[jr]),i.useEffect(()=>{Ir&&Mi(!0)},[Ir]),i.useEffect(()=>{const e=localStorage.getItem("studio_user_id"),t=e?`studio_projects_${e}`:null,r=t&&localStorage.getItem(t)||localStorage.getItem("studio_agents_projects");if(r)try{const e=JSON.parse(r);if(Array.isArray(e)&&e.length>0){const t=(e=>Array.isArray(e)?e.map(ft).filter(Boolean):[])(e);Ur(e=>0===e.length?t:e)}}catch(i){}},[]);const al=async(e,t)=>{if(!e)return;if("wav"===t&&e.audioUrl){if(e.audioWavUrl){const t=document.createElement("a");return t.href=e.audioWavUrl,t.setAttribute("download",`${e.title.replace(/\s+/g,"_")}_studio_agents.wav`),t.setAttribute("target","_blank"),document.body.appendChild(t),t.click(),void document.body.removeChild(t)}const t=a.loading("Converting to WAV...");try{const r=l?.currentUser?await l.currentUser.getIdToken():null;if(!r)throw new Error("Login required");const i=await fetch(`${g}/api/convert-format`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({sourceUrl:e.audioUrl,targetFormat:"wav",assetId:e.id,quality:"cd"})});if(!i.ok)throw new Error("Conversion request failed");const{conversionId:o}=await i.json();for(let s=0;s<20;s++){await new Promise(e=>setTimeout(e,3e3));const i=await fetch(`${g}/api/convert-format/${o}`,{headers:{Authorization:`Bearer ${r}`}});if(!i.ok)continue;const s=await i.json();if("completed"===s.status&&s.convertedUrl){a.success("WAV ready!",{id:t});const r=document.createElement("a");return r.href=s.convertedUrl,r.setAttribute("download",`${e.title.replace(/\s+/g,"_")}_studio_agents.wav`),r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),void document.body.removeChild(r)}if("failed"===s.status)throw new Error(s.error||"Conversion failed")}throw new Error("Conversion timed out")}catch(s){a.error(`WAV conversion failed: ${s.message}. Downloading original.`,{id:t})}}const r=e.videoUrl||e.audioUrl||e.imageUrl;if(!r)return void a(`${"Download"} coming soon!`,{icon:"(wip)"});const i=e.videoUrl?".mp4":e.audioUrl?".mp3":".png",o=document.createElement("a");o.href=r,o.setAttribute("download",`${e.title.replace(/\s+/g,"_")}_studio_agents${i}`),o.setAttribute("target","_blank"),document.body.appendChild(o),o.click(),document.body.removeChild(o)},ol=async e=>{const t=encodeURIComponent(window.location.href);if("twitter"!==e)if("instagram"!==e&&"facebook"!==e&&"threads"!==e);else try{const e=await fetch(`${g}/api/meta/auth?returnUrl=${t}`,{redirect:"manual"});"opaqueredirect"===e.type||302===e.status||301===e.status?window.location.href=`${g}/api/meta/auth?returnUrl=${t}`:503===e.status?a.error("Meta integration not yet configured. Set up API keys in Railway."):window.location.href=`${g}/api/meta/auth?returnUrl=${t}`}catch(r){window.location.href=`${g}/api/meta/auth?returnUrl=${t}`}else try{const e=await fetch(`${g}/api/twitter/status`);if(e.ok){(await e.json()).configured?window.location.href=`${g}/api/twitter/auth?returnUrl=${t}`:a.error("Twitter/X integration not yet configured. Set up API keys in Railway.")}else a.error("Twitter/X service unavailable. Try again later.")}catch(r){a.error("Cannot connect to server. Please check your internet connection.")}},sl=async()=>{const e=rr.trim();if(!e)return void a.error("Write something to share first");const t=Object.entries(ar).filter(([,e])=>e).map(([e])=>e);if(0===t.length)return void a.error("Select at least one platform to post to");nr(!0);const r=[];for(const a of t)try{if("twitter"===a){const t=await fetch(`${g}/api/twitter/tweet`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({text:e.slice(0,280)})}),i=await t.json();t.ok&&i.success?r.push({platform:"X/Twitter",success:!0,url:i.tweetUrl}):i.needsAuth?(r.push({platform:"X/Twitter",success:!1,error:"Session expired â€” reconnect your account"}),Qt(e=>({...e,twitter:!1}))):r.push({platform:"X/Twitter",success:!1,error:i.error||"Post failed"})}else if("facebook"===a){const t=await fetch(`${g}/api/meta/post`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({text:e,target:"facebook"})}),i=await t.json();t.ok&&i.success?r.push({platform:"Facebook",success:!0,url:i.postUrl}):i.needsAuth?(r.push({platform:"Facebook",success:!1,error:"Session expired â€” reconnect your account"}),Qt(e=>({...e,facebook:!1}))):r.push({platform:"Facebook",success:!1,error:i.error||"Post failed"})}else"instagram"===a?r.push({platform:"Instagram",success:!1,error:"Instagram requires an image â€” use image sharing from the Studio"}):"threads"===a&&r.push({platform:"Threads",success:!1,error:"Threads API coming soon"})}catch(s){r.push({platform:a,success:!1,error:"Network error â€” check your connection"})}nr(!1);const i=r.filter(e=>e.success),o=r.filter(e=>!e.success);i.length>0&&(a.success(`Posted to ${i.map(e=>e.platform).join(", ")}!`),ir(""),or({})),o.length>0&&o.forEach(e=>a.error(`${e.platform}: ${e.error}`))},nl=async(e,t)=>{const r=!0===t,i="object"==typeof t?t:null;if(i?.stopPropagation(),!e)return;if(!r&&!window.confirm("Are you sure you want to delete this project?"))return;const o=(Rr||[]).find(t=>t?.id===e),s=o?.name||"Unknown";if(Ur(t=>(t||[]).filter(t=>t?.id!==e)),Ar?.id===e){Tr(null);const e=localStorage.getItem("studio_user_id");e&&localStorage.removeItem(`studio_selected_project_${e}`)}if(Et&&$t)try{let t=null;if(l?.currentUser)try{t=await l.currentUser.getIdToken(!0)}catch(n){}const i=await fetch(`${g}/api/projects/${encodeURIComponent(String(e))}?userId=${encodeURIComponent($t?.uid||"guest")}&projectName=${encodeURIComponent(s)}`,{method:"DELETE",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}});if(!i.ok){const e=await i.json().catch(()=>({}));throw new Error(e.error||`HTTP ${i.status}`)}r||a.success("Project deleted")}catch(d){r||a.error("Could not delete from cloud, but removed from this device")}else r||a.success("Project deleted")},ll=async()=>{if(!Et||!$t)return void a.error("You must be logged in to delete your account");if(!window.confirm("DANGER: Are you sure you want to permanently delete your account?\n\nThis will remove ALL your projects, created assets (beats, vocals), and active subscriptions. This action is IRREVERSIBLE."))return;if(window.prompt(`To confirm, please type your email address (${$t.email}):`)===$t.email){a.loading("Wiping all account data...",{id:"del-acc"});try{let t=null;l?.currentUser&&(t=await l.currentUser.getIdToken(!0));const r=await fetch(`${g}/api/user/delete-account`,{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({userId:$t.uid,confirmedEmail:$t.email})});if(!r.ok){const e=await r.json().catch(()=>({}));throw new Error(e.error||"Cloud data wipe failed")}try{l?.currentUser&&await l.currentUser.delete()}catch(e){if("auth/requires-recent-login"===e.code)return void a.error("Security verification required. Please logout and login again to delete your account profile.",{id:"del-acc"})}a.success("Account wiped clean. Farewell!",{id:"del-acc",duration:5e3}),bn()}catch(t){a.error(`Deletion partially failed: ${t.message}. Data may persist.`,{id:"del-acc"})}}else a.error("Identity verification failed. Account was NOT deleted.")},dl=async e=>{if(!e)return;a.loading("Forking to your workspace...",{id:"fork-op"});const t={...e,id:`fork-${crypto.randomUUID()}`,name:`Fork of ${e.name||"Untitled Project"}`,creatorId:$t?.uid||"guest",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),source:"discovery-remix",isFork:!0,assets:Array.isArray(e.assets)?e.assets:[],agents:Array.isArray(e.agents)?e.agents:[]};if(Ur(e=>[t,...e||[]]),Et&&$t)try{let e=null;l?.currentUser&&(e=await l.currentUser.getIdToken(!0));const r=await fetch(`${g}/api/projects`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({userId:$t.uid,project:t})});if(r.ok){const e=await r.json();t.id=e.id}}catch(r){}a.success("Project forked successfully!",{id:"fork-op"}),Tr(t),Xa("overview"),as("hub")},cl=i.useMemo(()=>{if("news"!==jr)return[];if(!Array.isArray(vo))return[];const e=(wo||"").toLowerCase();return vo.filter(t=>{if(!t)return!1;const r=(t.title||"").toLowerCase(),i=(t.source||"").toLowerCase(),a=(t.content||"").toLowerCase();return r.includes(e)||i.includes(e)||a.includes(e)})},[jr,vo,wo]),pl=()=>{fo(!0),mo(1),So(""),tl(1,"",!0),a.success("Refreshing news...",{icon:"(refresh)",duration:1500})};i.useEffect(()=>{localStorage.setItem("studio_theme",Sr)},[Sr]);const ul=(()=>{if(!Ar)return null;if(Ar.agents&&Ar.agents.length>0)return Ar.agents.map((e,t)=>{const r="string"==typeof e?e:e?.id||"",i=void 0!==u&&u?u.find(e=>e.id===r):null;let a=Q;return i&&"function"==typeof i.icon?a=i.icon:e&&"function"==typeof e.icon&&(a=e.icon),{id:`step-${t}`,label:i?`Consult ${i.name}`:"object"==typeof e&&e.name?e.name:"Agent Task",desc:i?i.description||i.category:"Execute task",agentId:r,icon:a,completed:!1}});if("custom"===Ar.workflow)return[{id:"add-agent",label:"Add Your First Agent",agentId:null,icon:re,desc:"Select an agent to start working"}];switch(Ar.category){case"pro":return[{id:"lyrics",label:"Draft Lyrics",agentId:"ghost",icon:F,desc:"Generate verses & hooks"},{id:"beat",label:"Compose Beat",agentId:"beat",icon:U,desc:"Create instrumental backing"},{id:"art",label:"Cover Art",agentId:"album",icon:Q,desc:"Design album artwork"}];case"vybing":return[{id:"beat",label:"Generate Vibe",agentId:"beat",icon:U,desc:"Quick beat generation"},{id:"lyrics",label:"Freestyle Lyrics",agentId:"ghost",icon:F,desc:"Write over the beat"}];default:return[{id:"plan",label:"Create Plan",agentId:"release",icon:Ie,desc:"Outline your project goals"}]}})();return!Mt||$t||Dt?Et||Mt||Dt?o.jsxs("div",{className:`studio-container ${Sr}-theme`,...os,children:[Oi&&o.jsxs("div",{onClick:()=>{at(),Li(!1),a.success("Demo mode disabled - using real API")},style:nt.container,title:"Click to disable demo mode",children:[o.jsx("span",{children:nt.icon}),o.jsx("span",{children:nt.text})]}),o.jsxs("aside",{className:"studio-nav",children:[o.jsxs("div",{className:"studio-nav-logo",onClick:()=>r?.(),children:[o.jsx("div",{className:"logo-box studio-logo",children:o.jsx(m,{size:20,color:"white"})}),o.jsxs("div",{className:"logo-text",children:[o.jsxs("span",{className:"studio-name",children:["STUDIO AGENTS ",o.jsx("span",{style:{color:"var(--color-purple)",fontSize:"0.6em",verticalAlign:"middle",marginLeft:"8px",border:"1px solid var(--color-purple)",padding:"2px 6px",borderRadius:"4px"},children:"V3.5"})]}),o.jsx("span",{className:"studio-sub",children:"AI ECOSYSTEM"}),o.jsx("span",{className:"studio-domain",children:"studioagentsai.com"})]})]}),o.jsxs("nav",{className:"studio-nav-links",children:[o.jsxs("button",{className:"nav-link "+("mystudio"===jr?"active":""),onClick:()=>{as("mystudio"),Nr(null)},children:[o.jsx(y,{size:20}),o.jsx("span",{children:"My Studio"})]}),o.jsxs("button",{className:"nav-link "+("agents"===jr?"active":""),onClick:()=>{as("agents"),Nr(null)},children:[o.jsx(b,{size:20}),o.jsx("span",{children:"Agents Team"})]}),o.jsxs("button",{className:"nav-link "+("hub"===jr?"active":""),onClick:()=>{as("hub"),Nr(null)},children:[o.jsx(f,{size:20}),o.jsx("span",{children:"Project Hub"})]}),o.jsxs("button",{className:"nav-link "+("activity"===jr?"active":""),onClick:()=>{as("activity"),Nr(null),go("connections")},children:[o.jsx(v,{size:20}),o.jsx("span",{children:"Social Media Hub"})]}),o.jsxs("button",{className:"nav-link "+("resources"===jr?"active":""),onClick:()=>{as("resources"),Nr(null)},children:[o.jsx(j,{size:20}),o.jsx("span",{children:"Resources"})]}),o.jsxs("button",{className:"nav-link "+("news"===jr?"active":""),onClick:()=>{as("news"),Nr(null)},children:[o.jsx(w,{size:20}),o.jsx("span",{children:"Industry Pulse"})]}),o.jsxs("button",{className:"nav-link "+("support"===jr?"active":""),onClick:()=>{as("support"),Nr(null)},children:[o.jsx(S,{size:20}),o.jsx("span",{children:"Support"})]})]}),o.jsx("div",{className:"studio-nav-footer",children:o.jsxs("div",{className:"user-profile-mini haptic-press",onClick:()=>{as("profile"),Nr(null)},style:{cursor:"pointer"},children:[o.jsx("div",{className:"user-avatar",children:$t?.photoURL?o.jsx("img",{src:$t.photoURL,alt:"User",loading:"lazy",style:{width:"100%",height:"100%",borderRadius:"50%"}}):o.jsx("div",{style:{width:"100%",height:"100%",background:"var(--color-purple)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem"},children:$t?.displayName?.charAt(0)||"U"})}),o.jsxs("div",{className:"user-info",children:[o.jsx("p",{className:"user-name",children:Et?$t?.displayName||"Pro Creator":"Guest Creator"}),o.jsx("p",{className:"user-status",children:Et?"Pro Plan":"Free Account"}),Et?o.jsx("button",{className:"sign-out-link",style:{fontSize:"0.7rem",color:"var(--color-red)",background:"none",border:"none",padding:0,cursor:"pointer",marginTop:"4px",textAlign:"left"},onClick:e=>{e.stopPropagation(),bn()},children:"Sign Out"}):o.jsx("button",{className:"sign-in-link",style:{fontSize:"0.7rem",color:"var(--color-purple)",background:"none",border:"none",padding:0,cursor:"pointer",marginTop:"4px",textAlign:"left"},onClick:e=>{e.stopPropagation(),Zt(!0)},children:"Sign In"})]})]})})]}),o.jsxs("main",{className:"studio-main",onScroll:e=>{const{scrollTop:t,scrollHeight:r,clientHeight:i}=e.target;r-t<=i+150&&("activity"===jr&&!oo&&no?el(io+1):"news"===jr&&!ho&&bo&&tl(xo+1))},children:[o.jsxs("header",{className:"studio-header",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("h2",{className:"studio-title",children:Ir?Ir.name:"mystudio"===jr?"Dashboard":jr.charAt(0).toUpperCase()+jr.slice(1)}),"idle"!==oa&&o.jsxs("div",{className:"save-status-indicator animate-fadeIn",style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 10px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"500",background:"saving"===oa?"rgba(168, 85, 247, 0.15)":"saved"===oa?"rgba(34, 197, 94, 0.15)":"rgba(239, 68, 68, 0.15)",color:"saving"===oa?"var(--color-purple)":"saved"===oa?"var(--color-green)":"var(--color-red)",transition:"all 0.3s ease"},children:["saving"===oa&&o.jsx(k,{size:12,className:"spin"}),"saved"===oa&&o.jsx(z,{size:12}),"error"===oa&&o.jsx(C,{size:12}),o.jsx("span",{children:"saving"===oa?"Saving...":"saved"===oa?"Saved":"Save failed"})]})]}),o.jsxs("div",{className:"studio-header-actions",children:[o.jsx("button",{className:"action-button secondary haptic-press",onClick:()=>r?.(),title:"Back to Landing Page",children:o.jsx(I,{size:20})}),o.jsxs("button",{className:"action-button secondary haptic-press",onClick:()=>as("profile"),title:"User Profile",children:[o.jsx(N,{size:20}),o.jsx("span",{className:"desktop-only",children:"Profile"})]}),o.jsxs("button",{className:"action-button secondary haptic-press",onClick:()=>{Ts(0),Ns(!0)},title:"Welcome Tour",children:[o.jsx(m,{size:20}),o.jsx("span",{className:"desktop-only",children:"Tour"})]}),o.jsxs("button",{className:"action-button secondary haptic-press",onClick:()=>{as("support"),Nr(null)},title:"Help Center",children:[o.jsx(S,{size:20}),o.jsx("span",{className:"desktop-only",children:"Help"})]}),o.jsxs("button",{className:"action-button secondary haptic-press",onClick:()=>_n(!En),style:{position:"relative"},children:[o.jsx(A,{size:20}),Bo.some(e=>!e.read)&&o.jsx("span",{style:{position:"absolute",top:"-2px",right:"-2px",width:"8px",height:"8px",background:"var(--color-red)",borderRadius:"50%",border:"1px solid var(--card-bg)"}})]}),Et?o.jsx("div",{className:"user-avatar-header",style:{width:"32px",height:"32px",borderRadius:"50%",overflow:"hidden",marginLeft:"0.5rem",border:"1px solid var(--border-color)"},children:$t?.photoURL?o.jsx("img",{src:$t.photoURL,alt:"User",loading:"lazy",style:{width:"100%",height:"100%"}}):o.jsx("div",{style:{width:"100%",height:"100%",background:"var(--color-purple)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem"},children:$t?.displayName?.charAt(0)||"U"})}):o.jsx("button",{className:"cta-button-sm haptic-press",onClick:()=>Zt(!0),style:{marginLeft:"0.5rem",padding:"0.4rem 0.8rem",fontSize:"0.8rem"},children:"Sign In"}),En&&o.jsxs("div",{className:"notification-dropdown animate-fadeInUp",children:[o.jsxs("div",{className:"notif-header",children:[o.jsx("h3",{children:"Notifications"}),o.jsx("button",{onClick:()=>Eo(e=>e.map(e=>({...e,read:!0}))),children:"Mark all read"})]}),o.jsx("div",{className:"notif-list",children:0===Bo.length?o.jsx("div",{className:"notif-empty",children:"No new notifications"}):Bo.map(e=>o.jsxs("div",{className:"notif-item "+(e.read?"read":"unread"),children:[o.jsxs("div",{className:"notif-item-header",children:[o.jsx("span",{className:"notif-title",children:e.title}),o.jsx("span",{className:"notif-time",children:e.time})]}),o.jsx("p",{className:"notif-message",children:e.message})]},e.id))})]}),Et?o.jsx("div",{className:"user-projects-dropdown",children:o.jsxs("button",{className:"action-button primary haptic-press",onClick:()=>on(!0),children:["New Project (",Rr?.length||0,")"]})}):o.jsx("button",{className:"action-button primary haptic-press",onClick:()=>Zt(!0),children:"New Project"})]})]}),o.jsx("div",{className:"studio-content",children:o.jsx(vt,{name:"Main Content",children:(()=>{if("project_canvas"===jr&&!Ir)return Ar?o.jsx(i.Suspense,{fallback:o.jsx("div",{className:"p-8 text-center animate-fadeIn",children:o.jsx("div",{style:{opacity:.6},children:"Loading canvas..."})}),children:o.jsx(pt,{selectedProject:Ar,setSelectedProject:Tr,projects:Rr,setProjects:Ur,canvasPreviewAsset:Ba,setCanvasPreviewAsset:Ea,canvasAudioRef:Qo,isMobile:zr,setActiveTab:as,setShowOrchestrator:vi,setShowStudioSession:wi,setBackingTrack:is,backingTrack:rs,setSelectedAgent:Nr,setShowAddAgentModal:vs,AGENTS:u,getAgentHex:x,formatImageSrc:lt,formatVideoSrc:ct,formatAudioSrc:dt,safeOpenPreview:qs,PRODUCTION_STAGES:yt,socialConnections:Kt,SectionErrorBoundary:vt,SafeAssetWrapper:bt,toast:a})}):o.jsx("div",{className:"p-8 text-center animate-fadeIn",children:o.jsx("div",{style:{opacity:.6},children:"Loading project..."})});if("mystudio"===jr)return o.jsx(i.Suspense,{fallback:o.jsx("div",{className:"p-8 text-center animate-fadeIn",children:o.jsx("div",{style:{opacity:.6},children:"Loading dashboard..."})}),children:o.jsx(ut,{dashboardTab:Qa,setDashboardTab:Xa,managedAgents:Za,appSettings:to,paymentMethods:Ro,bankAccounts:Po,storageConnections:Ao,setStorageConnections:To,socialConnections:Kt,performanceStats:ko,adminStats:di,adminApiStatus:pi,isAdminLoading:gi,adminError:mi,systemStatus:yi,user:$t,isLoggedIn:Et,isAdmin:Gt,userCredits:xr,userPlan:hr,userProfile:Jt,projects:Rr,selectedProject:Ar,setSelectedProject:Tr,setActiveTab:as,setShowCreditsModal:Rn,setShowOrchestrator:vi,setShowProjectTypeChoice:on,setShowOnboarding:Ns,setOnboardingStep:Ts,setPendingProjectNav:Cs,setSelectedAgent:Nr,setShowLoginModal:Zt,setShowAddPaymentModal:An,setEditingPayment:Pn,setPaymentType:Bn,freeGenerationsUsed:br,FREE_GENERATION_LIMIT:3,twitterUsername:zo,metaName:Io,activeProjectSteps:ul,toggleAppSetting:In,handleDeleteAccount:ll,toggleAgentVisibility:Cn,handleConnectSocial:ol,buyCreditPack:vn,fetchAdminData:zn,handleDeletePayment:Hn,handleSubscribe:Wn,handleTextToVoice:Vn})});if(Ir&&"agents"!==jr){const e="function"==typeof Ir.icon?Ir.icon:m;return o.jsxs("div",{className:"agent-active-view animate-fadeInUp",style:{position:"relative",paddingBottom:"80px"},children:[Wi&&Ir.onboarding&&o.jsxs("div",{className:"agent-nudge-overlay animate-fadeInDown",children:[o.jsxs("div",{className:"nudge-header",children:[o.jsxs("h4",{children:[o.jsx(m,{size:16})," Quick Start Guide"]}),o.jsx("button",{className:"nudge-close",onClick:()=>Mi(!1),children:o.jsx(T,{size:16})})]}),o.jsx("div",{className:"nudge-steps",children:Ir.onboarding.map((e,t)=>o.jsxs("div",{className:"nudge-step",children:[o.jsx("span",{className:"step-num",children:t+1}),o.jsx("p",{children:e})]},t))}),o.jsx("div",{className:"nudge-footer",children:o.jsx("button",{className:"nudge-cta",onClick:()=>Mi(!1),children:"Got it, let's go!"})})]}),o.jsxs("button",{className:"back-to-grid",onClick:()=>Nr(null),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"none",border:"none",color:"#9ca3af",cursor:"pointer",marginBottom:"2rem"},children:[o.jsx(te,{size:20}),o.jsx("span",{children:"project_canvas"===jr?"Back to Project":"Back to Agents"})]}),o.jsxs("div",{className:"agent-detail-layout",children:[o.jsxs("div",{className:"agent-main-panel",children:[o.jsxs("div",{className:"agent-hero-card",children:[o.jsx("div",{className:`agent-icon-large ${Ir.colorClass}`,children:o.jsx(e,{size:40})}),o.jsxs("div",{className:"agent-hero-info",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[o.jsx("span",{className:"agent-badge",style:{background:"linear-gradient(90deg, var(--color-purple), var(--color-cyan))",color:"white",fontWeight:"800"},children:Ir.category}),o.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:"rgba(255,255,255,0.3)"}}),o.jsx("span",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.5)",letterSpacing:"1.5px",fontWeight:"800",textTransform:"uppercase"},children:"High-Fidelity Engine"})]}),o.jsx("h2",{style:{fontSize:"2.4rem",fontWeight:"900",letterSpacing:"-1px",marginBottom:"8px",background:"linear-gradient(180deg, #fff 0%, rgba(255,255,255,0.7) 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:Ir.name}),o.jsx("p",{style:{fontSize:"1rem",color:"rgba(255,255,255,0.6)",maxWidth:"600px",lineHeight:"1.6"},children:Ir.description||Ir.desc})]})]}),o.jsxs("div",{className:"agent-utility-box",children:[o.jsxs("div",{className:"utility-controls",children:[o.jsxs("div",{className:"control-group",children:[o.jsx("label",{children:"Genre / Style"}),o.jsxs("select",{className:"studio-select",value:Ia,onChange:e=>{Na(e.target.value),Ca(t=>({...t,genre:e.target.value}))},children:[o.jsxs("optgroup",{label:"Hip-Hop",children:[o.jsx("option",{value:"hip-hop",children:"Hip Hop / Rap"}),o.jsx("option",{value:"trap",children:"Trap"}),o.jsx("option",{value:"drill",children:"Drill"}),o.jsx("option",{value:"boom-bap",children:"90s Boom Bap"}),o.jsx("option",{value:"phonk",children:"Phonk"}),o.jsx("option",{value:"latin-trap",children:"Latin Trap"})]}),o.jsxs("optgroup",{label:"Pop & R&B",children:[o.jsx("option",{value:"pop",children:"Pop / Modern"}),o.jsx("option",{value:"r&b",children:"R&B / Soul"}),o.jsx("option",{value:"k-pop",children:"K-Pop"}),o.jsx("option",{value:"j-pop",children:"J-Pop"}),o.jsx("option",{value:"indie",children:"Indie"})]}),o.jsxs("optgroup",{label:"Electronic",children:[o.jsx("option",{value:"electronic",children:"Electronic / EDM"}),o.jsx("option",{value:"lo-fi",children:"Lo-Fi / Chill"}),o.jsx("option",{value:"synthwave",children:"Synthwave"}),o.jsx("option",{value:"disco",children:"Disco"})]}),o.jsxs("optgroup",{label:"African & Caribbean",children:[o.jsx("option",{value:"afrobeat",children:"Afrobeat"}),o.jsx("option",{value:"afro-pop",children:"Afro-Pop"}),o.jsx("option",{value:"amapiano",children:"Amapiano"}),o.jsx("option",{value:"dancehall",children:"Dancehall"}),o.jsx("option",{value:"reggae",children:"Reggae"})]}),o.jsxs("optgroup",{label:"Latin",children:[o.jsx("option",{value:"reggaeton",children:"Reggaeton"}),o.jsx("option",{value:"latin",children:"Latin"}),o.jsx("option",{value:"cumbia",children:"Cumbia"})]}),o.jsxs("optgroup",{label:"Rock & Guitar",children:[o.jsx("option",{value:"rock",children:"Rock / Alternative"}),o.jsx("option",{value:"metal",children:"Metal"}),o.jsx("option",{value:"punk",children:"Punk"}),o.jsx("option",{value:"acoustic",children:"Acoustic"})]}),o.jsxs("optgroup",{label:"Other",children:[o.jsx("option",{value:"country",children:"Country"}),o.jsx("option",{value:"jazz",children:"Jazz"}),o.jsx("option",{value:"classical",children:"Classical"}),o.jsx("option",{value:"gospel",children:"Gospel"}),o.jsx("option",{value:"funk",children:"Funk"}),o.jsx("option",{value:"bollywood",children:"Bollywood"})]})]})]}),o.jsxs("div",{className:"control-group",children:[o.jsxs("label",{children:["Intensity / Mood (",Aa,"/10)"]}),o.jsx("input",{type:"range",className:"studio-slider",min:"1",max:"10",value:Aa,onChange:e=>Ta(Number(e.target.value))})]})]}),o.jsxs("div",{className:"prompt-area",children:[o.jsxs("div",{className:"prompt-header",children:[o.jsx("label",{children:"Creative Prompt"}),o.jsxs("div",{className:"voice-controls",children:["English"!==za.language&&o.jsx("button",{className:"btn-pill glass translate-btn",onClick:qn,title:"Translate to English",children:o.jsx(Ne,{size:16})}),o.jsx("button",{className:"btn-pill "+(pa?"primary":"glass"),onClick:Ln,title:"Voice to Text",children:o.jsx(F,{size:16})}),o.jsx("button",{className:"btn-pill "+(ga?"primary":"glass"),onClick:Vn,title:"Text to Voice",children:o.jsx(O,{size:16})}),o.jsxs("div",{className:"voice-settings-container",children:[o.jsx("button",{className:"btn-pill "+(ya?"primary":"glass"),onClick:()=>{ba(!ya),ha(!1)},title:"How to use Voice Controls",children:o.jsx(S,{size:16})}),ya&&o.jsxs("div",{className:"voice-settings-dropdown animate-fadeInUp",style:{width:zr?"92vw":"380px",right:zr?"-60px":"40px",maxHeight:"70vh",overflowY:"auto",padding:"16px"},children:[o.jsxs("div",{style:{marginBottom:"12px",paddingBottom:"10px",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[o.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"0.95rem",fontWeight:"700",color:"white",fontFamily:"Georgia, serif"},children:"Vocal Creation Guide"}),o.jsx("p",{style:{margin:0,fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Everything you can do with AI vocals"})]}),o.jsxs("div",{className:"settings-group",style:{background:"rgba(168,85,247,0.06)",padding:"10px",borderRadius:"8px",marginBottom:"8px"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontWeight:"600"},children:[o.jsx(F,{size:14,style:{color:"#a855f7"}})," AI Rapper Voices"]}),o.jsx("p",{className:"help-text small",style:{marginTop:"4px"},children:"Male & female rappers with 8 delivery styles: Aggressive, Melodic, Trap, Drill, Boom-Bap, Fast Flow, Chill, and Hype."}),o.jsx("div",{style:{marginTop:"6px",padding:"6px 8px",background:"rgba(0,0,0,0.2)",borderRadius:"6px",fontSize:"0.7rem",color:"rgba(255,255,255,0.6)",fontStyle:"italic"},children:'Try: "Spit a 16-bar verse about making it from nothing, aggressive trap flow"'})]}),o.jsxs("div",{className:"settings-group",style:{background:"rgba(6,182,212,0.06)",padding:"10px",borderRadius:"8px",marginBottom:"8px"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontWeight:"600"},children:[o.jsx(U,{size:14,style:{color:"#06b6d4"}})," AI Singer Voices"]}),o.jsx("p",{className:"help-text small",style:{marginTop:"4px"},children:"Male & female singers across R&B/Soul, Pop, Hip-Hop, Country, Rock, and Jazz genres."}),o.jsx("div",{style:{marginTop:"6px",padding:"6px 8px",background:"rgba(0,0,0,0.2)",borderRadius:"6px",fontSize:"0.7rem",color:"rgba(255,255,255,0.6)",fontStyle:"italic"},children:'Try: "Sing a soulful R&B hook about summer nights in the city"'})]}),o.jsxs("div",{className:"settings-group",style:{background:"rgba(251,191,36,0.06)",padding:"10px",borderRadius:"8px",marginBottom:"8px"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontWeight:"600"},children:[o.jsx(F,{size:14,style:{color:"#fbbf24"}})," Voice Cloning"]}),o.jsx("p",{className:"help-text small",style:{marginTop:"4px"},children:"Upload a clear 5-10 second audio clip (.wav/.mp3) and the AI will learn your voice. Use it for every generation after."}),o.jsx("div",{style:{marginTop:"6px",padding:"6px 8px",background:"rgba(0,0,0,0.2)",borderRadius:"6px",fontSize:"0.7rem",color:"rgba(255,255,255,0.6)",fontStyle:"italic"},children:"Tip: Record in a quiet room, speak naturally, avoid background music"})]}),o.jsxs("div",{className:"settings-group",style:{background:"rgba(236,72,153,0.06)",padding:"10px",borderRadius:"8px",marginBottom:"8px"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontWeight:"600"},children:[o.jsx(m,{size:14,style:{color:"#ec4899"}})," Premium ElevenLabs"]}),o.jsx("p",{className:"help-text small",style:{marginTop:"4px"},children:"Select from premium AI voices with ultra-realistic tone and emotion. Available for Vocal Lab, Vocal Architect, Ghostwriter, Voiceover & Podcast agents."})]}),o.jsxs("div",{className:"settings-group",style:{background:"rgba(255,255,255,0.03)",padding:"10px",borderRadius:"8px",marginBottom:"8px"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontWeight:"600"},children:[o.jsx(O,{size:14,style:{color:"#10b981"}})," Narrator & Spoken Word"]}),o.jsx("p",{className:"help-text small",style:{marginTop:"4px"},children:"Deep narrator voice for intros/outros, or spoken word style for poetry and storytelling."})]}),o.jsxs("div",{style:{padding:"10px",background:"rgba(255,255,255,0.03)",borderRadius:"8px",marginBottom:"8px"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",fontSize:"0.8rem",color:"rgba(255,255,255,0.9)"},children:[o.jsx(ye,{size:14})," Quick Settings"]}),o.jsx("div",{style:{marginTop:"6px",display:"flex",flexWrap:"wrap",gap:"4px"},children:["15s","30s","1min","2min","3min"].map(e=>o.jsx("span",{style:{padding:"2px 8px",background:"rgba(255,255,255,0.06)",borderRadius:"4px",fontSize:"0.65rem",color:"rgba(255,255,255,0.6)"},children:e},e))}),o.jsx("p",{className:"help-text small",style:{marginTop:"6px"},children:"9 languages supported: English, Spanish, French, German, Italian, Portuguese, Japanese, Korean, Chinese"})]}),o.jsx("div",{style:{padding:"8px",background:"linear-gradient(135deg, rgba(168,85,247,0.1), rgba(6,182,212,0.1))",borderRadius:"8px",textAlign:"center"},children:o.jsxs("p",{style:{margin:0,fontSize:"0.7rem",color:"rgba(255,255,255,0.7)"},children:["Set voice type & style in ",o.jsx("strong",{style:{color:"white"},children:"Settings"}),", then type your lyrics and hit ",o.jsx("strong",{style:{color:"#a855f7"},children:"Generate"})]})})]})]}),o.jsxs("div",{className:"voice-settings-container",children:[o.jsx("button",{className:"btn-pill "+(ma?"primary":"glass"),onClick:()=>{ha(!ma),ba(!1)},title:"Voice Settings",children:o.jsx(ye,{size:16})}),ma&&o.jsxs("div",{className:"voice-settings-dropdown animate-fadeInUp",children:[o.jsxs("div",{className:"settings-group",children:[o.jsx("label",{children:"(mic) AI Voice Type (Real Vocals, Not TTS)"}),o.jsxs("select",{value:za.style||"rapper",onChange:e=>Ca({...za,style:e.target.value}),className:"settings-select",children:[o.jsxs("optgroup",{label:"(fire) AI Rappers (Suno/Bark)",children:[o.jsx("option",{value:"rapper",children:"(mic) Male Rapper"}),o.jsx("option",{value:"rapper-female",children:"(purple) Female Rapper"})]}),o.jsxs("optgroup",{label:"(music) AI Singers",children:[o.jsx("option",{value:"singer",children:"(mic) Male Singer (R&B/Soul)"}),o.jsx("option",{value:"singer-female",children:"(sparkle) Female Singer (Pop/R&B)"})]}),o.jsxs("optgroup",{label:"(voice)Â Speech/Narration",children:[o.jsx("option",{value:"narrator",children:"(speaker) Narrator (Deep Voice)"}),o.jsx("option",{value:"spoken",children:"(chat) Spoken Word"})]}),o.jsx("optgroup",{label:"âœ¨ Custom/Advanced",children:o.jsxs("option",{value:"cloned",disabled:!za.speakerUrl&&!Vr,children:["(dna) Cloned Voice ",!za.speakerUrl&&!Vr&&"(Upload first)"]})})]})]}),o.jsxs("div",{className:"settings-group",style:{padding:"10px",background:"rgba(255,255,255,0.03)",borderRadius:"8px",marginTop:"8px",border:"1px dashed rgba(255,255,255,0.1)"},children:[o.jsxs("label",{style:{fontSize:"0.75rem",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx(z,{size:14,className:"text-cyan"}),za.speakerUrl?"Voice Profile Loaded":"Clone Your Voice"]}),za.speakerUrl?o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--color-green)",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(Ce,{size:12})," Ready to use"]}),o.jsx("button",{onClick:()=>{Ca({...za,speakerUrl:null,style:"rapper"}),Fr(null),Kr(""),localStorage.removeItem("studio_cloned_voice_url"),localStorage.removeItem("studio_cloned_elevenlabs_id")},style:{background:"none",border:"none",color:"var(--color-red)",fontSize:"0.7rem",cursor:"pointer"},children:"Reset"})]}):o.jsxs("div",{onClick:()=>document.getElementById("voice-upload-input").click(),style:{padding:"12px",textAlign:"center",cursor:"pointer",border:"1px dashed rgba(255,255,255,0.2)",borderRadius:"6px",fontSize:"0.75rem",color:"var(--text-secondary)",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.background="rgba(255,255,255,0.05)",onMouseOut:e=>e.currentTarget.style.background="transparent",children:[o.jsx(Ae,{size:16,style:{marginBottom:"4px"}}),o.jsx("div",{children:"Upload 5-10s clip (.wav/.mp3)"}),o.jsx("input",{id:"voice-upload-input",type:"file",accept:"audio/*",hidden:!0,onChange:async e=>{const t=e.target.files[0];if(!t)return;const r=a.loading("Cloning voice via ElevenLabs IVC...");try{const e=await p(t,`voices/${$t?.uid||"guest"}_${Date.now()}`);Ca({...za,speakerUrl:e,style:"cloned"}),Fr(e),localStorage.setItem("studio_cloned_voice_url",e);try{const e=$t?await $t.getIdToken():null,r={"Content-Type":"application/json"};e&&(r.Authorization=`Bearer ${e}`);const i=new FileReader;i.readAsDataURL(t),i.onload=async()=>{try{const e=await fetch(`${g}/api/voice-clone`,{method:"POST",headers:r,body:JSON.stringify({samples:[i.result],voiceName:`Clone ${$t?.displayName||"Voice"} ${(new Date).toLocaleDateString()}`})}),t=await e.json();e.ok&&t.voiceId&&(Kr(t.voiceId),localStorage.setItem("studio_cloned_elevenlabs_id",t.voiceId))}catch(e){}}}catch(i){}a.success("Voice cloned! Ready for premium vocals.",{id:r})}catch(o){a.error("Failed to upload voice. Try again.",{id:r})}}})]})]}),("rapper"===za.style||"rapper-female"===za.style)&&o.jsxs("div",{className:"settings-group",children:[o.jsx("label",{children:"(target) Rap Flow & Delivery"}),o.jsxs("select",{value:za.rapStyle||"aggressive",onChange:e=>Ca({...za,rapStyle:e.target.value}),className:"settings-select",children:[o.jsx("option",{value:"aggressive",children:"(boom) Aggressive (Hard-hitting)"}),o.jsx("option",{value:"melodic",children:"(music) Melodic (Singing flow)"}),o.jsx("option",{value:"trap",children:"(fire) Trap (Triplets + Ad-libs)"}),o.jsx("option",{value:"drill",children:"(GB) Drill (UK style)"}),o.jsx("option",{value:"boom-bap",children:"(radio) Boom-Bap (Classic hip-hop)"}),o.jsx("option",{value:"fast",children:"(zap) Fast Flow (Technical)"}),o.jsx("option",{value:"chill",children:"(cool) Chill (Laid-back)"}),o.jsx("option",{value:"hype",children:"(loud) Hype (High energy)"})]})]}),("singer"===za.style||"singer-female"===za.style)&&o.jsxs("div",{className:"settings-group",children:[o.jsx("label",{children:"(music) Music Genre"}),o.jsxs("select",{value:za.genre||"r&b",onChange:e=>{Ca({...za,genre:e.target.value}),Na(e.target.value)},className:"settings-select",children:[o.jsx("option",{value:"r&b",children:"(purple) R&B / Soul"}),o.jsx("option",{value:"pop",children:"(star) Pop"}),o.jsx("option",{value:"hip-hop",children:"(fire) Hip-Hop"}),o.jsx("option",{value:"soul",children:"(sax) Soul / Gospel"}),o.jsx("option",{value:"country",children:"(guitar) Country / Folk"}),o.jsx("option",{value:"rock",children:"(rock) Rock / Metal"}),o.jsx("option",{value:"jazz",children:"(trumpet) Jazz / Blues"})]})]}),o.jsxs("div",{className:"settings-split",style:{display:"flex",gap:"8px",marginTop:"8px"},children:[o.jsxs("div",{className:"settings-group",style:{flex:1},children:[o.jsx("label",{children:"(user) Gender"}),o.jsxs("select",{value:za.gender,onChange:e=>Ca({...za,gender:e.target.value}),className:"settings-select",children:[o.jsx("option",{value:"male",children:"(man) Male"}),o.jsx("option",{value:"female",children:"(woman) Female"})]})]}),o.jsxs("div",{className:"settings-group",style:{flex:1},children:[o.jsx("label",{children:"(location) Region / Accent"}),o.jsxs("select",{value:za.region,onChange:e=>Ca({...za,region:e.target.value}),className:"settings-select",children:[o.jsx("option",{value:"US",children:"(US) US"}),o.jsx("option",{value:"UK",children:"(GB) UK"}),o.jsx("option",{value:"AU",children:"(AU) AU"}),o.jsx("option",{value:"IN",children:"(IN) IN"})]})]})]}),o.jsxs("div",{className:"settings-group",style:{marginTop:"8px"},children:[o.jsx("label",{children:"(globe) Language (Voice & Transcription)"}),o.jsxs("select",{value:za.language,onChange:e=>Ca({...za,language:e.target.value}),className:"settings-select",children:[o.jsx("option",{value:"English",children:"(US) English"}),o.jsx("option",{value:"Spanish",children:"(ES) Spanish"}),o.jsx("option",{value:"French",children:"(FR) French"}),o.jsx("option",{value:"German",children:"(DE) German"}),o.jsx("option",{value:"Italian",children:"(IT) Italian"}),o.jsx("option",{value:"Portuguese",children:"(PT) Portuguese"}),o.jsx("option",{value:"Japanese",children:"(JP) Japanese"}),o.jsx("option",{value:"Korean",children:"(KR) Korean"}),o.jsx("option",{value:"Chinese",children:"(CN) Chinese"})]})]}),o.jsxs("div",{className:"settings-group",style:{marginTop:"8px"},children:[o.jsx("label",{children:"â± Generation Duration"}),o.jsxs("select",{value:za.duration||30,onChange:e=>Ca({...za,duration:parseInt(e.target.value)}),className:"settings-select",children:[o.jsx("option",{value:15,children:"15 Seconds (Rapid)"}),o.jsx("option",{value:30,children:"30 Seconds (Standard)"}),o.jsx("option",{value:60,children:"1 Minute (Extended)"}),o.jsx("option",{value:120,children:"2 Minutes (Professional)"}),o.jsx("option",{value:180,children:"3 Minutes (Full Track)"})]})]}),Ir&&["beat","sample","music-gpt","beat-maker","beat-lab","beat-architect","beat-arch","drum-machine","drums","instrument","drop","film","sample-master","score-edit","drop-zone","music-architect","audio-gen","video-scorer"].includes(Ir.id)&&o.jsxs("div",{className:"settings-field",children:[o.jsx("label",{className:"settings-label",children:"BPM"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("input",{type:"range",min:"60",max:"200",value:za.bpm||90,onChange:e=>Ca({...za,bpm:parseInt(e.target.value)}),style:{flex:1}}),o.jsx("span",{style:{minWidth:"40px",textAlign:"right",fontSize:"0.85rem",fontWeight:"700",color:"var(--color-cyan)"},children:za.bpm||90})]})]}),o.jsx("p",{className:"settings-info",style:{marginTop:"8px",opacity:.8},children:["rapper","rapper-female","singer","singer-female","cloned","narrator","spoken"].includes(za.style)?o.jsxs(o.Fragment,{children:[o.jsx("strong",{children:"AI Vocals Mode"})," -Real AI voices via Replicate & XTTS (30-60s generation time).",("rapper"===za.style||"rapper-female"===za.style)&&` Flow: ${za.rapStyle||"aggressive"}`,("singer"===za.style||"singer-female"===za.style)&&` Genre: ${za.genre||"r&b"}`]}):o.jsxs(o.Fragment,{children:["(zap) ",o.jsx("strong",{children:"Instant TTS Mode"})," -Browser voices for quick preview. Switch to a pro style for real AI vocals."]})})]})]})]})]}),o.jsx("div",{className:"model-picker-card",style:{marginBottom:"12px",padding:"12px",background:"var(--color-bg-secondary)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.06)"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(6, 182, 212, 0.2))",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(ie,{size:18,style:{color:"var(--color-purple)"}})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"2px"},children:"AI Model"}),o.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",color:"white"},children:Ct.find(e=>e.id===tn)?.name||"Gemini Flash"})]})]}),o.jsxs("select",{value:tn,onChange:e=>rn(e.target.value),style:{padding:"8px 32px 8px 12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"var(--text-secondary)",fontSize:"0.75rem",cursor:"pointer",appearance:"none",WebkitAppearance:"none",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%239ca3af'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"14px"},children:[Ct.filter(e=>"Google"===e.provider).map(e=>o.jsx("option",{value:e.id,children:e.name},e.id)),Ct.filter(e=>"Anthropic"===e.provider).map(e=>o.jsx("option",{value:e.id,children:e.name},e.id)),Ct.filter(e=>"OpenAI"===e.provider).map(e=>o.jsx("option",{value:e.id,children:e.name},e.id))]})]})}),o.jsxs("div",{className:"dna-vault-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"10px",padding:"0 4px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(X,{size:16,color:"var(--color-purple)"}),o.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"600",color:"rgba(255,255,255,0.8)"},children:"Studio DNA Vault"})]}),o.jsxs("button",{onClick:()=>li(!ni),style:{padding:"4px 8px",background:"rgba(168, 85, 247, 0.1)",border:"1px solid rgba(168, 85, 247, 0.2)",borderRadius:"6px",fontSize:"0.7rem",color:"var(--color-purple)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[ni?"Hide Vault":"Open Vault",ni?o.jsx(Te,{size:12}):o.jsx(ve,{size:12})]})]}),o.jsxs("div",{className:"inspiration-container",style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px",maxHeight:ni?"none":"0",overflow:"hidden",transition:"all 0.3s ease"},children:[o.jsxs("div",{style:{padding:"14px",background:"rgba(168, 85, 247, 0.05)",borderRadius:"10px",border:"1px solid rgba(168, 85, 247, 0.1)",marginBottom:"10px"},children:[o.jsx("h4",{style:{margin:"0 0 6px 0",fontSize:"0.9rem",color:"#a855f7",fontWeight:"bold",fontFamily:"Georgia, serif"},children:"What is DNA?"}),o.jsxs("p",{style:{margin:"0 0 10px 0",fontSize:"0.75rem",color:"rgba(255,255,255,0.7)",lineHeight:"1.5",fontFamily:"Georgia, serif"},children:['Studio DNA captures your artistic identity. Upload references so the AI "inherits" your style â€” every generation feels like ',o.jsx("em",{children:"your"})," creation."]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",padding:"6px 8px",background:"rgba(236,72,153,0.06)",borderRadius:"6px"},children:[o.jsx(B,{size:14,color:"#ec4899",style:{marginTop:"2px",flexShrink:0}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#ec4899"},children:"Visual DNA"}),o.jsx("div",{style:{fontSize:"0.68rem",color:"rgba(255,255,255,0.55)",lineHeight:"1.4"},children:"Upload mood boards, album art refs, or screenshots. AI matches your aesthetic for covers, videos, and visuals."})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",padding:"6px 8px",background:"rgba(6,182,212,0.06)",borderRadius:"6px"},children:[o.jsx(U,{size:14,color:"#06b6d4",style:{marginTop:"2px",flexShrink:0}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#06b6d4"},children:"Audio DNA"}),o.jsx("div",{style:{fontSize:"0.68rem",color:"rgba(255,255,255,0.55)",lineHeight:"1.4"},children:"Reference beats, samples, or backing tracks. The AI inherits tempo, key & vibe for new beats or vocal mixing."})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",padding:"6px 8px",background:"rgba(168,85,247,0.06)",borderRadius:"6px"},children:[o.jsx(oe,{size:14,color:"#a855f7",style:{marginTop:"2px",flexShrink:0}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#a855f7"},children:"Lyrics DNA"}),o.jsx("div",{style:{fontSize:"0.68rem",color:"rgba(255,255,255,0.55)",lineHeight:"1.4"},children:"Upload reference lyrics, poetry, or text files. AI learns your writing style, wordplay, and themes."})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",padding:"6px 8px",background:"rgba(251,191,36,0.06)",borderRadius:"6px"},children:[o.jsx(F,{size:14,color:"#fbbf24",style:{marginTop:"2px",flexShrink:0}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#fbbf24"},children:"Voice Clone"}),o.jsx("div",{style:{fontSize:"0.68rem",color:"rgba(255,255,255,0.55)",lineHeight:"1.4"},children:"Upload a 5-10s voice clip to clone your voice. AI sings/raps in your tone for every vocal generation."})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",padding:"6px 8px",background:"rgba(239,68,68,0.06)",borderRadius:"6px"},children:[o.jsx(H,{size:14,color:"#ef4444",style:{marginTop:"2px",flexShrink:0}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#ef4444"},children:"Seed DNA"}),o.jsx("div",{style:{fontSize:"0.68rem",color:"rgba(255,255,255,0.55)",lineHeight:"1.4"},children:"Upload a scene, character, or still frame. AI uses it as a starting point for video generation."})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",padding:"6px 8px",background:"rgba(255,255,255,0.03)",borderRadius:"6px"},children:[o.jsx(Re,{size:14,color:"#06b6d4",style:{marginTop:"2px",flexShrink:0}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"rgba(255,255,255,0.7)"},children:"Audio / Visual IDs"}),o.jsx("div",{style:{fontSize:"0.68rem",color:"rgba(255,255,255,0.55)",lineHeight:"1.4"},children:"Paste an Asset ID from your project to reference existing tracks or visuals across agents."})]})]})]}),o.jsx("div",{style:{marginTop:"10px",padding:"8px",background:"linear-gradient(135deg, rgba(168,85,247,0.08), rgba(6,182,212,0.08))",borderRadius:"6px",textAlign:"center"},children:o.jsx("p",{style:{margin:0,fontSize:"0.68rem",color:"rgba(255,255,255,0.6)"},children:"Upload any combo of DNA slots, then describe what you want â€” the AI blends them into your generation."})})]}),o.jsxs("div",{className:"reference-upload-card",style:{padding:"10px 12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"10px",border:"album"===Ir?.id||"video-creator"===Ir?.id?"1px dashed #ec489950":"1px dashed rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(236, 72, 153, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(B,{size:16,color:"#ec4899"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Visual DNA"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Br?"Image Attached":"Reference Image..."})]})]}),o.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Br&&o.jsx("button",{onClick:()=>Er(null),style:{padding:"6px",background:"none",border:"none",color:"rgba(255,255,255,0.4)",cursor:"pointer"},children:o.jsx(T,{size:14})}),o.jsxs("label",{style:{padding:"5px 10px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",fontSize:"0.7rem",cursor:"pointer",color:"white"},children:[o.jsx("input",{id:"visual-dna-input",type:"file",accept:"image/*",style:{display:"none"},onChange:e=>Jn("visual",e)}),ii.visual?o.jsx(k,{size:12,className:"spin"}):"Upload"]})]})]}),o.jsxs("div",{className:"reference-upload-card",style:{padding:"10px 12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"10px",border:"beat"===Ir?.id||"sample"===Ir?.id||"video-creator"===Ir?.id?"1px dashed var(--color-cyan-semi)":"1px dashed rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(6, 182, 212, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(U,{size:16,color:"var(--color-cyan)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Audio DNA"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:_r?"Sound Attached":rs?rs.title:"Reference Audio..."})]})]}),o.jsxs("div",{style:{display:"flex",gap:"6px"},children:[(_r||rs)&&o.jsx("button",{onClick:()=>{Dr(null),is(null)},style:{padding:"6px",background:"none",border:"none",color:"rgba(255,255,255,0.4)",cursor:"pointer"},children:o.jsx(T,{size:14})}),o.jsxs("label",{style:{padding:"5px 10px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",fontSize:"0.7rem",cursor:"pointer",color:"white"},children:[o.jsx("input",{id:"audio-dna-input",type:"file",accept:"audio/*",style:{display:"none"},onChange:e=>Jn("audio",e)}),ii.audio?o.jsx(k,{size:12,className:"spin"}):"Upload"]})]})]}),o.jsxs("div",{className:"reference-upload-card",style:{padding:"10px 12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"10px",border:"ghost"===Ir?.id||"ghost-1"===Ir?.id?"1px dashed #a855f750":"1px dashed rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(168, 85, 247, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(oe,{size:16,color:"#a855f7"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Lyrics DNA"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Or?"Context Attached":"Reference Text/File..."})]})]}),o.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Or&&o.jsx("button",{onClick:()=>Lr(null),style:{padding:"6px",background:"none",border:"none",color:"rgba(255,255,255,0.4)",cursor:"pointer"},children:o.jsx(T,{size:14})}),o.jsxs("label",{style:{padding:"5px 10px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",fontSize:"0.7rem",cursor:"pointer",color:"white"},children:[o.jsx("input",{id:"lyrics-dna-input",type:"file",accept:".txt,.doc,.docx,.pdf",style:{display:"none"},onChange:e=>Jn("lyrics",e)}),ii.lyrics?o.jsx(k,{size:12,className:"spin"}):"Upload"]})]})]}),o.jsxs("div",{className:"reference-upload-card",style:{padding:"10px 12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"10px",border:Zr?"1px solid var(--color-cyan)":"1px solid rgba(255, 255, 255, 0.1)",display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(6, 182, 212, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Re,{size:16,color:"var(--color-cyan)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Audio ID"}),o.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)"},children:"Reference a project track"})]})]}),Zr&&o.jsx("button",{onClick:()=>ei(""),style:{background:"none",border:"none",color:"rgba(255,255,255,0.4)",cursor:"pointer"},children:o.jsx(T,{size:14})})]}),o.jsx("input",{type:"text",placeholder:"Paste Audio ID (e.g. remix_789)",value:Zr,onChange:e=>ei(e.target.value),style:{width:"100%",background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",padding:"8px 10px",fontSize:"0.75rem",color:"white",outline:"none",fontFamily:"monospace"}})]}),o.jsxs("div",{className:"reference-upload-card",style:{padding:"10px 12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"10px",border:ti?"1px solid #ec4899":"1px solid rgba(255, 255, 255, 0.1)",display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(236, 72, 153, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Re,{size:16,color:"#ec4899"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Visual ID"}),o.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.4)"},children:"Reference a style guide"})]})]}),ti&&o.jsx("button",{onClick:()=>ri(""),style:{background:"none",border:"none",color:"rgba(255,255,255,0.4)",cursor:"pointer"},children:o.jsx(T,{size:14})})]}),o.jsx("input",{type:"text",placeholder:"Paste Visual ID (e.g. style_dark_vibe)",value:ti,onChange:e=>ri(e.target.value),style:{width:"100%",background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",padding:"8px 10px",fontSize:"0.75rem",color:"white",outline:"none",fontFamily:"monospace"}})]}),o.jsxs("div",{className:"reference-upload-card",style:{padding:"10px 12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"10px",border:"podcast"===Ir?.id||"voiceover"===Ir?.id||"vocal-arch"===Ir?.id||"vocal-lab"===Ir?.id?"1px dashed #fbbf2450":"1px dashed rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(251, 191, 36, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(F,{size:16,color:"#fbbf24"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Voice Clone"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Yr?Qr.find(e=>e.voice_id===Yr)?.name||"Custom Voice":Vr?"Voice Profile Active":"Sample to Clone..."})]})]}),o.jsxs("div",{style:{display:"flex",gap:"6px"},children:[(Vr||Yr)&&o.jsx("button",{onClick:()=>{Fr(null),Kr("")},style:{padding:"6px",background:"none",border:"none",color:"rgba(255,255,255,0.4)",cursor:"pointer"},children:o.jsx(T,{size:14})}),o.jsxs("label",{style:{padding:"5px 10px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",fontSize:"0.7rem",cursor:"pointer",color:"white"},children:[o.jsx("input",{id:"voice-dna-input",type:"file",accept:"audio/*",style:{display:"none"},onChange:Yn}),oi?o.jsx(k,{size:12,className:"spin"}):"Clone"]})]})]}),("vocal-lab"===Ir?.id||"vocal-arch"===Ir?.id||"ghost"===Ir?.id||"voiceover"===Ir?.id||"podcast"===Ir?.id)&&Qr.length>0&&o.jsxs("div",{style:{padding:"0 4px",marginTop:"4px"},children:[o.jsxs("select",{value:Yr,onChange:e=>{Kr(e.target.value),localStorage.setItem(`studio_elevenlabs_voice_id_${$t?.uid||localStorage.getItem("studio_user_id")||"guest"}`,e.target.value),e.target.value&&Fr(null)},className:"w-full haptic-press",style:{width:"100%",padding:"10px 14px",borderRadius:"12px",background:Yr?"rgba(251, 191, 36, 0.1)":"rgba(0,0,0,0.3)",border:Yr?"1px solid #fbbf24":"1px solid rgba(255,255,255,0.1)",color:Yr?"#fbbf24":"rgba(255,255,255,0.7)",fontSize:"0.8rem",fontWeight:"600",outline:"none",cursor:"pointer"},children:[o.jsx("option",{value:"",style:{background:"#111",color:"#888"},children:"-- Select Premium Voice --"}),Qr.map(e=>o.jsxs("option",{value:e.voice_id,style:{background:"#111",color:"white"},children:[e.name," (",e.category,")"]},e.voice_id))]}),o.jsxs("div",{style:{fontSize:"0.65rem",color:"#fbbf24",opacity:.8,marginTop:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(m,{size:10}),"Premium Engine: ElevenLabs Quality"]})]}),o.jsxs("div",{className:"reference-upload-card",style:{padding:"10px 12px",background:Hr?"rgba(16, 185, 129, 0.05)":"rgba(255, 255, 255, 0.03)",borderRadius:"10px",border:Hr?"1px solid rgba(16, 185, 129, 0.4)":"vocal"===Ir?.id||"vocal-arch"===Ir?.id||"vocal-lab"===Ir?.id?"1px dashed rgba(16, 185, 129, 0.4)":"1px dashed rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:Hr?"rgba(16, 185, 129, 0.2)":"rgba(16, 185, 129, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(W,{size:16,color:"#10b981"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.7rem",color:Hr?"#10b981":"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:Hr?"600":"400"},children:"Reference Song"}),o.jsx("div",{style:{fontSize:"0.75rem",color:Hr?"#10b981":"rgba(255,255,255,0.5)",fontWeight:"500",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Hr?"Tone & Vibe Locked âœ“":"Match tone, warmth, depth..."})]})]}),o.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Hr&&o.jsx("button",{onClick:()=>Gr(null),style:{padding:"6px",background:"none",border:"none",color:"rgba(255,255,255,0.4)",cursor:"pointer"},children:o.jsx(T,{size:14})}),o.jsxs("label",{style:{padding:"5px 10px",background:Hr?"rgba(16, 185, 129, 0.15)":"rgba(255, 255, 255, 0.05)",borderRadius:"6px",fontSize:"0.7rem",cursor:"pointer",color:Hr?"#10b981":"white",fontWeight:Hr?"600":"400"},children:[o.jsx("input",{type:"file",accept:"audio/*",style:{display:"none"},onChange:async e=>{const t=e.target.files?.[0];if(!t||qr)return;if(t.size>15728640)return void a.error("Reference song too large (max 15MB)");Jr(!0);const r=a.loading("Uploading reference song...");try{const e=$t?await $t.getIdToken():null,i={"Content-Type":"application/json"};e&&(i.Authorization=`Bearer ${e}`);const o=new FileReader;o.readAsDataURL(t),o.onload=async()=>{try{const s=await fetch(`${g}/api/upload-asset`,{method:"POST",headers:i,body:JSON.stringify({data:o.result,fileName:`ref-song-${Date.now()}-${t.name.replace(/\s+/g,"-")}`,mimeType:t.type,assetType:"audio"})}),n=await s.json();if(!s.ok||!n.url)throw new Error(n.error||"Upload failed");if(Gr(n.url),a.success("Reference song uploaded! Vocals will match its tone & vibe.",{id:r}),$t?.uid&&d)try{const e=Fe(d,"users",$t.uid);await He(e,{referenceSongUrl:n.url,lastRefSongUpdate:Date.now()})}catch(e){}}catch(s){a.error("Failed to upload reference song",{id:r})}finally{Jr(!1)}},o.onerror=()=>{a.error("Failed to read file"),Jr(!1)}}catch(i){a.error("Upload failed"),Jr(!1)}}}),qr?o.jsx(k,{size:12,className:"spin"}):Hr?"Replace":"Upload Song"]})]})]}),o.jsxs("div",{className:"reference-upload-card",style:{padding:"10px 12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"10px",border:"video-creator"===Ir?.id?"1px dashed #ef444450":"1px dashed rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(239, 68, 68, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(H,{size:16,color:"#ef4444"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Seed DNA"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"white",fontWeight:"500",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Wr?"Video Reference Ready":"Scene or Character..."})]})]}),o.jsxs("div",{style:{display:"flex",gap:"6px"},children:[Wr&&o.jsx("button",{onClick:()=>Mr(null),style:{padding:"6px",background:"none",border:"none",color:"rgba(255,255,255,0.4)",cursor:"pointer"},children:o.jsx(T,{size:14})}),o.jsxs("label",{style:{padding:"5px 10px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",fontSize:"0.7rem",cursor:"pointer",color:"white"},children:[o.jsx("input",{type:"file",accept:"image/*,video/*",style:{display:"none"},onChange:e=>Jn("video",e)}),ii.video?o.jsx(k,{size:12,className:"spin"}):"Upload"]})]})]})]}),!ni&&o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"12px"},children:[(Br||ti)&&o.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"#ec489920",color:"#ec4899",borderRadius:"4px",display:"flex",alignItems:"center",gap:"4px",border:"1px solid #ec489940"},children:[o.jsx(B,{size:10})," ",ti?`Visual ID: ${ti}`:"Visual DNA Active"]}),(_r||Zr)&&o.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"#06b6d420",color:"#06b6d4",borderRadius:"4px",display:"flex",alignItems:"center",gap:"4px",border:"1px solid #06b6d440"},children:[o.jsx(U,{size:10})," ",Zr?`Audio ID: ${Zr}`:"Audio DNA Active"]}),Or&&o.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"#a855f720",color:"#a855f7",borderRadius:"4px",display:"flex",alignItems:"center",gap:"4px",border:"1px solid #a855f740"},children:[o.jsx(oe,{size:10})," Lyrics DNA Active"]}),Vr&&o.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"#fbbf2420",color:"#fbbf24",borderRadius:"4px",display:"flex",alignItems:"center",gap:"4px",border:"1px solid #fbbf2440"},children:[o.jsx(F,{size:10})," Voice Ready"]}),Wr&&o.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"#ef444420",color:"#ef4444",borderRadius:"4px",display:"flex",alignItems:"center",gap:"4px",border:"1px solid #ef444440"},children:[o.jsx(H,{size:10})," Seed DNA Ready"]}),rs&&o.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 8px",background:"#a855f720",color:"#a855f7",borderRadius:"4px",display:"flex",alignItems:"center",gap:"4px",border:"1px solid #a855f740",cursor:"pointer"},onClick:()=>is(null),title:"Click to remove",children:[o.jsx(U,{size:10})," ðŸ”— Synced: ",rs.title,rs.bpm?` (${rs.bpm} BPM)`:""," âœ•"]})]}),rs&&("vocal"===Ir?.id||"video-creator"===Ir?.id||"voice"===Ir?.id||Ir?.category?.toLowerCase().includes("vocal")||Ir?.category?.toLowerCase().includes("video"))&&o.jsxs("div",{style:{padding:"10px 14px",marginBottom:"12px",background:"linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(6, 182, 212, 0.15))",borderRadius:"12px",border:"1px solid rgba(168, 85, 247, 0.3)",display:"flex",alignItems:"center",gap:"12px",fontSize:"0.8rem"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(168, 85, 247, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(U,{size:16,color:"var(--color-purple)"})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsxs("div",{style:{fontWeight:"600",color:"white",marginBottom:"2px"},children:["ðŸ”— Synced to: ",rs.title]}),o.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:["video-creator"===Ir?.id?"Video will match beat timing & BPM":"Vocals will sync to this beat",rs.bpm?` â€¢ ${rs.bpm} BPM`:""]})]}),o.jsx("button",{onClick:()=>is(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.4)",cursor:"pointer",padding:"4px"},children:o.jsx(T,{size:14})})]}),o.jsx("textarea",{ref:Yo,placeholder:`Describe what you want ${Ir.name} to create...`,className:"studio-textarea",style:{minHeight:zr?"100px":"120px",padding:zr?"12px":"20px"}}),o.jsxs("div",{className:"generation-actions",children:[o.jsxs("button",{className:"cta-button-secondary",onClick:Kn,disabled:ta,title:"Generate a preview",children:[o.jsx(_,{size:16}),"Preview"]}),o.jsx("button",{className:"cta-button-premium "+(ta?"loading":""),style:{flex:1},onClick:Kn,disabled:ta,children:ta?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-mini"}),o.jsx("span",{children:"Processing..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(Q,{size:18}),o.jsxs("span",{children:["Generate ",Ir.name]})]})}),o.jsxs("button",{className:"cta-button-secondary",onClick:()=>la(!0),title:"Save to Cloud Storage",children:[o.jsx(z,{size:18}),o.jsx("span",{children:"Save to Cloud"})]})]}),(()=>{const e=Ir?.id?ia[Ir.id]:null;return e?o.jsxs("div",{className:"agent-preview-mini animate-fadeIn",style:{marginTop:"16px",padding:"12px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[o.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",textTransform:"uppercase",fontWeight:"600"},children:"Last Generated"}),o.jsx("div",{style:{display:"flex",gap:"8px"},children:o.jsxs("button",{onClick:()=>Js(e),style:{background:"none",border:"none",color:"var(--color-cyan)",fontSize:"0.75rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(we,{size:12})," View Full"]})})]}),"image"===e.type&&e.imageUrl?o.jsx("img",{src:lt(e.imageUrl),alt:"Preview",style:{width:"100%",height:"220px",objectFit:"cover",borderRadius:"12px",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 8px 30px rgba(0,0,0,0.5)"},onClick:()=>Js(e),onError:e=>{e.target.style.display="none"}}):"video"===e.type&&e.videoUrl?o.jsxs("div",{style:{position:"relative",borderRadius:"12px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 8px 30px rgba(0,0,0,0.5)"},children:[o.jsx("video",{src:ct(e.videoUrl),style:{width:"100%",height:"220px",objectFit:"cover",cursor:"pointer"},onClick:()=>Js(e),onError:e=>{e.target.style.display="none"}}),e.audioUrl&&o.jsxs("div",{style:{position:"absolute",bottom:"10px",right:"10px",background:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",padding:"4px 10px",borderRadius:"20px",fontSize:"0.7rem",color:"var(--color-cyan)",display:"flex",alignItems:"center",gap:"6px",fontWeight:"800"},children:[o.jsx(U,{size:12})," SYNCED AUDIO"]})]}):"audio"!==e.type&&"vocal"!==e.type||!e.audioUrl?o.jsx("div",{className:"flavorful-text-output",style:{fontSize:"1rem",lineHeight:"1.8",color:"rgba(255,255,255,0.95)",padding:"24px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",maxHeight:"400px",overflowY:"auto",border:"1px solid rgba(255,255,255,0.05)",fontFamily:"'Georgia', serif",whiteSpace:"pre-wrap"},children:e.snippet}):o.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"12px",padding:"20px",display:"flex",gap:"20px",alignItems:"center",border:"1px solid rgba(255,255,255,0.05)"},children:[e.imageUrl&&o.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"12px",background:`url(${lt(e.imageUrl)}) center/cover`,flexShrink:0,boxShadow:"0 4px 15px rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)"}}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[e.backingTrackUrl?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--color-pink)",marginBottom:"6px",fontWeight:"800",letterSpacing:"1px",textTransform:"uppercase"},children:"Synced Vocal Lab"}),o.jsx("audio",{controls:!0,src:dt(e.audioUrl),style:{width:"100%",height:"36px",marginBottom:"8px"},onError:e=>{e.target.style.opacity="0.4"},onPlay:e=>{const t=e.target.parentElement.querySelector(".preview-backing-audio");t&&(t.currentTime=e.target.currentTime,t.play())},onPause:e=>{const t=e.target.parentElement.querySelector(".preview-backing-audio");t&&t.pause()},onTimeUpdate:e=>{const t=e.target.parentElement.querySelector(".preview-backing-audio");t&&Math.abs(t.currentTime-e.target.currentTime)>.5&&(t.currentTime=e.target.currentTime)}}),o.jsx("audio",{className:"preview-backing-audio",src:dt(e.backingTrackUrl),style:{display:"none"},onError:e=>{}})]}):o.jsx("audio",{controls:!0,src:dt(e.audioUrl),style:{width:"100%",height:"36px",marginBottom:"8px"},onError:e=>{e.target.style.opacity="0.4"}}),o.jsxs("div",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.7)",fontStyle:"italic",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:['"',e.snippet?.substring(0,80),'..."']})]})]}),o.jsxs("div",{style:{marginTop:"12px",display:"flex",gap:"8px"},children:[o.jsxs("button",{className:"btn-pill primary",style:{flex:1,fontSize:"0.75rem",justifyContent:"center"},onClick:()=>{Ar?(mn(Ar.id,e),a.success("Saved to Hub")):hn(`New ${Ir?.name||"AI"} Project`,e)},children:[o.jsx(Z,{size:14})," Save to Hub"]}),e.snippet&&!e.audioUrl&&o.jsxs("button",{className:"btn-pill secondary",style:{fontSize:"0.75rem"},disabled:Pr,onClick:()=>{const t=e.snippet||e.content||"";["rapper","rapper-female","singer","singer-female"].includes(za.style)?Fn(t,Ir?.name||"AI"):window.speechSynthesis.speaking?window.speechSynthesis.cancel():Vn(t)},title:["rapper","rapper-female","singer","singer-female"].includes(za.style)?`Read aloud using AI ${za.style} voice (takes 30-60 seconds)`:"Read text aloud using browser TTS",children:[o.jsx(O,{size:14})," ",Pr?"Creating...":"Read Aloud"]})]})]}):null})(),o.jsxs("p",{className:"studio-disclaimer",children:[o.jsx(Se,{size:12}),"AI-generated content may require manual review for platform compliance."]})]})]}),o.jsxs("div",{className:"agent-history-section",style:{marginTop:"24px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[o.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"10px",margin:0,fontSize:"1.1rem",color:"white"},children:[o.jsx(f,{size:18,style:{color:"var(--color-purple)"}}),Ir.name," Inventory",o.jsxs("span",{style:{fontSize:"0.7rem",padding:"3px 8px",background:"rgba(139, 92, 246, 0.2)",borderRadius:"10px",color:"var(--color-purple)",fontWeight:"600"},children:[(Rr||[]).filter(e=>e.agent===Ir.name).length," items"]})]}),o.jsxs("button",{onClick:()=>as("mystudio"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"10px",color:"var(--text-secondary)",fontSize:"0.8rem",cursor:"pointer"},children:["View All",o.jsx(Ue,{size:14})]})]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px",maxHeight:"400px",overflowY:"auto",paddingRight:"8px"},children:(()=>{const e=Rr.flatMap(e=>e.assets||[]).filter(e=>e.agent===Ir.name||e.agentId===Ir.id).sort((e,t)=>new Date(t.date||0)-new Date(e.date||0));return e.length>0?e.map((e,t)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px",padding:"14px 16px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"14px",border:"1px solid rgba(255, 255, 255, 0.08)",transition:"all 0.2s ease",cursor:"pointer"},onClick:()=>Js(e),onMouseOver:e=>{e.currentTarget.style.background="rgba(139, 92, 246, 0.1)",e.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)"},onMouseOut:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.03)",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.08)"},children:[o.jsxs("div",{style:{width:"48px",height:"48px",borderRadius:"10px",background:e.imageUrl?`url(${e.imageUrl}) center/cover`:e.audioUrl?"linear-gradient(135deg, var(--color-cyan), var(--color-green))":"linear-gradient(135deg, var(--color-purple), var(--color-cyan))",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,position:"relative",overflow:"hidden"},children:[!e.imageUrl&&!e.audioUrl&&o.jsx(oe,{size:20,style:{color:"white"}}),e.audioUrl&&!e.imageUrl&&o.jsx(O,{size:20,style:{color:"white"}}),e.imageUrl&&e.audioUrl&&o.jsx("div",{style:{position:"absolute",bottom:0,right:0,background:"rgba(0,0,0,0.6)",padding:"2px",borderTopLeftRadius:"6px"},children:o.jsx(U,{size:12,color:"white"})})]}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",color:"white",marginBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.title||e.snippet?.substring(0,30)||"Untitled Creation"}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e.snippet?.substring(0,60)||"No prompt saved","..."]}),o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"6px"},children:o.jsxs("span",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(ae,{size:10}),e.date||"Recent"]})})]}),o.jsx("div",{style:{display:"flex",gap:"6px",flexShrink:0},children:o.jsx("button",{onClick:t=>{t.stopPropagation(),Gi(e)},title:"View",style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white"},children:o.jsx(ee,{size:14})})})]},t)):o.jsxs("div",{style:{padding:"32px",textAlign:"center",color:"var(--text-secondary)",background:"rgba(255,255,255,0.02)",borderRadius:"12px"},children:[o.jsx(m,{size:24,style:{opacity:.3,marginBottom:"8px"}}),o.jsx("p",{children:"No creations yet. Start generating!"})]})})()}),Ir&&(Rr||[]).filter(e=>e.agent===Ir.name).length>0&&o.jsxs("div",{style:{marginTop:"16px",padding:"14px 16px",background:"rgba(139, 92, 246, 0.08)",borderRadius:"12px",border:"1px solid rgba(139, 92, 246, 0.15)"},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"10px"},children:o.jsxs("span",{style:{fontSize:"0.8rem",fontWeight:"600",color:"white",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx(ae,{size:14,style:{color:"var(--color-purple)"}}),"Recent Prompts"]})}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:(Rr||[]).filter(e=>e.agent===Ir?.name&&e.snippet).slice(0,5).map((e,t)=>o.jsxs("button",{onClick:()=>{const t=Yo.current||document.querySelector(".studio-textarea");if(t){t.value=e.snippet;try{t.dispatchEvent(new Event("input",{bubbles:!0}))}catch(r){const e=document.createEvent("Event");e.initEvent("input",!0,!0),t.dispatchEvent(e)}a.success("Prompt loaded!")}},style:{padding:"6px 12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"var(--text-secondary)",fontSize:"0.7rem",cursor:"pointer",maxWidth:"150px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",transition:"all 0.2s ease"},onMouseOver:e=>{e.currentTarget.style.background="rgba(139, 92, 246, 0.2)",e.currentTarget.style.borderColor="rgba(139, 92, 246, 0.4)",e.currentTarget.style.color="white"},onMouseOut:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",e.currentTarget.style.color="var(--text-secondary)"},title:e.snippet,children:[e.snippet?.substring(0,25),"..."]},t))})]})]})]}),o.jsxs("div",{className:"agent-side-panel",children:[Ir.hasSocials&&o.jsxs("div",{className:"side-info-card social-connect-card",children:[o.jsx("h3",{children:"Connect Socials"}),o.jsxs("div",{className:"social-connect-grid",children:[o.jsxs("button",{className:"social-connect-btn "+(Kt.instagram?"connected":""),onClick:()=>ol("instagram"),children:[o.jsx(w,{size:16}),o.jsx("span",{children:Kt.instagram?Io?`Insta: ${Io}`:"Instagram Linked":"Link Instagram"})]}),o.jsxs("button",{className:"social-connect-btn "+(Kt.facebook?"connected":""),onClick:()=>ol("facebook"),children:[o.jsx(Q,{size:16}),o.jsx("span",{children:Kt.facebook?Io?`FB: ${Io}`:"Facebook Linked":"Link Facebook"})]}),o.jsxs("button",{className:"social-connect-btn "+(Kt.twitter?"connected":""),onClick:()=>ol("twitter"),children:[o.jsx(v,{size:16}),o.jsx("span",{children:Kt.twitter?zo?`@${zo}`:"X/Twitter Linked":"Link X/Twitter"})]})]}),o.jsx("p",{className:"help-text mini",children:"One-click secure OAuth connection."})]}),o.jsxs("div",{className:"side-info-card",children:[o.jsx("h3",{children:"Capabilities"}),o.jsx("ul",{className:"capability-list",children:(Ir?.capabilities||[]).map((e,t)=>o.jsxs("li",{children:[o.jsx(m,{size:14})," ",e]},t))})]}),o.jsxs("div",{className:"side-info-card",children:[o.jsx("h3",{children:"How to Use"}),o.jsx("p",{className:"help-text",children:Ir?.howToUse||"Enter your prompt and generate content."})]}),o.jsxs("div",{className:"side-info-card agent-intelligence-card",children:[o.jsxs("div",{className:"card-header-with-icon",children:[o.jsx(S,{size:18,className:"text-purple"}),o.jsx("h3",{children:"Agent Intelligence"})]}),o.jsxs("div",{className:"intelligence-content",children:[o.jsxs("div",{className:"intel-section",children:[o.jsx("h4",{children:'The "How"'}),o.jsx("p",{className:"help-text small",children:Ir?.explanation||""})]}),o.jsxs("div",{className:"intel-section",children:[o.jsx("h4",{children:"Pro Tips"}),o.jsx("p",{className:"help-text small",children:Ir?.helpTips||""})]})]})]}),o.jsxs("div",{className:"side-info-card",children:[o.jsx("h3",{children:"Examples"}),o.jsx("div",{className:"example-chips",children:(Ir?.examples||[]).map((e,t)=>o.jsxs("div",{className:"example-chip",onClick:()=>{const t=Yo.current||document.querySelector(".studio-textarea");if(t){t.value=e;try{t.dispatchEvent(new Event("input",{bubbles:!0}))}catch(r){const e=document.createEvent("Event");e.initEvent("input",!0,!0),t.dispatchEvent(e)}t.focus(),t.style.borderColor="var(--color-purple)",setTimeout(()=>t.style.borderColor="",300)}},style:{cursor:"pointer"},children:['"',e,'"']},t))})]})]})]})]})}switch(jr){case"agents":{const e=ms(),r=hs(),i=[...e,...r],s=()=>{if(!Ir)return null;const e="function"==typeof Ir.icon?Ir.icon:m;return o.jsxs("div",{className:"agent-active-view animate-fadeInUp",style:{position:"relative",paddingBottom:"80px"},children:[Wi&&Ir.onboarding&&o.jsxs("div",{className:"agent-nudge-overlay animate-fadeInDown",style:{marginBottom:"24px"},children:[o.jsxs("div",{className:"nudge-header",children:[o.jsxs("h4",{children:[o.jsx(m,{size:16})," Quick Start Guide"]}),o.jsx("button",{className:"nudge-close",onClick:()=>Mi(!1),children:o.jsx(T,{size:16})})]}),o.jsx("div",{className:"nudge-steps",children:Ir.onboarding.map((e,t)=>o.jsxs("div",{className:"nudge-step",children:[o.jsx("span",{className:"step-num",children:t+1}),o.jsx("p",{children:e})]},t))}),o.jsx("div",{className:"nudge-footer",children:o.jsx("button",{className:"nudge-cta",onClick:()=>Mi(!1),children:"Got it, let's go!"})})]}),o.jsxs("div",{className:"agent-detail-layout",children:[o.jsxs("div",{className:"agent-main-panel",children:[o.jsxs("div",{className:"agent-hero-card",children:[o.jsx("div",{className:`agent-icon-large ${Ir.colorClass}`,children:o.jsx(e,{size:40})}),o.jsxs("div",{className:"agent-hero-info",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[o.jsx("span",{className:"agent-badge",style:{background:"linear-gradient(90deg, var(--color-purple), var(--color-cyan))",color:"white",fontWeight:"800"},children:Ir.category}),o.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:"rgba(255,255,255,0.3)"}}),o.jsx("span",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.5)",letterSpacing:"1.5px",fontWeight:"800",textTransform:"uppercase"},children:"High-Fidelity Engine"})]}),o.jsx("h2",{style:{fontSize:"2.4rem",fontWeight:"900",letterSpacing:"-1px",marginBottom:"8px",background:"linear-gradient(180deg, #fff 0%, rgba(255,255,255,0.7) 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:Ir.name}),o.jsx("p",{style:{fontSize:"1rem",color:"rgba(255,255,255,0.6)",maxWidth:"600px",lineHeight:"1.6"},children:Ir.description||Ir.desc})]})]}),o.jsxs("div",{className:"agent-utility-box",children:[o.jsxs("div",{className:"utility-controls",children:[o.jsxs("div",{className:"control-group",children:[o.jsx("label",{children:"Genre / Style"}),o.jsxs("select",{className:"studio-select",value:Ia,onChange:e=>{Na(e.target.value),Ca(t=>({...t,genre:e.target.value}))},children:[o.jsxs("optgroup",{label:"Hip-Hop",children:[o.jsx("option",{value:"hip-hop",children:"Hip Hop / Rap"}),o.jsx("option",{value:"trap",children:"Trap"}),o.jsx("option",{value:"drill",children:"Drill"}),o.jsx("option",{value:"boom-bap",children:"90s Boom Bap"}),o.jsx("option",{value:"phonk",children:"Phonk"}),o.jsx("option",{value:"latin-trap",children:"Latin Trap"})]}),o.jsxs("optgroup",{label:"Pop & R&B",children:[o.jsx("option",{value:"pop",children:"Pop / Modern"}),o.jsx("option",{value:"r&b",children:"R&B / Soul"}),o.jsx("option",{value:"k-pop",children:"K-Pop"}),o.jsx("option",{value:"j-pop",children:"J-Pop"}),o.jsx("option",{value:"indie",children:"Indie"})]}),o.jsxs("optgroup",{label:"Electronic",children:[o.jsx("option",{value:"electronic",children:"Electronic / EDM"}),o.jsx("option",{value:"lo-fi",children:"Lo-Fi / Chill"}),o.jsx("option",{value:"synthwave",children:"Synthwave"}),o.jsx("option",{value:"disco",children:"Disco"})]}),o.jsxs("optgroup",{label:"African & Caribbean",children:[o.jsx("option",{value:"afrobeat",children:"Afrobeat"}),o.jsx("option",{value:"afro-pop",children:"Afro-Pop"}),o.jsx("option",{value:"amapiano",children:"Amapiano"}),o.jsx("option",{value:"dancehall",children:"Dancehall"}),o.jsx("option",{value:"reggae",children:"Reggae"})]}),o.jsxs("optgroup",{label:"Latin",children:[o.jsx("option",{value:"reggaeton",children:"Reggaeton"}),o.jsx("option",{value:"latin",children:"Latin"}),o.jsx("option",{value:"cumbia",children:"Cumbia"})]}),o.jsxs("optgroup",{label:"Rock & Guitar",children:[o.jsx("option",{value:"rock",children:"Rock / Alternative"}),o.jsx("option",{value:"metal",children:"Metal"}),o.jsx("option",{value:"punk",children:"Punk"}),o.jsx("option",{value:"acoustic",children:"Acoustic"})]}),o.jsxs("optgroup",{label:"Other",children:[o.jsx("option",{value:"country",children:"Country"}),o.jsx("option",{value:"jazz",children:"Jazz"}),o.jsx("option",{value:"classical",children:"Classical"}),o.jsx("option",{value:"gospel",children:"Gospel"}),o.jsx("option",{value:"funk",children:"Funk"}),o.jsx("option",{value:"bollywood",children:"Bollywood"})]})]})]}),o.jsxs("div",{className:"control-group",children:[o.jsxs("label",{children:["Intensity / Mood (",Aa,"/10)"]}),o.jsx("input",{type:"range",className:"studio-slider",min:"1",max:"10",value:Aa,onChange:e=>Ta(Number(e.target.value))})]})]}),o.jsxs("div",{className:"prompt-area",children:[o.jsxs("div",{className:"prompt-header",children:[o.jsx("label",{children:"Creative Prompt"}),o.jsxs("div",{className:"voice-controls",children:["English"!==za.language&&o.jsx("button",{className:"btn-pill glass translate-btn",onClick:qn,title:"Translate to English",children:o.jsx(Ne,{size:16})}),o.jsx("button",{className:"btn-pill "+(pa?"primary":"glass"),onClick:Ln,title:"Voice to Text",children:o.jsx(F,{size:16})}),o.jsx("button",{className:"btn-pill "+(ga?"primary":"glass"),onClick:Vn,title:"Text to Voice",children:o.jsx(O,{size:16})}),o.jsx("button",{className:"btn-pill "+(ma?"primary":"glass"),onClick:()=>ha(!ma),title:"Voice Settings",children:o.jsx(ye,{size:16})})]})]}),o.jsx("textarea",{ref:Yo,placeholder:`Describe what you want ${Ir.name} to create...`,className:"studio-textarea",style:{minHeight:zr?"100px":"120px",padding:zr?"12px":"20px"}}),o.jsxs("div",{className:"generation-actions",style:{display:"flex",gap:"12px",marginTop:"16px"},children:[o.jsxs("button",{className:"btn-pill glass",onClick:()=>ws(Ir),children:[o.jsx(Q,{size:16}),"Quick Generate"]}),o.jsx("button",{className:"btn-pill primary "+(ta?"loading":""),style:{flex:1},onClick:Kn,disabled:ta,children:ta?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-mini"}),o.jsx("span",{children:"Processing..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(Q,{size:18}),o.jsx("span",{children:"Generate"})]})})]})]})]}),o.jsxs("div",{className:"side-info-card",style:{marginTop:"16px"},children:[o.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(b,{size:16,className:"text-purple"}),Ar?`Assets for ${Ar.name}`:"Recent Creations"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"12px"},children:(()=>{let e=[];return e=Ar&&Array.isArray(Ar.assets)?Ar.assets.filter(e=>{if(!e)return!1;const t=e.agent===Ir.name||e.agent===Ir.id,r=e.type&&Ir.category&&e.type.toLowerCase()===Ir.category.toLowerCase();return t||r}):(Rr||[]).filter(e=>e&&e.agent===Ir.name).slice(0,3),e.length>0?e.slice(0,5).map((e,t)=>o.jsxs("div",{onClick:()=>Js(e),style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px 12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"10px",cursor:"pointer",border:"1px solid rgba(255,255,255,0.05)",transition:"all 0.2s ease"},onMouseEnter:e=>e.currentTarget.style.borderColor="var(--color-purple)",onMouseLeave:e=>e.currentTarget.style.borderColor="rgba(255,255,255,0.05)",children:[o.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:e.imageUrl?`url(${lt(e.imageUrl)}) center/cover`:"rgba(139, 92, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:!e.imageUrl&&("audio"===e.type?o.jsx(U,{size:14,style:{opacity:.5}}):"video"===e.type?o.jsx(H,{size:14,style:{opacity:.5}}):o.jsx(oe,{size:14,style:{opacity:.5}}))}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"0.8rem",fontWeight:"500",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.title||e.snippet?.substring(0,30)||"Untitled"}),o.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)"},children:e.date||"Recent"})]}),o.jsx(ee,{size:14,style:{opacity:.5}})]},e.id||t)):o.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)",fontSize:"0.8rem"},children:Ar?"No assets for this project yet.":"No creations yet. Start generating!"})})()})]})]}),o.jsxs("div",{className:"agent-side-panel",children:[Ar&&o.jsxs("div",{className:"side-info-card",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(6, 182, 212, 0.1) 100%)",border:"1px solid rgba(139, 92, 246, 0.3)",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[o.jsx(f,{size:18,className:"text-purple"}),o.jsx("h3",{style:{margin:0,fontSize:"0.9rem",color:"var(--color-purple)"},children:"Project Context"})]}),o.jsx("div",{style:{fontWeight:"800",fontSize:"1.2rem",color:"white",marginBottom:"4px"},children:Ar.name}),o.jsxs("p",{style:{margin:"0 0 16px",fontSize:"0.8rem",color:"var(--text-secondary)"},children:["Organizing ",Ar.assets?.length||0," assets in this project."]}),o.jsxs("button",{className:"btn-pill glass",style:{width:"100%",fontSize:"0.8rem",padding:"8px",background:"rgba(255,255,255,0.05)"},onClick:()=>Cs(!0),children:[o.jsx(b,{size:14})," View Project Canvas"]})]}),o.jsxs("div",{className:"side-info-card",children:[o.jsx("h3",{children:"Capabilities"}),o.jsx("ul",{className:"capability-list",children:(Ir?.capabilities||[]).map((e,t)=>o.jsxs("li",{children:[o.jsx(m,{size:14})," ",e]},t))})]}),o.jsxs("div",{className:"side-info-card",children:[o.jsx("h3",{children:"How to Use"}),o.jsx("p",{className:"help-text",children:Ir?.howToUse||"Enter your prompt and generate content."})]}),o.jsxs("div",{className:"side-info-card",children:[o.jsx("h3",{children:"Examples"}),o.jsx("div",{className:"example-chips",children:(Ir?.examples||[]).slice(0,3).map((e,t)=>o.jsxs("div",{className:"example-chip",onClick:()=>{const t=Yo.current;t&&(t.value=e,t.focus())},children:['"',e.length>50?e.substring(0,50)+"...":e,'"']},t))})]})]})]})]})};return o.jsxs("div",{className:"agents-split-layout",children:[o.jsxs("div",{className:"agents-sidebar",children:[o.jsxs("div",{className:"agents-sidebar-header",children:[o.jsxs("h3",{children:[o.jsx(m,{size:18,className:"text-purple"})," Agents"]}),o.jsxs("p",{children:[e.length," available"]})]}),o.jsxs("div",{className:"agents-sidebar-list",children:[o.jsx("div",{className:"agents-sidebar-section",style:{background:"linear-gradient(90deg, rgba(34, 197, 94, 0.1) 0%, transparent 100%)",padding:"8px 12px",marginBottom:"4px",borderRadius:"8px",borderLeft:"3px solid rgba(34, 197, 94, 0.6)"},children:o.jsxs("h5",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#22c55e",fontWeight:"700",fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"1px"},children:[o.jsx(m,{size:12})," Free Tier",o.jsxs("span",{style:{marginLeft:"auto",background:"rgba(34, 197, 94, 0.2)",padding:"2px 8px",borderRadius:"10px",fontSize:"0.65rem"},children:[(void 0!==u?u:[]).filter(e=>"free"===e.tier).length," agents"]})]})}),(void 0!==u?u:[]).filter(e=>"free"===e.tier).map(r=>{const i="function"==typeof r.icon?r.icon:m,s=Ir?.id===r.id,n=!e.find(e=>e.id===r.id);return o.jsx("button",{className:`agent-sidebar-item ${r.colorClass} ${s?"active":""} ${n?"locked":""}`,"data-name":r.name,onClick:()=>{n?Et?(Xa("subscription"),as("mystudio")):Zt(!0):r.comingSoon?a.error(`${r.name} is coming soon!`,{icon:"(wip)"}):(Nr(r),t.agentUsed(r.id))},children:o.jsx("div",{className:`agent-sidebar-icon ${r.colorClass}`,children:o.jsx(i,{size:18})})},r.id)}),o.jsx("div",{className:"agents-sidebar-section",style:{background:"linear-gradient(90deg, rgba(139, 92, 246, 0.1) 0%, transparent 100%)",padding:"8px 12px",marginBottom:"4px",marginTop:"12px",borderRadius:"8px",borderLeft:"3px solid rgba(139, 92, 246, 0.6)"},children:o.jsxs("h5",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#a855f7",fontWeight:"700",fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"1px"},children:[o.jsx(Q,{size:12})," Monthly -$4.99/mo",o.jsxs("span",{style:{marginLeft:"auto",background:"rgba(139, 92, 246, 0.2)",padding:"2px 8px",borderRadius:"10px",fontSize:"0.65rem"},children:[(void 0!==u?u:[]).filter(e=>"monthly"===e.tier).length," agents"]})]})}),(void 0!==u?u:[]).filter(e=>"monthly"===e.tier).map(r=>{const i="function"==typeof r.icon?r.icon:m,s=Ir?.id===r.id,n=!e.find(e=>e.id===r.id);return o.jsx("button",{className:`agent-sidebar-item ${r.colorClass} ${s?"active":""} ${n?"locked":""}`,"data-name":r.name,onClick:()=>{n?Et?(Xa("subscription"),as("mystudio")):Zt(!0):r.comingSoon?a.error(`${r.name} is coming soon!`,{icon:"(wip)"}):(Nr(r),t.agentUsed(r.id))},children:o.jsx("div",{className:`agent-sidebar-icon ${r.colorClass}`,style:n?{background:"rgba(255,255,255,0.05)"}:{},children:o.jsx(i,{size:18,style:n?{opacity:.5}:{}})})},r.id)}),o.jsx("div",{className:"agents-sidebar-section",style:{background:"linear-gradient(90deg, rgba(234, 179, 8, 0.1) 0%, transparent 100%)",padding:"8px 12px",marginBottom:"4px",marginTop:"12px",borderRadius:"8px",borderLeft:"3px solid rgba(234, 179, 8, 0.6)"},children:o.jsxs("h5",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#eab308",fontWeight:"700",fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"1px"},children:[o.jsx(ze,{size:12})," Pro -$9.99/mo",o.jsxs("span",{style:{marginLeft:"auto",background:"rgba(234, 179, 8, 0.2)",padding:"2px 8px",borderRadius:"10px",fontSize:"0.65rem"},children:[(void 0!==u?u:[]).filter(e=>"pro"===e.tier).length," agents"]})]})}),(void 0!==u?u:[]).filter(e=>"pro"===e.tier).map(r=>{const i="function"==typeof r.icon?r.icon:m,s=Ir?.id===r.id,n=!e.find(e=>e.id===r.id);return o.jsx("button",{className:`agent-sidebar-item ${r.colorClass} ${s?"active":""} ${n?"locked":""}`,"data-name":r.name,onClick:()=>{n?Et?(Xa("subscription"),as("mystudio")):Zt(!0):r.comingSoon?a.error(`${r.name} is coming soon!`,{icon:"(wip)"}):(Nr(r),t.agentUsed(r.id))},children:o.jsx("div",{className:`agent-sidebar-icon ${r.colorClass}`,style:n?{background:"rgba(255,255,255,0.05)"}:{},children:o.jsx(i,{size:18,style:n?{opacity:.5}:{}})})},r.id)})]})]}),o.jsx("div",{className:"agents-main-panel",children:Ir?s():o.jsxs("div",{className:"agents-cards-view",style:{padding:zr?"8px 12px 0":"20px 28px 0",overflowY:"auto"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",flexWrap:"wrap",gap:"16px"},children:[o.jsxs("div",{children:[o.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"800",marginBottom:"4px",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(m,{size:24,className:"text-purple"}),"AI Agents Studio"]}),o.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:[i.length," specialized agents * Click any card to start creating"]})]}),o.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o.jsxs("button",{onClick:()=>window.location.hash="#/whitepapers",className:"btn-pill glass haptic-press",style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",background:"rgba(6, 182, 212, 0.1)",border:"1px solid rgba(6, 182, 212, 0.3)",color:"#06b6d4"},children:[o.jsx(oe,{size:16}),"Whitepapers"]}),o.jsxs("button",{onClick:()=>window.location.hash="#/legal",className:"btn-pill glass haptic-press",style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",color:"#a855f7"},children:[o.jsx(Se,{size:16}),"Legal"]})]})]}),!Et&&o.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(6, 182, 212, 0.1) 100%)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"12px",padding:"16px 20px",marginBottom:"24px",display:"flex",alignItems:"center",gap:"12px",maxWidth:"400px"},children:[o.jsx(Q,{size:20,className:"text-purple"}),o.jsxs("div",{style:{flex:1},children:[o.jsxs("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:[Gt?999999:Math.max(0,3-br)," free generations left"]}),o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Sign in to unlock more"})]}),o.jsx("button",{className:"btn-pill primary",onClick:()=>Zt(!0),style:{padding:"8px 16px",fontSize:"0.8rem"},children:"Sign In"})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px 4px",background:"linear-gradient(90deg, rgba(34, 197, 94, 0.1) 0%, transparent 100%)",borderRadius:"12px"},children:[o.jsx(m,{size:16,style:{color:"#22c55e"}}),o.jsx("span",{style:{fontWeight:"700",color:"#22c55e",fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"1px"},children:"Free Tier"}),o.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:["-",void 0!==u&&u?u.filter(e=>"free"===e.tier).length:0," agents included"]})]}),o.jsx("div",{className:"agent-tier-grid",children:void 0!==u&&u&&u.filter(e=>"free"===e.tier).map(r=>{const i="function"==typeof r.icon?r.icon:m,a=!e.find(e=>e.id===r.id),s=x(r),n="rgba(34, 197, 94, 0.1)",l="rgba(34, 197, 94, 0.3)",d="#22c55e",c="Free";return o.jsxs("div",{className:"agent-card-large haptic-press",onClick:()=>{a?Et?(Xa("subscription"),as("mystudio")):Zt(!0):(Nr(r),t.agentUsed(r.id))},style:{padding:zr?"23px":"32px",background:"rgba(0,0,0,0.4)",border:`1px solid ${s}22`,borderRadius:"20px",minHeight:zr?"200px":"274px",cursor:"pointer",transition:"all 0.3s ease",position:"relative",overflow:"hidden",opacity:a?.6:1},onMouseEnter:e=>{e.currentTarget.style.borderColor=`${s}66`,e.currentTarget.style.transform="translateY(-4px)"},onMouseLeave:e=>{e.currentTarget.style.borderColor=`${s}22`,e.currentTarget.style.transform="translateY(0)"},children:[o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at top left, ${s}15, transparent 70%)`,pointerEvents:"none"}}),o.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",padding:"4px 10px",borderRadius:"10px",background:n,border:`1px solid ${l}`,fontSize:"0.65rem",fontWeight:"700",color:d,textTransform:"uppercase",letterSpacing:"0.05em"},children:c}),a&&o.jsx(pe,{size:14,style:{position:"absolute",top:"14px",right:"70px",opacity:.5}}),r.isBeta&&o.jsx("span",{style:{position:"absolute",top:"14px",right:a?"90px":"70px",background:"rgba(245,158,11,0.2)",color:"#f59e0b",padding:"2px 8px",borderRadius:"8px",fontSize:"0.6rem",fontWeight:"700",letterSpacing:"0.5px"},children:"BETA"}),o.jsx("div",{style:{width:zr?"40px":"52px",height:zr?"40px":"52px",borderRadius:"14px",background:`${s}22`,border:`1px solid ${s}44`,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px"},children:o.jsx(i,{size:zr?20:26,style:{color:s}})}),o.jsx("h3",{style:{fontSize:zr?"0.95rem":"1.15rem",fontWeight:"700",marginBottom:"6px",color:"white"},children:r.name}),o.jsx("p",{style:{fontSize:zr?"0.8rem":"0.9rem",color:"var(--text-secondary)",marginBottom:"8px"},children:r.category}),o.jsx("p",{style:{fontSize:zr?"0.8rem":"0.9rem",color:"rgba(255,255,255,0.45)",lineHeight:"1.6"},children:r.description||r.capabilities&&r.capabilities[0]||"AI-powered music creation"}),r.capabilities&&r.capabilities.length>0&&o.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginTop:"12px"},children:r.capabilities.slice(0,2).map((e,t)=>o.jsx("span",{style:{padding:"3px 10px",background:`${s}1A`,color:s,borderRadius:"8px",fontSize:zr?"0.65rem":"0.75rem",fontWeight:"500"},children:e},t))})]},r.id)})}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px 4px",background:"linear-gradient(90deg, rgba(251, 191, 36, 0.1) 0%, transparent 100%)",borderRadius:"12px"},children:[o.jsx(Q,{size:16,style:{color:"#fbbf24"}}),o.jsx("span",{style:{fontWeight:"700",color:"#fbbf24",fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"1px"},children:"Monthly -$4.99/mo"}),o.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:["-",void 0!==u&&u?u.filter(e=>"monthly"===e.tier).length:0," agents"]})]}),o.jsx("div",{className:"agent-tier-grid",children:void 0!==u&&u&&u.filter(e=>"monthly"===e.tier).map(r=>{const i="function"==typeof r.icon?r.icon:m,a=!e.find(e=>e.id===r.id),s=x(r),n="rgba(168, 85, 247, 0.1)",l="rgba(168, 85, 247, 0.3)",d="#a855f7",c="Creator";return o.jsxs("div",{className:"agent-card-large haptic-press",onClick:()=>{a?Et?(Xa("subscription"),as("mystudio")):Zt(!0):(Nr(r),t.agentUsed(r.id))},style:{padding:zr?"23px":"32px",background:"rgba(0,0,0,0.4)",border:`1px solid ${s}22`,borderRadius:"20px",minHeight:zr?"200px":"274px",cursor:"pointer",transition:"all 0.3s ease",position:"relative",overflow:"hidden",opacity:a?.6:1},onMouseEnter:e=>{e.currentTarget.style.borderColor=`${s}66`,e.currentTarget.style.transform="translateY(-4px)"},onMouseLeave:e=>{e.currentTarget.style.borderColor=`${s}22`,e.currentTarget.style.transform="translateY(0)"},children:[o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at top left, ${s}15, transparent 70%)`,pointerEvents:"none"}}),o.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",padding:"4px 10px",borderRadius:"10px",background:n,border:`1px solid ${l}`,fontSize:"0.65rem",fontWeight:"700",color:d,textTransform:"uppercase",letterSpacing:"0.05em"},children:c}),a&&o.jsx(pe,{size:14,style:{position:"absolute",top:"14px",right:"80px",opacity:.5}}),r.isBeta&&o.jsx("span",{style:{position:"absolute",top:"14px",right:a?"100px":"80px",background:"rgba(245,158,11,0.2)",color:"#f59e0b",padding:"2px 8px",borderRadius:"8px",fontSize:"0.6rem",fontWeight:"700",letterSpacing:"0.5px"},children:"BETA"}),o.jsx("div",{style:{width:zr?"40px":"52px",height:zr?"40px":"52px",borderRadius:"14px",background:`${s}22`,border:`1px solid ${s}44`,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px"},children:o.jsx(i,{size:zr?20:26,style:{color:s}})}),o.jsx("h3",{style:{fontSize:zr?"0.95rem":"1.15rem",fontWeight:"700",marginBottom:"6px",color:"white"},children:r.name}),o.jsx("p",{style:{fontSize:zr?"0.8rem":"0.9rem",color:"var(--text-secondary)",marginBottom:"8px"},children:r.category}),o.jsx("p",{style:{fontSize:zr?"0.8rem":"0.9rem",color:"rgba(255,255,255,0.45)",lineHeight:"1.6"},children:r.description||r.capabilities&&r.capabilities[0]||"AI-powered music creation"}),r.capabilities&&r.capabilities.length>0&&o.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginTop:"12px"},children:r.capabilities.slice(0,2).map((e,t)=>o.jsx("span",{style:{padding:"3px 10px",background:`${s}1A`,color:s,borderRadius:"8px",fontSize:zr?"0.65rem":"0.75rem",fontWeight:"500"},children:e},t))})]},r.id)})}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px 4px",background:"linear-gradient(90deg, rgba(168, 85, 247, 0.1) 0%, transparent 100%)",borderRadius:"12px"},children:[o.jsx(ze,{size:16,style:{color:"#a855f7"}}),o.jsx("span",{style:{fontWeight:"700",color:"#a855f7",fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"1px"},children:"Pro -$9.99/mo"}),o.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:["-",void 0!==u&&u?u.filter(e=>"pro"===e.tier).length:0," agents"]})]}),o.jsx("div",{className:"agent-tier-grid",children:void 0!==u&&u&&u.filter(e=>"pro"===e.tier).map(r=>{const i="function"==typeof r.icon?r.icon:m,a=!e.find(e=>e.id===r.id),s=x(r),n="rgba(234, 179, 8, 0.1)",l="rgba(234, 179, 8, 0.3)",d="#eab308",c="Pro";return o.jsxs("div",{className:"agent-card-large haptic-press",onClick:()=>{a?Et?(Xa("subscription"),as("mystudio")):Zt(!0):(Nr(r),t.agentUsed(r.id))},style:{padding:zr?"23px":"32px",background:"rgba(0,0,0,0.4)",border:`1px solid ${s}22`,borderRadius:"20px",minHeight:zr?"200px":"274px",cursor:"pointer",transition:"all 0.3s ease",position:"relative",overflow:"hidden",opacity:a?.6:1},onMouseEnter:e=>{e.currentTarget.style.borderColor=`${s}66`,e.currentTarget.style.transform="translateY(-4px)"},onMouseLeave:e=>{e.currentTarget.style.borderColor=`${s}22`,e.currentTarget.style.transform="translateY(0)"},children:[o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at top left, ${s}15, transparent 70%)`,pointerEvents:"none"}}),o.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",padding:"4px 10px",borderRadius:"10px",background:n,border:`1px solid ${l}`,fontSize:"0.65rem",fontWeight:"700",color:d,textTransform:"uppercase",letterSpacing:"0.05em"},children:c}),a&&o.jsx(pe,{size:14,style:{position:"absolute",top:"14px",right:"60px",opacity:.5}}),r.isBeta&&o.jsx("span",{style:{position:"absolute",top:"14px",right:a?"80px":"60px",background:"rgba(245,158,11,0.2)",color:"#f59e0b",padding:"2px 8px",borderRadius:"8px",fontSize:"0.6rem",fontWeight:"700",letterSpacing:"0.5px"},children:"BETA"}),o.jsx("div",{style:{width:zr?"40px":"52px",height:zr?"40px":"52px",borderRadius:"14px",background:`${s}22`,border:`1px solid ${s}44`,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px"},children:o.jsx(i,{size:zr?20:26,style:{color:s}})}),o.jsx("h3",{style:{fontSize:zr?"0.95rem":"1.15rem",fontWeight:"700",marginBottom:"6px",color:"white"},children:r.name}),o.jsx("p",{style:{fontSize:zr?"0.8rem":"0.9rem",color:"var(--text-secondary)",marginBottom:"8px"},children:r.category}),o.jsx("p",{style:{fontSize:zr?"0.8rem":"0.9rem",color:"rgba(255,255,255,0.45)",lineHeight:"1.6"},children:r.description||r.capabilities&&r.capabilities[0]||"AI-powered music creation"}),r.capabilities&&r.capabilities.length>0&&o.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginTop:"12px"},children:r.capabilities.slice(0,2).map((e,t)=>o.jsx("span",{style:{padding:"3px 10px",background:`${s}1A`,color:s,borderRadius:"8px",fontSize:zr?"0.65rem":"0.75rem",fontWeight:"500"},children:e},t))})]},r.id)})})]})]})})]})}case"hub":return o.jsx(i.Suspense,{fallback:o.jsx(jt,{}),children:o.jsx(mt,{projects:Rr,setProjects:Ur,onRemix:dl,onSelectProject:e=>{if(!e||"object"!=typeof e||!e.id)return void a.error("Unable to open project - invalid data");const t={...e,id:e.id,name:e.name||"Untitled Project",description:e.description||"",category:e.category||"general",assets:Array.isArray(e.assets)?e.assets.filter(Boolean):[],agents:Array.isArray(e.agents)?e.agents.filter(Boolean):[],date:e.date||(new Date).toLocaleDateString(),createdAt:e.createdAt||(new Date).toISOString(),updatedAt:e.updatedAt||(new Date).toISOString()};if(Ea(null),Ar&&Ar.id!==t.id&&Et&&$t?.uid){const e={...Ar,updatedAt:(new Date).toISOString()};ps($t.uid,e,{silent:!0}).catch(()=>{})}Tr(t),Cs(!0)},onCreateProject:e=>{if(("number"==typeof xr?xr:0)<2)return a.error("Not enough credits. You need 2 credits to save."),void Rn(!0);mr(e=>e-2),Ur(t=>t.some(t=>t.id===e.id)?t.map(t=>t.id===e.id?e:t):[e,...t]),Et&&$t&&ps($t?.uid,e).then(e=>{}).catch(e=>{}),Ea(null),Tr(e),Cs(!0),a.success(`Saved "${e.name}" with ${e.assets?.length||0} assets!`)},onDeleteProject:nl,onSaveProject:e=>Et&&$t?ps($t?.uid,e):Promise.resolve(!0),setActiveTab:as,setSelectedAgent:Nr,setQuickWorkflowAgent:ws,setPreviewItem:Gi,setPlayingItem:Fi})});case"resources":{const e=[{id:"marketing",icon:Pe,label:"About Us",desc:"Our mission & vision",color:"var(--color-yellow)"},{id:"agents",icon:m,label:"AI Agents",desc:"Your creative team",color:"var(--color-purple)"},{id:"mystudio",icon:f,label:"My Studio",desc:"Projects & assets",color:"var(--color-cyan)"},{id:"activity",icon:U,label:"Social Media Hub",desc:"Content & social management",color:"var(--color-pink)"},{id:"news",icon:w,label:"Industry Pulse",desc:"Latest music & tech news",color:"var(--color-emerald)"},{id:"whitepapers",icon:oe,label:"Whitepapers",desc:"Technical documentation",color:"var(--color-indigo)"},{id:"orchestrator",icon:Q,label:"AI Production Pipeline",desc:"1 idea â†’ full release package",color:"var(--color-cyan)"},{id:"workflow",icon:b,label:"Studio Workflow",desc:"Step-by-step manual control",color:"var(--color-purple)"},{id:"legal",icon:Se,label:"Legal Center",desc:"Terms & licensing",color:"var(--color-red)"},{id:"support",icon:S,label:"Help & Support",desc:"FAQ & contact us",color:"var(--color-orange)"},{id:"hub",icon:Z,label:"Project Hub",desc:"Shared by Studio Agent users",color:"var(--color-blue)"},{id:"profile",icon:N,label:"My Profile",desc:"Account settings",color:"var(--color-purple)"},{id:"dna",icon:y,label:"DNA System",desc:"Visual, audio & lyrics DNA",color:"var(--color-emerald)",external:!0},{id:"vocals",icon:F,label:"Vocal Lab",desc:"20+ voices & voice cloning",color:"var(--color-pink)",external:!0},{id:"billboard",icon:ze,label:"Billboard Blueprint",desc:"Make a hit record start to finish",color:"var(--color-yellow)",external:!0}];return o.jsxs("div",{className:"resources-view animate-fadeInUp",children:[o.jsxs("div",{className:"resources-header",children:[o.jsx("h1",{children:"Creator Resources"}),o.jsx("p",{children:"Quick access to all studio features and tools."})]}),o.jsx("div",{className:"resources-cards-grid",style:{display:"grid",gridTemplateColumns:zr?"repeat(2, 1fr)":"repeat(5, 1fr)",gap:"20px",marginBottom:"32px"},children:e.map(e=>{const t=e.icon;return o.jsxs("div",{onClick:()=>{e.external||"legal"===e.id||"whitepapers"===e.id?window.location.hash=`#/${e.id}`:"orchestrator"===e.id?(as("mystudio"),vi(!0)):"workflow"===e.id?(as("mystudio"),Xa("overview")):("activity"===e.id&&go("connections"),as(e.id))},role:"button",tabIndex:0,className:"haptic-press",style:{background:"var(--card-bg)",border:"1px solid var(--border-color)",borderRadius:"20px",padding:zr?"14px 10px":"28px 20px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:zr?"8px":"16px",minHeight:zr?"auto":"180px"},onMouseEnter:t=>{t.currentTarget.style.borderColor=e.color,t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow=`0 8px 24px ${e.color}20`},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--border-color)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[o.jsx("div",{style:{width:zr?"44px":"70px",height:zr?"44px":"70px",borderRadius:zr?"12px":"18px",background:`${e.color}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(t,{size:zr?22:34,style:{color:e.color}})}),o.jsxs("div",{children:[o.jsx("h4",{style:{margin:0,fontSize:zr?"0.82rem":"1rem",fontWeight:"600",color:"var(--text-primary)"},children:e.label}),o.jsx("p",{style:{margin:"4px 0 0",fontSize:zr?"0.65rem":"0.75rem",color:"var(--text-secondary)",lineHeight:"1.3"},children:e.desc})]})]},e.id)})})]})}case"marketing":return o.jsxs("div",{className:"marketing-view animate-fadeInUp",style:{paddingBottom:"80px"},children:[o.jsxs("div",{className:"marketing-hero",style:{textAlign:"center",padding:"60px 20px",background:"linear-gradient(180deg, rgba(124, 58, 237, 0.1) 0%, rgba(0,0,0,0) 100%)",marginBottom:"40px"},children:[o.jsxs("div",{className:"hero-badge",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"6px 12px",background:"rgba(124, 58, 237, 0.2)",borderRadius:"20px",color:"#a78bfa",fontSize:"0.85rem",marginBottom:"20px",border:"1px solid rgba(124, 58, 237, 0.3)"},children:[o.jsx(m,{size:14}),o.jsx("span",{children:"The Future of Music Creation"})]}),o.jsx("h1",{style:{fontSize:"clamp(2rem, 5vw, 3rem)",fontWeight:"900",marginBottom:"12px",lineHeight:"1.1",letterSpacing:"-1.5px"},children:o.jsx("span",{className:"text-gradient-purple",children:"STOP PITCHING. START RELEASING."})}),o.jsx("p",{style:{fontSize:"1.2rem",color:"var(--text-secondary)",maxWidth:"600px",margin:"0 auto 16px"},children:"The world's first AI Record Label in your pocket."}),o.jsx("p",{style:{fontSize:"0.95rem",color:"rgba(255,255,255,0.5)",maxWidth:"500px",margin:"0 auto"},children:"16 Expert Agents. One Full-Suite Studio. Zero Gatekeepers."})]}),o.jsxs("section",{className:"marketing-section",style:{padding:"0 20px 60px"},children:[o.jsxs("div",{className:"section-header",style:{marginBottom:"30px"},children:[o.jsx("h2",{style:{fontSize:"2rem",marginBottom:"10px"},children:"The Story"}),o.jsx("div",{style:{width:"60px",height:"4px",background:"var(--color-purple)",borderRadius:"2px"}})]}),o.jsxs("div",{className:"story-card",style:{background:"var(--color-bg-secondary)",padding:"30px",borderRadius:"24px",border:"1px solid var(--border-color)",position:"relative",overflow:"hidden"},children:[o.jsxs("div",{style:{position:"relative",zIndex:2},children:[o.jsx("p",{style:{fontSize:"1.1rem",lineHeight:"1.8",color:"var(--text-primary)",marginBottom:"20px"},children:"For decades, the music industry has been a walled garden. Only the top 1% of artists had access to world-class producers, marketing teams, and A&R strategy."}),o.jsxs("p",{style:{fontSize:"1.1rem",lineHeight:"1.8",color:"var(--text-primary)"},children:[o.jsx("strong",{children:"The Studio changes that."})," We've distilled the expertise of industry veterans into 16 specialized AI agents. Whether you need a lyricist at 3 AM, a marketing strategy for your release, or a visual identity for your brand, The Studio is always open."]})]}),o.jsx("div",{style:{position:"absolute",top:"-50px",right:"-50px",width:"200px",height:"200px",background:"radial-gradient(circle, rgba(124, 58, 237, 0.15) 0%, rgba(0,0,0,0) 70%)",borderRadius:"50%"}})]})]}),o.jsxs("section",{className:"marketing-section",style:{padding:"0 20px 60px"},children:[o.jsxs("div",{className:"section-header",style:{marginBottom:"30px"},children:[o.jsx("h2",{style:{fontSize:"2rem",marginBottom:"10px"},children:"The Specialized AI Team"}),o.jsx("div",{style:{width:"60px",height:"4px",background:"var(--color-cyan)",borderRadius:"2px"}}),o.jsx("p",{style:{marginTop:"12px",color:"var(--text-secondary)"},children:"Click any agent to launch their specialized workspace"})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:(u||[]).slice(0,8).map(e=>{const t=e.icon||m,r={free:{bg:"rgba(34, 197, 94, 0.1)",border:"rgba(34, 197, 94, 0.3)",text:"#22c55e",label:"Free"},monthly:{bg:"rgba(168, 85, 247, 0.1)",border:"rgba(168, 85, 247, 0.3)",text:"#a855f7",label:"Creator"},pro:{bg:"rgba(234, 179, 8, 0.1)",border:"rgba(234, 179, 8, 0.3)",text:"#eab308",label:"Pro"}},i=r[e.tier]||r.free;return o.jsxs("div",{className:"agent-info-card-slim animate-fadeInUp haptic-press",onClick:()=>{Nr(e),as("agents"),window.scrollTo(0,0)},style:{background:"var(--card-bg)",border:"1px solid var(--border-color)",borderRadius:"20px",padding:"24px",cursor:"pointer",display:"flex",flexDirection:"column",gap:"12px",transition:"all 0.2s ease",position:"relative"},children:[o.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",padding:"3px 10px",borderRadius:"10px",background:i.bg,border:`1px solid ${i.border}`,fontSize:"0.65rem",fontWeight:"700",color:i.text,textTransform:"uppercase",letterSpacing:"0.05em"},children:i.label}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[o.jsx("div",{className:`agent-icon-mini ${e.colorClass}`,style:{width:"56px",height:"56px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(t,{size:28})}),o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700"},children:e.name}),o.jsx("p",{style:{margin:"4px 0 0",fontSize:"0.85rem",color:"var(--text-secondary)"},children:e.category})]})]}),o.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"rgba(255,255,255,0.5)",lineHeight:"1.5"},children:e.description||e.capabilities&&e.capabilities[0]||"AI-powered music production agent"}),o.jsxs("button",{onClick:e=>{e.stopPropagation(),window.location.hash="#/whitepapers"},style:{alignSelf:"flex-start",padding:"5px 12px",borderRadius:"10px",background:"rgba(139, 92, 246, 0.12)",border:"1px solid rgba(139, 92, 246, 0.3)",color:"#a855f7",fontSize:"0.7rem",fontWeight:"600",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"5px"},children:[o.jsx(oe,{size:11})," View Whitepaper"]})]},e.id)})})]}),o.jsx("section",{className:"marketing-section",style:{padding:"0 20px 60px"},children:o.jsxs("div",{className:"grid-2-col",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:[o.jsxs("div",{className:"vision-card",style:{background:"linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%)",padding:"30px",borderRadius:"24px",border:"1px solid var(--border-color)"},children:[o.jsx("div",{className:"icon-box",style:{width:"50px",height:"50px",background:"rgba(59, 130, 246, 0.2)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px"},children:o.jsx(Ie,{size:24,className:"text-cyan"})}),o.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"12px"},children:"Our Vision"}),o.jsx("p",{style:{color:"var(--text-secondary)",lineHeight:"1.6"},children:"To democratize the entire music supply chain. We believe every artist deserves a team that cares as much about their music as they do."})]}),o.jsxs("div",{className:"vision-card",style:{background:"linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%)",padding:"30px",borderRadius:"24px",border:"1px solid var(--border-color)"},children:[o.jsx("div",{className:"icon-box",style:{width:"50px",height:"50px",background:"rgba(236, 72, 153, 0.2)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px"},children:o.jsx(be,{size:24,className:"text-pink"})}),o.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"12px"},children:"For Creators"}),o.jsx("p",{style:{color:"var(--text-secondary)",lineHeight:"1.6"},children:"Built for the bedroom producers, the songwriters, and the independent artists who are ready to take their career to the next level."})]})]})}),o.jsx("section",{className:"marketing-section",style:{padding:"0 20px 60px"},children:o.jsx("div",{className:"stats-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"15px"},children:[{value:"16",label:"Specialized Agents",color:"var(--color-purple)"},{value:"24/7",label:"Availability",color:"var(--color-cyan)"},{value:"âˆž",label:"Creative Potential",color:"var(--color-green)"},{value:"100%",label:"Royalty Free",color:"var(--color-orange)"}].map((e,t)=>o.jsxs("div",{className:"stat-card",style:{background:"rgba(255,255,255,0.03)",padding:"20px",borderRadius:"16px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"800",color:e.color,marginBottom:"5px"},children:e.value}),o.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:e.label})]},t))})}),o.jsx("div",{className:"marketing-cta",style:{padding:"0 20px 40px",textAlign:"center"},children:o.jsxs("button",{className:"cta-button-primary haptic-press",style:{width:"100%",padding:"16px",fontSize:"1.1rem"},onClick:()=>on(!0),children:["Create New Project ",o.jsx(Ue,{size:20,style:{marginLeft:"8px"}})]})})]});case"activity":{const e=[{id:"instagram",name:"Instagram",icon:"ðŸ“·",color:"#E1306C",desc:"Photos & Stories"},{id:"twitter",name:"X / Twitter",icon:"ð•",color:"#1DA1F2",desc:"Posts & threads"},{id:"facebook",name:"Facebook",icon:"ðŸ“˜",color:"#1877F2",desc:"Pages & groups"},{id:"threads",name:"Threads",icon:"ðŸ§µ",color:"#000000",desc:"Text-based social"}],t=uo||"connections";return o.jsxs("div",{className:"music-hub-view animate-fadeInUp",style:{paddingBottom:"100px"},children:[o.jsxs("div",{className:"orchestrator-header",style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.15) 0%, rgba(6, 182, 212, 0.15) 50%, rgba(236, 72, 153, 0.15) 100%)",borderRadius:"24px",padding:"32px",marginBottom:"24px",border:"1px solid rgba(255,255,255,0.1)",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(circle at 20% 50%, rgba(168, 85, 247, 0.2) 0%, transparent 50%)",pointerEvents:"none"}}),o.jsxs("div",{style:{position:"relative",zIndex:1},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[o.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, var(--color-purple), var(--color-pink))",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px rgba(168, 85, 247, 0.4)"},children:o.jsx($,{size:28,color:"white"})}),o.jsxs("div",{children:[o.jsx("h1",{style:{margin:0,fontSize:"2rem",fontWeight:"700",background:"linear-gradient(90deg, white, rgba(255,255,255,0.8))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Social Media Hub"}),o.jsx("p",{style:{margin:0,color:"var(--text-secondary)",fontSize:"0.95rem"},children:"Connect accounts, manage content & discover trending AI creations"})]})]}),o.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"20px",flexWrap:"wrap"},children:[{id:"connections",label:"Connected Accounts",icon:Me},{id:"all",label:"Content Feed",icon:Q},{id:"share",label:"Share & Cross-Post",icon:$}].map(e=>o.jsxs("button",{onClick:()=>{go?.(e.id),"all"===e.id&&el(1,"all")},style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",borderRadius:"12px",border:"none",background:t===e.id?"linear-gradient(135deg, var(--color-purple), var(--color-cyan))":"rgba(255,255,255,0.08)",color:"white",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:[o.jsx(e.icon,{size:16}),e.label]},e.id))})]})]}),"connections"===t&&o.jsxs("div",{children:[o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px",marginBottom:"32px"},children:e.map(e=>{const t=Kt[e.id];return o.jsxs("div",{style:{background:t?`${e.color}10`:"rgba(255,255,255,0.03)",border:"1px solid "+(t?e.color+"40":"rgba(255,255,255,0.08)"),borderRadius:"16px",padding:"20px",display:"flex",alignItems:"center",gap:"16px",transition:"all 0.3s ease"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:t?e.color:"rgba(255,255,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.4rem",flexShrink:0,boxShadow:t?`0 4px 16px ${e.color}40`:"none"},children:e.icon}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontWeight:"600",color:"white",marginBottom:"2px"},children:e.name}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:e.desc}),t&&o.jsx("div",{style:{fontSize:"0.75rem",color:e.color,marginTop:"4px",fontWeight:"600"},children:"âœ” Connected"})]}),o.jsx("button",{onClick:()=>{if(t){const t={...Kt,[e.id]:!1};Qt(t),localStorage.setItem("studio_agents_socials",JSON.stringify(t)),a(`Disconnected from ${e.name}`,{icon:"(plug)"})}else ol(e.id)},style:{padding:"8px 16px",borderRadius:"10px",border:"none",background:t?"rgba(255,255,255,0.08)":`${e.color}`,color:t?"var(--text-secondary)":"white",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",whiteSpace:"nowrap"},children:t?"Disconnect":"Connect"})]},e.id)})}),o.jsx("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:"24px",border:"1px solid rgba(255,255,255,0.06)",display:"flex",justifyContent:"space-around",flexWrap:"wrap",gap:"16px"},children:[{label:"Connected",value:Object.values(Kt).filter(Boolean).length,color:"var(--color-emerald)"},{label:"Available",value:e.length,color:"var(--color-cyan)"},{label:"Pending",value:0,color:"var(--color-amber)"}].map(e=>o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:e.color},children:e.value}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"4px"},children:e.label})]},e.label))})]}),"all"===t&&o.jsxs("div",{children:[o.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",flexWrap:"wrap"},children:[{id:"all",label:"All",icon:Q},{id:"news",label:"Music News",icon:w},{id:"soundcloud",label:"SoundCloud",icon:z},{id:"youtube",label:"YouTube",icon:R},{id:"releases",label:"Releases",icon:W},{id:"reddit",label:"Community",icon:v}].map(e=>o.jsxs("button",{onClick:()=>el(1,e.id),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",borderRadius:"10px",border:"none",background:"rgba(255,255,255,0.06)",color:"var(--text-secondary)",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:[o.jsx(e.icon,{size:14}),e.label]},e.id))}),oo&&0===co.length&&o.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--text-secondary)"},children:[o.jsx("div",{style:{width:"32px",height:"32px",border:"3px solid rgba(255,255,255,0.1)",borderTopColor:"var(--color-purple)",borderRadius:"50%",animation:"spin 0.8s linear infinite",margin:"0 auto 16px"}}),o.jsx("p",{style:{fontSize:"0.9rem"},children:"Loading content feed..."})]}),!oo&&0===co.length&&o.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--text-secondary)"},children:[o.jsx(w,{size:48,style:{marginBottom:"16px",opacity:.3}}),o.jsx("p",{style:{fontSize:"1rem",fontWeight:"600",color:"white",marginBottom:"8px"},children:"No content yet"}),o.jsx("p",{style:{fontSize:"0.85rem",marginBottom:"20px"},children:"Music news, trending tracks, and community content will appear here."}),o.jsx("button",{onClick:()=>el(1,"all"),style:{padding:"10px 24px",borderRadius:"10px",border:"1px solid var(--color-purple)",background:"transparent",color:"var(--color-purple)",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer"},children:"Refresh Feed"})]}),o.jsx("div",{className:"music-hub-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(340px, 1fr))",gap:"20px"},children:co.map((e,t)=>o.jsxs("div",{className:"music-hub-card",style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden",transition:"all 0.3s ease",cursor:"pointer"},onClick:()=>window.open(e.url,"_blank"),onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.borderColor="var(--color-purple)",e.currentTarget.style.boxShadow="0 12px 40px rgba(168, 85, 247, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.borderColor="rgba(255,255,255,0.08)",e.currentTarget.style.boxShadow="none"},children:[e.imageUrl&&o.jsxs("div",{className:"activity-media-preview",style:{position:"relative",aspectRatio:"16/9",overflow:"hidden"},children:[o.jsx("img",{src:e.imageUrl,alt:e.title,style:{width:"100%",height:"100%",objectFit:"cover"},loading:"lazy"}),o.jsx("div",{className:"media-overlay",children:o.jsxs("button",{className:"preview-indicator",onClick:t=>{t.stopPropagation();const r={...e,type:e.isVideo?"video":"image",url:e.videoUrl||e.imageUrl||e.url};ji?(e.audioUrl?ki(t=>({...t,audio:e})):(e.videoUrl||e.imageUrl)&&ki(t=>({...t,visual:e})),a.success("Loaded into Session Mixer")):Fi(r)},children:[o.jsx(ee,{size:20}),o.jsx("span",{children:"Quick Preview"})]})}),e.isVideo&&!e.imageUrl&&o.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"56px",height:"56px",borderRadius:"50%",background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(4px)"},children:o.jsx(R,{size:28,color:"white"})}),o.jsxs("div",{style:{position:"absolute",top:"12px",left:"12px",padding:"6px 12px",borderRadius:"8px",background:"youtube"===e.source?"rgba(255, 0, 0, 0.9)":"reddit"===e.source?"rgba(255, 69, 0, 0.9)":"soundcloud"===e.source?"#ff3300":"news"===e.source?"rgba(0, 120, 215, 0.9)":"linear-gradient(135deg, var(--color-purple), var(--color-cyan))",color:"white",fontSize:"0.7rem",fontWeight:"700",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"6px",zIndex:2},children:["youtube"===e.source&&o.jsx(R,{size:12}),"reddit"===e.source&&o.jsx(v,{size:12}),("releases"===e.source||"release"===e.type)&&o.jsx(Oe,{size:12}),"soundcloud"===e.source&&o.jsx(z,{size:12}),"news"===e.source&&o.jsx(w,{size:12}),e.source]})]}),o.jsxs("div",{style:{padding:"16px"},children:[o.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",borderRadius:"6px",background:`var(--${e.color?.replace("agent-","color-")||"color-purple"})`,opacity:.8,fontSize:"0.7rem",fontWeight:"600",marginBottom:"10px",textTransform:"uppercase"},children:e.category}),o.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"1rem",fontWeight:"600",color:"white",lineHeight:"1.4",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.title}),o.jsx("p",{style:{margin:"0 0 12px 0",fontSize:"0.85rem",color:"var(--text-secondary)",lineHeight:"1.5",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.snippet||e.author}),o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"12px",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[void 0!==e.likes&&o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"0.8rem",color:"var(--text-secondary)"},children:[o.jsx(Q,{size:14,style:{color:"var(--color-purple)"}}),e.likes>1e3?`${(e.likes/1e3).toFixed(1)}k`:e.likes]}),void 0!==e.comments&&o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"0.8rem",color:"var(--text-secondary)"},children:[o.jsx(v,{size:14}),e.comments]})]}),o.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:e.time})]})]})]},`${e.id}-${t}`))}),co.filter(e=>!e.imageUrl).length>0&&o.jsxs("div",{style:{marginTop:"32px"},children:[o.jsx("h3",{style:{marginBottom:"16px",color:"var(--text-secondary)",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"1px"},children:"Upcoming & Recent Releases"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:co.filter(e=>!e.imageUrl&&"release"===e.type).slice(0,10).map((e,t)=>o.jsxs("div",{onClick:()=>window.open(e.url,"_blank"),style:{display:"flex",alignItems:"center",gap:"16px",padding:"16px",background:"rgba(255,255,255,0.03)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.06)",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>e.currentTarget.style.background="rgba(255,255,255,0.06)",onMouseLeave:e=>e.currentTarget.style.background="rgba(255,255,255,0.03)",children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:0===e.daysUntil?"linear-gradient(135deg, var(--color-emerald), var(--color-cyan))":e.daysUntil>0?"linear-gradient(135deg, var(--color-purple), var(--color-pink))":"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(Oe,{size:22,color:"white"})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontWeight:"600",color:"white",marginBottom:"2px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.title}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:e.snippet})]}),o.jsx("div",{style:{padding:"6px 12px",borderRadius:"8px",background:0===e.daysUntil?"var(--color-emerald)":e.daysUntil>0?"rgba(168, 85, 247, 0.2)":"rgba(255,255,255,0.1)",color:0===e.daysUntil?"black":"white",fontSize:"0.75rem",fontWeight:"700",whiteSpace:"nowrap"},children:e.time})]},`release-${e.id}-${t}`))})]}),oo&&o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",padding:"40px",color:"var(--text-secondary)"},children:[o.jsx("div",{className:"spinner",style:{width:"24px",height:"24px",border:"3px solid rgba(255,255,255,0.1)",borderTopColor:"var(--color-purple)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),o.jsx("span",{children:"Loading music content..."})]}),!oo&&0===co.length&&o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 24px",textAlign:"center",background:"rgba(255,255,255,0.02)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)"},children:[o.jsx(U,{size:48,style:{color:"var(--color-purple)",marginBottom:"16px",opacity:.6}}),o.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"1.2rem",color:"var(--text-primary)"},children:"No Music Content Available"}),o.jsx("p",{style:{margin:"0 0 20px 0",color:"var(--text-secondary)",maxWidth:"400px"},children:"Unable to load trending AI music from Udio and Suno. Make sure the backend server is running."}),o.jsxs("button",{onClick:()=>el(1),style:{padding:"12px 24px",borderRadius:"10px",border:"none",background:"linear-gradient(135deg, var(--color-purple), var(--color-cyan))",color:"white",fontSize:"0.95rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(M,{size:16})," Try Again"]})]}),!oo&&no&&co.length>0&&o.jsx("div",{style:{display:"flex",justifyContent:"center",paddingTop:"32px"},children:o.jsx("button",{onClick:()=>el(io+1),style:{padding:"14px 32px",borderRadius:"12px",border:"1px solid var(--color-purple)",background:"transparent",color:"var(--color-purple)",fontSize:"0.95rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="var(--color-purple)",e.currentTarget.style.color="white"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="var(--color-purple)"},children:"Load More"})}),!no&&co.length>0&&o.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--text-secondary)",fontSize:"0.9rem"},children:o.jsx("p",{children:"(music) You've explored all the latest content. Check back soon!"})})]}),"share"===t&&o.jsxs("div",{children:[o.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.08)",padding:"32px",marginBottom:"24px"},children:[o.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"1.3rem",fontWeight:"700",color:"white"},children:"Share Your Creations"}),o.jsx("p",{style:{margin:"0 0 24px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Cross-post your AI-generated content to connected platforms"}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[o.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",fontWeight:"600"},children:"Content"}),ar.twitter&&o.jsxs("span",{style:{fontSize:"0.75rem",color:rr.length>280?"#ef4444":"var(--text-secondary)"},children:[rr.length,"/280 for X/Twitter"]})]}),o.jsx("textarea",{value:rr,onChange:e=>ir(e.target.value),placeholder:"Write your post caption, or paste text from your AI generations...",style:{width:"100%",minHeight:"120px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",padding:"16px",color:"white",fontSize:"0.95rem",resize:"vertical",outline:"none",fontFamily:"inherit",boxSizing:"border-box"}})]}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsxs("label",{style:{display:"block",fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"12px",fontWeight:"600"},children:["Post to (",Object.values(ar).filter(Boolean).length," selected)"]}),o.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:e.map(e=>{const t=Kt[e.id],r=ar[e.id];return o.jsxs("button",{disabled:!t,onClick:()=>t&&or(t=>({...t,[e.id]:!t[e.id]})),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 18px",borderRadius:"10px",background:r?`${e.color}30`:"rgba(255,255,255,0.05)",border:r?`2px solid ${e.color}`:"1px solid rgba(255,255,255,0.1)",fontSize:"0.85rem",color:t?"white":"rgba(255,255,255,0.3)",cursor:t?"pointer":"not-allowed",transition:"all 0.2s ease",opacity:t?1:.5},children:[o.jsx("span",{children:e.icon})," ",e.name,r&&o.jsx(he,{size:14,style:{color:e.color}}),!t&&o.jsx("span",{style:{fontSize:"0.7rem",marginLeft:"4px"},children:"(not connected)"})]},e.id)})}),0===Object.values(Kt).filter(Boolean).length&&o.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"0.85rem",padding:"12px 0"},children:["No accounts connected. ",o.jsx("button",{onClick:()=>go?.("connections"),style:{color:"var(--color-purple)",background:"none",border:"none",cursor:"pointer",fontWeight:"600",fontSize:"inherit"},children:"Connect accounts â†’"})]})]}),o.jsx("button",{onClick:sl,disabled:sr||!rr.trim()||0===Object.values(ar).filter(Boolean).length,style:{width:"100%",padding:"14px 24px",borderRadius:"12px",border:"none",background:sr||!rr.trim()||0===Object.values(ar).filter(Boolean).length?"rgba(255,255,255,0.1)":"linear-gradient(135deg, var(--color-purple), var(--color-cyan))",color:"white",fontSize:"1rem",fontWeight:"700",cursor:sr||!rr.trim()?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:sr?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{width:"18px",height:"18px",border:"2px solid rgba(255,255,255,0.3)",borderTopColor:"white",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),"Posting..."]}):o.jsxs(o.Fragment,{children:[o.jsx($,{size:18}),"Post to ",Object.values(ar).filter(Boolean).length||0," Platform",1!==Object.values(ar).filter(Boolean).length?"s":""]})})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.08)",padding:"32px"},children:[o.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"1.1rem",fontWeight:"700",color:"white"},children:"Recent Creations"}),Rr.length>0?o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Rr.slice(0,5).map(e=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderRadius:"12px",background:"rgba(255,255,255,0.04)",border:"1px solid rgba(255,255,255,0.06)",cursor:"pointer",transition:"all 0.2s ease"},children:[o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{color:"white",fontSize:"0.9rem",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name||e.title||"Untitled"}),o.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"0.75rem",marginTop:"2px"},children:[e.assets?.length||0," assets Â· ",e.style||e.category||""]})]}),o.jsx("button",{onClick:()=>{const t=`${e.name||e.title||"Untitled"} â€” Created with Studio Agents AI`;ir(e=>e?`${e}\n\n${t}`:t),a.success("Added to post!")},style:{padding:"6px 14px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.15)",background:"rgba(255,255,255,0.08)",color:"white",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",whiteSpace:"nowrap"},children:"Add to post"})]},e.id))}):o.jsxs(o.Fragment,{children:[o.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"No projects yet. Head to the Studio to create something!"}),o.jsx("button",{onClick:()=>as("mystudio"),style:{marginTop:"16px",padding:"10px 20px",borderRadius:"10px",border:"1px solid var(--color-purple)",background:"transparent",color:"var(--color-purple)",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"Open Studio â†’"})]})]})]})]})}case"news":return o.jsx(i.Suspense,{fallback:o.jsx(jt,{}),children:o.jsx(ht,{newsItems:cl,newsSearch:wo,setNewsSearch:So,isLoadingNews:ho,onRefresh:pl,hasMoreNews:bo,onLoadMore:()=>tl(xo+1),setPlayingItem:Fi})});case"profile":return o.jsxs("div",{className:"studio-profile-view animate-fadeInUp",style:{padding:"24px",maxWidth:"800px",margin:"0 auto"},children:[o.jsxs("div",{className:"profile-header",style:{display:"flex",alignItems:"center",gap:"24px",marginBottom:"32px"},children:[o.jsxs("div",{className:"profile-avatar-large",style:{width:"100px",height:"100px",borderRadius:"50%",overflow:"hidden",border:"2px solid var(--color-purple)",position:"relative"},children:[$t?.photoURL?o.jsx("img",{src:$t.photoURL,alt:"User",loading:"lazy",style:{width:"100%",height:"100%"}}):o.jsx("div",{style:{width:"100%",height:"100%",background:"var(--color-purple)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem"},children:$t?.displayName?.charAt(0)||"U"}),o.jsx("button",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",border:"none",color:"white",fontSize:"0.7rem",padding:"4px",cursor:"pointer"},children:"Edit"})]}),o.jsxs("div",{children:[o.jsx("h1",{style:{fontSize:"2rem",marginBottom:"8px"},children:Jt.stageName||$t?.displayName||"Guest Creator"}),o.jsx("p",{style:{color:"var(--text-secondary)"},children:$t?.email||"No email linked"}),o.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"12px"},children:[o.jsxs("span",{className:"badge",style:{background:"var(--color-purple)",color:"white",padding:"4px 12px",borderRadius:"12px",fontSize:"0.8rem"},children:[Jt.plan," Plan"]}),o.jsxs("span",{className:"badge",style:{background:"rgba(255,255,255,0.1)",color:"var(--text-secondary)",padding:"4px 12px",borderRadius:"12px",fontSize:"0.8rem"},children:["Member since ",Jt.memberSince]}),o.jsxs("span",{className:"badge",style:{background:"rgba(255,255,255,0.1)",color:"var(--color-cyan)",padding:"4px 12px",borderRadius:"12px",fontSize:"0.8rem"},children:[Jt.credits," Credits"]})]})]})]}),o.jsxs("div",{className:"profile-stats-grid",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"24px"},children:[o.jsxs("div",{className:"stat-card",style:{background:"var(--card-bg)",padding:"16px",borderRadius:"12px",border:"1px solid var(--border-color)",textAlign:"center"},children:[o.jsx("h4",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--color-purple)",marginBottom:"4px"},children:(Rr||[]).length}),o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"1px"},children:"Projects"})]}),o.jsxs("div",{className:"stat-card",style:{background:"var(--card-bg)",padding:"16px",borderRadius:"12px",border:"1px solid var(--border-color)",textAlign:"center"},children:[o.jsx("h4",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--color-cyan)",marginBottom:"4px"},children:new Set((Rr||[]).map(e=>e.agent)).size}),o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"1px"},children:"Agents Used"})]}),o.jsxs("div",{className:"stat-card haptic-press",onClick:()=>Rn(!0),style:{background:"var(--card-bg)",padding:"16px",borderRadius:"12px",border:"1px solid var(--border-color)",textAlign:"center",cursor:"pointer"},children:[o.jsx("h4",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--color-orange)",marginBottom:"4px"},children:Jt.credits}),o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"1px"},children:"Credits Left"})]})]}),o.jsxs("div",{className:"profile-section",style:{background:"var(--card-bg)",borderRadius:"16px",padding:"24px",marginBottom:"24px",border:"1px solid var(--border-color)"},children:[o.jsxs("h3",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(N,{size:20})," Creator Profile"]}),o.jsxs("div",{className:"form-grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Stage Name"}),o.jsx("input",{type:"text",value:Jt.stageName,onChange:e=>Yt({...Jt,stageName:e.target.value}),placeholder:$t?.displayName||"Enter stage name",className:"form-input",style:{width:"100%",padding:"12px",borderRadius:"8px"}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Primary Genre"}),o.jsxs("select",{value:Jt.genre,onChange:e=>Yt({...Jt,genre:e.target.value}),className:"form-input",style:{width:"100%",padding:"12px",borderRadius:"8px"},children:[o.jsx("option",{children:"Hip Hop / Rap"}),o.jsx("option",{children:"R&B"}),o.jsx("option",{children:"Pop"}),o.jsx("option",{children:"Electronic"}),o.jsx("option",{children:"Rock"}),o.jsx("option",{children:"Afrobeats"}),o.jsx("option",{children:"Latin"})]})]}),o.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Creator Bio"}),o.jsx("textarea",{rows:"4",value:Jt.bio,onChange:e=>Yt({...Jt,bio:e.target.value}),placeholder:"Tell your story...",className:"form-input",style:{width:"100%",padding:"12px",borderRadius:"8px",resize:"vertical"}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Location"}),o.jsx("input",{type:"text",value:Jt.location,onChange:e=>Yt({...Jt,location:e.target.value}),placeholder:"City, Country",className:"form-input",style:{width:"100%",padding:"12px",borderRadius:"8px"}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Website"}),o.jsx("input",{type:"text",value:Jt.website,onChange:e=>Yt({...Jt,website:e.target.value}),placeholder:"https://",className:"form-input",style:{width:"100%",padding:"12px",borderRadius:"8px"}})]})]})]}),o.jsxs("div",{className:"profile-section",style:{background:"var(--card-bg)",borderRadius:"16px",padding:"24px",marginBottom:"24px",border:"1px solid var(--border-color)"},children:[o.jsxs("h3",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx($,{size:20})," Social Connections"]}),o.jsx("div",{className:"social-connect-list",style:{display:"flex",flexDirection:"column",gap:"12px"},children:[{id:"instagram",label:"Instagram",icon:De,color:"#E1306C"},{id:"twitter",label:"X / Twitter",icon:We,color:"#1DA1F2"},{id:"spotify",label:"Spotify for Artists",icon:U,color:"#1DB954"},{id:"tiktok",label:"TikTok",icon:H,color:"#00f2ea"}].map(e=>o.jsxs("div",{className:"social-item",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",background:"rgba(255,255,255,0.05)",borderRadius:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx(e.icon,{size:20,color:e.color}),o.jsx("span",{children:e.label})]}),o.jsx("button",{className:"btn-sm",onClick:()=>Qt(t=>{const r={...t,[e.id]:!t[e.id]};return localStorage.setItem("studio_agents_socials",JSON.stringify(r)),r}),style:{background:Kt[e.id]?"rgba(16, 185, 129, 0.2)":"transparent",border:"1px solid "+(Kt[e.id]?"#10b981":"var(--border-color)"),color:Kt[e.id]?"#10b981":"white",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",minWidth:"100px"},children:Kt[e.id]?"Connected":"Connect"})]},e.id))})]}),o.jsxs("div",{className:"profile-section",style:{background:"var(--card-bg)",borderRadius:"16px",padding:"24px",marginBottom:"24px",border:"1px solid var(--border-color)"},children:[o.jsxs("h3",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(ye,{size:20})," Preferences"]}),o.jsx("div",{className:"preferences-list",style:{display:"flex",flexDirection:"column",gap:"12px"},children:o.jsxs("div",{className:"preference-item",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",background:"rgba(255,255,255,0.05)",borderRadius:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:["dark"===Sr?o.jsx(Be,{size:20}):o.jsx(Ee,{size:20}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600"},children:"Appearance"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"dark"===Sr?"Dark Mode":"Light Mode"})]})]}),o.jsxs("button",{className:"btn-sm",onClick:()=>kr("dark"===Sr?"light":"dark"),style:{background:"transparent",border:"1px solid var(--border-color)",color:"var(--text-primary)",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",minWidth:"100px"},children:["Switch to ","dark"===Sr?"Light":"Dark"]})]})})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[o.jsx("button",{className:"cta-button-secondary",onClick:()=>as("mystudio"),children:"Cancel"}),o.jsx("button",{className:"cta-button-premium",onClick:async()=>{if(localStorage.setItem("studio_user_profile",JSON.stringify(Jt)),$t?.uid&&d)try{const{stageName:e,genre:t,bio:r,location:i,website:a,targetDemographic:o,language:s}=Jt,n=Fe(d,"users",$t.uid);await Je(n,{profile:{stageName:e,genre:t,bio:r,location:i,website:a,targetDemographic:o,language:s}},{merge:!0})}catch(e){}a.success("Profile saved!"),as("mystudio")},children:"Save Changes"})]})]});case"support":{const e=_i.length>1?[...At.filter(e=>e.keywords.some(e=>e.includes(_i.toLowerCase()))||e.label.toLowerCase().includes(_i.toLowerCase())).map(e=>({type:"Action",title:`Go to ${e.label}`,description:"Navigate to this section",icon:Ue,action:()=>{as(e.type),e.sub&&Xa(e.sub)}})),...Nt.filter(e=>e.keywords.some(e=>_i.toLowerCase().includes(e))||e.issue.toLowerCase().includes(_i.toLowerCase())).map(e=>({type:"Troubleshooting",title:e.issue,description:e.solution,icon:Se})),...It.filter(e=>e.title.toLowerCase().includes(_i.toLowerCase())||e.desc.toLowerCase().includes(_i.toLowerCase())||e.details.toLowerCase().includes(_i.toLowerCase())).map(e=>({type:"Guide",title:e.title,description:e.desc,icon:j})),...u.filter(e=>e.name.toLowerCase().includes(_i.toLowerCase())||e.description.toLowerCase().includes(_i.toLowerCase())||e.category.toLowerCase().includes(_i.toLowerCase())).map(e=>({type:"Agent",title:e.name,description:e.description,icon:Q,action:()=>{as("agents"),Nr(e)}})),...[{q:"How do I export my creations?",a:"You can export any creation from the Project Hub using the download icon."},{q:"Can I use the lyrics commercially?",a:"Yes, all content generated by Studio Agents is royalty-free for Pro users."},{q:"How do I change the agent's genre?",a:"Use the Genre dropdown in the agent's detail view to shift styles."}].filter(e=>e.q.toLowerCase().includes(_i.toLowerCase())||e.a.toLowerCase().includes(_i.toLowerCase())).map(e=>({type:"FAQ",title:e.q,description:e.a,icon:S}))]:[];return o.jsxs("div",{className:"help-center-view animate-fadeInUp",children:[o.jsxs("div",{className:"help-hero",children:[o.jsx("h1",{children:"Support Center"}),o.jsx("p",{className:"text-muted",style:{marginTop:"8px"},children:"Guides, troubleshooting, and expert assistance."}),o.jsxs("div",{className:"search-box large",style:{marginTop:"24px"},children:[o.jsx(_e,{size:20}),o.jsx("input",{type:"text",placeholder:"Search for agents, guides, or troubleshooting...",value:_i,onChange:e=>Di(e.target.value)})]})]}),e.length>0?o.jsxs("div",{className:"smart-suggestions animate-fadeIn",children:[o.jsxs("div",{className:"suggestions-header",children:[o.jsx(m,{size:18,className:"text-purple"}),o.jsx("h3",{children:"Search Results"})]}),o.jsx("div",{className:"suggestions-list",children:e.map((e,t)=>{const r=e.icon;return o.jsxs("div",{className:"suggestion-item",onClick:e.action?e.action:void 0,style:{cursor:e.action?"pointer":"default"},children:[o.jsx("div",{className:"suggestion-icon",children:o.jsx(r,{size:20})}),o.jsxs("div",{className:"suggestion-content",children:[o.jsx("div",{className:"suggestion-type",children:e.type}),o.jsx("h4",{children:e.title}),o.jsx("p",{children:e.description})]}),e.action&&o.jsx(Ue,{size:16,className:"suggestion-arrow"})]},t)})})]}):_i.length>1?o.jsxs("div",{className:"empty-search-state animate-fadeIn",style:{textAlign:"center",padding:"4rem 2rem",color:"var(--text-secondary)"},children:[o.jsx(_e,{size:48,style:{opacity:.2,marginBottom:"1rem"}}),o.jsx("h3",{children:"No results found"}),o.jsx("p",{children:'Try searching for "Billing", "Ghostwriter", or "Export".'})]}):null,o.jsx("div",{className:"help-grid-main",children:It.map((e,t)=>{const r=e.icon,i=Bi===t;return o.jsxs("div",{className:"help-card-item "+(i?"expanded":""),children:[o.jsx("div",{className:"help-card-icon",children:o.jsx(r,{size:24})}),o.jsx("h3",{children:e.title}),o.jsx("p",{children:e.desc}),i&&o.jsx("div",{className:"help-card-details animate-fadeIn",children:o.jsx("p",{children:e.details})}),o.jsxs("button",{className:"help-card-link",onClick:()=>Ei(i?null:t),children:[i?"Show Less":"Read More",i?o.jsx(Te,{size:16}):o.jsx(Ue,{size:16})]})]},t)})}),o.jsxs("div",{className:"faq-section",children:[o.jsx("h2",{children:"Frequently Asked Questions"}),o.jsx("div",{className:"faq-list",children:[{q:"How do I export my creations?",a:"You can export any creation from the Project Hub using the download icon."},{q:"Can I use the lyrics commercially?",a:"Yes, all content generated by Studio Agents is royalty-free for Pro users."},{q:"How do I change the agent's genre?",a:"Use the Genre dropdown in the agent's detail view to shift styles."}].map((e,t)=>o.jsxs("div",{className:"faq-item",children:[o.jsx("h4",{children:e.q}),o.jsx("p",{children:e.a})]},t))})]}),o.jsxs("div",{className:"contact-support-section",style:{marginTop:"40px",padding:"32px",background:"var(--card-bg)",borderRadius:"24px",border:"1px solid var(--border-color)",textAlign:"center"},children:[o.jsx("div",{className:"icon-box",style:{width:"64px",height:"64px",margin:"0 auto 16px",background:"rgba(168, 85, 247, 0.1)",color:"var(--color-purple)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(v,{size:32})}),o.jsx("h2",{children:"Still need help?"}),o.jsx("p",{style:{color:"var(--text-secondary)",maxWidth:"500px",margin:"12px auto 24px"},children:"Our support team is available 24/7 to assist with technical issues, billing inquiries, or creative blocks."}),o.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"center",flexWrap:"wrap"},children:[o.jsx("button",{className:"cta-button-premium",onClick:()=>window.open("mailto:support@studioagents.com?subject=Support Request","_blank"),children:"Email Support"}),o.jsx("button",{className:"cta-button-secondary",onClick:()=>window.open("https://discord.gg/studioagents","_blank"),children:"Join Discord Community"})]})]})]})}case"more":return o.jsxs("div",{className:"more-menu-view animate-fadeInUp",style:{padding:"20px"},children:[o.jsx("h2",{style:{marginBottom:"24px",fontSize:"1.5rem"},children:"More Options"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",marginBottom:"32px"},children:Tt.map(e=>{const t=e.icon;return o.jsxs("div",{onClick:()=>{"legal"===e.id||"whitepapers"===e.id?window.location.hash=`#/${e.id}`:("activity"===e.id&&go("connections"),as(e.id))},role:"button",tabIndex:0,style:{background:"var(--card-bg)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"20px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",flexDirection:"column",gap:"12px"},onKeyDown:t=>"Enter"===t.key&&as(e.id),children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:`${e.color}20`,display:"flex",alignItems:"center",justifyContent:"center",color:e.color},children:o.jsx(t,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{style:{fontSize:"1rem",marginBottom:"4px"},children:e.label}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",margin:0},children:e.desc})]})]},e.id)})}),o.jsxs("div",{style:{background:"var(--card-bg)",borderRadius:"16px",padding:"20px",border:"1px solid var(--border-color)"},children:[o.jsx("h3",{style:{marginBottom:"16px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Quick Actions"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[o.jsxs("button",{onClick:()=>on(!0),style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",background:"rgba(168, 85, 247, 0.1)",border:"1px solid rgba(168, 85, 247, 0.3)",borderRadius:"12px",color:"var(--color-purple)",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500"},children:[o.jsx(re,{size:20}),"Create New Project"]}),Et?o.jsxs("button",{onClick:bn,style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",color:"var(--color-red)",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500"},children:[o.jsx($e,{size:20}),"Sign Out"]}):o.jsxs("button",{onClick:()=>Zt(!0),style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",background:"rgba(6, 182, 212, 0.1)",border:"1px solid rgba(6, 182, 212, 0.3)",borderRadius:"12px",color:"var(--color-cyan)",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500"},children:[o.jsx(N,{size:20}),"Sign In / Create Account"]})]})]}),o.jsxs("div",{style:{marginTop:"24px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"var(--card-bg)",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"12px"},children:["dark"===Sr?o.jsx(Be,{size:20}):o.jsx(Ee,{size:20}),o.jsx("span",{children:"Dark Mode"})]}),o.jsx("button",{onClick:()=>kr("dark"===Sr?"light":"dark"),style:{width:"50px",height:"28px",borderRadius:"14px",background:"dark"===Sr?"var(--color-purple)":"var(--border-color)",border:"none",cursor:"pointer",position:"relative",transition:"background 0.2s"},children:o.jsx("div",{style:{width:"22px",height:"22px",borderRadius:"50%",background:"white",position:"absolute",top:"3px",left:"dark"===Sr?"25px":"3px",transition:"left 0.2s"}})})]})]});default:return null}})()})}),Vi&&o.jsx("div",{className:"media-player-overlay animate-fadeIn",onClick:()=>{document.querySelectorAll("audio, video").forEach(e=>e.pause()),Fi(null)},children:o.jsxs("div",{className:"media-player-container animate-fadeInUp",onClick:e=>e.stopPropagation(),onTouchEnd:e=>e.stopPropagation(),children:[o.jsx("button",{className:"player-close",onClick:()=>{document.querySelectorAll("audio, video").forEach(e=>e.pause()),Fi(null)},children:o.jsx(T,{size:24})}),o.jsxs("div",{className:"player-content",children:[o.jsxs("div",{className:"player-header",children:[o.jsx("div",{className:`player-icon-box ${Vi.color||"agent-purple"}`,children:Vi.videoUrl?o.jsx(R,{size:32}):(Vi.imageUrl,o.jsx(U,{size:32}))}),o.jsxs("div",{className:"player-info",children:[o.jsx("h2",{children:Vi.title}),o.jsxs("p",{children:[Vi.agent," * ",Vi.user||"Your Creation"]})]})]}),o.jsx("div",{className:"player-visualizer",style:{position:"relative"},children:Vi.videoUrl&&(Vi.videoUrl.includes("youtube.com")||Vi.videoUrl.includes("youtu.be"))?o.jsx("iframe",{width:"100%",height:"100%",src:Vi.videoUrl.replace("watch?v=","embed/"),title:Vi.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"player-video",style:{border:"none"}}):o.jsxs(o.Fragment,{children:[Vi.videoUrl?o.jsx("video",{src:ct(Vi.videoUrl),controls:!Vi.audioUrl,playsInline:!0,muted:!!Vi.audioUrl,className:"player-video",onPlay:e=>{document.querySelectorAll("audio, video").forEach(t=>{t!==e.target&&t.pause()})}}):Vi.imageUrl?o.jsx("img",{src:lt(Vi.imageUrl),alt:Vi.title,className:"player-video",loading:"lazy",style:{objectFit:"contain",background:"#000"}}):Vi.audioUrl?o.jsx("div",{className:"audio-visualizer-placeholder",children:o.jsx("div",{className:"visualizer-bars",children:[...Array(20)].map((e,t)=>o.jsx("div",{className:"v-bar",style:{animationDelay:.1*t+"s"}},t))})}):o.jsx("div",{style:{width:"100%",height:"100%",minHeight:"200px",padding:"2rem",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.05))",display:"flex",alignItems:"center",justifyContent:"center",overflow:"auto"},children:o.jsx("div",{style:{maxWidth:"600px",fontSize:"1rem",lineHeight:"1.8",color:"var(--text-primary)",whiteSpace:"pre-wrap",textAlign:"left"},children:Gs(Vi)||o.jsx("p",{style:{color:"var(--text-secondary)",fontStyle:"italic",textAlign:"center"},children:"No content to display"})})}),Vi.audioUrl&&o.jsx("div",{style:{position:"absolute",bottom:"20px",left:"0",right:"0",padding:"0 20px",zIndex:10},children:o.jsx("audio",{src:dt(Vi.audioUrl),controls:!0,className:"player-audio",style:{width:"100%",boxShadow:"0 4px 12px rgba(0,0,0,0.5)",borderRadius:"30px"},onPlay:e=>{document.querySelectorAll("audio, video").forEach(t=>{t!==e.target&&t.pause()})}})})]})}),o.jsx("div",{className:"player-footer",children:o.jsxs("div",{className:"player-actions",children:[Vi.audioUrl&&!Vi.videoUrl?o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:"player-btn primary",onClick:()=>al(Vi,"mp3"),children:[o.jsx(P,{size:18}),o.jsx("span",{children:"MP3"})]}),o.jsxs("button",{className:"player-btn primary",onClick:()=>al(Vi,"wav"),style:{background:"rgba(139, 92, 246, 0.2)",borderColor:"rgba(139, 92, 246, 0.4)"},children:[o.jsx(P,{size:18}),o.jsx("span",{children:"WAV"})]})]}):o.jsxs("button",{className:"player-btn primary",onClick:()=>al(Vi),children:[o.jsx(P,{size:18}),o.jsx("span",{children:Vi.videoUrl?"Download MP4":"Download"})]}),o.jsxs("button",{className:"player-btn secondary",onClick:()=>(e=>{if(!e)return;const t={...e,id:crypto.randomUUID(),user:Et?"Pro Creator":"Guest Creator",time:"Just now",likes:0,remixes:0,snippet:e.snippet||`Just created this amazing ${e.type||e.agent} output in the Studio!`};po([t,...co]),a.success("Shared to Activity Wall!"),as("activity"),Fi(null)})(Vi),children:[o.jsx($,{size:18}),o.jsx("span",{children:"Share to Feed"})]}),Vi.audioUrl&&o.jsxs("button",{className:"player-btn secondary",onClick:()=>{rs&&rs.audioUrl===Vi.audioUrl?(is(null),a.success("Backing track cleared")):(is({title:Vi.title||"Untitled Beat",audioUrl:Vi.audioUrl,bpm:Vi.bpm||null,id:Vi.id}),a.success(`ðŸŽµ "${Vi.title||"Beat"}" set as backing track`))},style:{background:rs&&rs.audioUrl===Vi.audioUrl?"rgba(168, 85, 247, 0.3)":void 0,borderColor:rs&&rs.audioUrl===Vi.audioUrl?"rgba(168, 85, 247, 0.5)":void 0},children:[o.jsx(U,{size:18}),o.jsx("span",{children:rs&&rs.audioUrl===Vi.audioUrl?"ðŸ”— Synced âœ“":"ðŸ”— Sync Track"})]}),o.jsxs("button",{className:"player-btn secondary",onClick:()=>{Vi.audioUrl?ki(e=>({...e,audio:Vi})):(Vi.videoUrl||Vi.imageUrl)&&ki(e=>({...e,visual:Vi})),Fi(null),wi(!0)},children:[o.jsx(b,{size:18}),o.jsx("span",{children:"Session Mixer"})]})]})})]})]})}),ji&&o.jsxs("div",{className:"studio-session-overlay animate-fadeIn",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.95)",zIndex:1e4,display:"flex",flexDirection:"column"},children:[o.jsxs("div",{style:{padding:zr?"12px":"20px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:zr?"8px":"12px"},children:[o.jsx("div",{style:{width:zr?"32px":"40px",height:zr?"32px":"40px",borderRadius:"8px",background:"var(--color-purple)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(b,{size:zr?18:24,color:"white"})}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0,fontSize:zr?"1rem":"1.2rem"},children:"Studio Session"}),!zr&&o.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Multi-Agent Orchestration"})]}),o.jsx("button",{onClick:()=>a("1. Select Beat (Track 1)\n2. Select Vocals (Track 2)\n3. Add a Visual\n4. Press Play to preview\n5. Click Render Master to save",{duration:6e3,icon:"(mixer)Â"}),style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:"8px"},children:o.jsx(S,{size:14,color:"var(--text-secondary)"})})]}),o.jsx("button",{onClick:()=>{wi(!1),Ti(!1)},style:{background:"none",border:"none",color:"white",cursor:"pointer"},children:o.jsx(T,{size:24})})]}),o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:zr?"8px":"12px",gap:zr?"8px":"12px",overflowY:"auto"},children:[o.jsxs("div",{style:{flex:zr?"none":2,background:"#000",borderRadius:zr?"12px":"16px",overflow:"hidden",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",minHeight:zr?"180px":"300px"},children:[Si.visual?Si.visual.videoUrl?o.jsx("video",{src:Si.visual.videoUrl,style:{width:"100%",height:"100%",objectFit:"contain"},muted:!0,loop:!0,ref:es}):o.jsx("img",{src:Si.visual.imageUrl,loading:"lazy",style:{width:"100%",height:"100%",objectFit:"contain"}}):o.jsxs("div",{style:{color:"var(--text-secondary)",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[o.jsx(B,{size:48}),o.jsx("span",{children:"No Visual Selected"})]}),Si.audio&&o.jsx("audio",{"data-track":"session-audio",src:Si.audio.audioUrl,ref:Xo,loop:!1!==Si.audioLoop,volume:Si.audioMuted?0:Si.audioVolume??.8}),Si.vocal&&o.jsx("audio",{"data-track":"session-vocal",src:Si.vocal.audioUrl,ref:Zo,loop:!1!==Si.vocalLoop,volume:Si.vocalMuted?0:Si.vocalVolume??1}),o.jsx("button",{onClick:()=>Ti(!Ai),style:{position:"absolute",bottom:zr?"12px":"16px",left:"50%",transform:"translateX(-50%)",width:zr?"52px":"64px",height:zr?"52px":"64px",borderRadius:"50%",background:Ai?"rgba(168, 85, 247, 0.9)":"linear-gradient(135deg, var(--color-purple), var(--color-pink))",border:"2px solid rgba(255,255,255,0.3)",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(168, 85, 247, 0.5)",zIndex:10,transition:"all 0.2s ease"},"aria-label":Ai?"Pause All Tracks":"Play All Tracks",children:Ai?o.jsx(E,{size:28,fill:"white"}):o.jsx(_,{size:28,fill:"white",style:{marginLeft:"3px"}})})]}),o.jsxs("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:zr?"10px":"14px",padding:zr?"8px":"14px",display:"flex",flexDirection:"column",gap:zr?"8px":"12px"},children:[o.jsxs("div",{style:{display:"flex",flexDirection:zr?"column":"row",justifyContent:"space-between",alignItems:zr?"stretch":"center",background:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:zr?"10px":"12px 16px",gap:zr?"10px":"0"},children:[o.jsxs("div",{style:{display:"flex",gap:zr?"8px":"16px",alignItems:"center",flexWrap:"wrap"},children:[o.jsxs("div",{onClick:()=>xs(e=>({...e,generateRealAssets:!e.generateRealAssets})),style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",background:Si.generateRealAssets?"linear-gradient(135deg, var(--color-purple), var(--color-pink))":"rgba(255,255,255,0.1)",padding:"6px 12px",borderRadius:"20px",transition:"all 0.3s ease"},children:[o.jsx("div",{style:{width:"32px",height:"18px",borderRadius:"9px",background:Si.generateRealAssets?"rgba(255,255,255,0.3)":"rgba(0,0,0,0.3)",position:"relative",transition:"all 0.3s ease"},children:o.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:"white",position:"absolute",top:"2px",left:Si.generateRealAssets?"16px":"2px",transition:"left 0.3s ease"}})}),o.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600},children:Si.generateRealAssets?"(zap) Real Assets":"(text) Text Mode"})]}),o.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"BPM"}),o.jsx("input",{type:"number",value:Si.bpm||120,onChange:e=>xs(t=>({...t,bpm:parseInt(e.target.value)||120})),style:{width:"50px",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",padding:"4px 8px",color:"var(--color-cyan)",fontSize:"0.85rem",fontWeight:600,textAlign:"center"}})]}),o.jsxs("select",{value:Si.frameRate||30,onChange:e=>xs(t=>({...t,frameRate:parseInt(e.target.value)})),style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",padding:"4px 8px",color:"white",fontSize:"0.8rem",cursor:"pointer"},children:[o.jsx("option",{value:"24",children:"24fps"}),o.jsx("option",{value:"30",children:"30fps"}),o.jsx("option",{value:"60",children:"60fps"})]}),o.jsxs("select",{value:Si.aspectRatio||"16:9",onChange:e=>xs(t=>({...t,aspectRatio:e.target.value})),style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",padding:"4px 8px",color:"white",fontSize:"0.8rem",cursor:"pointer"},children:[o.jsx("option",{value:"16:9",children:"16:9"}),o.jsx("option",{value:"9:16",children:"9:16"}),o.jsx("option",{value:"1:1",children:"1:1"})]}),o.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),o.jsxs("button",{onClick:()=>xs(e=>({...e,vocalMuted:!e.vocalMuted})),title:Si.vocalMuted?"Restore Vocals":"Play Instrumental Only",style:{display:"flex",alignItems:"center",gap:"6px",background:Si.vocalMuted?"linear-gradient(135deg, rgba(239,68,68,0.3), rgba(239,68,68,0.1))":"rgba(255,255,255,0.1)",border:Si.vocalMuted?"1px solid rgba(239,68,68,0.4)":"1px solid transparent",borderRadius:"20px",padding:"5px 12px",cursor:"pointer",color:Si.vocalMuted?"#ef4444":"rgba(255,255,255,0.7)",fontSize:"0.75rem",fontWeight:600,transition:"all 0.3s ease",whiteSpace:"nowrap"},children:[Si.vocalMuted?o.jsx(D,{size:13}):o.jsx(U,{size:13}),Si.vocalMuted?"Vocals Off":"Instrumental"]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("div",{style:{display:"flex",gap:"4px"},children:[1,2,3].map(e=>o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:e<=(Si.renderCount||0)?"var(--color-purple)":"rgba(255,255,255,0.2)"}},e))}),o.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:[3-(Si.renderCount||0)," renders left"]})]})]}),Si.generateRealAssets&&o.jsxs("div",{style:{padding:"10px 16px",background:"linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(236, 72, 153, 0.2))",borderRadius:"8px",border:"1px solid rgba(168, 85, 247, 0.3)",fontSize:"0.85rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"(zap) Real Asset Mode"})," -AI will generate actual audio, images & video"]}),o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Uses Imagen 4.0 * Veo 3.0 * MusicGen"})]}),o.jsxs("div",{style:{padding:"12px",background:"rgba(168, 85, 247, 0.1)",borderRadius:"8px",borderLeft:"4px solid var(--color-purple)",fontSize:"0.9rem",display:"flex",gap:"12px",alignItems:"center"},children:[o.jsx(m,{size:18,className:"text-purple"}),o.jsxs("div",{children:[o.jsx("strong",{children:"Agent Insight:"}),"Beat Architect"===Si.audio?.agent?" This beat has a strong transient profile. Keep vocals dry to cut through.":"Ghostwriter"===Si.vocal?.agent?" These lyrics are dense. Ensure the beat leaves room for the flow.":" Combine assets from different agents to create a unique sound."]})]}),o.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"12px",padding:zr?"12px":"16px",border:Si.audio?"1px solid var(--color-cyan)":"1px solid rgba(255,255,255,0.1)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:zr?"10px":"16px",marginBottom:Si.audio?"12px":0,flexWrap:zr?"wrap":"nowrap"},children:[!zr&&o.jsx("div",{style:{width:"40px",display:"flex",justifyContent:"center"},children:o.jsx(W,{size:24,className:"text-cyan"})}),o.jsxs("div",{style:{flex:1},children:[o.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"6px"},children:[o.jsx("label",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Track 1"}),o.jsxs("select",{style:{padding:"4px 8px",borderRadius:"6px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.2)",color:"var(--color-cyan)",fontSize:"0.75rem",cursor:"pointer"},value:Si.audioOutputType||"waveform",onChange:e=>xs(t=>({...t,audioOutputType:e.target.value})),children:[o.jsx("option",{value:"waveform",children:"(music) Waveform"}),o.jsx("option",{value:"file",children:"(folder) File"}),o.jsx("option",{value:"stems",children:"(mixer)Â Stems"}),o.jsx("option",{value:"midi",children:"(piano) MIDI"})]})]}),o.jsxs("select",{style:{width:"100%",padding:"8px",borderRadius:"8px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",color:"white"},value:Si.audio?.id||"",onChange:e=>{const t=(Array.isArray(Ar?.assets)?Ar.assets:[]).find(t=>t?.id?.toString()===e.target.value);xs(e=>({...e,audio:t||null}))},children:[o.jsx("option",{value:"",children:"Select Audio Asset..."}),(Ar?.assets||[]).filter(e=>e?.audioUrl||"audio"===e?.type||e?.agent?.includes("Beat")||e?.agent?.includes("Sound")).map(e=>o.jsxs("option",{value:e.id,children:["(music) ",e.title||"Untitled"," (",e.agent||e.type,")"]},e.id)),(Ar?.assets||[]).filter(e=>!e?.audioUrl&&"audio"!==e?.type).map(e=>o.jsxs("option",{value:e.id,children:["(doc) ",e.title||"Untitled"," (",e.agent||e.type,")"]},e.id))]})]}),o.jsxs("div",{style:{width:zr?"60px":"80px",textAlign:"center"},children:[o.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Vol"}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:Si.audioVolume||.8,onChange:e=>xs(t=>({...t,audioVolume:parseFloat(e.target.value)})),style:{width:"100%"}}),o.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--color-cyan)"},children:[Math.round(100*(Si.audioVolume||.8)),"%"]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",alignItems:"center"},children:[o.jsx("button",{onClick:()=>xs(e=>({...e,audioLoop:!(!1!==e.audioLoop)})),title:!1!==Si.audioLoop?"Loop On":"Loop Off",style:{width:"32px",height:"32px",borderRadius:"8px",border:"none",cursor:"pointer",background:!1!==Si.audioLoop?"var(--color-cyan)":"rgba(255,255,255,0.1)",color:!1!==Si.audioLoop?"#000":"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.65rem",fontWeight:700,transition:"all 0.2s"},children:o.jsx(M,{size:14})}),o.jsx("button",{onClick:()=>xs(e=>({...e,audioMuted:!e.audioMuted})),title:Si.audioMuted?"Unmute Beat":"Mute Beat",style:{width:"32px",height:"32px",borderRadius:"8px",border:"none",cursor:"pointer",background:Si.audioMuted?"rgba(239, 68, 68, 0.3)":"rgba(255,255,255,0.1)",color:Si.audioMuted?"#ef4444":"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.65rem",fontWeight:700,transition:"all 0.2s"},children:Si.audioMuted?o.jsx(D,{size:14}):o.jsx(O,{size:14})})]})]}),Si.audio&&o.jsx("div",{style:{marginTop:"8px",background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"8px",overflow:"hidden"},children:"waveform"!==Si.audioOutputType&&Si.audioOutputType?"file"===Si.audioOutputType?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"var(--color-cyan)",fontSize:"0.85rem"},children:[o.jsx(L,{size:24}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600},children:Si.audio.title||"Audio File"}),o.jsxs("div",{style:{fontSize:"0.75rem",opacity:.7},children:[Si.audio.agent," * WAV/MP3"]})]}),o.jsx("div",{style:{marginLeft:"auto",fontSize:"0.75rem",opacity:.5},children:"~3:24"})]}):"stems"===Si.audioOutputType?o.jsx("div",{style:{display:"flex",gap:"8px"},children:["Drums","Bass","Melody","FX"].map((e,t)=>o.jsxs("div",{style:{flex:1,background:`rgba(6, 182, 212, ${.2+.1*t})`,borderRadius:"6px",padding:"6px",textAlign:"center",fontSize:"0.7rem"},children:[o.jsx("div",{style:{color:"var(--color-cyan)"},children:e}),o.jsx("div",{style:{width:"100%",height:"16px",background:"rgba(0,0,0,0.3)",borderRadius:"4px",marginTop:"4px",overflow:"hidden"},children:o.jsx("div",{style:{width:60+10*t+"%",height:"100%",background:"var(--color-cyan)",borderRadius:"4px"}})})]},e))}):o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--color-cyan)",fontSize:"0.8rem"},children:[o.jsx(V,{size:20}),o.jsx("div",{style:{display:"flex",gap:"2px",flex:1},children:[...Array(16)].map((e,t)=>o.jsx("div",{style:{width:"8px",height:8+t%3*6+"px",background:t%2==0?"var(--color-cyan)":"transparent",border:"1px solid var(--color-cyan)",borderRadius:"2px"}},t))}),o.jsx("div",{style:{fontSize:"0.7rem",opacity:.5},children:"128 BPM * C Major"})]}):o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px",height:"40px"},children:[...Array(48)].map((e,t)=>o.jsx("div",{style:{flex:1,background:"linear-gradient(to top, var(--color-cyan), rgba(6, 182, 212, 0.3))",borderRadius:"2px",height:Ai?20+20*Math.sin(.5*t+Date.now()/200)+"px":10+15*Math.sin(.3*t)+"px",transition:"height 0.1s ease",animation:Ai?`waveform${t%4} 0.5s ease-in-out infinite`:"none"}},t))})})]}),o.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"12px",padding:zr?"12px":"16px",border:Si.vocal?"1px solid var(--color-purple)":"1px solid rgba(255,255,255,0.1)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:zr?"10px":"16px",marginBottom:Si.vocal?"12px":0,flexWrap:zr?"wrap":"nowrap"},children:[!zr&&o.jsx("div",{style:{width:"40px",display:"flex",justifyContent:"center"},children:o.jsx(F,{size:24,className:"text-purple"})}),o.jsxs("div",{style:{flex:1},children:[o.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"6px"},children:[o.jsx("label",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Track 2"}),o.jsxs("select",{style:{padding:"4px 8px",borderRadius:"6px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.2)",color:"var(--color-purple)",fontSize:"0.75rem",cursor:"pointer"},value:Si.vocalOutputType||"waveform",onChange:e=>xs(t=>({...t,vocalOutputType:e.target.value})),children:[o.jsx("option",{value:"waveform",children:"(music) Waveform"}),o.jsx("option",{value:"file",children:"(folder) File"}),o.jsx("option",{value:"lyrics",children:"(text) Lyrics"}),o.jsx("option",{value:"adlibs",children:"(mic) Adlibs"})]})]}),o.jsxs("select",{style:{width:"100%",padding:"8px",borderRadius:"8px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",color:"white"},value:Si.vocal?.id||"",onChange:e=>{const t=(Array.isArray(Ar?.assets)?Ar.assets:[]).find(t=>t?.id?.toString()===e.target.value);xs(e=>({...e,vocal:t||null}))},children:[o.jsx("option",{value:"",children:"Select Vocal/Lyrics Asset..."}),(Ar?.assets||[]).filter(e=>e?.agent?.includes("Ghost")||e?.agent?.includes("Vocal")||"lyrics"===e?.type).map(e=>o.jsxs("option",{value:e.id,children:["(mic) ",e.title||"Untitled"," (",e.agent||e.type,")"]},e.id)),(Ar?.assets||[]).filter(e=>!e?.agent?.includes("Ghost")&&!e?.agent?.includes("Vocal")&&"lyrics"!==e?.type).map(e=>o.jsxs("option",{value:e.id,children:["(doc) ",e.title||"Untitled"," (",e.agent||e.type,")"]},e.id))]})]}),o.jsxs("div",{style:{width:zr?"60px":"80px",textAlign:"center"},children:[o.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Vol"}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:Si.vocalVolume||1,onChange:e=>xs(t=>({...t,vocalVolume:parseFloat(e.target.value)})),style:{width:"100%"}}),o.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--color-purple)"},children:[Math.round(100*(Si.vocalVolume||1)),"%"]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",alignItems:"center"},children:[o.jsx("button",{onClick:()=>xs(e=>({...e,vocalLoop:!(!1!==e.vocalLoop)})),title:!1!==Si.vocalLoop?"Loop On":"Loop Off",style:{width:"32px",height:"32px",borderRadius:"8px",border:"none",cursor:"pointer",background:!1!==Si.vocalLoop?"var(--color-purple)":"rgba(255,255,255,0.1)",color:!1!==Si.vocalLoop?"#fff":"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.65rem",fontWeight:700,transition:"all 0.2s"},children:o.jsx(M,{size:14})}),o.jsx("button",{onClick:()=>xs(e=>({...e,vocalMuted:!e.vocalMuted})),title:Si.vocalMuted?"Unmute Vocals":"Mute Vocals (Instrumental)",style:{width:"32px",height:"32px",borderRadius:"8px",border:"none",cursor:"pointer",background:Si.vocalMuted?"rgba(239, 68, 68, 0.3)":"rgba(255,255,255,0.1)",color:Si.vocalMuted?"#ef4444":"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.65rem",fontWeight:700,transition:"all 0.2s"},children:Si.vocalMuted?o.jsx(D,{size:14}):o.jsx(F,{size:14})})]})]}),Si.vocal&&o.jsx("div",{style:{marginTop:"8px",background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"8px",overflow:"hidden"},children:"waveform"!==Si.vocalOutputType&&Si.vocalOutputType?"file"===Si.vocalOutputType?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"var(--color-purple)",fontSize:"0.85rem"},children:[o.jsx(L,{size:24}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600},children:Si.vocal.title||"Vocal File"}),o.jsxs("div",{style:{fontSize:"0.75rem",opacity:.7},children:[Si.vocal.agent," * WAV"]})]}),o.jsx("div",{style:{marginLeft:"auto",fontSize:"0.75rem",opacity:.5},children:"~2:48"})]}):"lyrics"===Si.vocalOutputType?o.jsxs("div",{style:{color:"rgba(255,255,255,0.9)",fontSize:"0.85rem",lineHeight:1.6,maxHeight:"80px",overflow:"auto"},children:[o.jsx("div",{style:{color:"var(--color-purple)",marginBottom:"4px",fontSize:"0.7rem"},children:"(text) Lyrics Preview"}),Si.vocal.content?.substring(0,200)||Si.vocal.snippet?.substring(0,200)||"No lyrics content...",(Si.vocal.content?.length>200||Si.vocal.snippet?.length>200)&&"..."]}):o.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["Yeah!","Uh","Let's go","Woo!","Ayy"].map(e=>o.jsx("div",{style:{background:"rgba(168, 85, 247, 0.2)",border:"1px solid var(--color-purple)",borderRadius:"16px",padding:"4px 12px",fontSize:"0.75rem",color:"var(--color-purple)"},children:e},e))}):o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px",height:"40px"},children:[...Array(48)].map((e,t)=>o.jsx("div",{style:{flex:1,background:"linear-gradient(to top, var(--color-purple), rgba(168, 85, 247, 0.3))",borderRadius:"2px",height:Ai?15+25*Math.cos(.4*t+Date.now()/180)+"px":8+12*Math.cos(.3*t)+"px",transition:"height 0.1s ease"}},t))})})]}),o.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"12px",padding:zr?"12px":"16px",border:Si.visual?"1px solid var(--color-pink)":"1px solid rgba(255,255,255,0.1)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:zr?"10px":"16px",marginBottom:Si.visual?"12px":0,flexWrap:zr?"wrap":"nowrap"},children:[!zr&&o.jsx("div",{style:{width:"40px",display:"flex",justifyContent:"center"},children:o.jsx(H,{size:24,className:"text-pink"})}),o.jsxs("div",{style:{flex:1},children:[o.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"6px"},children:[o.jsx("label",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Track 3"}),o.jsxs("select",{style:{padding:"4px 8px",borderRadius:"6px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.2)",color:"var(--color-pink)",fontSize:"0.75rem",cursor:"pointer"},value:Si.visualOutputType||"video",onChange:e=>xs(t=>({...t,visualOutputType:e.target.value})),children:[o.jsx("option",{value:"video",children:"(video) Video"}),o.jsx("option",{value:"image",children:"(image) Image"}),o.jsx("option",{value:"animation",children:"âœ¨ Animation"}),o.jsx("option",{value:"thumbnail",children:"(camera) Thumbnail"})]})]}),o.jsxs("select",{style:{width:"100%",padding:"8px",borderRadius:"8px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",color:"white"},value:Si.visual?.id||"",onChange:e=>{const t=(Array.isArray(Ar?.assets)?Ar.assets:[]).find(t=>t?.id?.toString()===e.target.value);xs(e=>({...e,visual:t||null}))},children:[o.jsx("option",{value:"",children:"Select Visual Asset..."}),(Ar?.assets||[]).filter(e=>e?.imageUrl||e?.videoUrl||"image"===e?.type||"video"===e?.type).map(e=>o.jsxs("option",{value:e.id,children:[e.videoUrl?"(video)":"(image)"," ",e.title||"Untitled"," (",e.agent||e.type,")"]},e.id)),(Ar?.assets||[]).filter(e=>!e?.imageUrl&&!e?.videoUrl&&"image"!==e?.type&&"video"!==e?.type).map(e=>o.jsxs("option",{value:e.id,children:["(doc) ",e.title||"Untitled"," (",e.agent||e.type,")"]},e.id))]})]})]}),Si.visual&&o.jsx("div",{style:{marginTop:"8px",background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"8px",overflow:"hidden"},children:"video"!==Si.visualOutputType&&Si.visualOutputType?"image"===Si.visualOutputType?Si.visual.imageUrl?o.jsx("img",{src:Si.visual.imageUrl,alt:"Visual",loading:"lazy",style:{width:"100%",maxHeight:"120px",objectFit:"cover",borderRadius:"6px"}}):o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"var(--color-pink)",fontSize:"0.85rem"},children:[o.jsx(B,{size:24}),o.jsx("div",{children:"Image will be generated"})]}):"animation"===Si.visualOutputType?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--color-pink)"},children:[o.jsx("div",{style:{display:"flex",gap:"4px"},children:[...Array(6)].map((e,t)=>o.jsx("div",{style:{width:"32px",height:"32px",background:"linear-gradient(135deg, var(--color-pink), var(--color-purple))",borderRadius:"4px",opacity:.3+.14*t,transform:`rotate(${15*t}deg)`}},t))}),o.jsxs("div",{style:{fontSize:"0.8rem",marginLeft:"12px"},children:[o.jsx("div",{style:{fontWeight:600},children:"Animation Sequence"}),o.jsx("div",{style:{fontSize:"0.7rem",opacity:.7},children:"6 keyframes * 30fps"})]})]}):o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"80px",height:"45px",background:"linear-gradient(135deg, var(--color-pink), var(--color-purple))",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(G,{size:20,color:"white"})}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--color-pink)"},children:[o.jsx("div",{style:{fontWeight:600},children:"Cover Thumbnail"}),o.jsx("div",{style:{fontSize:"0.7rem",opacity:.7},children:"1280x720 * YouTube Ready"})]})]}):Si.visual.videoUrl?o.jsx("video",{src:Si.visual.videoUrl,style:{width:"100%",maxHeight:"120px",objectFit:"cover",borderRadius:"6px"},muted:!0}):o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"var(--color-pink)",fontSize:"0.85rem"},children:[o.jsx(H,{size:24}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600},children:Si.visual.title||"Video Asset"}),o.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:"Video will be generated on render"})]})]})}),Si.visual&&o.jsxs("div",{style:{marginTop:"8px",background:"rgba(236, 72, 153, 0.08)",borderRadius:"8px",padding:"10px 12px",border:"1px solid rgba(236, 72, 153, 0.15)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx(q,{size:14,className:"text-pink"}),o.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--color-pink)"},children:"Sync Controls"})]}),o.jsxs("select",{value:Si.syncMode||"auto",onChange:e=>xs(t=>({...t,syncMode:e.target.value})),style:{padding:"3px 8px",borderRadius:"6px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.15)",color:"var(--color-pink)",fontSize:"0.7rem",cursor:"pointer"},children:[o.jsx("option",{value:"auto",children:"Auto Sync"}),o.jsx("option",{value:"beat",children:"Sync to Beat"}),o.jsx("option",{value:"vocal",children:"Sync to Vocals"}),o.jsx("option",{value:"manual",children:"Manual Offset"})]})]}),o.jsxs("div",{style:{display:"flex",gap:zr?"8px":"16px",flexWrap:"wrap",alignItems:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Source"}),o.jsxs("select",{value:Si.syncSource||"beat",onChange:e=>xs(t=>({...t,syncSource:e.target.value})),style:{padding:"3px 8px",borderRadius:"6px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.7rem",cursor:"pointer"},children:[o.jsx("option",{value:"beat",children:"Track 1 (Beat)"}),o.jsx("option",{value:"vocal",children:"Track 2 (Vocals)"}),o.jsx("option",{value:"both",children:"Both Tracks"})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Offset"}),o.jsx("input",{type:"number",min:"-10",max:"30",step:"0.5",value:Si.visualOffset||0,onChange:e=>xs(t=>({...t,visualOffset:parseFloat(e.target.value)||0})),style:{width:"50px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",padding:"3px 6px",color:"var(--color-pink)",fontSize:"0.75rem",fontWeight:600,textAlign:"center"}}),o.jsx("span",{style:{fontSize:"0.65rem",color:"var(--text-secondary)"},children:"sec"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Duration"}),o.jsxs("select",{value:Si.visualDuration||"full",onChange:e=>xs(t=>({...t,visualDuration:e.target.value})),style:{padding:"3px 8px",borderRadius:"6px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.7rem",cursor:"pointer"},children:[o.jsx("option",{value:"full",children:"Full Track"}),o.jsx("option",{value:"chorus",children:"Chorus Only"}),o.jsx("option",{value:"verse1",children:"First Verse"}),o.jsx("option",{value:"custom",children:"Custom"})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Transition"}),o.jsxs("select",{value:Si.visualTransition||"cut",onChange:e=>xs(t=>({...t,visualTransition:e.target.value})),style:{padding:"3px 8px",borderRadius:"6px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",color:"white",fontSize:"0.7rem",cursor:"pointer"},children:[o.jsx("option",{value:"cut",children:"Cut"}),o.jsx("option",{value:"fade",children:"Fade"}),o.jsx("option",{value:"crossfade",children:"Crossfade"}),o.jsx("option",{value:"zoom",children:"Zoom In"})]})]})]}),o.jsxs("div",{style:{marginTop:"6px",fontSize:"0.65rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"manual"===Si.syncMode?"var(--color-pink)":"var(--color-cyan)",animation:"pulse 2s infinite"}}),"auto"===Si.syncMode&&"Visual syncs to audio start automatically","beat"===Si.syncMode&&`Visual cuts on beat at ${Si.bpm||120} BPM`,"vocal"===Si.syncMode&&"Visual enters when vocals begin","manual"===Si.syncMode&&`Visual starts at ${Si.visualOffset||0}s offset`,!Si.syncMode&&"Visual syncs to audio start automatically"]})]})]})]})]}),o.jsxs("div",{style:{padding:zr?"12px":"20px",background:"rgba(0,0,0,0.5)",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:zr?"wrap":"nowrap",gap:zr?"10px":"0"},children:[o.jsxs("div",{style:{display:"flex",gap:zr?"8px":"16px",alignItems:"center"},children:[o.jsxs("div",{style:{display:"flex",gap:"8px",marginRight:zr?"4px":"16px"},children:[o.jsx("button",{onClick:()=>{if(Ii>0){const e=Ii-1;Ni(e),ki(zi[e])}},disabled:Ii<=0,style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"8px",padding:"8px",cursor:Ii>0?"pointer":"not-allowed",opacity:Ii>0?1:.3},title:"Undo",children:o.jsx(J,{size:20,color:"white"})}),o.jsx("button",{onClick:()=>{if(Ii<zi.length-1){const e=Ii+1;Ni(e),ki(zi[e])}},disabled:Ii>=zi.length-1,style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"8px",padding:"8px",cursor:Ii<zi.length-1?"pointer":"not-allowed",opacity:Ii<zi.length-1?1:.3},title:"Redo",children:o.jsx(Y,{size:20,color:"white"})})]}),o.jsx("button",{className:"btn-circle","aria-label":Ai?"Pause Session":"Play Session",style:{width:zr?"44px":"56px",height:zr?"44px":"56px",borderRadius:"50%",background:"var(--color-purple)",border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>Ti(!Ai),children:Ai?o.jsx(E,{size:24,fill:"white"}):o.jsx(_,{size:24,fill:"white"})})]}),o.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o.jsxs("button",{className:"btn-pill secondary",onClick:()=>{const e={...Ar,sessionState:Si,lastModified:Date.now()};Tr(e),Ur(t=>Array.isArray(t)?t.map(t=>t.id===e.id?e:t):[e]),Et&&$t&&ps($t.uid,e).catch(e=>{a.error("Failed to sync to cloud. Your changes are saved locally.")}),Vn("Project session saved."),a.success("Session saved!")},children:[o.jsx(K,{size:18})," Save Project"]}),o.jsxs("button",{className:"btn-pill primary",disabled:(Si.renderCount||0)>=3||ta,style:{opacity:(Si.renderCount||0)>=3||ta?.5:1},onClick:async()=>{if(ta)return;if((Si.renderCount||0)>=3)return void a.error("Maximum 3 renders reached. Pro users can reset.");ra(!0);const e=[Si.audio,Si.vocal,Si.visual].filter(Boolean);if(0===e.length)return a.error("Select at least one asset to render"),void ra(!1);const t=(Si.renderCount||0)+1;Vn(`Render pass ${t} of 3. Orchestrating your agents.`),a.loading(`AMO Render ${t}/3...`,{id:"amo-render"});try{const i={"Content-Type":"application/json"};if(l?.currentUser){const e=await l.currentUser.getIdToken();i.Authorization=`Bearer ${e}`}const o=Si.audio?.audioUrl&&Si.audio.audioUrl.startsWith("http"),s=Si.vocal?.audioUrl&&Si.vocal.audioUrl.startsWith("http");if(o||s){a.loading("Mixing your tracks...",{id:"amo-render"});let e=null;if(o&&s){const t=await fetch(`${g}/api/create-final-mix`,{method:"POST",headers:i,body:JSON.stringify({vocalUrl:Si.vocal.audioUrl,beatUrl:Si.audio.audioUrl,vocalVolume:Si.vocalVolume??.85,beatVolume:Si.audioVolume??.6,style:"rapper",outputFormat:"music"})});if(t.ok){e=(await t.json()).mixedAudioUrl}else e=Si.audio.audioUrl}else e=o?Si.audio.audioUrl:Si.vocal.audioUrl;xs(e=>({...e,renderCount:t,lastRenderTime:(new Date).toISOString(),renderHistory:[...e.renderHistory||[],{pass:t,timestamp:Date.now()}]}));const r={id:`master-${crypto.randomUUID()}`,title:`Studio Master ${t}/3 - ${Ar.name}`,type:"Master",agent:"Session Mixer",date:"Just now",color:"agent-purple",snippet:`Mixed master: ${o?"beat":""}${o&&s?" + ":""}${s?"vocals":""}`,content:`Mixed master render ${t}`,audioUrl:e,stems:{audio:Si.audio?.audioUrl,vocal:Si.vocal?.audioUrl},imageUrl:Si.visual?.imageUrl,metadata:{audioVolume:Si.audioVolume,vocalVolume:Si.vocalVolume,vocalMuted:Si.vocalMuted||!1,renderedAt:(new Date).toISOString(),renderPass:t,bpm:Si.bpm||120,syncMode:Si.syncMode||"auto",syncSource:Si.syncSource||"beat",visualOffset:Si.visualOffset||0,visualTransition:Si.visualTransition||"cut",mixedDirectly:!0}},n={...Ar,assets:[r,...Ar.assets],updatedAt:(new Date).toISOString()};if(Tr(n),Ur(e=>Array.isArray(e)?e.map(e=>e.id===n.id?n:e):[n]),Et){const e=localStorage.getItem("studio_user_id");e&&ps(e,n).catch(e=>{})}return a.dismiss("amo-render"),wi(!1),Ti(!1),Vn("Master mix complete. Your mixed production is ready."),a.success("Master mixed and saved to your Hub!"),void ra(!1)}const n=await fetch(`${g}/api/orchestrate`,{method:"POST",headers:i,body:JSON.stringify({agentOutputs:e.map(e=>({id:e.id,agent:e.agent||e.type,type:e.type,content:e.snippet||e.content||e.text,audioUrl:e.audioUrl,imageUrl:e.imageUrl,videoUrl:e.videoUrl})),projectName:Ar.name,projectDescription:Ar.description,syncSettings:{bpm:Si.bpm||120,timeSignature:Si.timeSignature||"4/4",key:Si.key||"C Major",frameRate:Si.frameRate||30,sampleRate:Si.sampleRate||48e3,bitDepth:Si.bitDepth||24,aspectRatio:Si.aspectRatio||"16:9",syncMode:Si.syncMode||"auto",syncSource:Si.syncSource||"beat",visualOffset:Si.visualOffset||0,visualDuration:Si.visualDuration||"full",visualTransition:Si.visualTransition||"cut"},renderPass:t,generateRealAssets:Si.generateRealAssets||!1})}),d=await n.json();if(!n.ok)throw new Error(d.error||"Orchestration failed");let c=Si.audio?.audioUrl,p=Si.visual?.imageUrl,u=Si.visual?.videoUrl;if(Si.generateRealAssets){if(a.loading("Generating real assets...",{id:"amo-assets"}),Si.visual&&!Si.visual.imageUrl)try{const e=Si.visual.snippet||Si.visual.content||`Album artwork for ${Ar.name}`,t=await fetch(`${g}/api/generate-image`,{method:"POST",headers:i,body:JSON.stringify({prompt:e.substring(0,500),aspectRatio:Si.aspectRatio||"16:9"})}),r=await t.json();r.imageUrl&&(p=r.imageUrl)}catch(r){}if(Si.audio&&!Si.audio.audioUrl)try{const e=Si.audio.snippet||Si.audio.content||`${Si.bpm||120} BPM beat`,t=await fetch(`${g}/api/generate-audio`,{method:"POST",headers:i,body:JSON.stringify({prompt:e.substring(0,200)})}),r=await t.json();r.audioUrl&&(c=r.audioUrl)}catch(r){}a.dismiss("amo-assets")}if(c)try{a.loading("Mastering audio...",{id:"amo-master"});const e=await fetch(`${g}/api/master-audio`,{method:"POST",headers:i,body:JSON.stringify({audioUrl:c,preset:"streaming",targetSampleRate:Si.sampleRate||48e3,targetBitDepth:Si.bitDepth||24,normalize:!0,format:"wav"})}),t=await e.json();t.audioUrl&&(c=t.audioUrl),a.dismiss("amo-master")}catch(r){a.dismiss("amo-master")}xs(e=>({...e,renderCount:t,lastRenderTime:(new Date).toISOString(),renderHistory:[...e.renderHistory||[],{pass:t,timestamp:Date.now()}]}));const x=d.masterAsset||{id:`master-${crypto.randomUUID()}`,title:`Studio Master ${t}/3 - ${Ar.name}`,type:"Master",agent:"AMO Orchestrator",date:"Just now",color:"agent-purple",snippet:d.output?.slice(0,200)||"Orchestrated Master Composition.",content:d.output,audioUrl:c,stems:{audio:c,vocal:Si.vocal?.audioUrl},imageUrl:p,videoUrl:u,metadata:{audioVolume:Si.audioVolume,vocalVolume:Si.vocalVolume,agentsProcessed:e.length,renderedAt:(new Date).toISOString(),renderPass:t,bpm:Si.bpm||120,frameRate:Si.frameRate||30,aspectRatio:Si.aspectRatio||"16:9",realAssets:Si.generateRealAssets||!1}},m={...Ar,assets:[x,...Ar.assets],updatedAt:(new Date).toISOString()};if(Tr(m),Ur(e=>Array.isArray(e)?e.map(e=>e.id===m.id?m:e):[m]),Et){const e=localStorage.getItem("studio_user_id");e&&ps(e,m).catch(e=>{})}a.dismiss("amo-render"),wi(!1),Ti(!1),Vn("Master render complete. Your orchestrated production is ready."),a.success("Master rendered and saved to your Hub!")}catch(i){a.dismiss("amo-render"),a.error(i.message||"Orchestration failed. Check your internet connection and try again."),Vn("Orchestration failed. Please try again.")}finally{ra(!1)}},children:[o.jsx(Q,{size:18})," Render Master"]})]})]})]}),na&&o.jsx("div",{className:"modal-overlay",onClick:()=>la(!1),children:o.jsxs("div",{className:"modal-content animate-fadeInUp",onClick:e=>e.stopPropagation(),onTouchEnd:e=>e.stopPropagation(),children:[o.jsx("button",{className:"modal-close",onClick:()=>la(!1),children:o.jsx(T,{size:20})}),o.jsxs("div",{className:"modal-header",children:[o.jsx("div",{className:"logo-box",style:{width:"48px",height:"48px",margin:"0 auto 1rem"},children:o.jsx(z,{size:24,color:"white"})}),o.jsx("h2",{children:"Save to Cloud"}),o.jsx("p",{children:"Sync your projects to the Studio Agents cloud or connect external storage."})]}),o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsxs("button",{className:"storage-btn",style:{width:"100%",padding:"16px 20px",background:"linear-gradient(135deg, var(--color-purple), var(--color-cyan))",border:"none",justifyContent:"center",gap:"12px",fontSize:"1rem",fontWeight:"600"},onClick:async()=>{if(!$t?.uid)return a.error("Please sign in to save to cloud"),void la(!1);const e=a.loading("Syncing projects to cloud...");try{let r=0;const i=Rr.filter(e=>e&&e.id);for(const e of i)try{await ps($t?.uid,e)&&r++}catch(t){}r>0?(a.success(`âœ… Synced ${r} project${r>1?"s":""} to cloud!`,{id:e}),ds(new Date)):a.error("No projects to sync",{id:e})}catch(t){a.error("Cloud sync failed - check your connection",{id:e})}la(!1)},children:[o.jsx(X,{size:20}),o.jsx("span",{children:"Save to Studio Agents Cloud"})]}),o.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"8px"},children:$t?`Signed in as ${$t.email||$t.displayName}`:"Sign in to enable cloud sync"})]}),o.jsx("div",{style:{textAlign:"center",color:"var(--text-secondary)",fontSize:"0.8rem",margin:"16px 0"},children:"-or connect external storage  -"}),o.jsx("div",{className:"external-storage-grid",children:o.jsxs("button",{className:"storage-btn",onClick:()=>{To(e=>({...e,googleDrive:!0})),la(!1)},children:[o.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/1/12/Google_Drive_icon_%282020%29.svg",alt:"Google Drive",width:"24",loading:"lazy"}),o.jsx("span",{children:"Google Drive"})]})})]}),o.jsx("div",{className:"modal-footer",children:o.jsx("p",{children:"Your files will be synced automatically after generation."})})]})}),Qs&&o.jsx("div",{className:"modal-overlay",onClick:()=>{Xs(null),en("")},children:o.jsxs("div",{className:"modal-content animate-fadeInUp",onClick:e=>e.stopPropagation(),style:{maxWidth:"440px"},children:[o.jsx("button",{className:"modal-close",onClick:()=>{Xs(null),en("")},children:o.jsx(T,{size:20})}),o.jsxs("div",{className:"modal-header",children:[o.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, var(--color-purple), var(--color-cyan))",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:o.jsx(Z,{size:28,color:"white"})}),o.jsx("h2",{style:{textAlign:"center",marginBottom:"8px"},children:"Save to Hub"}),o.jsxs("p",{style:{textAlign:"center",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Add ",o.jsxs("strong",{children:['"',Qs.title||Qs.snippet?.substring(0,30)+"...",'"']})," to a project"]})]}),o.jsxs("div",{className:"modal-body",style:{padding:"20px"},children:[o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsxs("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"8px",display:"block"},children:[o.jsx(Z,{size:14,style:{verticalAlign:"middle",marginRight:"6px"}}),"Create new project"]}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsx("input",{type:"text",value:Zs,onChange:e=>en(e.target.value),placeholder:"Project name...",style:{flex:1,padding:"12px 14px",background:"var(--color-bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"white",fontSize:"0.95rem"}}),o.jsx("button",{onClick:()=>{Zs.trim()&&(hn(Zs,Qs),Xs(null),en(""),a.success("Project created with asset!"))},disabled:!Zs.trim(),className:"cta-button-premium",style:{padding:"12px 20px",opacity:Zs.trim()?1:.5},children:"Create"})]})]}),Rr.length>0&&o.jsxs("div",{children:[o.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"10px",display:"block"},children:"Or add to existing project"}),o.jsx("div",{style:{maxHeight:"200px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px"},children:Rr.slice(0,10).map(e=>o.jsxs("button",{onClick:()=>{mn(e.id,Qs),Xs(null),a.success(`Added to "${e.name}"!`)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 14px",background:"var(--color-bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"white",cursor:"pointer",textAlign:"left",transition:"all 0.2s ease"},onMouseOver:e=>e.currentTarget.style.borderColor="var(--color-purple)",onMouseOut:e=>e.currentTarget.style.borderColor="var(--border-color)",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(f,{size:18,style:{color:"var(--color-purple)"}}),o.jsx("span",{style:{fontWeight:"500"},children:e.name})]}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:[e.assets?.length||0," assets"]})]},e.id))})]}),0===Rr.length&&o.jsx("p",{style:{textAlign:"center",color:"var(--text-secondary)",fontSize:"0.9rem",marginTop:"8px"},children:"Create your first project above to organize your work!"})]}),o.jsx("div",{className:"modal-footer",style:{padding:"16px 20px",borderTop:"1px solid var(--border-color)"},children:o.jsx("button",{onClick:()=>{Xs(null),en("")},className:"cta-button-secondary",style:{width:"100%"},children:"Skip for Now"})})]})}),Hi&&"object"==typeof Hi&&o.jsx(vt,{name:"Preview Modal",children:o.jsx("div",{className:"modal-overlay",onClick:()=>{Xi(null),Ys.current=!1,Da(!1),Ma(""),Gi(null)},children:o.jsxs("div",{className:"modal-content animate-fadeInUp",onClick:e=>{e.stopPropagation()},style:{maxWidth:"800px",maxHeight:"90vh",overflow:"auto",display:"flex",flexDirection:"column",position:"relative"},children:[o.jsxs("div",{className:"modal-header",style:{flexShrink:0,paddingBottom:"0.5rem",position:"relative"},children:[o.jsx("button",{className:"modal-close",onClick:e=>{e.stopPropagation(),Xi(null),Ys.current=!1,Da(!1),Ma(""),Gi(null)},style:{position:"absolute",top:"-0.5rem",right:"-0.5rem",zIndex:9999,background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:o.jsx(T,{size:20})}),o.jsx("div",{className:"logo-box",style:{width:"48px",height:"48px",margin:"0 auto 1rem",background:Hi.isExistingAsset?"linear-gradient(135deg, #8b5cf6, #6d28d9)":"linear-gradient(135deg, #10b981, #059669)"},children:o.jsx(ee,{size:24,color:"white"})}),o.jsx("h2",{children:Hi.isExistingAsset?"View Asset":"Preview Your Creation"}),o.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.875rem"},children:Hi.isExistingAsset?"Your saved project asset.":"Review your AI-generated content before saving to your Hub."})]}),o.jsx("div",{className:"modal-body",style:{flex:1,overflow:"auto",padding:"1rem"},children:_a&&!Hi.isExistingAsset?o.jsxs("div",{style:{padding:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid var(--border-color)"},children:[o.jsx("button",{onClick:()=>Da(!1),style:{padding:"8px",borderRadius:"8px",border:"1px solid var(--border-color)",background:"transparent",cursor:"pointer",color:"var(--text-secondary)"},children:o.jsx(te,{size:18})}),o.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:"Save to..."})]}),o.jsxs("button",{onClick:()=>Qn("hub",null),disabled:Zi,style:{width:"100%",padding:"16px",borderRadius:"12px",border:"2px solid var(--border-color)",background:"rgba(16, 185, 129, 0.1)",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",marginBottom:"1rem",textAlign:"left",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.borderColor="var(--color-green)",onMouseOut:e=>e.currentTarget.style.borderColor="var(--border-color)",children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #10b981, #059669)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(z,{size:20,color:"white"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)"},children:"Save to Hub Only"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Quick save without adding to a project"})]})]}),o.jsxs("div",{style:{padding:"16px",borderRadius:"12px",border:"2px solid var(--border-color)",marginBottom:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #8b5cf6, #6d28d9)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(re,{size:20,color:"white"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)"},children:"Create New Project"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Start a new project with this asset"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsx("input",{type:"text",value:Wa,onChange:e=>Ma(e.target.value),placeholder:"Enter project name...",style:{flex:1,padding:"10px 12px",borderRadius:"8px",border:"1px solid var(--border-color)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontSize:"0.9rem"},onKeyPress:e=>{"Enter"===e.key&&Wa.trim()&&(Qn("hub",`new:${Wa.trim()}`),Ma(""))}}),o.jsx("button",{onClick:()=>{Wa.trim()&&(Qn("hub",`new:${Wa.trim()}`),Ma(""))},disabled:!Wa.trim()||Zi,className:"cta-button-premium",style:{padding:"10px 16px",opacity:!Wa.trim()||Zi?.5:1},children:"Create"})]})]}),Array.isArray(Rr)&&Rr.filter(e=>e&&e.name&&e.id).length>0&&o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"12px",fontWeight:"600"},children:"Or add to existing project:"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"200px",overflowY:"auto"},children:Rr.filter(e=>e&&e.name&&e.id).slice(0,10).map(e=>o.jsxs("button",{onClick:()=>Qn("hub",e),disabled:Zi,style:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:"1px solid var(--border-color)",background:"var(--bg-secondary)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.background="rgba(139, 92, 246, 0.15)",onMouseOut:e=>e.currentTarget.style.background="var(--bg-secondary)",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(f,{size:18,style:{color:"var(--color-purple)"}}),o.jsx("span",{style:{fontWeight:"500",color:"var(--text-primary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"180px",display:"inline-block"},children:e.name})]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:[e.assets?.length||0," assets"]})]},e.id))})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"0.5rem",marginBottom:"1rem",padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[o.jsx("span",{style:{background:"image"===Hi.type?"linear-gradient(135deg, #8b5cf6, #6d28d9)":"audio"===Hi.type||"vocal"===Hi.type?"linear-gradient(135deg, #f59e0b, #d97706)":"video"===Hi.type?"linear-gradient(135deg, #ef4444, #dc2626)":"linear-gradient(135deg, #3b82f6, #2563eb)",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"600",color:"white",textTransform:"uppercase"},children:Hi.type||"Text"}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"0.25rem 0.75rem",background:"rgba(139, 92, 246, 0.15)",borderRadius:"9999px",fontSize:"0.75rem",color:"var(--color-purple)"},children:[o.jsx(m,{size:12}),Hi.agent||"AI Generated"]}),(Hi.model||tn)&&o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"0.25rem 0.75rem",background:"rgba(6, 182, 212, 0.15)",borderRadius:"9999px",fontSize:"0.75rem",color:"var(--color-cyan)"},children:[o.jsx(ie,{size:12}),Hi.model||tn]}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"0.25rem 0.75rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"9999px",fontSize:"0.75rem",color:"var(--text-secondary)"},children:[o.jsx(ae,{size:12}),Hi.createdAt?new Date(Hi.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Just now"]}),Hi.snippet&&"string"==typeof Hi.snippet&&o.jsxs(o.Fragment,{children:[o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"0.25rem 0.75rem",background:"rgba(16, 185, 129, 0.15)",borderRadius:"9999px",fontSize:"0.75rem",color:"var(--color-emerald)"},children:[o.jsx(oe,{size:12}),(Hi.snippet||"").split(/\s+/).filter(e=>e).length," words"]}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"0.25rem 0.75rem",background:"rgba(249, 115, 22, 0.15)",borderRadius:"9999px",fontSize:"0.75rem",color:"var(--color-orange)"},children:[(Hi.snippet||"").length," chars"]}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"0.25rem 0.75rem",background:"rgba(236, 72, 153, 0.15)",borderRadius:"9999px",fontSize:"0.75rem",color:"var(--color-pink)"},children:[(Hi.snippet||"").split("\n").filter(e=>e.trim()).length," lines"]})]})]}),Hi.title&&o.jsxs("div",{style:{marginBottom:"1rem",padding:"0.5rem 0.75rem",background:"rgba(255,255,255,0.03)",borderRadius:"8px",borderLeft:"3px solid var(--color-purple)"},children:[o.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Title"}),o.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"var(--text-primary)"},children:Hi.title})]}),o.jsxs("div",{style:{background:"var(--bg-secondary)",borderRadius:"12px",padding:"1.5rem",border:"1px solid var(--border-color)",maxHeight:"65vh",overflow:"auto",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",minHeight:"260px"},children:[Oa&&!Qi&&!_a&&o.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.4)",zIndex:10,borderRadius:"12px"},children:[o.jsx(k,{size:32,className:"animate-spin",color:"var(--color-purple)"}),o.jsx("span",{style:{marginTop:"12px",fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Loading media..."})]}),"image"===Hi.type&&Hi.imageUrl?o.jsxs("div",{style:{position:"relative",width:"100%",display:"flex",justifyContent:"center"},children:[o.jsx("img",{src:lt(Hi.imageUrl),alt:"Generated",onLoad:()=>La(!1),onClick:e=>{"90vh"===e.target.style.maxHeight?(e.target.style.maxHeight="60vh",e.target.style.cursor="zoom-in"):(e.target.style.maxHeight="90vh",e.target.style.cursor="zoom-out")},style:{maxWidth:"100%",maxHeight:"60vh",width:"auto",height:"auto",borderRadius:"8px",objectFit:"contain",cursor:"zoom-in",transition:"max-height 0.3s ease",opacity:Oa?0:1},title:"Click to expand",onError:e=>{e.target.style.display="none",La(!1),Xi({type:"image",url:Hi.imageUrl})}}),!Oa&&o.jsx("div",{style:{position:"absolute",bottom:"10px",right:"10px",background:"rgba(0,0,0,0.6)",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",pointerEvents:"none"},children:"Click to zoom"})]}):"audio"!==Hi.type&&"vocal"!==Hi.type||!Hi.audioUrl?"video"===Hi.type&&Hi.videoUrl?o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[Hi.audioUrl?o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--color-cyan)",marginBottom:"4px",fontWeight:"bold"},children:["(music) Music Video Mode (Synced to: ",Hi.audioTitle||"Audio",")"]}),o.jsx("video",{controls:!0,muted:!!Hi.audioUrl,src:ct(Hi.videoUrl),style:{width:"100%",borderRadius:"8px",background:"#000",opacity:Oa?0:1},onLoadedData:()=>La(!1),onCanPlay:()=>La(!1),onPlay:e=>{Fa(!0);const t=e.target.parentElement.querySelector(".sync-audio");t&&(t.currentTime=e.target.currentTime,t.volume=e.target.volume,t.play().catch(e=>{}))},onPause:e=>{Fa(!1);const t=e.target.parentElement.querySelector(".sync-audio");t&&t.pause()},onEnded:()=>Fa(!1),onVolumeChange:e=>{const t=e.target.parentElement.querySelector(".sync-audio");t&&(t.volume=e.target.volume)},onTimeUpdate:e=>{const t=e.target.parentElement.querySelector(".sync-audio");t&&Math.abs(t.currentTime-e.target.currentTime)>.3&&(t.currentTime=e.target.currentTime)},onSeeking:e=>{const t=e.target.parentElement.querySelector(".sync-audio");t&&(t.currentTime=e.target.currentTime)},onError:e=>{Xi({type:"video",url:Hi.videoUrl}),La(!1)}}),o.jsx("audio",{className:"sync-audio",src:dt(Hi.audioUrl),style:{display:"none"}})]}):o.jsx("video",{controls:!0,src:ct(Hi.videoUrl),style:{width:"100%",borderRadius:"8px",background:"#000",opacity:Oa?0:1},onLoadedData:()=>La(!1),onCanPlay:()=>La(!1),onPlay:()=>Fa(!0),onPause:()=>Fa(!1),onEnded:()=>Fa(!1),onError:e=>{Xi({type:"video",url:Hi.videoUrl}),La(!1)}}),Hi.videoUrl?.startsWith("http")&&o.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"(link) External video URL (may expire)"})]}):o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[Hi.audioUrl&&o.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1))",borderRadius:"12px",padding:"24px",border:"1px solid rgba(139, 92, 246, 0.2)",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",boxShadow:Va?"0 0 20px rgba(139, 92, 246, 0.2)":"none",transition:"all 0.3s ease"},children:[o.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:Va?"linear-gradient(135deg, #8b5cf6, #ec4899)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",animation:Va?"pulse 2s infinite":"none"},children:o.jsx(F,{size:32,color:Va?"white":"var(--text-secondary)"})}),o.jsx("div",{style:{fontSize:"0.85rem",color:Va?"var(--color-pink)":"var(--text-secondary)",fontWeight:"bold",display:"flex",alignItems:"center",gap:"6px"},children:Va?"Playing AI Vocal...":"AI Vocal Ready"}),o.jsx("audio",{controls:!0,src:Hi.audioUrl,style:{width:"100%",height:"40px"},onPlay:()=>Fa(!0),onPause:()=>Fa(!1),onEnded:()=>Fa(!1)})]}),qi&&o.jsxs("div",{style:{display:"flex",gap:"4px",background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"4px"},children:[o.jsxs("button",{onClick:()=>Ki("lyrics"),style:{flex:1,padding:"8px 12px",borderRadius:"6px",border:"none",background:"lyrics"===Yi?"linear-gradient(135deg, #8b5cf6, #6d28d9)":"transparent",color:"lyrics"===Yi?"white":"var(--text-secondary)",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",transition:"all 0.2s"},children:[o.jsx(oe,{size:14})," Lyrics"]}),o.jsxs("button",{onClick:()=>Ki("prompt"),style:{flex:1,padding:"8px 12px",borderRadius:"6px",border:"none",background:"prompt"===Yi?"linear-gradient(135deg, #3b82f6, #2563eb)":"transparent",color:"prompt"===Yi?"white":"var(--text-secondary)",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",transition:"all 0.2s"},children:[o.jsx(se,{size:14})," Prompt"]})]}),o.jsx("div",{style:{whiteSpace:"pre-wrap",lineHeight:"1.8",color:"var(--text-primary)",background:"lyrics"===Yi?"rgba(139, 92, 246, 0.1)":"rgba(59, 130, 246, 0.1)",border:"lyrics"===Yi?"1px solid rgba(139, 92, 246, 0.2)":"1px solid rgba(59, 130, 246, 0.2)",padding:"1.25rem",borderRadius:"12px",maxHeight:"50vh",minHeight:"200px",overflow:"auto",transition:"all 0.2s",fontSize:"1rem",fontFamily:"inherit"},children:"lyrics"===Yi?Hi.snippet||Hi.title||"No content generated":qi||"No prompt recorded"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",width:"100%"},children:"audio"===Qi?.type?o.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"(music)"}),o.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"0.5rem"},children:"Audio Unavailable"}),o.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"1rem"},children:"This audio file has expired or is no longer available. Replicate URLs are temporary."}),o.jsx("button",{onClick:()=>{Xi(null),Gi(null)},style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.3)",background:"transparent",color:"var(--text-primary)",cursor:"pointer"},children:"Close"})]}):o.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[o.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:Va?"linear-gradient(135deg, #f59e0b, #d97706)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",animation:Va?"pulse 2s infinite":"none",boxShadow:Va?"0 0 30px rgba(245, 158, 11, 0.3)":"none",transition:"all 0.3s ease"},children:o.jsx(U,{size:40,color:Va?"white":"var(--text-secondary)"})}),o.jsx("audio",{controls:!0,crossOrigin:"anonymous",src:dt(Hi.audioUrl),style:{width:"100%",opacity:Oa?0:1},onLoadedData:()=>La(!1),onCanPlay:()=>La(!1),onPlay:()=>Fa(!0),onPause:()=>Fa(!1),onEnded:()=>Fa(!1),onError:e=>{if(Hi.audioUrl?.startsWith("http")&&!e.target.dataset.retried)return e.target.dataset.retried="true",e.target.removeAttribute("crossorigin"),void(e.target.src=Hi.audioUrl);Xi({type:"audio",url:Hi.audioUrl}),La(!1)}}),Hi.audioUrl?.startsWith("http")&&o.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",textAlign:"center"},children:"(link) External audio URL (may expire)"})]})})]})]})}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",padding:"1rem 1.5rem",borderTop:"1px solid var(--border-color)",flexShrink:0,flexWrap:"wrap"},children:[!Hi.audioUrl&&!Hi.imageUrl&&!Hi.videoUrl&&(Hi.snippet||Hi.content)&&o.jsxs("button",{disabled:Pr,onClick:()=>{const e="lyrics"===Yi?Hi.snippet||Hi.content||"":qi||"";["rapper","rapper-female","singer","singer-female","cloned","narrator","spoken"].includes(za.style)?Fn(e,Ir?.name||"AI"):window.speechSynthesis.speaking?window.speechSynthesis.cancel():Vn(e)},title:["rapper","rapper-female","singer","singer-female","cloned","narrator","spoken"].includes(za.style)?`Read aloud using AI ${za.style} voice (takes 30-60 seconds)`:"Read text aloud using browser TTS",style:{flex:1,padding:"0.75rem",borderRadius:"8px",border:"1px solid rgba(34, 211, 238, 0.3)",background:Pr?"rgba(34, 211, 238, 0.3)":"rgba(34, 211, 238, 0.1)",color:"var(--color-cyan)",cursor:Pr?"not-allowed":"pointer",opacity:Pr?.7:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(O,{size:16,className:Pr?"animate-pulse":""}),Pr?"Creating AI Voice...":"Read Aloud"]}),!Hi.audioUrl&&!Hi.imageUrl&&!Hi.videoUrl&&(Hi.snippet||Hi.content)&&o.jsxs("button",{onClick:()=>{const e=Hi.snippet||Hi.content||"";Fn(e,Ir?.name||"Ghostwriter")},disabled:Pr,title:"Create AI vocal using rapper voices (Uberduck/Replicate)",style:{flex:1,padding:"0.75rem",borderRadius:"8px",border:"1px solid rgba(236, 72, 153, 0.3)",background:Pr?"rgba(236, 72, 153, 0.3)":"rgba(236, 72, 153, 0.1)",color:"var(--color-pink)",cursor:Pr?"not-allowed":"pointer",opacity:Pr?.7:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(F,{size:16,className:Pr?"animate-pulse":""}),Pr?"Creating...":"Create Vocal"]}),Hi.isExistingAsset?o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>{const e=Hi.snippet||Hi.content||"";e?(navigator.clipboard.writeText(e),a.success("Copied to clipboard!")):(Hi.imageUrl||Hi.audioUrl||Hi.videoUrl)&&(navigator.clipboard.writeText(Hi.imageUrl||Hi.audioUrl||Hi.videoUrl),a.success("URL copied to clipboard!"))},style:{flex:1,padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"transparent",color:"var(--text-primary)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(ne,{size:16})," Copy"]}),o.jsxs("button",{onClick:()=>Gi(null),style:{flex:1,padding:"0.75rem",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, #8b5cf6, #6d28d9)",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(T,{size:16})," Close"]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>{Gi(null),Ji(""),Da(!1),Ma("")},disabled:Zi,style:{flex:1,padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"transparent",color:"var(--text-secondary)",cursor:Zi?"not-allowed":"pointer",opacity:Zi?.5:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(le,{size:16})," Discard"]}),o.jsxs("button",{onClick:()=>{if(!qi)return void a.error("No prompt to regenerate");Gi(null);const e=Yo.current||document.querySelector(".studio-textarea");e&&(e.value=qi),Kn()},disabled:ta||Zi,style:{flex:1,padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"transparent",color:"var(--text-primary)",cursor:ta||Zi?"not-allowed":"pointer",opacity:ta||Zi?.5:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(M,{size:16,className:ta?"animate-spin":""}),ta?"Generating...":"Regenerate"]}),o.jsx("button",{onClick:()=>Qn("project_canvas"),disabled:Zi,style:{flex:1,padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:Zi?"rgba(139, 92, 246, 0.2)":"rgba(139, 92, 246, 0.1)",color:"var(--color-purple)",cursor:Zi?"not-allowed":"pointer",opacity:Zi?.7:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:Zi?o.jsxs(o.Fragment,{children:[o.jsx(M,{size:16,className:"animate-spin"})," Syncing..."]}):o.jsxs(o.Fragment,{children:[o.jsx(se,{size:16})," Edit"]})}),o.jsx("button",{onClick:()=>Da(!0),disabled:Zi,className:"cta-button-premium",style:{flex:1.5,padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",opacity:Zi?.8:1,cursor:Zi?"wait":"pointer"},children:Zi?o.jsxs(o.Fragment,{children:[o.jsx(M,{size:16,className:"animate-spin"}),o.jsx("span",{children:"Syncing to Cloud..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(K,{size:16})," Save to Hub"]})})]})]})]})})}),o.jsx(i.Suspense,{fallback:o.jsx(jt,{}),children:o.jsx(gt,{isOpen:fi,onClose:()=>{vi(!1),Tr(null)},onGoToHub:()=>{vi(!1),Tr(null),as("hub")},authToken:Ft,userPlan:hr,existingProject:Ar,onSaveToProject:e=>{Date.now();Ur(t=>{const r=t.findIndex(t=>t.id===e.id);if(r>=0){const i=t[r],o=i.assets||[],s=new Set;for(const e of o)e.id&&s.add(`id:${e.id}`),e.audioUrl&&s.add(`audio:${e.audioUrl}`),e.url&&s.add(`url:${e.url}`),e.videoUrl&&s.add(`video:${e.videoUrl}`),e.imageUrl&&s.add(`img:${e.imageUrl}`),e.content&&e.type&&s.add(`content:${e.type}:${e.agent||""}:${e.content.substring(0,200)}`);const n=(e.assets||[]).filter(e=>(!e.id||!s.has(`id:${e.id}`))&&((!e.audioUrl||!s.has(`audio:${e.audioUrl}`))&&((!e.url||!s.has(`url:${e.url}`))&&((!e.videoUrl||!s.has(`video:${e.videoUrl}`))&&((!e.imageUrl||!s.has(`img:${e.imageUrl}`))&&!(e.content&&e.type&&s.has(`content:${e.type}:${e.agent||""}:${e.content.substring(0,200)}`))))))),l=0===n.length?{...i,...e,assets:o,updatedAt:(new Date).toISOString()}:{...i,...e,assets:[...o,...n],updatedAt:(new Date).toISOString()};Tr(l),Et&&$t&&ps($t?.uid,l).catch(e=>{a.error("Failed to sync to cloud. Your changes are saved locally.")});const d=[...t];return d[r]=l,d}{const r={...e,createdAt:e.createdAt||(new Date).toISOString(),updatedAt:(new Date).toISOString()};return Tr(r),Et&&$t&&ps($t?.uid,r).catch(e=>{}),[r,...t]}})},onCreateProject:e=>{Date.now();let t=null;Ur(r=>{const i=r.findIndex(t=>t.id===e.id);if(i>=0){const a=r[i],o=new Set((a.assets||[]).map(e=>e.id)),s=(e.assets||[]).filter(e=>!o.has(e.id));t={...a,...e,assets:[...a.assets||[],...s],updatedAt:(new Date).toISOString()};const n=[...r];return n[i]=t,n}return t={...e,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},[t,...r]}),setTimeout(()=>{t&&(Tr(t),Et&&$t&&ps($t?.uid,t).catch(e=>{}),a.success(`Project "${t.name}" saved with ${t.assets?.length||0} assets!`))},0)},onUpdateCreations:(e,t)=>{Ms(r=>({...r,[e]:t}))}})}),Xt&&o.jsx("div",{className:"modal-overlay",onClick:()=>{Zt(!1),ca(null),tr("login"),dr(""),pr("")},children:o.jsxs("div",{className:"modal-content animate-fadeInUp",onClick:e=>e.stopPropagation(),onTouchEnd:e=>e.stopPropagation(),style:{maxWidth:"400px"},children:[o.jsx("button",{className:"modal-close",onClick:()=>{Zt(!1),ca(null),tr("login")},children:o.jsx(T,{size:20})}),o.jsxs("div",{className:"modal-header",children:[o.jsx("div",{className:"logo-box",style:{width:"48px",height:"48px",margin:"0 auto 1rem"},children:o.jsx(m,{size:24,color:"white"})}),o.jsx("h2",{children:"reset"===er?"Reset Password":"signup"===er?"Create Account":da?"Complete Your Subscription":"Welcome Back"}),o.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.875rem"},children:"reset"===er?"Enter your email to receive a reset link.":da?`Sign in to activate ${da.name} (${da.price}${da.period||""}).`:"signup"===er?"Create an account to save your work.":"Sign in to access your studio."})]}),o.jsxs("div",{className:"modal-body",style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:["reset"!==er&&o.jsxs("button",{className:"cta-button-premium",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},onClick:jn,disabled:ur,children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:[o.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),o.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),o.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),o.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),ur?"Signing in...":"Continue with Google"]}),"reset"!==er&&o.jsxs("button",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:"#000",color:"#fff",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"12px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onClick:wn,disabled:ur,children:[o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"white",children:o.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),ur?"Signing in...":"Continue with Apple"]}),"reset"!==er&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",margin:"0.5rem 0"},children:[o.jsx("div",{style:{flex:1,height:"1px",background:"var(--border-color)"}}),o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.75rem"},children:"or"}),o.jsx("div",{style:{flex:1,height:"1px",background:"var(--border-color)"}})]}),o.jsxs("form",{onSubmit:Sn,style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[o.jsx("input",{type:"email",placeholder:"Email address",value:lr,onChange:e=>dr(e.target.value),style:{width:"100%",padding:"0.75rem 1rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"var(--bg-card)",color:"var(--text-primary)",fontSize:"0.875rem"},required:!0}),"reset"!==er&&o.jsx("input",{type:"password",placeholder:"Password",value:cr,onChange:e=>pr(e.target.value),style:{width:"100%",padding:"0.75rem 1rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"var(--bg-card)",color:"var(--text-primary)",fontSize:"0.875rem"},required:!0,minLength:6}),"reset"===er?o.jsx("button",{type:"button",className:"cta-button-secondary",style:{width:"100%"},onClick:kn,disabled:ur,children:ur?"Sending...":"Send Reset Link"}):o.jsxs("button",{type:"submit",className:"cta-button-secondary",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},disabled:ur,children:[o.jsx(h,{size:16}),ur?"Please wait...":"signup"===er?"Create Account":"Sign In with Email"]})]}),o.jsxs("div",{style:{textAlign:"center",marginTop:"0.5rem"},children:["login"===er&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>tr("reset"),style:{background:"none",border:"none",color:"var(--color-purple)",cursor:"pointer",fontSize:"0.8rem"},children:"Forgot password?"}),o.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginTop:"0.5rem"},children:["Don't have an account?"," ",o.jsx("button",{onClick:()=>tr("signup"),style:{background:"none",border:"none",color:"var(--color-purple)",cursor:"pointer",fontWeight:"600"},children:"Sign up"})]})]}),"signup"===er&&o.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:["Already have an account?"," ",o.jsx("button",{onClick:()=>tr("login"),style:{background:"none",border:"none",color:"var(--color-purple)",cursor:"pointer",fontWeight:"600"},children:"Sign in"})]}),"reset"===er&&o.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:o.jsx("button",{onClick:()=>tr("login"),style:{background:"none",border:"none",color:"var(--color-purple)",cursor:"pointer",fontWeight:"600"},children:"â† Back to sign in"})})]})]}),o.jsx("div",{className:"modal-footer",style:{borderTop:"1px solid var(--border-color)",paddingTop:"1rem",marginTop:"1rem"},children:o.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--text-tertiary)",textAlign:"center",lineHeight:"1.4"},children:["By continuing, you agree to our"," ",o.jsx("button",{onClick:()=>{Zt(!1),window.location.hash="#/legal"},style:{background:"none",border:"none",color:"var(--color-purple)",cursor:"pointer",padding:0,fontSize:"0.75rem",textDecoration:"underline"},children:"Terms of Service"})," ","and"," ",o.jsx("button",{onClick:()=>{Zt(!1),window.location.hash="#/legal"},style:{background:"none",border:"none",color:"var(--color-purple)",cursor:"pointer",padding:0,fontSize:"0.75rem",textDecoration:"underline"},children:"Privacy Policy"}),"."]})})]})}),Nn&&o.jsx("div",{className:"modal-overlay",style:{overflowY:"auto",WebkitOverflowScrolling:"touch",alignItems:"flex-start",padding:"1rem"},onClick:()=>{An(!1),Pn(null)},children:o.jsxs("div",{className:"modal-content animate-fadeInUp",onClick:e=>e.stopPropagation(),onTouchEnd:e=>e.stopPropagation(),style:{maxWidth:"min(92vw, 700px)",width:"100%",margin:"1rem auto",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid var(--glass-border)",paddingBottom:"1rem",flexShrink:0},children:[o.jsxs("div",{className:"modal-title-group",children:[o.jsx("div",{className:"agent-mini-icon",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",color:"white"},children:o.jsx(de,{size:20})}),o.jsx("h2",{style:{margin:0},children:Un?"Edit Payment Method":"Payment Methods"})]}),o.jsx("button",{className:"modal-close",onClick:()=>{An(!1),Pn(null)},children:o.jsx(T,{size:20})})]}),o.jsxs("div",{className:"modal-body",style:{padding:"1.5rem",overflow:"visible",flex:1},children:[!Un&&Ro.length>0&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("h4",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Saved Cards"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Ro.map((e,t)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:"var(--glass-bg)",border:"1px solid var(--glass-border)",borderRadius:"12px",transition:"all 0.2s ease"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"48px",height:"32px",background:"visa"===e.brand?"linear-gradient(135deg, #1a1f71, #00579f)":"mastercard"===e.brand?"linear-gradient(135deg, #eb001b, #f79e1b)":"linear-gradient(135deg, #333, #555)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.6rem",fontWeight:"bold",textTransform:"uppercase"},children:e.brand||"Card"}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"600",fontSize:"0.95rem"},children:["**** **** **** ",e.last4]}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:["Expires ",e.expiry]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{onClick:()=>{Pn({item:e,type:"card"}),Bn("card")},style:{padding:"0.5rem 0.75rem",background:"transparent",border:"1px solid var(--glass-border)",borderRadius:"6px",color:"var(--text-primary)",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(se,{size:14})," Edit"]}),o.jsx("button",{onClick:()=>{Uo(t=>t.filter(t=>t.id!==e.id)),a.success("Card removed")},style:{padding:"0.5rem 0.75rem",background:"transparent",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",color:"#ef4444",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:o.jsx(le,{size:14})})]})]},e.id||t))})]}),!Un&&Po.length>0&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("h4",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Bank Accounts"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Po.map((e,t)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:"var(--glass-bg)",border:"1px solid var(--glass-border)",borderRadius:"12px",transition:"all 0.2s ease"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"48px",height:"32px",background:"linear-gradient(135deg, #10b981, #059669)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:o.jsx(ce,{size:16})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",fontSize:"0.95rem"},children:e.bankName}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:[e.type," **** ",e.last4]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{onClick:()=>{Pn({item:e,type:"bank"}),Bn("bank")},style:{padding:"0.5rem 0.75rem",background:"transparent",border:"1px solid var(--glass-border)",borderRadius:"6px",color:"var(--text-primary)",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(se,{size:14})," Edit"]}),o.jsx("button",{onClick:()=>{$o(t=>t.filter(t=>t.id!==e.id)),a.success("Bank account removed")},style:{padding:"0.5rem 0.75rem",background:"transparent",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",color:"#ef4444",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:o.jsx(le,{size:14})})]})]},e.id||t))})]}),o.jsxs("div",{children:[!Un&&o.jsx("h4",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Add New Payment Method"}),o.jsxs("div",{className:"modal-tabs",style:{marginBottom:"1rem"},children:[o.jsxs("button",{className:"modal-tab "+("card"===$n?"active":""),onClick:()=>Bn("card"),disabled:!!Un,style:{flex:1},children:[o.jsx(de,{size:16,style:{marginRight:"6px"}})," Card"]}),o.jsxs("button",{className:"modal-tab "+("bank"===$n?"active":""),onClick:()=>Bn("bank"),disabled:!!Un,style:{flex:1},children:[o.jsx(ce,{size:16,style:{marginRight:"6px"}})," Bank"]})]}),"card"===$n?o.jsxs("form",{className:"payment-form",onSubmit:Gn,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{style:{fontSize:"0.85rem",marginBottom:"0.5rem",display:"block"},children:"Cardholder Name"}),o.jsx("input",{type:"text",name:"cardName",placeholder:"Name on card",required:!0,style:{width:"100%",padding:"0.75rem 1rem",borderRadius:"8px",border:"1px solid var(--glass-border)",background:"var(--glass-bg)",color:"var(--text-primary)"}})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{style:{fontSize:"0.85rem",marginBottom:"0.5rem",display:"block"},children:"Card Number"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx(de,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),o.jsx("input",{type:"text",name:"cardNumber",placeholder:"0000 0000 0000 0000",defaultValue:Un?`**** **** **** ${Un.item.last4}`:"",required:!0,style:{width:"100%",padding:"0.75rem 1rem 0.75rem 2.5rem",borderRadius:"8px",border:"1px solid var(--glass-border)",background:"var(--glass-bg)",color:"var(--text-primary)"}})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"0.75rem"},children:[o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{style:{fontSize:"0.85rem",marginBottom:"0.5rem",display:"block"},children:"Expiry"}),o.jsx("input",{type:"text",name:"expiry",placeholder:"MM/YY",defaultValue:Un?Un.item.expiry:"",required:!0,style:{width:"100%",padding:"0.75rem 1rem",borderRadius:"8px",border:"1px solid var(--glass-border)",background:"var(--glass-bg)",color:"var(--text-primary)"}})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{style:{fontSize:"0.85rem",marginBottom:"0.5rem",display:"block"},children:"CVC"}),o.jsx("input",{type:"text",name:"cvc",placeholder:"123",required:!0,style:{width:"100%",padding:"0.75rem 1rem",borderRadius:"8px",border:"1px solid var(--glass-border)",background:"var(--glass-bg)",color:"var(--text-primary)"}})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{style:{fontSize:"0.85rem",marginBottom:"0.5rem",display:"block"},children:"Zip"}),o.jsx("input",{type:"text",name:"zip",placeholder:"10001",required:!0,style:{width:"100%",padding:"0.75rem 1rem",borderRadius:"8px",border:"1px solid var(--glass-border)",background:"var(--glass-bg)",color:"var(--text-primary)"}})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"0.5rem"},children:[Un&&o.jsx("button",{type:"button",className:"cta-button-secondary",style:{flex:1},onClick:()=>Pn(null),children:"Cancel"}),o.jsx("button",{type:"submit",className:"cta-button-premium",style:{flex:1},children:Un?"Update Card":"Add Card"})]})]}):o.jsxs("form",{className:"payment-form",onSubmit:Gn,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{style:{fontSize:"0.85rem",marginBottom:"0.5rem",display:"block"},children:"Account Holder Name"}),o.jsx("input",{type:"text",name:"accountName",placeholder:"Full Name",required:!0,style:{width:"100%",padding:"0.75rem 1rem",borderRadius:"8px",border:"1px solid var(--glass-border)",background:"var(--glass-bg)",color:"var(--text-primary)"}})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{style:{fontSize:"0.85rem",marginBottom:"0.5rem",display:"block"},children:"Bank Name"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx(ce,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),o.jsx("input",{type:"text",name:"bankName",placeholder:"e.g. Chase, Wells Fargo",defaultValue:Un?Un.item.bankName:"",required:!0,style:{width:"100%",padding:"0.75rem 1rem 0.75rem 2.5rem",borderRadius:"8px",border:"1px solid var(--glass-border)",background:"var(--glass-bg)",color:"var(--text-primary)"}})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{style:{fontSize:"0.85rem",marginBottom:"0.5rem",display:"block"},children:"Routing Number"}),o.jsx("input",{type:"text",name:"routingNumber",placeholder:"9 digits",required:!0,style:{width:"100%",padding:"0.75rem 1rem",borderRadius:"8px",border:"1px solid var(--glass-border)",background:"var(--glass-bg)",color:"var(--text-primary)"}})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{style:{fontSize:"0.85rem",marginBottom:"0.5rem",display:"block"},children:"Account Number"}),o.jsx("input",{type:"text",name:"accountNumber",placeholder:"Account Number",defaultValue:Un?`****${Un.item.last4}`:"",required:!0,style:{width:"100%",padding:"0.75rem 1rem",borderRadius:"8px",border:"1px solid var(--glass-border)",background:"var(--glass-bg)",color:"var(--text-primary)"}})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"0.5rem"},children:[Un&&o.jsx("button",{type:"button",className:"cta-button-secondary",style:{flex:1},onClick:()=>Pn(null),children:"Cancel"}),o.jsx("button",{type:"submit",className:"cta-button-premium",style:{flex:1},children:Un?"Update Account":"Link Account"})]})]})]})]}),o.jsx("div",{className:"modal-footer",style:{borderTop:"1px solid var(--glass-border)",padding:"1rem 1.5rem",flexShrink:0},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"0.8rem"},children:[o.jsx(pe,{size:14}),o.jsx("span",{children:"256-bit encryption * Secured by Stripe"})]})})]})}),o.jsxs("nav",{className:"bottom-nav",children:[o.jsxs("div",{className:"bottom-nav-item "+("agents"===jr?"active":""),onClick:()=>{as("agents"),Nr(null)},role:"button",tabIndex:0,children:[o.jsx(b,{size:22}),o.jsx("span",{children:"Team"})]}),o.jsxs("div",{className:"bottom-nav-item "+("hub"===jr?"active":""),onClick:()=>{as("hub"),Nr(null)},role:"button",tabIndex:0,children:[o.jsx(f,{size:22}),o.jsx("span",{children:"Projects"})]}),o.jsx("div",{className:"bottom-nav-item create-btn",onClick:()=>on(!0),role:"button",tabIndex:0,children:o.jsx("div",{style:{background:"var(--color-purple)",width:"52px",height:"52px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 16px rgba(124, 58, 237, 0.5)",marginTop:"-20px",border:"3px solid var(--color-bg-primary)"},children:o.jsx(re,{size:26,color:"white"})})}),o.jsxs("div",{className:"bottom-nav-item "+("mystudio"===jr?"active":""),onClick:()=>{as("mystudio"),Nr(null)},role:"button",tabIndex:0,children:[o.jsx(y,{size:22}),o.jsx("span",{children:"Studio"})]}),o.jsxs("div",{className:"bottom-nav-item "+("more"===jr?"active":""),onClick:()=>{as("more"),Nr(null)},role:"button",tabIndex:0,children:[o.jsx(ue,{size:22}),o.jsx("span",{children:"More"})]})]})]}),"maintenance"===yi.status&&!_s&&o.jsx("div",{className:"modal-overlay",style:{zIndex:9999,backdropFilter:"blur(10px)",background:"rgba(0,0,0,0.85)"},children:o.jsxs("div",{className:"modal-content animate-fadeInUp",style:{textAlign:"center",border:"1px solid var(--color-red)",position:"relative"},children:[o.jsx("button",{onClick:()=>Ds(!0),style:{position:"absolute",top:"1rem",right:"1rem",background:"transparent",border:"none",cursor:"pointer",color:"var(--text-secondary)",padding:"4px"},"aria-label":"Dismiss maintenance message",children:o.jsx(T,{size:20})}),o.jsxs("div",{className:"modal-body",style:{padding:"1.5rem",textAlign:"center"},children:[o.jsx("div",{className:"logo-box",style:{width:"64px",height:"64px",margin:"0 auto 1.5rem",background:"rgba(239, 68, 68, 0.1)"},children:o.jsx(q,{size:32,color:"var(--color-red)"})}),o.jsx("h2",{style:{color:"var(--color-red)",marginBottom:"1rem"},children:"System Maintenance"}),o.jsxs("p",{style:{marginBottom:"1.5rem",color:"var(--text-secondary)"},children:["The Studio is currently undergoing critical updates or experiencing connectivity issues.",o.jsx("br",{}),"Please check back in a few minutes."]}),o.jsxs("div",{style:{padding:"1rem",background:"rgba(0,0,0,0.3)",borderRadius:"8px",fontSize:"0.85rem",fontFamily:"monospace"},children:["Status: ",yi.details||"Backend Unreachable"]}),o.jsxs("button",{className:"cta-button-secondary",style:{marginTop:"2rem",width:"100%"},onClick:()=>window.location.reload(),children:[o.jsx(M,{size:16,style:{marginRight:"8px"}})," Retry Connection"]})]})]})}),Tn&&o.jsx("div",{className:"modal-overlay animate-fadeIn",style:{overflowY:"auto",WebkitOverflowScrolling:"touch",alignItems:"flex-start",padding:"1rem"},onClick:()=>Rn(!1),children:o.jsxs("div",{className:"modal-content credits-modal",onClick:e=>e.stopPropagation(),style:{maxWidth:"min(92vw, 560px)",width:"100%",margin:"1rem auto",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid var(--glass-border)",paddingBottom:"1rem",flexShrink:0},children:[o.jsxs("div",{className:"modal-title-group",children:[o.jsx("div",{className:"agent-mini-icon",style:{background:"linear-gradient(135deg, #facc15, #f59e0b)",color:"#000"},children:o.jsx(Q,{size:20,fill:"currentColor"})}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0},children:"Studio Credits"}),o.jsxs("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-secondary)"},children:["Balance: ",o.jsxs("strong",{style:{color:"#facc15"},children:[xr," credits"]})]})]})]}),o.jsx("button",{className:"modal-close",onClick:()=>Rn(!1),children:o.jsx(T,{size:20})})]}),o.jsxs("div",{className:"modal-body",style:{padding:"1.25rem",flex:1},children:[o.jsxs("div",{style:{marginBottom:"1.25rem"},children:[o.jsx("h4",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Quick Add Credits"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem"},children:[{amount:10,price:"$0.99",label:"Starter"},{amount:50,price:"$3.99",label:"Power"},{amount:150,price:"$9.99",label:"Studio"},{amount:500,price:"$24.99",label:"Pro"}].map(({amount:e,price:t,label:r})=>o.jsxs("button",{onClick:()=>vn(e),style:{padding:"1rem 0.5rem",background:"var(--glass-bg)",border:"1px solid var(--glass-border)",borderRadius:"12px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",color:"var(--text-primary)",position:"relative",overflow:"hidden"},className:"credit-pack-btn",children:[o.jsx("span",{style:{fontSize:"0.6rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"1px"},children:r}),o.jsx("span",{style:{fontWeight:"800",fontSize:"1.25rem",color:"#facc15"},children:e}),o.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"bold",color:"var(--text-primary)"},children:t})]},e))})]}),o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("h4",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Credit Costs"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[{action:"Create Project",cost:2,icon:f},{action:"Text Generation",cost:5,icon:oe},{action:"Image Generation",cost:15,icon:B},{action:"Audio Processing",cost:25,icon:U}].map(({action:e,cost:t,icon:r})=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.6rem 0.75rem",background:"var(--glass-bg)",border:"1px solid var(--glass-border)",borderRadius:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.6rem"},children:[o.jsx(r,{size:16,style:{color:"var(--text-secondary)"}}),o.jsx("span",{style:{fontSize:"0.9rem"},children:e})]}),o.jsxs("span",{style:{fontWeight:"600",color:"#facc15",fontSize:"0.9rem"},children:[t," credits"]})]},e))})]}),o.jsxs("div",{style:{padding:"0.75rem 1rem",background:"rgba(250, 204, 21, 0.08)",border:"1px solid rgba(250, 204, 21, 0.2)",borderRadius:"10px",display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[o.jsx(m,{size:18,style:{color:"#facc15",flexShrink:0,marginTop:"2px"}}),o.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:[o.jsx("strong",{style:{color:"var(--text-primary)"},children:"Pro Tip:"})," Credits are used when you create projects or generate content with any agent."]})]})]}),o.jsxs("div",{className:"modal-footer",style:{borderTop:"1px solid var(--glass-border)",padding:"1rem 1.25rem",flexShrink:0,display:"flex",gap:"0.75rem"},children:[o.jsxs("button",{className:"cta-button-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>{Rn(!1),Xa("billing"),as("mystudio")},children:[o.jsx(re,{size:18,style:{marginRight:"6px"}})," Add Credits"]}),o.jsxs("button",{className:"cta-button-premium",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>{Rn(!1),on(!0)},children:[o.jsx(ge,{size:18,style:{marginRight:"6px"}})," Create Project"]})]})]})}),sn&&o.jsx("div",{className:"modal-overlay animate-fadeIn",onClick:()=>nn(!1),style:{display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs("div",{className:"modal-content project-wizard-modal",onClick:e=>e.stopPropagation(),style:{maxWidth:"600px",width:"min(95vw, 600px)",maxHeight:"min(90vh, 1000px)",display:"flex",flexDirection:"column",margin:"0 12px",boxSizing:"border-box",overflow:"hidden"},children:[o.jsxs("div",{className:"modal-header",style:{position:"relative",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{className:"modal-title-group",style:{flex:1,minWidth:0,display:"flex",alignItems:"center",gap:"10px",paddingRight:"80px"},children:[o.jsx("div",{className:"agent-mini-icon bg-purple",style:{flexShrink:0},children:o.jsx(ge,{size:20})}),o.jsx("h2",{style:{margin:0,fontSize:"1.25rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Create New Project"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",position:"relative",zIndex:101},children:[!zr&&o.jsx("button",{className:"btn-text",onClick:()=>(e=>{if(("number"==typeof xr?xr:0)<2)return a.error("Not enough credits. You need 2 credits to create a project."),void Rn(!0);const t={id:crypto.randomUUID(),name:`Untitled Project ${Rr.length+1}`,category:"music",description:"Quick start project",agents:[],workflow:"custom",date:(new Date).toLocaleDateString(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};a.success("Quick project created! -2 credits",{icon:"âœ¨"}),mr(e=>Math.max(0,e-2)),Ur(e=>[t,...e]),Tr(t),$t&&ps($t?.uid,t).catch(e=>{}),nn(!1),dn(1),as(e),cn("Quick project created.")})("agents"),style:{fontSize:"0.85rem",color:"var(--text-secondary)",background:"none",border:"none",cursor:"pointer",textDecoration:"underline"},children:"Skip"}),o.jsx("button",{className:"modal-close",onClick:()=>nn(!1),children:o.jsx(T,{size:20})})]})]}),o.jsxs("div",{className:"modal-body",style:{padding:zr?"16px":"24px",overflowY:"auto",WebkitOverflowScrolling:"touch",flex:1},children:[o.jsx("div",{className:"wizard-progress",style:{display:"flex",gap:"8px",marginBottom:"24px"},children:[1,2,3].map(e=>o.jsx("div",{style:{flex:1,height:"4px",background:e<=ln?"var(--color-purple)":"var(--color-bg-tertiary)",borderRadius:"2px",transition:"all 0.3s ease"}},e))}),1===ln&&o.jsxs("div",{className:"wizard-step animate-slideIn",children:[o.jsx("h3",{style:{marginBottom:"16px"},children:"Define Your Vision"}),o.jsxs("div",{className:"form-group",style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",color:"var(--text-secondary)"},children:"Project Name"}),o.jsx("input",{type:"text",className:"search-input",placeholder:"e.g. Summer Vibes 2025",value:pn.name,onChange:e=>un({...pn,name:e.target.value}),autoFocus:!0,style:{width:"100%",padding:"12px",fontSize:"1rem"}})]}),o.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:[o.jsxs("div",{style:{flex:1},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Language"}),o.jsx("select",{value:pn.language,onChange:e=>un({...pn,language:e.target.value}),style:{width:"100%",padding:"12px",borderRadius:"10px",background:"var(--color-bg-tertiary)",border:"1px solid var(--border-color)",color:"white",fontSize:"0.9rem"},children:["English","Spanish","French","German","Japanese","Korean","Portuguese","Italian","Chinese"].map(e=>o.jsx("option",{value:e,children:e},e))})]}),o.jsxs("div",{style:{flex:1},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Style / Genre"}),o.jsx("select",{value:pn.style,onChange:e=>un({...pn,style:e.target.value}),style:{width:"100%",padding:"12px",borderRadius:"10px",background:"var(--color-bg-tertiary)",border:"1px solid var(--border-color)",color:"white",fontSize:"0.9rem"},children:["Modern Hip-Hop","90s Boom Bap","Trap","R&B / Soul","Pop","Rock","Electronic","Cinematic","Jazz","Lo-Fi"].map(e=>o.jsx("option",{value:e,children:e},e))})]}),o.jsxs("div",{style:{flex:1},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",color:"var(--text-secondary)",fontSize:"0.9rem"},children:"AI Model"}),o.jsx("select",{value:pn.model,onChange:e=>un({...pn,model:e.target.value}),style:{width:"100%",padding:"12px",borderRadius:"10px",background:"var(--color-bg-tertiary)",border:"1px solid var(--border-color)",color:"white",fontSize:"0.9rem"},children:["Gemini 2.0 Flash","Gemini 2.0 Pro (Exp)","Gemini 1.5 Flash","Gemini 1.5 Pro"].map(e=>o.jsx("option",{value:e,children:e},e))})]})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"24px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",color:"var(--text-secondary)"},children:"Project Category"}),o.jsx("div",{className:"category-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:St.map(e=>o.jsxs("div",{className:"category-card haptic-press "+(pn.category===e.id?"selected":""),onClick:()=>un({...pn,category:e.id}),style:{padding:"12px",background:pn.category===e.id?"rgba(168, 85, 247, 0.1)":"var(--color-bg-tertiary)",border:pn.category===e.id?"1px solid var(--color-purple)":"1px solid transparent",borderRadius:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx(e.icon,{size:20,style:{color:e.color}}),o.jsx("div",{children:o.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:e.label})})]},e.id))})]}),"social"===pn.category&&o.jsxs("div",{className:"social-inputs animate-fadeIn",style:{marginBottom:"24px",padding:"16px",background:"rgba(6, 182, 212, 0.05)",borderRadius:"12px",border:"1px solid rgba(6, 182, 212, 0.2)"},children:[o.jsxs("h4",{style:{marginBottom:"12px",color:"var(--color-cyan)",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx($,{size:16})," Social Profile Setup"]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Platform Focus"}),o.jsx("div",{style:{display:"flex",gap:"8px"},children:["instagram","tiktok","youtube","twitter"].map(e=>o.jsx("button",{className:"platform-btn "+(pn.socialPlatform===e?"active":""),onClick:()=>un({...pn,socialPlatform:e}),style:{flex:1,padding:"8px",borderRadius:"8px",border:pn.socialPlatform===e?"1px solid var(--color-cyan)":"1px solid var(--border-color)",background:pn.socialPlatform===e?"rgba(6, 182, 212, 0.1)":"transparent",color:pn.socialPlatform===e?"var(--color-cyan)":"var(--text-secondary)",textTransform:"capitalize",fontSize:"0.85rem",cursor:"pointer"},children:e},e))})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Handle / Username"}),o.jsx("input",{type:"text",className:"search-input",placeholder:"@yourname",value:pn.socialHandle,onChange:e=>un({...pn,socialHandle:e.target.value}),style:{width:"100%",padding:"10px",fontSize:"0.9rem"}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Bio / Vibe"}),o.jsx("textarea",{className:"search-input",placeholder:"Describe your brand voice...",value:pn.socialBio,onChange:e=>un({...pn,socialBio:e.target.value}),style:{width:"100%",padding:"10px",fontSize:"0.9rem",minHeight:"60px",resize:"vertical"}})]})]})]}),2===ln&&o.jsxs("div",{className:"wizard-step animate-slideIn",children:[o.jsx("h3",{style:{marginBottom:"16px"},children:"Choose Your Workflow"}),o.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"16px",fontSize:"0.9rem"},children:"How do you want to work? Select a preset workflow or build your own team."}),o.jsxs("div",{className:"workflow-presets",style:{display:"grid",gap:"12px",marginBottom:"24px"},children:[o.jsxs("div",{className:"workflow-card haptic-press "+("full_song"===pn.workflow?"selected":""),onClick:()=>un({...pn,workflow:"full_song",selectedAgents:["ghost","beat","album"]}),style:{padding:"16px",background:"full_song"===pn.workflow?"rgba(168, 85, 247, 0.15)":"var(--color-bg-tertiary)",border:"full_song"===pn.workflow?"1px solid var(--color-purple)":"1px solid transparent",borderRadius:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"16px"},children:[o.jsx("div",{style:{background:"var(--color-purple)",padding:"10px",borderRadius:"50%",color:"white"},children:o.jsx(U,{size:20})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:"Full Song Creation"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Lyrics â†’ Beat â†’ Cover Art"})]}),"full_song"===pn.workflow&&o.jsx(he,{size:20,className:"text-purple"})]}),o.jsxs("div",{className:"workflow-card haptic-press "+("social_promo"===pn.workflow?"selected":""),onClick:()=>un({...pn,workflow:"social_promo",selectedAgents:["video-creator","trend","collab","social"]}),style:{padding:"16px",background:"social_promo"===pn.workflow?"rgba(6, 182, 212, 0.15)":"var(--color-bg-tertiary)",border:"social_promo"===pn.workflow?"1px solid var(--color-cyan)":"1px solid transparent",borderRadius:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"16px"},children:[o.jsx("div",{style:{background:"var(--color-cyan)",padding:"10px",borderRadius:"50%",color:"white"},children:o.jsx($,{size:20})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:"Social Promotion"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Video â†’ Trends â†’ Social Pilot"})]}),"social_promo"===pn.workflow&&o.jsx(he,{size:20,className:"text-cyan"})]}),o.jsxs("div",{className:"workflow-card haptic-press "+("custom"===pn.workflow?"selected":""),onClick:()=>un({...pn,workflow:"custom",selectedAgents:[]}),style:{padding:"16px",background:"custom"===pn.workflow?"rgba(255, 255, 255, 0.1)":"var(--color-bg-tertiary)",border:"custom"===pn.workflow?"1px solid var(--text-secondary)":"1px solid transparent",borderRadius:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"16px"},children:[o.jsx("div",{style:{background:"var(--text-secondary)",padding:"10px",borderRadius:"50%",color:"var(--color-bg-primary)"},children:o.jsx(ye,{size:20})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:"Custom Team"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Manually select your agents"})]}),"custom"===pn.workflow&&o.jsx(he,{size:20,className:"text-white"})]})]}),"custom"===pn.workflow&&o.jsx("div",{className:"agents-grid-selection animate-fadeIn",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"12px"},children:(void 0!==u?u:[]).map(e=>{const t=pn.selectedAgents?.includes(e.id);return o.jsxs("div",{className:"agent-select-card haptic-press "+(t?"selected":""),onClick:()=>{const t=pn.selectedAgents||[],r=t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id];un({...pn,selectedAgents:r})},style:{padding:"12px",background:t?"rgba(168, 85, 247, 0.15)":"var(--color-bg-tertiary)",border:t?"1px solid var(--color-purple)":"1px solid transparent",borderRadius:"12px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"8px",transition:"all 0.2s ease",position:"relative"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:t?"var(--color-purple)":"var(--color-bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",color:t?"white":"var(--text-secondary)"},children:"function"==typeof e.icon?o.jsx(e.icon,{size:16}):o.jsx(m,{size:16})}),o.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"500"},children:e.name}),t&&o.jsx(he,{size:14,className:"text-purple",style:{position:"absolute",top:"8px",right:"8px"}})]},e.id)})})]}),3===ln&&o.jsxs("div",{className:"wizard-step animate-slideIn",children:[o.jsx("h3",{style:{marginBottom:"16px"},children:"Ready to Launch?"}),o.jsxs("div",{className:"review-card",style:{padding:"24px",background:"var(--color-bg-tertiary)",borderRadius:"16px",textAlign:"center"},children:[o.jsx("div",{style:{width:"64px",height:"64px",background:"var(--color-bg-secondary)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:o.jsx(ge,{size:32,className:"text-purple"})}),o.jsx("h2",{style:{marginBottom:"8px"},children:pn.name}),o.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:"16px"},children:[St.find(e=>e.id===pn.category)?.label," * ",(new Date).toLocaleDateString()]}),o.jsxs("div",{className:"selected-team-preview",style:{display:"flex",justifyContent:"center",gap:"8px",flexWrap:"wrap",marginBottom:"24px"},children:[(pn.selectedAgents||[]).map(e=>{const t=void 0!==u&&u?u.find(t=>t.id===e||t.name===e):null;return t?o.jsx("div",{title:t.name,style:{width:"32px",height:"32px",borderRadius:"50%",background:"var(--color-bg-primary)",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid var(--color-border)"},children:"function"==typeof t.icon?o.jsx(t.icon,{size:16}):o.jsx(m,{size:16})},e):null}),0===(pn.selectedAgents||[]).length&&o.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"No specific agents selected"})]}),o.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Your studio environment is being prepared."})]})]})]}),o.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"space-between"},children:[ln>1?o.jsx("button",{className:"btn-ghost",onClick:()=>dn(e=>e-1),children:"Back"}):o.jsx("div",{}),ln<3?o.jsx("button",{className:"cta-button-premium",disabled:1===ln&&(!pn.name||!pn.category)||2===ln&&!pn.workflow,onClick:()=>dn(e=>e+1),children:"Next Step"}):o.jsx("button",{className:"cta-button-premium",onClick:()=>{if(!pn.name||!pn.category)return void a.error("Please fill in project name and category");if(("number"==typeof xr?xr:0)<2)return a.error("Not enough credits. You need 2 credits to create a project."),void Rn(!0);const e={id:crypto.randomUUID(),name:pn.name,category:pn.category,description:pn.description||"",language:pn.language||"English",style:pn.style||"Modern Hip-Hop",model:pn.model||"Gemini 2.0 Flash",agents:pn.selectedAgents||[],workflow:pn.workflow||"custom",socialHandle:pn.socialHandle||"",socialBio:pn.socialBio||"",socialPlatform:pn.socialPlatform||"instagram",date:(new Date).toLocaleDateString(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};Ur(t=>[e,...t]),Tr(e),Et&&$t&&ps($t?.uid,e).then(e=>{}).catch(e=>{}),a.success("Project created! -2 credits",{icon:"âœ¨"}),mr(e=>Math.max(0,e-2)),nn(!1),dn(1),t.projectCreated(e.category),un({name:"",category:"",description:"",selectedAgents:[],workflow:"",socialHandle:"",socialBio:"",socialPlatform:"instagram"}),cn(`Project ${e.name} created. Loading your production checklist.`),as("hub")},children:"Create Project"})]})]})}),Is&&o.jsx("div",{className:"modal-overlay animate-fadeIn",style:{zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs("div",{className:"modal-content onboarding-modal",style:{maxWidth:"500px",width:"90%",position:"relative"},children:[o.jsx("button",{onClick:()=>{localStorage.setItem("studio_onboarding_v3","true"),Ns(!1),as("agents")},style:{position:"absolute",top:"16px",right:"16px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",padding:0,zIndex:10},children:o.jsx(T,{size:20})}),o.jsxs("div",{className:"modal-body",style:{padding:window.innerWidth<768?"24px":"40px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:"(headphones)"}),o.jsx("h2",{style:{fontSize:"1.75rem",marginBottom:"12px"},children:wt[0].title}),o.jsx("p",{style:{fontSize:"1.1rem",color:"var(--text-primary)",marginBottom:"8px",lineHeight:"1.6"},children:wt[0].content}),o.jsx("p",{style:{fontSize:"0.95rem",color:"var(--text-secondary)"},children:wt[0].detail}),o.jsx("button",{className:"cta-button-premium",onClick:()=>{localStorage.setItem("studio_onboarding_v3","true"),Ns(!1),as("agents"),cn("Welcome to your studio. Pick an agent to start creating.")},style:{width:"100%",padding:"16px",fontSize:"1.1rem",marginTop:"32px"},children:"Enter Studio â†’"})]})]})}),an&&o.jsx("div",{className:"modal-overlay animate-fadeIn",onClick:()=>on(!1),style:{zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:"550px",width:"90%"},children:[o.jsx("button",{onClick:()=>on(!1),style:{position:"absolute",top:"16px",right:"16px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",padding:0,zIndex:10},children:o.jsx(T,{size:20})}),o.jsxs("div",{className:"modal-body",style:{padding:"32px"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"28px"},children:[o.jsx("h2",{style:{fontSize:"1.5rem",marginBottom:"8px"},children:"Create New Project"}),o.jsx("p",{style:{color:"var(--text-secondary)"},children:"Choose how you want to build your project"})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[o.jsxs("button",{onClick:()=>{on(!1),nn(!0)},style:{display:"flex",alignItems:"flex-start",gap:"16px",padding:"20px",background:"rgba(168, 85, 247, 0.1)",border:"1px solid rgba(168, 85, 247, 0.3)",borderRadius:"16px",cursor:"pointer",textAlign:"left",color:"inherit",transition:"all 0.2s ease"},className:"haptic-press",children:[o.jsx("div",{style:{background:"var(--color-purple)",padding:"12px",borderRadius:"12px",color:"white",flexShrink:0},children:o.jsx(Z,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"4px",color:"var(--text-primary)"},children:"Studio Creation"}),o.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",margin:0,lineHeight:"1.5"},children:"Build your project step by step. Choose name, type, and select agents manually."})]})]}),o.jsxs("button",{onClick:()=>{on(!1),vi(!0)},style:{display:"flex",alignItems:"flex-start",gap:"16px",padding:"20px",background:"rgba(6, 182, 212, 0.1)",border:"1px solid rgba(6, 182, 212, 0.3)",borderRadius:"16px",cursor:"pointer",textAlign:"left",color:"inherit",transition:"all 0.2s ease"},className:"haptic-press",children:[o.jsx("div",{style:{background:"var(--color-cyan)",padding:"12px",borderRadius:"12px",color:"white",flexShrink:0},children:o.jsx(m,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"4px",color:"var(--text-primary)"},children:"AI Production Pipeline"}),o.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",margin:0,lineHeight:"1.5"},children:"Let AI orchestrate your creative workflow. Describe your vision and get a complete production plan."})]})]})]})]})]})}),Ps&&o.jsx("div",{className:"modal-overlay animate-fadeIn",onClick:()=>$s(null),style:{zIndex:1e4},children:o.jsxs("div",{className:"modal-content whitepaper-modal",onClick:e=>e.stopPropagation(),style:{maxWidth:"800px",width:"95%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid var(--border-color)",paddingBottom:"1rem",flexShrink:0},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px"},children:[o.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:"var(--color-bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-primary)"},children:"function"==typeof Ps.icon?o.jsx(Ps.icon,{size:22}):o.jsx(m,{size:22})}),o.jsxs("div",{children:[o.jsx("h2",{style:{fontSize:"1.25rem",margin:0},children:Ps.title}),o.jsx("p",{style:{color:"var(--text-secondary)",margin:0,fontSize:"0.9rem"},children:Ps.subtitle})]})]}),o.jsx("button",{className:"modal-close",onClick:()=>$s(null),children:o.jsx(T,{size:20})})]}),o.jsxs("div",{className:"modal-body",style:{padding:"1.25rem",flex:1,overflow:"auto"},children:[o.jsxs("div",{style:{marginBottom:"1.25rem"},children:[o.jsxs("h3",{style:{fontSize:"1rem",marginBottom:"0.75rem",color:"var(--color-purple)",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(m,{size:16})," The Vision"]}),o.jsx("p",{style:{fontSize:"0.95rem",lineHeight:"1.6",color:"var(--text-primary)",margin:0},children:Ps.description})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",padding:"1rem",borderRadius:"10px"},children:[o.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"8px",fontSize:"0.9rem"},children:[o.jsx(be,{size:16,className:"text-cyan"})," Who It's For"]}),o.jsx("p",{style:{fontSize:"0.85rem",lineHeight:"1.5",color:"var(--text-secondary)",margin:0},children:Ps.whoFor})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",padding:"1rem",borderRadius:"10px"},children:[o.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"8px",fontSize:"0.9rem"},children:[o.jsx(Q,{size:18,className:"text-orange"})," How It Works"]}),o.jsx("p",{style:{fontSize:"0.85rem",lineHeight:"1.5",color:"var(--text-secondary)",margin:0},children:Ps.howTo})]})]}),Ws[Ps.key]&&Object.values(Ws[Ps.key]).some(e=>e)&&o.jsxs("div",{style:{marginBottom:"1.5rem",paddingTop:"1rem",borderTop:"1px solid var(--glass-border)"},children:[o.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"1rem",fontSize:"0.95rem",color:"var(--color-purple)"},children:[o.jsx(ee,{size:16})," Generated Creations"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[Ws[Ps.key].video&&o.jsxs("div",{style:{background:"rgba(236, 72, 153, 0.1)",padding:"12px",borderRadius:"12px",border:"1px solid rgba(236, 72, 153, 0.3)"},children:[o.jsx("p",{style:{fontSize:"0.8rem",color:"rgba(236, 72, 153, 1)",marginBottom:"8px",fontWeight:"600"},children:"(video) Video"}),o.jsx("video",{src:Ws[Ps.key].video,controls:!0,style:{width:"100%",height:"120px",objectFit:"cover",borderRadius:"8px",background:"#000"},controlsList:"nodownload"}),o.jsxs("button",{className:"btn-pill primary",style:{width:"100%",marginTop:"8px",fontSize:"0.75rem",justifyContent:"center"},onClick:()=>{const e={id:crypto.randomUUID(),title:`${Ps.title} Video`,type:"Video",agent:Ps.title,date:"Just now",color:"agent-pink",snippet:"Generated Video",videoUrl:Ws[Ps.key].video};Ar?(mn(Ar.id,e),a.success(`Saved to ${Ar.name}`)):hn(`New ${Ps.title} Project`,e)},children:[o.jsx(Z,{size:14})," Save"]})]}),Ws[Ps.key].image&&"string"==typeof Ws[Ps.key].image&&o.jsxs("div",{style:{background:"rgba(168, 85, 247, 0.1)",padding:"12px",borderRadius:"12px",border:"1px solid rgba(168, 85, 247, 0.3)"},children:[o.jsx("p",{style:{fontSize:"0.8rem",color:"rgba(168, 85, 247, 1)",marginBottom:"8px",fontWeight:"600"},children:"(art) Image"}),o.jsx("img",{src:Ws[Ps.key].image.startsWith?.("data:")||Ws[Ps.key].image.startsWith?.("http")?Ws[Ps.key].image:`data:image/png;base64,${Ws[Ps.key].image}`,alt:"Generated",style:{width:"100%",height:"120px",objectFit:"cover",borderRadius:"8px"},onError:e=>{e.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="120" viewBox="0 0 200 120"%3E%3Crect fill="%231a1a2e" width="200" height="120"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23666" font-size="12" font-family="sans-serif"%3EImage unavailable%3C/text%3E%3C/svg%3E'}}),o.jsxs("button",{className:"btn-pill primary",style:{width:"100%",marginTop:"8px",fontSize:"0.75rem",justifyContent:"center"},onClick:()=>{const e=Ws[Ps.key]?.image;if(!e||"string"!=typeof e)return;const t=e.startsWith?.("data:")||e.startsWith?.("http")?e:`data:image/png;base64,${e}`,r={id:crypto.randomUUID(),title:`${Ps.title} Image`,type:"Image",agent:Ps.title,date:"Just now",color:"agent-purple",snippet:"Generated Image",imageUrl:t};Ar?(mn(Ar.id,r),a.success(`Saved to ${Ar.name}`)):hn(`New ${Ps.title} Project`,r)},children:[o.jsx(Z,{size:14})," Save"]})]}),Ws[Ps.key].audio&&o.jsxs("div",{style:{background:"rgba(6, 182, 212, 0.1)",padding:"12px",borderRadius:"12px",border:"1px solid rgba(6, 182, 212, 0.3)",gridColumn:"span 1"},children:[o.jsx("p",{style:{fontSize:"0.8rem",color:"rgba(6, 182, 212, 1)",marginBottom:"8px",fontWeight:"600"},children:"(music) Audio"}),o.jsx("audio",{src:Ws[Ps.key].audio,controls:!0,style:{width:"100%",height:"32px"},controlsList:"nodownload"}),o.jsxs("button",{className:"btn-pill primary",style:{width:"100%",marginTop:"8px",fontSize:"0.75rem",justifyContent:"center"},onClick:()=>{const e={id:crypto.randomUUID(),title:`${Ps.title} Audio`,type:"Audio",agent:Ps.title,date:"Just now",color:"agent-cyan",snippet:"Generated Audio",audioUrl:Ws[Ps.key].audio};Ar?(mn(Ar.id,e),a.success(`Saved to ${Ar.name}`)):hn(`New ${Ps.title} Project`,e)},children:[o.jsx(Z,{size:14})," Save"]})]})]})]})]}),o.jsx("div",{className:"modal-footer",style:{borderTop:"1px solid var(--border-color)",paddingTop:"1rem",display:"flex",justifyContent:"flex-end",flexShrink:0},children:o.jsx("button",{className:"cta-button-premium",onClick:()=>{const e=void 0!==u&&u?u.find(e=>e.id===Ps.key):null;e&&(Nr(e),$s(null),as("agents"))},children:"Launch Agent"})})]})}),Bs&&o.jsx("div",{className:"modal-overlay animate-fadeIn",onClick:()=>Es(null),style:{zIndex:1e4},children:o.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:"800px",width:"95%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid var(--border-color)",paddingBottom:"1rem",flexShrink:0},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px"},children:[o.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:"var(--color-bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--color-purple)"},children:"function"==typeof Bs.icon?o.jsx(Bs.icon,{size:22}):o.jsx(m,{size:22})}),o.jsxs("div",{children:[o.jsx("h2",{style:{fontSize:"1.25rem",margin:0},children:Bs.title}),o.jsx("p",{style:{color:"var(--text-secondary)",margin:0,fontSize:"0.9rem"},children:Bs.type})]})]}),o.jsx("button",{className:"modal-close",onClick:()=>Es(null),children:o.jsx(T,{size:20})})]}),o.jsx("div",{className:"modal-body",style:{padding:"1.5rem",flex:1,overflowY:"auto"},children:o.jsx("div",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit",fontSize:"0.95rem",lineHeight:"1.7",color:"var(--text-primary)"},dangerouslySetInnerHTML:{__html:n.sanitize(Bs.content.replace(/^# (.*$)/gm,'<h1 style="font-size: 1.5rem; margin: 1.5rem 0 1rem; color: var(--text-primary);">$1</h1>').replace(/^## (.*$)/gm,'<h2 style="font-size: 1.2rem; margin: 1.25rem 0 0.75rem; color: var(--color-cyan);">$1</h2>').replace(/^### (.*$)/gm,'<h3 style="font-size: 1rem; margin: 1rem 0 0.5rem; color: var(--color-purple);">$1</h3>').replace(/^\*\*(.*?)\*\*/gm,"<strong>$1</strong>").replace(/^- (.*$)/gm,'<li style="margin-left: 1.5rem; margin-bottom: 0.25rem;">$1</li>').replace(/^\d+\. (.*$)/gm,'<li style="margin-left: 1.5rem; margin-bottom: 0.25rem;">$1</li>').replace(/\n\n/g,"<br/><br/>"))}})}),o.jsxs("div",{className:"modal-footer",style:{borderTop:"1px solid var(--border-color)",paddingTop:"1rem",display:"flex",justifyContent:"flex-end",gap:"12px",flexShrink:0},children:[o.jsx("button",{className:"btn-secondary",onClick:()=>{navigator.clipboard.writeText(Bs.content),a.success("Copied to clipboard!")},children:"Copy Text"}),o.jsx("button",{className:"cta-button-premium",onClick:()=>Es(null),children:"Done"})]})]})}),Ra&&o.jsxs("div",{className:"modal-overlay animate-fadeIn",onClick:()=>{Ko.current&&(Ko.current.pause(),Ko.current.src=""),Ua(null),$a(!1)},style:{zIndex:1e4,position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.95)",display:"flex",alignItems:"center",justifyContent:"center",padding:Pa||zr?"0":"20px"},children:[Ls.length>1&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:e=>{if(e.stopPropagation(),0===Ls.length||Ys.current)return;Ys.current=!0;const t=Fs>0?Fs-1:Ls.length-1;if(t<0||t>=Ls.length)return void(Ys.current=!1);const r=Ls[t];r?(Ua({type:Hs(r),url:dt(r.audioUrl)||ct(r.videoUrl)||lt(r.imageUrl)||null,content:r.content||r.snippet||r.output||null,title:r.title||"Untitled",asset:r,assets:Ls,currentIndex:t}),setTimeout(()=>{Ys.current=!1},300)):Ys.current=!1},style:{position:"fixed",left:"20px",top:"50%",transform:"translateY(-50%)",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"50%",width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",backdropFilter:"blur(8px)",zIndex:2001,transition:"all 0.2s ease"},onMouseEnter:e=>e.currentTarget.style.background="rgba(168, 85, 247, 0.4)",onMouseLeave:e=>e.currentTarget.style.background="rgba(255,255,255,0.1)",children:o.jsx(fe,{size:24})}),o.jsx("button",{onClick:e=>{if(e.stopPropagation(),0===Ls.length||Ys.current)return;Ys.current=!0;const t=Fs<Ls.length-1?Fs+1:0;if(t<0||t>=Ls.length)return void(Ys.current=!1);const r=Ls[t];r?(Ua({type:Hs(r),url:dt(r.audioUrl)||ct(r.videoUrl)||lt(r.imageUrl)||null,content:r.content||r.snippet||r.output||null,title:r.title||"Untitled",asset:r,assets:Ls,currentIndex:t}),setTimeout(()=>{Ys.current=!1},300)):Ys.current=!1},style:{position:"fixed",right:"20px",top:"50%",transform:"translateY(-50%)",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"50%",width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",backdropFilter:"blur(8px)",zIndex:2001,transition:"all 0.2s ease"},onMouseEnter:e=>e.currentTarget.style.background="rgba(168, 85, 247, 0.4)",onMouseLeave:e=>e.currentTarget.style.background="rgba(255,255,255,0.1)",children:o.jsx(ve,{size:24})})]}),o.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:Pa||zr?"100vw":"image"===Os.type?"90vw":"85vw",maxHeight:Pa||zr?"100vh":"85vh",width:Pa||zr?"100vw":"image"===Os.type?"auto":"100%",height:Pa||zr?"100vh":"auto",overflow:"hidden",display:"flex",flexDirection:"column",background:"rgba(10,10,15,0.99)",borderRadius:Pa||zr?"0":"16px",border:Pa?"none":"1px solid rgba(255,255,255,0.1)",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.5)",transition:"all 0.3s ease"},children:[o.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid rgba(255,255,255,0.1)",padding:zr?"0.75rem 1rem":"1rem 1.5rem",paddingTop:zr?"calc(0.75rem + env(safe-area-inset-top, 0px))":"1rem",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsxs("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:"image"===Os.type?"rgba(236, 72, 153, 0.2)":"video"===Os.type?"rgba(6, 182, 212, 0.2)":"audio"===Os.type?"rgba(168, 85, 247, 0.2)":"rgba(34, 197, 94, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:["image"===Os.type&&o.jsx(B,{size:18,style:{color:"var(--color-pink)"}}),"video"===Os.type&&o.jsx(H,{size:18,style:{color:"var(--color-cyan)"}}),"audio"===Os.type&&o.jsx(U,{size:18,style:{color:"var(--color-purple)"}}),("text"===Os.type||"lyrics"===Os.type||"hook"===Os.type||"verse"===Os.type||"concept"===Os.type)&&o.jsx(oe,{size:18,style:{color:"var(--color-green)"}})]}),o.jsxs("div",{style:{minWidth:0,flex:1},children:[o.jsx("h2",{style:{fontSize:"1rem",margin:0,fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Os.title||"Preview"}),Ls.length>1&&o.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",margin:"2px 0 0",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[Fs+1," of ",Ls.length," assets"]})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("button",{onClick:e=>{e.stopPropagation(),$a(e=>!e)},style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"8px",padding:"8px",cursor:"pointer",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:e=>e.currentTarget.style.background="rgba(168, 85, 247, 0.3)",onMouseLeave:e=>e.currentTarget.style.background="rgba(255,255,255,0.1)",title:Pa?"Minimize":"Maximize",children:Pa?o.jsx(je,{size:18}):o.jsx(we,{size:18})}),Os.asset&&o.jsxs("button",{onClick:()=>{const e=Os.asset,t=e.audioUrl?"audio":e.videoUrl||e.imageUrl?"visual":null;if(t&&Ar){const r={...Ar.sessionState||{},[t]:e};Tr({...Ar,sessionState:r}),Ur(e=>e.map(e=>e.id===Ar.id?{...e,sessionState:r}:e)),Ua(null),$a(!1),vi(!0),a.success(`âœ¨ Added "${e.title}" to Studio Orchestrator`)}},className:"btn-pill primary",style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.85rem",padding:zr?"8px":"8px 16px"},children:[o.jsx(Q,{size:16}),!zr&&"Use in Orchestrator"]}),o.jsx("button",{className:"modal-close",onClick:()=>{Ko.current&&(Ko.current.pause(),Ko.current.src=""),Ys.current=!1,Ua(null),$a(!1)},style:{color:"#fff",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"8px",padding:"8px",cursor:"pointer"},children:o.jsx(T,{size:20})})]})]}),o.jsxs("div",{className:"modal-body",style:{padding:Pa?"2rem":"1.5rem",flex:1,overflow:"auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"image"===Os.type?"transparent":"rgba(0,0,0,0.3)"},children:[("audio"===Os.type||"vocal"===Os.type||Os.url&&Os.asset?.audioUrl)&&o.jsxs("div",{style:{width:"100%",maxWidth:"500px",textAlign:"center",marginBottom:Os.content||Gs(Os.asset)?"2rem":0},children:[o.jsx("div",{style:{width:Pa?"100px":"80px",height:Pa?"100px":"80px",borderRadius:"50%",background:"linear-gradient(135deg, var(--color-purple), var(--color-pink))",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",boxShadow:"0 0 40px rgba(168, 85, 247, 0.4)",transition:"all 0.3s ease"},children:o.jsx(U,{size:Pa?48:36,style:{color:"white"}})}),o.jsx("audio",{ref:Ko,src:Os.url||dt(Os.asset?.audioUrl),controls:!0,crossOrigin:"anonymous",style:{width:"100%"},autoPlay:!1,controlsList:"nodownload",onPlay:e=>{document.querySelectorAll("audio, video").forEach(t=>{t!==e.target&&t.pause()})},onError:e=>{e.target.error,e.target.error;const t=Os.url||"",r=Os.asset?.audioUrl;if(r&&!e.target.dataset.retried){e.target.dataset.retried="true";const i=dt(r);if(i&&i!==t)return void(e.target.src=i);if(r.startsWith("http"))return e.target.removeAttribute("crossorigin"),void(e.target.src=r)}const i=e.target.parentElement;if(i&&!i.querySelector(".audio-error-msg")){const e=document.createElement("div");e.className="audio-error-msg",e.style.cssText="color: var(--color-red); font-size: 0.85rem; margin-top: 12px;",e.textContent="âš  Audio failed to load. Try downloading instead.",i.appendChild(e)}}},Os.asset?.id||Os.url||"audio-preview"),o.jsx("p",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginTop:"12px",opacity:.6},children:Os.url?.startsWith("data:")?"Base64 Audio":Os.url?.startsWith("http")?"Remote Audio":"Cloud Asset"})]}),"image"===Os.type&&Os.url&&o.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[o.jsxs("div",{className:"image-loading-placeholder",style:{position:"absolute",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",color:"var(--text-secondary)"},children:[o.jsx("div",{className:"spinner",style:{width:"40px",height:"40px",border:"3px solid rgba(255,255,255,0.1)",borderTopColor:"var(--color-purple)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),o.jsx("span",{style:{fontSize:"0.85rem"},children:"Loading image..."})]}),o.jsx("img",{src:Os.url,alt:Os.title||"Image preview",onLoad:e=>{const t=e.target.previousElementSibling;t&&(t.style.display="none"),e.target.style.opacity=1},onError:e=>{const t=e.target.previousElementSibling;t&&(t.innerHTML='<div style="text-align:center;color:var(--color-red)"><svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg><p style="margin-top:8px">Failed to load image</p></div>')},style:{maxWidth:"100%",maxHeight:Pa?"90vh":"80vh",objectFit:"contain",borderRadius:"8px",boxShadow:"0 8px 40px rgba(0,0,0,0.5)",opacity:0,transition:"all 0.3s ease"}})]}),"video"===Os.type&&Os.url&&o.jsxs("div",{style:{position:"relative",width:"100%",maxWidth:"100%"},children:[o.jsxs("div",{className:"video-loading-placeholder",style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",color:"var(--text-secondary)",background:"rgba(0,0,0,0.5)",borderRadius:"8px",zIndex:1},children:[o.jsx("div",{className:"spinner",style:{width:"50px",height:"50px",border:"3px solid rgba(255,255,255,0.1)",borderTopColor:"var(--color-cyan)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),o.jsx("span",{style:{fontSize:"0.85rem"},children:"Loading video..."})]}),o.jsx("video",{src:Os.url,controls:!0,playsInline:!0,loop:!0,onPlay:e=>{document.querySelectorAll("audio, video").forEach(t=>{t!==e.target&&t.pause()})},onCanPlay:e=>{const t=e.target.previousElementSibling;t&&(t.style.display="none")},onError:e=>{const t=e.target.previousElementSibling;t&&(t.innerHTML='<div style="text-align:center;color:var(--color-red)"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg><p style="margin-top:12px;font-size:0.9rem">Failed to load video</p><p style="font-size:0.75rem;opacity:0.7;margin-top:4px">Try downloading instead</p></div>')},style:{width:"100%",maxWidth:"100%",maxHeight:Pa?"90vh":"80vh",objectFit:"contain",borderRadius:"8px",background:"black"}})]}),("text"===Os.type||"lyrics"===Os.type||"vocal"===Os.type||"audio"===Os.type||"hook"===Os.type||"verse"===Os.type||"concept"===Os.type)&&o.jsx("div",{style:{width:"100%",maxWidth:Pa?"1200px":"900px",maxHeight:"100%",overflow:"auto",padding:zr?"1.5rem":"3rem",background:"rgba(20, 20, 30, 0.4)",borderRadius:"16px",border:zr?"none":"1px solid rgba(255,255,255,0.1)",boxShadow:zr?"none":"0 10px 40px rgba(0,0,0,0.5)",flex:1},children:o.jsx("div",{style:{fontSize:Pa?"1.4rem":"1.15rem",lineHeight:"1.8",color:"var(--text-primary)",whiteSpace:"pre-wrap",fontFamily:"'Georgia', 'Times New Roman', serif",margin:"0 auto",maxWidth:"800px"},children:(()=>{const e=Os.content||Gs(Os.asset);return e||o.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[o.jsx("p",{style:{color:"var(--text-secondary)",fontStyle:"italic",marginBottom:"1rem"},children:"No text content available"}),o.jsx("p",{style:{color:"var(--text-tertiary)",fontSize:"0.85rem"},children:"This asset may be audio, video, or image-only."})]})})()})})]}),Ls.length>1&&o.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",padding:"12px 16px",display:"flex",gap:"8px",overflowX:"auto",justifyContent:"center",background:"rgba(0,0,0,0.3)"},children:Ls.map((e,t)=>e?o.jsxs("button",{onClick:e=>{if(e.stopPropagation(),Ys.current)return;if(t<0||t>=Ls.length)return;const r=Ls[t];if(r){Ys.current=!0;try{Ua({type:Hs(r),url:dt(r.audioUrl)||ct(r.videoUrl)||lt(r.imageUrl)||null,content:r.content||r.snippet||r.output||null,title:r.title||"Untitled",asset:r,assets:Ls,currentIndex:t})}catch(i){}setTimeout(()=>{Ys.current=!1},300)}},style:{width:"60px",height:"60px",borderRadius:"8px",border:t===Fs?"2px solid var(--color-purple)":"2px solid transparent",background:e.imageUrl?`url(${lt(e.imageUrl)}) center/cover`:"rgba(255,255,255,0.1)",cursor:"pointer",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",opacity:t===Fs?1:.6,transition:"all 0.2s ease",overflow:"hidden",position:"relative"},children:[e.videoUrl&&!e.imageUrl&&o.jsx("video",{src:ct(e.videoUrl),style:{width:"100%",height:"100%",objectFit:"cover"},muted:!0,preload:"metadata",onLoadedData:e=>{0===e.target.currentTime&&(e.target.currentTime=1)}}),e.audioUrl&&!e.imageUrl&&o.jsx(U,{size:20,style:{color:"var(--color-purple)"}}),!e.imageUrl&&!e.videoUrl&&!e.audioUrl&&o.jsx(oe,{size:20,style:{color:"var(--text-secondary)"}})]},e?.id||t):null)}),o.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",padding:"12px 16px",display:"flex",gap:"10px",justifyContent:"center",flexWrap:"wrap",background:"rgba(0,0,0,0.4)"},children:[Os.asset?.agent&&"User Upload"!==Os.asset.agent&&o.jsxs("button",{onClick:e=>{e.stopPropagation();const t=void 0!==u&&u?u.find(e=>e.name===Os.asset?.agent):null;t&&(Nr(t),On(Os.asset?.snippet||Os.title||""),as("agents"),Ua(null),$a(!1),a.success(`Opened ${t.name} - edit prompt and regenerate!`))},style:{padding:zr?"8px 12px":"10px 20px",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, var(--color-cyan), var(--color-purple))",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",fontSize:"0.8rem"},children:[o.jsx(M,{size:14})," ",zr?"Regen":`Re-run with ${Os.asset?.agent}`]}),o.jsxs("button",{onClick:e=>{if(e.stopPropagation(),Ar){const e=Os.asset,t={...Ar,sessionState:{...Ar.sessionState,...e?.audioUrl&&{audio:{audioUrl:e.audioUrl,title:e.title}},...e?.imageUrl&&{visual:{...Ar.sessionState?.visual,imageUrl:e.imageUrl,title:e.title}},...e?.videoUrl&&{visual:{...Ar.sessionState?.visual,videoUrl:e.videoUrl,title:e.title}}}};Tr(t),Ur(e=>Array.isArray(e)?e.map(e=>e.id===t.id?t:e):[t])}Ua(null),$a(!1),vi(!0),a.success("Asset loaded into Orchestrator!")},style:{padding:zr?"8px 12px":"10px 20px",borderRadius:"8px",border:"1px solid rgba(168, 85, 247, 0.5)",background:"rgba(168, 85, 247, 0.2)",color:"var(--color-purple)",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",fontSize:"0.8rem"},children:[o.jsx(m,{size:14})," ",zr?"Use":"Use in Orchestrator"]}),Os.url&&o.jsxs("button",{onClick:e=>{e.stopPropagation();try{const e=document.createElement("a");e.href=Os.url,e.download=Os.title||"download",document.body.appendChild(e),e.click(),document.body.removeChild(e),a.success("Download started!")}catch(t){a.error("Download failed. Try right-click and save.")}},style:{padding:zr?"8px 12px":"10px 20px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.1)",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"0.8rem"},children:[o.jsx(P,{size:14})," ",zr?"Save":"Download"]})]})]})]}),ys&&o.jsx("div",{className:"modal-overlay animate-fadeIn",onClick:()=>bs(null),children:o.jsxs("div",{className:"modal-content agent-help-modal",onClick:e=>e.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",position:"relative"},children:[o.jsxs("div",{className:"modal-title-group",style:{display:"flex",alignItems:"center",gap:"12px",minWidth:0,flex:1,paddingRight:"40px"},children:[o.jsx("div",{className:`agent-mini-icon ${ys.colorClass}`,style:{flexShrink:0},children:"function"==typeof ys.icon?o.jsx(ys.icon,{size:20}):o.jsx(m,{size:20})}),o.jsxs("h2",{style:{margin:0,fontSize:"1.25rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,flex:1},children:[ys.name," Guide"]})]}),o.jsx("button",{className:"modal-close",onClick:()=>bs(null),style:{flexShrink:0},children:o.jsx(T,{size:20})})]}),o.jsxs("div",{className:"modal-body help-modal-body",children:[o.jsxs("div",{className:"help-section",children:[o.jsx("p",{style:{fontSize:"1.1rem",color:"var(--text-primary)",marginBottom:"16px",lineHeight:"1.6"},children:ys.description}),o.jsxs("div",{style:{padding:"16px",background:"rgba(6, 182, 212, 0.05)",borderRadius:"12px",borderLeft:"4px solid var(--color-cyan)"},children:[o.jsxs("h3",{style:{marginTop:0,fontSize:"0.9rem"},children:[o.jsx(Q,{size:16,className:"text-cyan"})," How to Use"]}),o.jsx("p",{style:{margin:0,fontSize:"0.9rem"},children:ys.howToUse})]})]}),ys.capabilities&&o.jsxs("div",{className:"help-section",children:[o.jsxs("h3",{children:[o.jsx(Se,{size:16,className:"text-purple"})," Mission-Critical Wheel House Information"]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"8px"},children:ys.capabilities.map((e,t)=>o.jsx("div",{style:{fontSize:"0.75rem",padding:"8px 12px",background:"rgba(168, 85, 247, 0.05)",border:"1px solid rgba(168, 85, 247, 0.1)",borderRadius:"8px",color:"var(--text-primary)",textAlign:"center",fontWeight:"500"},children:e},t))})]}),ys.features&&o.jsxs("div",{className:"help-section",children:[o.jsxs("h3",{children:[o.jsx(ke,{size:16,className:"text-purple"})," Core Features"]}),o.jsx("div",{className:"onboarding-steps-list",children:ys.features.map((e,t)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 14px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"10px",marginBottom:"6px"},children:[o.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"var(--color-purple)"}}),o.jsx("p",{style:{fontSize:"0.85rem",margin:0},children:e})]},t))})]}),ys.proTips&&o.jsxs("div",{className:"help-section pro-tip-box",style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.1), transparent)",border:"1px solid rgba(168, 85, 247, 0.2)"},children:[o.jsxs("h3",{style:{color:"var(--color-purple)"},children:[o.jsx(ze,{size:16})," Advanced Pro Tips"]}),o.jsx("div",{className:"onboarding-steps-list",style:{gap:"8px",background:"none",border:"none",padding:0},children:ys.proTips.map((e,t)=>o.jsx("p",{style:{fontSize:"0.9rem",margin:0,paddingLeft:"12px",borderLeft:"2px solid var(--color-purple)",textAlign:"left"},children:e},t))})]}),ys.examples&&o.jsxs("div",{className:"help-section",children:[o.jsxs("h3",{style:{fontSize:"0.9rem"},children:[o.jsx(ge,{size:16,className:"text-cyan"})," Elite Elite Performance Samples"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:ys.examples.map((e,t)=>o.jsxs("div",{style:{padding:"12px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--color-cyan)",border:"1px solid rgba(6, 182, 212, 0.1)",fontFamily:"monospace"},children:['"',e,'"']},t))})]}),ys.onboarding&&o.jsxs("div",{className:"help-section",children:[o.jsxs("h3",{children:[o.jsx(Se,{size:16,className:"text-purple"})," Mission-Critical Wheel House Information"]}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:ys.capabilities.map((e,t)=>o.jsx("span",{style:{padding:"6px 12px",background:"rgba(168, 85, 247, 0.1)",border:"1px solid rgba(168, 85, 247, 0.2)",borderRadius:"20px",fontSize:"0.75rem",color:"var(--color-purple)"},children:e},t))})]}),ys.onboarding&&o.jsxs("div",{className:"help-section",children:[o.jsxs("h3",{children:[o.jsx(ge,{size:16,className:"text-cyan"})," Quick Start Steps"]}),o.jsx("div",{className:"onboarding-steps-list",children:ys.onboarding.map((e,t)=>o.jsxs("div",{className:"onboarding-step-item",style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)"},children:[o.jsx("span",{className:"step-number",style:{background:"var(--color-purple)",color:"white",borderColor:"transparent"},children:t+1}),o.jsx("p",{style:{fontSize:"0.85rem",textAlign:"left",margin:0},children:e})]},t))})]}),ys.explanation&&o.jsxs("div",{className:"help-section",style:{padding:"16px",background:"rgba(255,255,255,0.02)",borderRadius:"12px",fontSize:"0.8rem",color:"var(--text-secondary)"},children:[o.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:"0.8rem",color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx(ie,{size:14})," Technical Architecture"]}),o.jsx("p",{style:{margin:0,lineHeight:"1.5"},children:ys.explanation})]}),ys.examples&&o.jsxs("div",{className:"help-section",children:[o.jsxs("h3",{children:[o.jsx(m,{size:16,className:"text-orange"})," Example Prompts"]}),o.jsx("div",{className:"example-chips",children:ys.examples.map((e,t)=>o.jsxs("button",{className:"example-chip",onClick:()=>{navigator.clipboard.writeText(e),a.success("Example copied to clipboard!")},style:{textAlign:"left",width:"100%",marginBottom:"4px"},children:['"',e,'"']},t))}),o.jsx("p",{className:"tiny-hint",children:"Click an example to copy and use"})]}),ys.helpTips&&o.jsxs("div",{className:"help-section pro-tip-box",style:{background:"linear-gradient(135deg, rgba(234, 179, 8, 0.1), transparent)",border:"1px solid rgba(234, 179, 8, 0.2)"},children:[o.jsxs("h3",{style:{color:"#eab308"},children:[o.jsx(xe,{size:16})," Pro Tip"]}),o.jsx("p",{style:{color:"var(--text-primary)",fontSize:"0.9rem"},children:ys.helpTips})]})]}),o.jsx("div",{className:"modal-footer",children:o.jsxs("button",{className:"cta-button-premium",onClick:()=>{Nr(ys),bs(null)},children:["Launch ",ys.name]})})]})}),js&&o.jsx(i.Suspense,{fallback:o.jsx(jt,{}),children:o.jsx(xt,{agent:js,onClose:()=>ws(null),projects:Rr,onSaveToProject:mn,onCreateProject:hn,user:$t,userCredits:xr,setUserCredits:mr,isAdmin:Gt})}),fs&&o.jsx("div",{className:"modal-overlay animate-fadeIn",style:{overflowY:"auto",WebkitOverflowScrolling:"touch",alignItems:"center",padding:"1rem"},onClick:()=>vs(!1),children:o.jsxs("div",{className:"modal-content",style:{maxWidth:"min(92vw, 700px)",width:"100%",margin:"auto"},onClick:e=>e.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",style:{position:"relative"},children:[o.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"10px",margin:0,fontSize:"1.25rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",paddingRight:"40px"},children:[o.jsx(be,{size:20,className:"text-purple",style:{flexShrink:0}}),"Add Agent to Project"]}),o.jsx("button",{className:"modal-close",onClick:()=>vs(!1),children:o.jsx(T,{size:20})})]}),o.jsxs("div",{className:"modal-body",style:{padding:"20px"},children:[o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsxs("h3",{style:{fontSize:"0.9rem",fontWeight:"600",marginBottom:"12px",color:"var(--text-secondary)"},children:["Your Agents (",ms().length,")"]}),o.jsx("div",{className:"agents-studio-grid",style:{maxWidth:"100%",margin:0},children:ms().map((e,t)=>{const r=e.icon,i=Ar?.agents?.some(t=>t.id===e.id);return o.jsxs("div",{className:`agent-studio-card ${e.colorClass} ${i?"opacity-50":""}`,style:{animationDelay:.05*t+"s",position:"relative",cursor:i?"not-allowed":"pointer"},onClick:()=>!i&&(e=>{if(!Ar||!e)return;const t=Array.isArray(Ar.agents)?Ar.agents:[];let r=Gt?999:3;if(Gt||("Creator"===hr&&(r=5),"Studio Pro"!==hr&&"Lifetime Access"!==hr||(r=16)),t.length>=r)return void a.error(`Agent limit reached for ${hr} plan. Please upgrade.`);if(t.some(t=>t.id===e.id))return void cn(`${e.name} is already in this project.`);const i={...Ar,agents:[...t,e]};Tr(i),Ur(e=>e.map(e=>e.id===i.id?i:e)),vs(!1),cn(`${e.name} added to project.`)})(e),children:[i&&o.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",background:"var(--color-purple)",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Ce,{size:12,color:"white"})}),o.jsx("div",{className:"agent-studio-icon",children:o.jsx(r,{size:24})}),o.jsxs("div",{className:"agent-studio-info",children:[o.jsx("h3",{children:e.name}),o.jsx("p",{children:e.category})]}),o.jsx("button",{className:"agent-launch-btn",disabled:i,style:{opacity:i?.5:1,pointerEvents:i?"none":"auto"},children:i?"Added":"Add to Project"})]},e.id)})})]}),hs().length>0&&o.jsxs("div",{children:[o.jsxs("h3",{style:{fontSize:"0.9rem",fontWeight:"600",marginBottom:"12px",color:"var(--text-secondary)",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(pe,{size:14}),"Upgrade to Unlock (",hs().length,")"]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:hs().map(e=>{const t=e.icon,r="monthly"===e.tier?"Monthly":"Pro",i="monthly"===e.tier?"var(--color-cyan)":"var(--color-purple)";return o.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.06)",borderRadius:"12px",padding:"12px",display:"flex",alignItems:"center",gap:"10px",opacity:.6,cursor:"pointer"},onClick:()=>{vs(!1),Et?(Xa("subscription"),as("mystudio")):Zt(!0)},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(255, 255, 255, 0.05)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(t,{size:16,style:{opacity:.5}})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontWeight:"600",fontSize:"0.85rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.name}),o.jsx("div",{style:{fontSize:"0.65rem",color:i,fontWeight:"600",textTransform:"uppercase"},children:r})]}),o.jsx(pe,{size:12,style:{color:"var(--text-secondary)",flexShrink:0}})]},e.id)})})]})]})]})}),fa&&o.jsx("div",{className:"modal-overlay animate-fadeIn",style:{overflowY:"auto",WebkitOverflowScrolling:"touch",alignItems:"flex-start",padding:"1rem"},onClick:()=>va(!1),children:o.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:"min(92vw, 520px)",width:"100%",margin:"1rem auto"},children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(F,{size:20,className:"text-purple"}),"Voice Commands"]}),o.jsx("button",{className:"modal-close",onClick:()=>va(!1),children:o.jsx(T,{size:20})})]}),o.jsxs("div",{className:"modal-body",style:{textAlign:"left",padding:"16px 24px"},children:[o.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"16px"},children:"Click the mic button and say any of these commands:"}),["Navigation","Actions","Settings","Voice"].map(e=>o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("h4",{style:{fontSize:"0.7rem",textTransform:"uppercase",letterSpacing:"1px",color:"var(--color-purple)",marginBottom:"8px"},children:e}),zt.filter(t=>t.category===e).map((e,t)=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"rgba(255,255,255,0.03)",borderRadius:"8px",marginBottom:"6px",fontSize:"0.85rem"},children:[o.jsxs("div",{children:[o.jsx("span",{style:{fontWeight:"600",color:"white"},children:e.command}),o.jsx("span",{style:{color:"var(--text-secondary)",marginLeft:"8px",fontSize:"0.75rem"},children:e.description})]}),o.jsx("span",{style:{fontSize:"0.7rem",color:"var(--color-cyan)",fontStyle:"italic"},children:e.example})]},t))]},e)),o.jsx("div",{style:{marginTop:"16px",padding:"12px",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(6, 182, 212, 0.1))",borderRadius:"12px",border:"1px solid rgba(139, 92, 246, 0.2)"},children:o.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",margin:0},children:["(tip) ",o.jsx("strong",{style:{color:"white"},children:"Pro Tip:"})," Say anything else and it will be added to your prompt as dictation."]})})]}),o.jsx("div",{className:"modal-footer",style:{padding:"16px 24px"},children:o.jsxs("button",{className:"cta-button-premium "+(pa?"listening":""),onClick:()=>{va(!1),Ln()},style:{width:"100%"},children:[o.jsx(F,{size:18}),pa?"Stop Listening":"Start Listening"]})})]})}),pa&&o.jsxs("div",{style:{position:"fixed",bottom:"100px",left:"50%",transform:"translateX(-50%)",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",animation:"fadeInUp 0.3s ease"},children:[ja&&o.jsx("div",{style:{background:"rgba(0,0,0,0.9)",padding:"12px 20px",borderRadius:"12px",color:"white",fontSize:"0.9rem",maxWidth:"300px",textAlign:"center",border:"1px solid rgba(139, 92, 246, 0.3)"},children:o.jsxs("span",{style:{color:"var(--color-cyan)"},children:['"',ja,'"']})}),o.jsxs("div",{style:{background:"linear-gradient(135deg, var(--color-purple), var(--color-pink))",padding:"16px 24px",borderRadius:"50px",display:"flex",alignItems:"center",gap:"12px",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.4)",cursor:"pointer"},onClick:Ln,children:[o.jsxs("div",{style:{position:"relative",width:"24px",height:"24px"},children:[o.jsx("div",{style:{position:"absolute",inset:0,borderRadius:"50%",background:"white",animation:"pulse 1.5s ease-in-out infinite"}}),o.jsx(F,{size:24,style:{position:"relative",zIndex:1,color:"var(--color-purple)"}})]}),o.jsx("span",{style:{color:"white",fontWeight:"600",fontSize:"0.9rem"},children:"Listening..."}),o.jsx("button",{style:{background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white"},onClick:e=>{e.stopPropagation(),Ln()},children:o.jsx(T,{size:16})})]}),Sa&&o.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginTop:"4px"},children:['Last: "',Sa.text.substring(0,25),Sa.text.length>25?"...":"",'"']})]}),Ha&&o.jsx("div",{className:"modal-overlay animate-fadeIn",onClick:()=>Ga(null),children:o.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:"min(95vw, 500px)",width:"100%",margin:"2rem auto"},children:[o.jsx("button",{className:"modal-close",onClick:()=>Ga(null),children:o.jsx(T,{size:20})}),o.jsxs("div",{className:"modal-body",style:{padding:"24px"},children:[o.jsxs("h2",{style:{fontSize:"1.4rem",fontWeight:"700",marginBottom:"8px",display:"flex",alignItems:"center",gap:"10px",color:"white"},children:[o.jsx(O,{className:"text-cyan",size:24}),"Export for Distribution"]}),o.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.85rem",marginBottom:"24px"},children:"Prepare your audio for streaming platforms and digital distribution."}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",display:"block",marginBottom:"8px"},children:"EXPORT PRESET"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:[{id:"streaming",label:"Streaming",desc:"Spotify, Apple Music",specs:"44.1kHz / 16-bit / -14 LUFS"},{id:"youtube",label:"YouTube",desc:"Video platforms",specs:"48kHz / 16-bit / -14 LUFS"},{id:"cd",label:"CD Quality",desc:"Physical release",specs:"44.1kHz / 16-bit / -9 LUFS"},{id:"hires",label:"Hi-Res",desc:"Audiophile",specs:"96kHz / 24-bit / -14 LUFS"},{id:"podcast",label:"Podcast",desc:"Spoken word",specs:"44.1kHz / 16-bit / -16 LUFS"}].map(e=>o.jsxs("button",{onClick:()=>Ka(e.id),style:{padding:"12px",background:Ya===e.id?"linear-gradient(135deg, var(--color-purple), var(--color-cyan))":"rgba(255,255,255,0.05)",border:Ya===e.id?"1px solid var(--color-purple)":"1px solid rgba(255,255,255,0.1)",borderRadius:"10px",cursor:"pointer",textAlign:"left"},children:[o.jsx("div",{style:{fontWeight:"600",color:"white",fontSize:"0.9rem"},children:e.label}),o.jsx("div",{style:{fontSize:"0.7rem",color:Ya===e.id?"rgba(255,255,255,0.8)":"var(--text-secondary)"},children:e.desc}),o.jsx("div",{style:{fontSize:"0.65rem",color:"var(--color-cyan)",marginTop:"4px"},children:e.specs})]},e.id))})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"10px",padding:"16px",marginBottom:"20px"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"10px"},children:"PLATFORM COMPATIBILITY"}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:["Apple Music","Spotify","YouTube Music","Amazon Music","Tidal","Deezer"].map(e=>o.jsxs("span",{style:{padding:"4px 10px",background:"rgba(16, 185, 129, 0.2)",borderRadius:"12px",fontSize:"0.7rem",color:"#10b981",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(Ce,{size:12})," ",e]},e))})]}),o.jsx("button",{onClick:async()=>{if(!Ha?.audioUrl)return void a.error("No audio to export");Ja(!0);const e=a.loading("Mastering audio...");try{const t=Ha.audioUrl.split(",")[1],r=await fetch(`${g}/api/master-audio`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audioBase64:t,preset:Ya})}),i=await r.json();if(!i.audioUrl)throw new Error(i.error||"Export failed - no audio URL returned");{const t=document.createElement("a");t.href=i.audioUrl,t.download=`${Ha.title||"audio"}-mastered-${Ya}.wav`,t.click(),a.success(`Exported for ${Ya}!`,{id:e}),Ga(null)}}catch(t){a.error("Export failed: "+(t.message||"Check your connection"),{id:e})}finally{Ja(!1)}},disabled:qa,style:{width:"100%",padding:"14px",background:qa?"rgba(255,255,255,0.1)":"linear-gradient(135deg, var(--color-purple), var(--color-cyan))",border:"none",borderRadius:"10px",color:"white",fontWeight:"600",fontSize:"0.95rem",cursor:qa?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:qa?o.jsxs(o.Fragment,{children:[o.jsx(M,{size:16,className:"spin"}),"Mastering..."]}):o.jsxs(o.Fragment,{children:[o.jsx(P,{size:16}),"Export & Download"]})})]})]})})]}):o.jsx("div",{className:`studio-container ${Sr}-theme`,style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"var(--bg-primary)"},children:o.jsxs("div",{style:{textAlign:"center",maxWidth:"420px",padding:"40px",background:"var(--bg-secondary)",borderRadius:"16px",border:"1px solid rgba(139, 92, 246, 0.2)"},children:[o.jsx(m,{size:48,style:{color:"#a855f7",marginBottom:"16px"}}),o.jsxs("h2",{style:{fontSize:"1.5rem",marginBottom:"8px",color:"var(--text-primary)"},children:["Welcome to Studio Agents V3.5",o.jsx("span",{style:{fontSize:"0.8rem",color:"var(--color-purple)",display:"block",marginTop:"4px",fontWeight:"bold",letterSpacing:"2px"},children:"PRO EDITION"})]}),o.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"24px"},children:"Sign in to access your AI-powered creative studio"}),o.jsxs("form",{onSubmit:Sn,style:{marginBottom:"20px"},children:[o.jsx("input",{type:"email",placeholder:"Email address",value:lr,onChange:e=>dr(e.target.value),required:!0,style:{width:"100%",padding:"12px 16px",marginBottom:"12px",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.3)",background:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"1rem",outline:"none",boxSizing:"border-box"}}),o.jsx("input",{type:"password",placeholder:"Password",value:cr,onChange:e=>pr(e.target.value),required:!0,minLength:6,style:{width:"100%",padding:"12px 16px",marginBottom:"12px",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.3)",background:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"1rem",outline:"none",boxSizing:"border-box"}}),o.jsxs("button",{type:"submit",disabled:ur,className:"btn-pill primary",style:{padding:"12px 32px",fontSize:"1rem",width:"100%",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[o.jsx(h,{size:18}),ur?"Please wait...":"signup"===er?"Create Account":"Sign In with Email"]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[o.jsx("button",{type:"button",onClick:()=>tr("signup"===er?"login":"signup"),style:{background:"transparent",border:"none",color:"#a855f7",cursor:"pointer",fontSize:"0.85rem"},children:"signup"===er?"Already have an account? Sign in":"Need an account? Sign up"}),"login"===er&&o.jsx("button",{type:"button",onClick:kn,style:{background:"transparent",border:"none",color:"var(--text-secondary)",cursor:"pointer",fontSize:"0.85rem"},children:"Forgot password?"})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"16px 0",gap:"12px"},children:[o.jsx("div",{style:{flex:1,height:"1px",background:"rgba(139, 92, 246, 0.2)"}}),o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"or"}),o.jsx("div",{style:{flex:1,height:"1px",background:"rgba(139, 92, 246, 0.2)"}})]}),o.jsxs("button",{onClick:jn,disabled:ur,className:"btn-pill",style:{padding:"12px 32px",fontSize:"1rem",width:"100%",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",background:"transparent",border:"1px solid rgba(139, 92, 246, 0.3)",color:"var(--text-primary)"},children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[o.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),ur?"Signing in...":"Continue with Google"]}),o.jsxs("button",{onClick:wn,disabled:ur,className:"btn-pill",style:{padding:"12px 32px",fontSize:"1rem",width:"100%",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",background:"#000",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#fff"},children:[o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"white",children:o.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),ur?"Signing in...":"Continue with Apple"]}),o.jsx("button",{onClick:Zn,className:"btn-pill",style:{padding:"12px 32px",fontSize:"1rem",width:"100%",marginBottom:"16px",background:"transparent",border:"1px solid rgba(139, 92, 246, 0.15)",color:"var(--text-secondary)"},children:"Continue as Guest (Limited Features)"}),o.jsx("button",{onClick:r,style:{background:"transparent",border:"none",color:"var(--text-secondary)",cursor:"pointer",fontSize:"0.9rem"},children:"â† Back to Home"})]})}):o.jsx("div",{className:`studio-container ${Sr}-theme`,style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"var(--bg-primary)"},children:o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid rgba(168, 85, 247, 0.2)",borderTopColor:"#a855f7",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),o.jsx("p",{style:{color:"var(--text-secondary)"},children:"Loading Studio..."})]})})}},Symbol.toStringTag,{value:"Module"}));export{Ut as S,lt as a,ct as b,dt as f};
